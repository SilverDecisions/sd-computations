require=(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = global || self, factory(global.idb = {}));
}(this, function (exports) { 'use strict';

  function toArray(arr) {
    return Array.prototype.slice.call(arr);
  }

  function promisifyRequest(request) {
    return new Promise(function(resolve, reject) {
      request.onsuccess = function() {
        resolve(request.result);
      };

      request.onerror = function() {
        reject(request.error);
      };
    });
  }

  function promisifyRequestCall(obj, method, args) {
    var request;
    var p = new Promise(function(resolve, reject) {
      request = obj[method].apply(obj, args);
      promisifyRequest(request).then(resolve, reject);
    });

    p.request = request;
    return p;
  }

  function promisifyCursorRequestCall(obj, method, args) {
    var p = promisifyRequestCall(obj, method, args);
    return p.then(function(value) {
      if (!value) return;
      return new Cursor(value, p.request);
    });
  }

  function proxyProperties(ProxyClass, targetProp, properties) {
    properties.forEach(function(prop) {
      Object.defineProperty(ProxyClass.prototype, prop, {
        get: function() {
          return this[targetProp][prop];
        },
        set: function(val) {
          this[targetProp][prop] = val;
        }
      });
    });
  }

  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {
    properties.forEach(function(prop) {
      if (!(prop in Constructor.prototype)) return;
      ProxyClass.prototype[prop] = function() {
        return promisifyRequestCall(this[targetProp], prop, arguments);
      };
    });
  }

  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {
    properties.forEach(function(prop) {
      if (!(prop in Constructor.prototype)) return;
      ProxyClass.prototype[prop] = function() {
        return this[targetProp][prop].apply(this[targetProp], arguments);
      };
    });
  }

  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {
    properties.forEach(function(prop) {
      if (!(prop in Constructor.prototype)) return;
      ProxyClass.prototype[prop] = function() {
        return promisifyCursorRequestCall(this[targetProp], prop, arguments);
      };
    });
  }

  function Index(index) {
    this._index = index;
  }

  proxyProperties(Index, '_index', [
    'name',
    'keyPath',
    'multiEntry',
    'unique'
  ]);

  proxyRequestMethods(Index, '_index', IDBIndex, [
    'get',
    'getKey',
    'getAll',
    'getAllKeys',
    'count'
  ]);

  proxyCursorRequestMethods(Index, '_index', IDBIndex, [
    'openCursor',
    'openKeyCursor'
  ]);

  function Cursor(cursor, request) {
    this._cursor = cursor;
    this._request = request;
  }

  proxyProperties(Cursor, '_cursor', [
    'direction',
    'key',
    'primaryKey',
    'value'
  ]);

  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [
    'update',
    'delete'
  ]);

  // proxy 'next' methods
  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {
    if (!(methodName in IDBCursor.prototype)) return;
    Cursor.prototype[methodName] = function() {
      var cursor = this;
      var args = arguments;
      return Promise.resolve().then(function() {
        cursor._cursor[methodName].apply(cursor._cursor, args);
        return promisifyRequest(cursor._request).then(function(value) {
          if (!value) return;
          return new Cursor(value, cursor._request);
        });
      });
    };
  });

  function ObjectStore(store) {
    this._store = store;
  }

  ObjectStore.prototype.createIndex = function() {
    return new Index(this._store.createIndex.apply(this._store, arguments));
  };

  ObjectStore.prototype.index = function() {
    return new Index(this._store.index.apply(this._store, arguments));
  };

  proxyProperties(ObjectStore, '_store', [
    'name',
    'keyPath',
    'indexNames',
    'autoIncrement'
  ]);

  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [
    'put',
    'add',
    'delete',
    'clear',
    'get',
    'getAll',
    'getKey',
    'getAllKeys',
    'count'
  ]);

  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [
    'openCursor',
    'openKeyCursor'
  ]);

  proxyMethods(ObjectStore, '_store', IDBObjectStore, [
    'deleteIndex'
  ]);

  function Transaction(idbTransaction) {
    this._tx = idbTransaction;
    this.complete = new Promise(function(resolve, reject) {
      idbTransaction.oncomplete = function() {
        resolve();
      };
      idbTransaction.onerror = function() {
        reject(idbTransaction.error);
      };
      idbTransaction.onabort = function() {
        reject(idbTransaction.error);
      };
    });
  }

  Transaction.prototype.objectStore = function() {
    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));
  };

  proxyProperties(Transaction, '_tx', [
    'objectStoreNames',
    'mode'
  ]);

  proxyMethods(Transaction, '_tx', IDBTransaction, [
    'abort'
  ]);

  function UpgradeDB(db, oldVersion, transaction) {
    this._db = db;
    this.oldVersion = oldVersion;
    this.transaction = new Transaction(transaction);
  }

  UpgradeDB.prototype.createObjectStore = function() {
    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));
  };

  proxyProperties(UpgradeDB, '_db', [
    'name',
    'version',
    'objectStoreNames'
  ]);

  proxyMethods(UpgradeDB, '_db', IDBDatabase, [
    'deleteObjectStore',
    'close'
  ]);

  function DB(db) {
    this._db = db;
  }

  DB.prototype.transaction = function() {
    return new Transaction(this._db.transaction.apply(this._db, arguments));
  };

  proxyProperties(DB, '_db', [
    'name',
    'version',
    'objectStoreNames'
  ]);

  proxyMethods(DB, '_db', IDBDatabase, [
    'close'
  ]);

  // Add cursor iterators
  // TODO: remove this once browsers do the right thing with promises
  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {
    [ObjectStore, Index].forEach(function(Constructor) {
      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.
      if (!(funcName in Constructor.prototype)) return;

      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {
        var args = toArray(arguments);
        var callback = args[args.length - 1];
        var nativeObject = this._store || this._index;
        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));
        request.onsuccess = function() {
          callback(request.result);
        };
      };
    });
  });

  // polyfill getAll
  [Index, ObjectStore].forEach(function(Constructor) {
    if (Constructor.prototype.getAll) return;
    Constructor.prototype.getAll = function(query, count) {
      var instance = this;
      var items = [];

      return new Promise(function(resolve) {
        instance.iterateCursor(query, function(cursor) {
          if (!cursor) {
            resolve(items);
            return;
          }
          items.push(cursor.value);

          if (count !== undefined && items.length == count) {
            resolve(items);
            return;
          }
          cursor.continue();
        });
      });
    };
  });

  function openDb(name, version, upgradeCallback) {
    var p = promisifyRequestCall(indexedDB, 'open', [name, version]);
    var request = p.request;

    if (request) {
      request.onupgradeneeded = function(event) {
        if (upgradeCallback) {
          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));
        }
      };
    }

    return p.then(function(db) {
      return new DB(db);
    });
  }

  function deleteDb(name) {
    return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);
  }

  exports.openDb = openDb;
  exports.deleteDb = deleteDb;

  Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],2:[function(require,module,exports){
(function (global){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputationsEngine = exports.ComputationsEngineConfig = void 0;

var _sdUtils = require("sd-utils");

var _sdModel = require("sd-model");

var _computationsManager = require("./computations-manager");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);

      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var ComputationsEngineConfig =
/*#__PURE__*/
function (_ComputationsManagerC) {
  _inherits(ComputationsEngineConfig, _ComputationsManagerC);

  function ComputationsEngineConfig(custom) {
    var _this;

    _classCallCheck(this, ComputationsEngineConfig);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ComputationsEngineConfig).call(this));
    _this.logLevel = 'warn';

    if (custom) {
      _sdUtils.Utils.deepExtend(_assertThisInitialized(_this), custom);
    }

    return _this;
  }

  return ComputationsEngineConfig;
}(_computationsManager.ComputationsManagerConfig);
/**
 * Entry point class for standalone computation workers
 */


exports.ComputationsEngineConfig = ComputationsEngineConfig;

var ComputationsEngine =
/*#__PURE__*/
function (_ComputationsManager) {
  _inherits(ComputationsEngine, _ComputationsManager);

  function ComputationsEngine(config, data) {
    var _this2;

    _classCallCheck(this, ComputationsEngine);

    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ComputationsEngine).call(this, config, data));
    _this2.global = _sdUtils.Utils.getGlobalObject();
    _this2.isWorker = _sdUtils.Utils.isWorker();

    if (_this2.isWorker) {
      _this2.jobsManger.registerJobExecutionListener({
        beforeJob: function beforeJob(jobExecution) {
          _this2.reply('beforeJob', jobExecution.getDTO());
        },
        afterJob: function afterJob(jobExecution) {
          _this2.reply('afterJob', jobExecution.getDTO());
        }
      });

      var instance = _assertThisInitialized(_this2);

      _this2.queryableFunctions = {
        runJob: function runJob(jobName, jobParametersValues, dataDTO) {
          // console.log(jobName, jobParameters, serializedData);
          var data = new _sdModel.DataModel(dataDTO);
          instance.runJob(jobName, jobParametersValues, data);
        },
        executeJob: function executeJob(jobExecutionId) {
          instance.jobsManger.execute(jobExecutionId)["catch"](function (e) {
            instance.reply('jobFatalError', jobExecutionId, _sdUtils.Utils.getErrorDTO(e));
          });
        },
        recompute: function recompute(dataDTO, ruleName, evalCode, evalNumeric) {
          if (ruleName) {
            instance.objectiveRulesManager.setCurrentRuleByName(ruleName);
          }

          var allRules = !ruleName;
          var data = new _sdModel.DataModel(dataDTO);

          instance._checkValidityAndRecomputeObjective(data, allRules, evalCode, evalNumeric);

          this.reply('recomputed', data.getDTO());
        }
      };

      global.onmessage = function (oEvent) {
        if (oEvent.data instanceof Object && oEvent.data.hasOwnProperty('queryMethod') && oEvent.data.hasOwnProperty('queryArguments')) {
          instance.queryableFunctions[oEvent.data.queryMethod].apply(self, oEvent.data.queryArguments);
        } else {
          instance.defaultReply(oEvent.data);
        }
      };
    }

    return _this2;
  }

  _createClass(ComputationsEngine, [{
    key: "setConfig",
    value: function setConfig(config) {
      _get(_getPrototypeOf(ComputationsEngine.prototype), "setConfig", this).call(this, config);

      if (this.config.logLevel) {
        this.setLogLevel(this.config.logLevel);
      }

      return this;
    }
  }, {
    key: "setLogLevel",
    value: function setLogLevel(level) {
      _sdUtils.log.setLevel(level);
    }
  }, {
    key: "defaultReply",
    value: function defaultReply(message) {
      this.reply('test', message);
    }
  }, {
    key: "reply",
    value: function reply() {
      if (arguments.length < 1) {
        throw new TypeError('reply - not enough arguments');
      }

      this.global.postMessage({
        'queryMethodListener': arguments[0],
        'queryMethodArguments': Array.prototype.slice.call(arguments, 1)
      });
    }
  }]);

  return ComputationsEngine;
}(_computationsManager.ComputationsManager);

exports.ComputationsEngine = ComputationsEngine;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./computations-manager":3,"sd-model":"sd-model","sd-utils":"sd-utils"}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputationsManager = exports.ComputationsManagerConfig = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

var _objectiveRulesManager = require("./objective/objective-rules-manager");

var _treeValidator = require("./validation/tree-validator");

var _operationsManager = require("./operations/operations-manager");

var _jobsManager = require("./jobs/jobs-manager");

var _expressionsEvaluator = require("./expressions-evaluator");

var _jobInstanceManager = require("./jobs/job-instance-manager");

var _sdModel = require("sd-model");

var _policy = require("./policies/policy");

var _mcdmWeightValueValidator = require("./validation/mcdm-weight-value-validator");

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
/** Computation manager configuration object
 * @param custom configuration object to extend
 */


var ComputationsManagerConfig =
/**
 * logging level
 * */

/**
 * default objective rule name
 * */

/**
 * worker configuration object
 * */

/**
 * job repository to use, available types: idb, timeout, simple
* */

/**
 * clear repository after init
 * */
function ComputationsManagerConfig(custom) {
  _classCallCheck(this, ComputationsManagerConfig);

  this.logLevel = null;
  this.ruleName = null;
  this.worker = {
    /**
     * delegate tree recomputation to worker
     * */
    delegateRecomputation: false,

    /**
     * worker url
     * */
    url: null
  };
  this.jobRepositoryType = 'idb';
  this.clearRepository = false;

  if (custom) {
    _sdUtils.Utils.deepExtend(this, custom);
  }
};
/** Computation manager
* @param {object} config
* @param {DataModel} data model object
* */


exports.ComputationsManagerConfig = ComputationsManagerConfig;

var ComputationsManager =
/*#__PURE__*/
function () {
  function ComputationsManager(config) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    _classCallCheck(this, ComputationsManager);

    this.data = data;
    this.setConfig(config);
    this.expressionEngine = new _sdExpressionEngine.ExpressionEngine();
    this.expressionsEvaluator = new _expressionsEvaluator.ExpressionsEvaluator(this.expressionEngine);
    this.objectiveRulesManager = new _objectiveRulesManager.ObjectiveRulesManager(this.expressionEngine, this.config.ruleName);
    this.operationsManager = new _operationsManager.OperationsManager(this.data, this.expressionEngine);
    this.jobsManger = new _jobsManager.JobsManager(this.expressionsEvaluator, this.objectiveRulesManager, {
      workerUrl: this.config.worker.url,
      repositoryType: this.config.jobRepositoryType,
      clearRepository: this.config.clearRepository
    });
    this.treeValidator = new _treeValidator.TreeValidator(this.expressionEngine);
    this.mcdmWeightValueValidator = new _mcdmWeightValueValidator.McdmWeightValueValidator();
  }

  _createClass(ComputationsManager, [{
    key: "setConfig",
    value: function setConfig(config) {
      this.config = new ComputationsManagerConfig(config);
      return this;
    }
  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
      this.operationsManager.setData(data);
    }
    /** Alias function for checkValidityAndRecomputeObjective*/

  }, {
    key: "recompute",
    value: function recompute() {
      return this.checkValidityAndRecomputeObjective.apply(this, arguments);
    }
    /**
     * Checks validity of data model and recomputes objective rules
     * @returns promise
     * @param {boolean} allRules - recompute all objective rules
     * @param {boolean} evalCode - evaluate code
     * @param {boolean} evalNumeric - evaluate numeric expressions
     */

  }, {
    key: "checkValidityAndRecomputeObjective",
    value: function checkValidityAndRecomputeObjective(allRules) {
      var _this = this;

      var evalCode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var evalNumeric = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      return Promise.resolve().then(function () {
        if (_this.config.worker.delegateRecomputation) {
          var params = {
            evalCode: evalCode,
            evalNumeric: evalNumeric
          };

          if (!allRules) {
            params.ruleName = _this.getCurrentRule().name;
          }

          return _this.runJob("recompute", params, _this.data, false).then(function (jobExecution) {
            var d = jobExecution.getData();

            _this.data.updateFrom(d);
          });
        }

        return _this._checkValidityAndRecomputeObjective(_this.data, allRules, evalCode, evalNumeric);
      }).then(function () {
        _this.updateDisplayValues(_this.data);
      });
    }
  }, {
    key: "_checkValidityAndRecomputeObjective",
    value: function _checkValidityAndRecomputeObjective(data, allRules) {
      var _this2 = this;

      var evalCode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var evalNumeric = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      this.objectiveRulesManager.updateDefaultCriterion1Weight(data.defaultCriterion1Weight);
      data.validationResults = [];

      if (evalCode || evalNumeric) {
        this.expressionsEvaluator.evalExpressions(data, evalCode, evalNumeric);
      }

      var weightValid = this.mcdmWeightValueValidator.validate(data.defaultCriterion1Weight);
      var multiCriteria = this.getCurrentRule().multiCriteria;
      data.getRoots().forEach(function (root) {
        var vr = _this2.treeValidator.validate(data.getAllNodesInSubtree(root));

        data.validationResults.push(vr);

        if (vr.isValid() && (!multiCriteria || weightValid)) {
          _this2.objectiveRulesManager.recomputeTree(root, allRules);
        }
      });
    }
    /**
     * @returns {ObjectiveRule} current objective rule
     * */

  }, {
    key: "getCurrentRule",
    value: function getCurrentRule() {
      return this.objectiveRulesManager.currentRule;
    }
    /**
     * Sets current objective rule
     * @param {string} ruleName - name of objective rule
     * */

  }, {
    key: "setCurrentRuleByName",
    value: function setCurrentRuleByName(ruleName) {
      this.config.ruleName = ruleName;
      return this.objectiveRulesManager.setCurrentRuleByName(ruleName);
    }
    /**
     *
     *  @param {string} jobName
     *  @returns {Job}
     * */

  }, {
    key: "getJobByName",
    value: function getJobByName(jobName) {
      return this.jobsManger.getJobByName(jobName);
    }
    /**
     * @returns array of operations applicable to the given object (node or edge)
     * @param object
     */

  }, {
    key: "operationsForObject",
    value: function operationsForObject(object) {
      return this.operationsManager.operationsForObject(object);
    }
    /**
     * Checks validity of data model without recomputation and revalidation
     * @param {DataModel} data to check
     */

  }, {
    key: "isValid",
    value: function isValid(data) {
      var data = data || this.data;
      return data.validationResults.every(function (vr) {
        return vr.isValid();
      });
    }
    /**
     * Run job
     * @param {string} name - job name
     * @param {object} jobParamsValues - job parameter values object
     * @param {DataModel} data model
     * @param {boolean} resolvePromiseAfterJobIsLaunched - immediately resolve promise with still running JobExecution
     * @returns {Promise} resolving to JobExecution
     */

  }, {
    key: "runJob",
    value: function runJob(name, jobParamsValues, data) {
      var resolvePromiseAfterJobIsLaunched = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      return this.jobsManger.run(name, jobParamsValues, data || this.data, resolvePromiseAfterJobIsLaunched);
    }
    /**
     * Run job using JobInstanceManager
     * @param {string} name - job name
     * @param {object} jobParamsValues - job parameter values object
     * @param {JobInstanceManagerConfig} jobInstanceManagerConfig - JobInstanceManager configuration
     * @returns {Promise} resolving to JobInstanceManager
     */

  }, {
    key: "runJobWithInstanceManager",
    value: function runJobWithInstanceManager(name, jobParamsValues, jobInstanceManagerConfig) {
      var _this3 = this;

      return this.runJob(name, jobParamsValues).then(function (je) {
        return new _jobInstanceManager.JobInstanceManager(_this3.jobsManger, je, jobInstanceManagerConfig);
      });
    }
  }, {
    key: "getObjectiveRules",
    value: function getObjectiveRules() {
      return this.objectiveRulesManager.rules;
    }
  }, {
    key: "getObjectiveRuleByName",
    value: function getObjectiveRuleByName(ruleName) {
      return this.objectiveRulesManager.getObjectiveRuleByName(ruleName);
    }
  }, {
    key: "isRuleName",
    value: function isRuleName(ruleName) {
      return this.objectiveRulesManager.isRuleName(ruleName);
    }
  }, {
    key: "flipCriteria",
    value: function flipCriteria(data) {
      data = data || this.data;
      data.reversePayoffs();
      var tmp = data.weightLowerBound;
      data.weightLowerBound = this.flip(data.weightUpperBound);
      data.weightUpperBound = this.flip(tmp);
      data.defaultCriterion1Weight = this.flip(data.defaultCriterion1Weight);
      this.objectiveRulesManager.flipRule();
      return this.checkValidityAndRecomputeObjective(false);
    }
  }, {
    key: "flip",
    value: function flip(a) {
      if (a == Infinity) {
        return 0;
      }

      if (a == 0) {
        return Infinity;
      }

      return this.expressionEngine.serialize(_sdExpressionEngine.ExpressionEngine.divide(1, a));
    }
  }, {
    key: "updateDisplayValues",
    value: function updateDisplayValues(data) {
      var _this4 = this;

      var policyToDisplay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      data = data || this.data;

      if (policyToDisplay) {
        return this.displayPolicy(data, policyToDisplay);
      }

      data.nodes.forEach(function (n) {
        _this4.updateNodeDisplayValues(n);
      });
      data.edges.forEach(function (e) {
        _this4.updateEdgeDisplayValues(e);
      });
    }
  }, {
    key: "updateNodeDisplayValues",
    value: function updateNodeDisplayValues(node) {
      var _this5 = this;

      node.$DISPLAY_VALUE_NAMES.forEach(function (n) {
        return node.displayValue(n, _this5.objectiveRulesManager.getNodeDisplayValue(node, n));
      });
    }
  }, {
    key: "updateEdgeDisplayValues",
    value: function updateEdgeDisplayValues(e) {
      var _this6 = this;

      e.$DISPLAY_VALUE_NAMES.forEach(function (n) {
        return e.displayValue(n, _this6.objectiveRulesManager.getEdgeDisplayValue(e, n));
      });
    }
  }, {
    key: "displayPolicy",
    value: function displayPolicy(policyToDisplay, data) {
      var _this7 = this;

      data = data || this.data;
      data.nodes.forEach(function (n) {
        n.clearDisplayValues();
      });
      data.edges.forEach(function (e) {
        e.clearDisplayValues();
      });
      data.getRoots().forEach(function (root) {
        return _this7.displayPolicyForNode(root, policyToDisplay);
      });
    }
  }, {
    key: "displayPolicyForNode",
    value: function displayPolicyForNode(node, policy) {
      var _this8 = this;

      if (node instanceof _sdModel.domain.DecisionNode) {
        var decision = _policy.Policy.getDecision(policy, node); //console.log(decision, node, policy);


        if (decision) {
          node.displayValue('optimal', true);
          var childEdge = node.childEdges[decision.decisionValue];
          childEdge.displayValue('optimal', true);
          return this.displayPolicyForNode(childEdge.childNode, policy);
        }

        return;
      } else if (node instanceof _sdModel.domain.ChanceNode) {
        node.displayValue('optimal', true);
        node.childEdges.forEach(function (e) {
          e.displayValue('optimal', true);

          _this8.displayPolicyForNode(e.childNode, policy);
        });
      } else if (node instanceof _sdModel.domain.TerminalNode) {
        node.displayValue('optimal', true);
      }
    }
  }]);

  return ComputationsManager;
}();

exports.ComputationsManager = ComputationsManager;

},{"./expressions-evaluator":5,"./jobs/job-instance-manager":60,"./jobs/jobs-manager":62,"./objective/objective-rules-manager":63,"./operations/operations-manager":79,"./policies/policy":82,"./validation/mcdm-weight-value-validator":83,"./validation/tree-validator":86,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model","sd-utils":"sd-utils"}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputationsUtils = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ComputationsUtils =
/*#__PURE__*/
function () {
  function ComputationsUtils() {
    _classCallCheck(this, ComputationsUtils);
  }

  _createClass(ComputationsUtils, null, [{
    key: "sequence",
    value: function sequence(min, max, length) {
      var extent = _sdExpressionEngine.ExpressionEngine.subtract(max, min);

      var result = [min];
      var steps = length - 1;

      if (!steps) {
        return result;
      }

      var step = _sdExpressionEngine.ExpressionEngine.divide(extent, length - 1);

      var curr = min;

      for (var i = 0; i < length - 2; i++) {
        curr = _sdExpressionEngine.ExpressionEngine.add(curr, step);
        result.push(_sdExpressionEngine.ExpressionEngine.toFloat(curr));
      }

      result.push(max);
      return result;
    }
  }]);

  return ComputationsUtils;
}();

exports.ComputationsUtils = ComputationsUtils;

},{"sd-expression-engine":"sd-expression-engine"}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExpressionsEvaluator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdModel = require("sd-model");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ExpressionsEvaluator =
/*#__PURE__*/
function () {
  function ExpressionsEvaluator(expressionEngine) {
    _classCallCheck(this, ExpressionsEvaluator);

    this.expressionEngine = expressionEngine;
  }

  _createClass(ExpressionsEvaluator, [{
    key: "clear",
    value: function clear(data) {
      data.nodes.forEach(function (n) {
        n.clearComputedValues();
      });
      data.edges.forEach(function (e) {
        e.clearComputedValues();
      });
    }
  }, {
    key: "clearTree",
    value: function clearTree(data, root) {
      data.getAllNodesInSubtree(root).forEach(function (n) {
        n.clearComputedValues();
        n.childEdges.forEach(function (e) {
          e.clearComputedValues();
        });
      });
    }
  }, {
    key: "evalExpressions",
    value: function evalExpressions(data) {
      var _this = this;

      var evalCode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var evalNumeric = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var initScopes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

      _sdUtils.log.debug('evalExpressions evalCode:' + evalCode + ' evalNumeric:' + evalNumeric);

      if (evalCode) {
        this.evalGlobalCode(data);
      }

      data.getRoots().forEach(function (n) {
        _this.clearTree(data, n);

        _this.evalExpressionsForNode(data, n, evalCode, evalNumeric, initScopes);
      });
    }
  }, {
    key: "evalGlobalCode",
    value: function evalGlobalCode(data) {
      data.clearExpressionScope();
      data.$codeDirty = false;

      try {
        data.$codeError = null;
        this.expressionEngine.eval(data.code, false, data.expressionScope);
      } catch (e) {
        data.$codeError = e;
      }
    }
  }, {
    key: "evalPayoff",
    value: function evalPayoff(edge) {
      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (_sdExpressionEngine.ExpressionEngine.hasAssignmentExpression(edge.payoff[index])) {
        return null;
      }

      return this.expressionEngine.eval(edge.payoff[index], true, edge.parentNode.expressionScope);
    }
  }, {
    key: "evalExpressionsForNode",
    value: function evalExpressionsForNode(data, node) {
      var _this2 = this;

      var evalCode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var evalNumeric = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var initScope = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;

      if (!node.expressionScope || initScope || evalCode) {
        this.initScopeForNode(data, node);
      }

      if (evalCode) {
        node.$codeDirty = false;

        if (node.code) {
          try {
            node.$codeError = null;
            this.expressionEngine.eval(node.code, false, node.expressionScope);
          } catch (e) {
            node.$codeError = e;

            _sdUtils.log.debug(e);
          }
        }
      }

      if (evalNumeric) {
        var scope = node.expressionScope;

        var probabilitySum = _sdExpressionEngine.ExpressionEngine.toNumber(0);

        var hashEdges = [];
        var invalidProb = false;
        node.childEdges.forEach(function (e) {
          e.payoff.forEach(function (rawPayoff, payoffIndex) {
            var path = 'payoff[' + payoffIndex + ']';

            if (e.isFieldValid(path, true, false)) {
              try {
                e.computedValue(null, path, _this2.evalPayoff(e, payoffIndex));
              } catch (err) {//   Left empty intentionally
              }
            }
          });

          if (node instanceof _sdModel.domain.ChanceNode) {
            if (_sdExpressionEngine.ExpressionEngine.isHash(e.probability)) {
              hashEdges.push(e);
              return;
            }

            if (_sdExpressionEngine.ExpressionEngine.hasAssignmentExpression(e.probability)) {
              //It should not occur here!
              _sdUtils.log.warn("evalExpressionsForNode hasAssignmentExpression!", e);

              return null;
            }

            if (e.isFieldValid('probability', true, false)) {
              try {
                var prob = _this2.expressionEngine.eval(e.probability, true, scope);

                e.computedValue(null, 'probability', prob);
                probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, prob);
              } catch (err) {
                invalidProb = true;
              }
            } else {
              invalidProb = true;
            }
          }
        });

        if (node instanceof _sdModel.domain.ChanceNode) {
          var computeHash = hashEdges.length && !invalidProb && probabilitySum.compare(0) >= 0 && probabilitySum.compare(1) <= 0;

          if (computeHash) {
            var hash = _sdExpressionEngine.ExpressionEngine.divide(_sdExpressionEngine.ExpressionEngine.subtract(1, probabilitySum), hashEdges.length);

            hashEdges.forEach(function (e) {
              e.computedValue(null, 'probability', hash);
            });
          }
        }

        node.childEdges.forEach(function (e) {
          _this2.evalExpressionsForNode(data, e.childNode, evalCode, evalNumeric, initScope);
        });
      }
    }
  }, {
    key: "initScopeForNode",
    value: function initScopeForNode(data, node) {
      var parent = node.$parent;
      var parentScope = parent ? parent.expressionScope : data.expressionScope;
      node.expressionScope = _sdUtils.Utils.cloneDeep(parentScope);
    }
  }]);

  return ExpressionsEvaluator;
}();

exports.ExpressionsEvaluator = ExpressionsEvaluator;

},{"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model","sd-utils":"sd-utils"}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _computationsEngine = require("./computations-engine");

Object.keys(_computationsEngine).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _computationsEngine[key];
    }
  });
});

var _computationsManager = require("./computations-manager");

Object.keys(_computationsManager).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _computationsManager[key];
    }
  });
});

var _expressionsEvaluator = require("./expressions-evaluator");

Object.keys(_expressionsEvaluator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _expressionsEvaluator[key];
    }
  });
});

var _index = require("./jobs/index");

Object.keys(_index).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _index[key];
    }
  });
});

},{"./computations-engine":2,"./computations-manager":3,"./expressions-evaluator":5,"./jobs/index":59}],7:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LeagueTableJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../engine/job-parameters");

var _jobParameterDefinition = require("../../engine/job-parameter-definition");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var LeagueTableJobParameters =
/*#__PURE__*/
function (_JobParameters) {
  _inherits(LeagueTableJobParameters, _JobParameters);

  function LeagueTableJobParameters() {
    _classCallCheck(this, LeagueTableJobParameters);

    return _possibleConstructorReturn(this, _getPrototypeOf(LeagueTableJobParameters).apply(this, arguments));
  }

  _createClass(LeagueTableJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("extendedPolicyDescription", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("weightLowerBound", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION).set("singleValueValidator", function (v, allVals) {
        return v >= 0 && v <= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightUpperBound']);
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("defaultWeight", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION).set("singleValueValidator", function (v, allVals) {
        return v >= 0 && v >= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightLowerBound']) && v <= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightUpperBound']);
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("weightUpperBound", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION).set("singleValueValidator", function (v, allVals) {
        return v >= 0 && v >= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightLowerBound']);
      }));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        nameOfCriterion1: 'Cost',
        nameOfCriterion2: 'Effect',
        extendedPolicyDescription: true,
        weightLowerBound: 0,
        defaultWeight: 0,
        weightUpperBound: Infinity
      };
    }
  }]);

  return LeagueTableJobParameters;
}(_jobParameters.JobParameters);

exports.LeagueTableJobParameters = LeagueTableJobParameters;

},{"../../engine/job-parameter-definition":46,"../../engine/job-parameters":47,"sd-utils":"sd-utils"}],8:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LeagueTableJob = void 0;

var _simpleJob = require("../../engine/simple-job");

var _policy = require("../../../policies/policy");

var _sdExpressionEngine = require("sd-expression-engine");

var _calculateStep = require("./steps/calculate-step");

var _leagueTableJobParameters = require("./league-table-job-parameters");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var LeagueTableJob =
/*#__PURE__*/
function (_SimpleJob) {
  _inherits(LeagueTableJob, _SimpleJob);

  function LeagueTableJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, LeagueTableJob);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(LeagueTableJob).call(this, "league-table", jobRepository, expressionsEvaluator, objectiveRulesManager));

    _this.initSteps();

    return _this;
  }

  _createClass(LeagueTableJob, [{
    key: "initSteps",
    value: function initSteps() {
      this.calculateStep = new _calculateStep.CalculateStep(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager);
      this.addStep(this.calculateStep);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _leagueTableJobParameters.LeagueTableJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        var headers = ['policy_id', 'policy', jobResult.payoffNames[0], jobResult.payoffNames[1], 'dominated_by', 'extended-dominated_by', 'incratio', 'optimal', 'optimal_for_default_weight'];
        result.push(headers);
      }

      jobResult.rows.forEach(function (row) {
        row.policies.forEach(function (policy) {
          var rowCells = [row.id, _policy.Policy.toPolicyString(policy, jobParameters.values.extendedPolicyDescription), row.payoffs[1], row.payoffs[0], row.dominatedBy, row.extendedDominatedBy === null ? null : row.extendedDominatedBy[0] + ', ' + row.extendedDominatedBy[1], row.incratio, row.optimal, row.optimalForDefaultWeight];
          result.push(rowCells);
        });
      });
      return result;
    }
  }]);

  return LeagueTableJob;
}(_simpleJob.SimpleJob);

exports.LeagueTableJob = LeagueTableJob;

},{"../../../policies/policy":82,"../../engine/simple-job":55,"./league-table-job-parameters":7,"./steps/calculate-step":9,"sd-expression-engine":"sd-expression-engine"}],9:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _step = require("../../../engine/step");

var _jobStatus = require("../../../engine/job-status");

var _policiesCollector = require("../../../../policies/policies-collector");

var _sdExpressionEngine = require("sd-expression-engine");

var _treeValidator = require("../../../../validation/tree-validator");

var _policy = require("../../../../policies/policy");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var CalculateStep =
/*#__PURE__*/
function (_Step) {
  _inherits(CalculateStep, _Step);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalculateStep).call(this, "calculate_step", jobRepository));
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var _this2 = this;

      var data = stepExecution.getData();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var rule = this.objectiveRulesManager.currentRule;
      var treeRoot = data.getRoots()[0];
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot);
      var policies = policiesCollector.policies;
      var payoffCoeffs = this.payoffCoeffs = rule.payoffCoeffs;
      this.expressionsEvaluator.evalExpressions(data);
      var vr = this.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));

      if (!vr.isValid()) {
        return stepExecution;
      }

      var compare = function compare(a, b) {
        return -payoffCoeffs[0] * (b.payoffs[0] - a.payoffs[0]) || -payoffCoeffs[1] * (a.payoffs[1] - b.payoffs[1]);
      };

      var rows = policies.map(function (policy) {
        _this2.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

        return {
          policies: [policy],
          payoffs: treeRoot.computedValue(ruleName, 'payoff').slice(),
          dominatedBy: null,
          extendedDominatedBy: null,
          incratio: null,
          optimal: false,
          optimalForDefaultWeight: false
        };
      }).sort(compare);
      rows = rows.reduce(function (previousValue, currentValue, index, array) {
        if (!previousValue.length) {
          return [currentValue];
        }

        var prev = previousValue[previousValue.length - 1];

        if (compare(prev, currentValue) == 0) {
          var _prev$policies;

          (_prev$policies = prev.policies).push.apply(_prev$policies, _toConsumableArray(currentValue.policies));

          return previousValue;
        }

        return previousValue.concat(currentValue);
      }, []);
      rows.sort(function (a, b) {
        return payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]) || -payoffCoeffs[1] * (a.payoffs[1] - b.payoffs[1]);
      });
      rows.forEach(function (r, i) {
        r.id = i + 1;
      }); // rows.sort(compare);

      rows.sort(function (a, b) {
        return -payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]) || -payoffCoeffs[1] * (a.payoffs[1] - b.payoffs[1]);
      });
      var bestCost = -payoffCoeffs[1] * Infinity,
          bestCostRow = null;

      var cmp = function cmp(a, b) {
        return a > b;
      };

      if (payoffCoeffs[1] < 0) {
        cmp = function cmp(a, b) {
          return a < b;
        };
      }

      rows.forEach(function (r, i) {
        if (cmp(r.payoffs[1], bestCost)) {
          bestCost = r.payoffs[1];
          bestCostRow = r;
        } else if (bestCostRow) {
          r.dominatedBy = bestCostRow.id;
        }
      });

      cmp = function cmp(a, b) {
        return a < b;
      };

      if (payoffCoeffs[0] > 0 && payoffCoeffs[1] < 0) {
        cmp = function cmp(a, b) {
          return a < b;
        };
      } else if (payoffCoeffs[0] < 0 && payoffCoeffs[1] > 0) {
        cmp = function cmp(a, b) {
          return a < b;
        };
      } else if (payoffCoeffs[1] < 0) {
        cmp = function cmp(a, b) {
          return a > b;
        };
      }

      var prev2NotDominated = null;
      rows.filter(function (r) {
        return !r.dominatedBy;
      }).sort(function (a, b) {
        return payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]);
      }).forEach(function (r, i, arr) {
        if (!i) {
          r.incratio = 0;
          return;
        }

        var prev = arr[i - 1];
        r.incratio = _this2.computeICER(r, prev);

        if (i < 2) {
          return;
        }

        if (!prev2NotDominated) {
          prev2NotDominated = arr[i - 2];
        }

        if (cmp(r.incratio, prev.incratio)) {
          prev.incratio = null;
          prev.extendedDominatedBy = [prev2NotDominated.id, r.id];
          r.incratio = _this2.computeICER(r, prev2NotDominated);
        } else {
          prev2NotDominated = prev;
        }
      });
      var weightLowerBound = params.value("weightLowerBound");
      var defaultWeight = params.value("defaultWeight");
      var weightUpperBound = params.value("weightUpperBound"); //mark optimal for weight in [weightLowerBound, weightUpperBound] and optimal for default Weight

      var lastLELower = null;
      var lastLELowerDef = null;
      rows.slice().filter(function (r) {
        return !r.dominatedBy && !r.extendedDominatedBy;
      }).sort(function (a, b) {
        var sub = a.incratio - b.incratio;
        return sub ? sub : payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]);
      }).forEach(function (row, i, arr) {
        if (row.incratio < weightLowerBound) {
          lastLELower = row;
        }

        if (row.incratio < defaultWeight) {
          lastLELowerDef = row;
        }

        row.optimal = row.incratio >= weightLowerBound && row.incratio <= weightUpperBound;
        row.optimalForDefaultWeight = row.incratio == defaultWeight;
      });

      if (lastLELower) {
        lastLELower.optimal = true;
      }

      if (lastLELowerDef) {
        lastLELowerDef.optimalForDefaultWeight = true;
      }

      rows.forEach(function (row) {
        row.payoffs[0] = _sdExpressionEngine.ExpressionEngine.toFloat(row.payoffs[0]);
        row.payoffs[1] = _sdExpressionEngine.ExpressionEngine.toFloat(row.payoffs[1]);
        row.incratio = row.incratio === null ? null : _sdExpressionEngine.ExpressionEngine.toFloat(row.incratio);
      });
      jobResult.data = {
        payoffNames: data.payoffNames.slice(),
        payoffCoeffs: payoffCoeffs,
        rows: rows.sort(function (a, b) {
          return a.id - b.id;
        }),
        weightLowerBound: _sdExpressionEngine.ExpressionEngine.toFloat(weightLowerBound),
        defaultWeight: _sdExpressionEngine.ExpressionEngine.toFloat(defaultWeight),
        weightUpperBound: _sdExpressionEngine.ExpressionEngine.toFloat(weightUpperBound)
      };
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }, {
    key: "computeICER",
    value: function computeICER(r, prev) {
      var d = _sdExpressionEngine.ExpressionEngine.subtract(r.payoffs[0], prev.payoffs[0]);

      var n = _sdExpressionEngine.ExpressionEngine.subtract(r.payoffs[1], prev.payoffs[1]);

      if (d == 0) {
        if (n < 0) {
          return -Infinity;
        }

        return Infinity;
      }

      return Math.abs(_sdExpressionEngine.ExpressionEngine.divide(n, d));
    }
  }]);

  return CalculateStep;
}(_step.Step);

exports.CalculateStep = CalculateStep;

},{"../../../../policies/policies-collector":81,"../../../../policies/policy":82,"../../../../validation/tree-validator":86,"../../../engine/job-status":53,"../../../engine/step":58,"sd-expression-engine":"sd-expression-engine"}],10:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RecomputeJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../engine/job-parameters");

var _jobParameterDefinition = require("../../engine/job-parameter-definition");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var RecomputeJobParameters =
/*#__PURE__*/
function (_JobParameters) {
  _inherits(RecomputeJobParameters, _JobParameters);

  function RecomputeJobParameters() {
    _classCallCheck(this, RecomputeJobParameters);

    return _possibleConstructorReturn(this, _getPrototypeOf(RecomputeJobParameters).apply(this, arguments));
  }

  _createClass(RecomputeJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING).set('required', false));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("evalCode", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("evalNumeric", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        ruleName: null,
        //recompute all rules
        evalCode: true,
        evalNumeric: true
      };
    }
  }]);

  return RecomputeJobParameters;
}(_jobParameters.JobParameters);

exports.RecomputeJobParameters = RecomputeJobParameters;

},{"../../engine/job-parameter-definition":46,"../../engine/job-parameters":47,"sd-utils":"sd-utils"}],11:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RecomputeJob = void 0;

var _simpleJob = require("../../engine/simple-job");

var _step = require("../../engine/step");

var _jobStatus = require("../../engine/job-status");

var _treeValidator = require("../../../validation/tree-validator");

var _batchStep = require("../../engine/batch/batch-step");

var _recomputeJobParameters = require("./recompute-job-parameters");

var _job = require("../../engine/job");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var RecomputeJob =
/*#__PURE__*/
function (_Job) {
  _inherits(RecomputeJob, _Job);

  function RecomputeJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, RecomputeJob);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecomputeJob).call(this, "recompute", jobRepository));
    _this.isRestartable = false;
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(RecomputeJob, [{
    key: "doExecute",
    value: function doExecute(execution) {
      var data = execution.getData();
      var params = execution.jobParameters;
      var ruleName = params.value("ruleName");
      var allRules = !ruleName;

      if (ruleName) {
        this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      }

      this.checkValidityAndRecomputeObjective(data, allRules, params.value("evalCode"), params.value("evalNumeric"));
      return execution;
    }
  }, {
    key: "checkValidityAndRecomputeObjective",
    value: function checkValidityAndRecomputeObjective(data, allRules, evalCode, evalNumeric) {
      var _this2 = this;

      data.validationResults = [];

      if (evalCode || evalNumeric) {
        this.expressionsEvaluator.evalExpressions(data, evalCode, evalNumeric);
      }

      data.getRoots().forEach(function (root) {
        var vr = _this2.treeValidator.validate(data.getAllNodesInSubtree(root));

        data.validationResults.push(vr);

        if (vr.isValid()) {
          _this2.objectiveRulesManager.recomputeTree(root, allRules);
        }
      });
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _recomputeJobParameters.RecomputeJobParameters(values);
    }
  }]);

  return RecomputeJob;
}(_job.Job);

exports.RecomputeJob = RecomputeJob;

},{"../../../validation/tree-validator":86,"../../engine/batch/batch-step":28,"../../engine/job":54,"../../engine/job-status":53,"../../engine/simple-job":55,"../../engine/step":58,"./recompute-job-parameters":10}],12:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SensitivityAnalysisJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var SensitivityAnalysisJobParameters =
/*#__PURE__*/
function (_JobParameters) {
  _inherits(SensitivityAnalysisJobParameters, _JobParameters);

  function SensitivityAnalysisJobParameters() {
    _classCallCheck(this, SensitivityAnalysisJobParameters);

    return _possibleConstructorReturn(this, _getPrototypeOf(SensitivityAnalysisJobParameters).apply(this, arguments));
  }

  _createClass(SensitivityAnalysisJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("extendedPolicyDescription", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING), new _jobParameterDefinition.JobParameterDefinition("min", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("max", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("length", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v >= 2;
      })], 1, Infinity, false, function (v) {
        return v["min"] < v["max"];
      }, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        extendedPolicyDescription: true,
        failOnInvalidTree: true
      };
    }
  }]);

  return SensitivityAnalysisJobParameters;
}(_jobParameters.JobParameters);

exports.SensitivityAnalysisJobParameters = SensitivityAnalysisJobParameters;

},{"../../../engine/job-parameter-definition":46,"../../../engine/job-parameters":47,"sd-utils":"sd-utils"}],13:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SensitivityAnalysisJob = void 0;

var _simpleJob = require("../../../engine/simple-job");

var _sensitivityAnalysisJobParameters = require("./sensitivity-analysis-job-parameters");

var _prepareVariablesStep = require("./steps/prepare-variables-step");

var _initPoliciesStep = require("./steps/init-policies-step");

var _calculateStep = require("./steps/calculate-step");

var _policy = require("../../../../policies/policy");

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var SensitivityAnalysisJob =
/*#__PURE__*/
function (_SimpleJob) {
  _inherits(SensitivityAnalysisJob, _SimpleJob);

  function SensitivityAnalysisJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    var batchSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;

    _classCallCheck(this, SensitivityAnalysisJob);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(SensitivityAnalysisJob).call(this, "sensitivity-analysis", jobRepository, expressionsEvaluator, objectiveRulesManager));
    _this.batchSize = 5;

    _this.initSteps();

    return _this;
  }

  _createClass(SensitivityAnalysisJob, [{
    key: "initSteps",
    value: function initSteps() {
      this.addStep(new _prepareVariablesStep.PrepareVariablesStep(this.jobRepository, this.expressionsEvaluator.expressionEngine));
      this.addStep(new _initPoliciesStep.InitPoliciesStep(this.jobRepository));
      this.calculateStep = new _calculateStep.CalculateStep(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager, this.batchSize);
      this.addStep(this.calculateStep);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _sensitivityAnalysisJobParameters.SensitivityAnalysisJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
  }, {
    key: "setBatchSize",
    value: function setBatchSize(batchSize) {
      this.batchSize = batchSize;
      this.calculateStep.chunkSize = batchSize;
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        var headers = ['policy_number', 'policy'];
        jobResult.variableNames.forEach(function (n) {
          return headers.push(n);
        });
        headers.push('payoff');
        result.push(headers);
      }

      var roundVariables = !!jobParameters.values.roundVariables;

      if (roundVariables) {
        this.roundVariables(jobResult);
      }

      jobResult.rows.forEach(function (row) {
        var policy = jobResult.policies[row.policyIndex];
        var rowCells = [row.policyIndex + 1, _policy.Policy.toPolicyString(policy, jobParameters.values.extendedPolicyDescription)];
        row.variables.forEach(function (v) {
          return rowCells.push(v);
        });
        rowCells.push(row.payoff);
        result.push(rowCells);

        if (row._variables) {
          //revert original variables
          row.variables = row._variables;
          delete row._variables;
        }
      });
      return result;
    }
  }, {
    key: "roundVariables",
    value: function roundVariables(jobResult) {
      var uniqueValues = jobResult.variableNames.map(function () {
        return new Set();
      });
      jobResult.rows.forEach(function (row) {
        row._variables = row.variables.slice(); // save original row variables

        row.variables.forEach(function (v, i) {
          uniqueValues[i].add(v);
        });
      });
      var uniqueValuesNo = uniqueValues.map(function (s) {
        return s.size;
      });
      var maxPrecision = 14;
      var precision = 2;
      var notReadyVariablesIndexes = jobResult.variableNames.map(function (v, i) {
        return i;
      });

      while (precision <= maxPrecision && notReadyVariablesIndexes.length) {
        uniqueValues = notReadyVariablesIndexes.map(function () {
          return new Set();
        });
        jobResult.rows.forEach(function (row) {
          notReadyVariablesIndexes.forEach(function (variableIndex, notReadyIndex) {
            var val = row._variables[variableIndex];
            val = _sdUtils.Utils.round(val, precision);
            uniqueValues[notReadyIndex].add(val);
            row.variables[variableIndex] = val;
          });
        });
        var newReadyIndexes = [];
        uniqueValues.forEach(function (uniqueVals, notReadyIndex) {
          var origUniqueCount = uniqueValuesNo[notReadyVariablesIndexes[notReadyIndex]];

          if (origUniqueCount == uniqueVals.size) {
            //ready in previous iteration
            newReadyIndexes.push(notReadyIndex);
          }
        });

        if (newReadyIndexes.length) {
          //revert values to prev iteration
          newReadyIndexes.reverse();
          newReadyIndexes.forEach(function (notReadyIndex) {
            notReadyVariablesIndexes.splice(notReadyIndex, 1);
          });
        }

        precision++;
      }
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length <= 2) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[2].getProgress(execution.stepExecutions[2]);
    }
  }]);

  return SensitivityAnalysisJob;
}(_simpleJob.SimpleJob);

exports.SensitivityAnalysisJob = SensitivityAnalysisJob;

},{"../../../../policies/policy":82,"../../../engine/simple-job":55,"./sensitivity-analysis-job-parameters":12,"./steps/calculate-step":14,"./steps/init-policies-step":15,"./steps/prepare-variables-step":16,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],14:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _batchStep = require("../../../../engine/batch/batch-step");

var _treeValidator = require("../../../../../validation/tree-validator");

var _policy = require("../../../../../policies/policy");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var CalculateStep =
/*#__PURE__*/
function (_BatchStep) {
  _inherits(CalculateStep, _BatchStep);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager, batchSize) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalculateStep).call(this, "calculate_step", jobRepository, batchSize));
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableValues = jobResult.data.variableValues;
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);

      if (!jobResult.data.rows) {
        jobResult.data.rows = [];
        jobResult.data.variableNames = variableNames;
      }

      return variableValues.length;
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize, jobResult) {
      var variableValues = jobResult.data.variableValues;
      return variableValues.slice(startIndex, startIndex + chunkSize);
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item) {
      var _this2 = this;

      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var failOnInvalidTree = params.value("failOnInvalidTree");
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var variableNames = stepExecution.executionContext.get("variableNames");
      var policies = stepExecution.getJobExecutionContext().get("policies");
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalGlobalCode(data);
      variableNames.forEach(function (variableName, i) {
        data.expressionScope[variableName] = item[i];
      });
      this.expressionsEvaluator.evalExpressionsForNode(data, treeRoot);
      var vr = this.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));
      var valid = vr.isValid();

      if (!valid && failOnInvalidTree) {
        var errorData = {
          variables: {}
        };
        variableNames.forEach(function (variableName, i) {
          errorData.variables[variableName] = item[i];
        });
        throw new _jobComputationException.JobComputationException("computations", errorData);
      }

      var payoffs = [];
      policies.forEach(function (policy) {
        var payoff = 'n/a';

        if (valid) {
          _this2.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

          payoff = treeRoot.computedValue(ruleName, 'payoff')[0];
        }

        payoffs.push(payoff);
      });
      return {
        policies: policies,
        variables: item,
        payoffs: payoffs
      };
    }
  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {
      var _this3 = this;

      var params = stepExecution.getJobParameters();
      var extendedPolicyDescription = params.value("extendedPolicyDescription");
      items.forEach(function (item) {
        if (!item) {
          return;
        }

        item.policies.forEach(function (policy, i) {
          var variables = item.variables.map(function (v) {
            return _this3.toFloat(v);
          });
          var payoff = item.payoffs[i];
          var row = {
            policyIndex: i,
            variables: variables,
            payoff: _sdUtils.Utils.isString(payoff) ? payoff : _this3.toFloat(payoff)
          };
          jobResult.data.rows.push(row);
        });
      });
    }
  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {
      delete jobResult.data.variableValues;
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return CalculateStep;
}(_batchStep.BatchStep);

exports.CalculateStep = CalculateStep;

},{"../../../../../policies/policy":82,"../../../../../validation/tree-validator":86,"../../../../engine/batch/batch-step":28,"../../../../engine/exceptions/job-computation-exception":31,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],15:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.InitPoliciesStep = void 0;

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _policiesCollector = require("../../../../../policies/policies-collector");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var InitPoliciesStep =
/*#__PURE__*/
function (_Step) {
  _inherits(InitPoliciesStep, _Step);

  function InitPoliciesStep(jobRepository) {
    _classCallCheck(this, InitPoliciesStep);

    return _possibleConstructorReturn(this, _getPrototypeOf(InitPoliciesStep).call(this, "init_policies", jobRepository));
  }

  _createClass(InitPoliciesStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot);
      var policies = policiesCollector.policies;
      stepExecution.getJobExecutionContext().put("policies", policies);

      if (!jobResult.data) {
        jobResult.data = {};
      }

      jobResult.data.policies = policies;
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return InitPoliciesStep;
}(_step.Step);

exports.InitPoliciesStep = InitPoliciesStep;

},{"../../../../../policies/policies-collector":81,"../../../../engine/job-status":53,"../../../../engine/step":58}],16:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PrepareVariablesStep = void 0;

var _sdUtils = require("sd-utils");

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _computationsUtils = require("../../../../../computations-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var PrepareVariablesStep =
/*#__PURE__*/
function (_Step) {
  _inherits(PrepareVariablesStep, _Step);

  function PrepareVariablesStep(jobRepository, expressionEngine) {
    var _this;

    _classCallCheck(this, PrepareVariablesStep);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(PrepareVariablesStep).call(this, "prepare_variables", jobRepository));
    _this.expressionEngine = expressionEngine;
    return _this;
  }

  _createClass(PrepareVariablesStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var params = stepExecution.getJobParameters();
      var variables = params.value("variables");
      var variableValues = [];
      variables.forEach(function (v) {
        variableValues.push(_computationsUtils.ComputationsUtils.sequence(v.min, v.max, v.length));
      });
      variableValues = _sdUtils.Utils.cartesianProductOf(variableValues);
      jobResult.data = {
        variableValues: variableValues
      };
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return PrepareVariablesStep;
}(_step.Step);

exports.PrepareVariablesStep = PrepareVariablesStep;

},{"../../../../../computations-utils":4,"../../../../engine/job-status":53,"../../../../engine/step":58,"sd-utils":"sd-utils"}],17:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbabilisticSensitivityAnalysisJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var ProbabilisticSensitivityAnalysisJobParameters =
/*#__PURE__*/
function (_JobParameters) {
  _inherits(ProbabilisticSensitivityAnalysisJobParameters, _JobParameters);

  function ProbabilisticSensitivityAnalysisJobParameters() {
    _classCallCheck(this, ProbabilisticSensitivityAnalysisJobParameters);

    return _possibleConstructorReturn(this, _getPrototypeOf(ProbabilisticSensitivityAnalysisJobParameters).apply(this, arguments));
  }

  _createClass(ProbabilisticSensitivityAnalysisJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("extendedPolicyDescription", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("numberOfRuns", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v > 0;
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING), new _jobParameterDefinition.JobParameterDefinition("formula", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION)], 1, Infinity, false, null, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        extendedPolicyDescription: true,
        failOnInvalidTree: true
      };
    }
  }]);

  return ProbabilisticSensitivityAnalysisJobParameters;
}(_jobParameters.JobParameters);

exports.ProbabilisticSensitivityAnalysisJobParameters = ProbabilisticSensitivityAnalysisJobParameters;

},{"../../../engine/job-parameter-definition":46,"../../../engine/job-parameters":47,"sd-utils":"sd-utils"}],18:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbabilisticSensitivityAnalysisJob = void 0;

var _probabilisticSensitivityAnalysisJobParameters = require("./probabilistic-sensitivity-analysis-job-parameters");

var _initPoliciesStep = require("../n-way/steps/init-policies-step");

var _sensitivityAnalysisJob = require("../n-way/sensitivity-analysis-job");

var _probCalculateStep = require("./steps/prob-calculate-step");

var _computePolicyStatsStep = require("./steps/compute-policy-stats-step");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var ProbabilisticSensitivityAnalysisJob =
/*#__PURE__*/
function (_SensitivityAnalysisJ) {
  _inherits(ProbabilisticSensitivityAnalysisJob, _SensitivityAnalysisJ);

  function ProbabilisticSensitivityAnalysisJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    var batchSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;

    _classCallCheck(this, ProbabilisticSensitivityAnalysisJob);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProbabilisticSensitivityAnalysisJob).call(this, jobRepository, expressionsEvaluator, objectiveRulesManager, batchSize));
    _this.name = "probabilistic-sensitivity-analysis";
    return _this;
  }

  _createClass(ProbabilisticSensitivityAnalysisJob, [{
    key: "initSteps",
    value: function initSteps() {
      this.addStep(new _initPoliciesStep.InitPoliciesStep(this.jobRepository));
      this.calculateStep = new _probCalculateStep.ProbCalculateStep(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager, this.batchSize);
      this.addStep(this.calculateStep);
      this.addStep(new _computePolicyStatsStep.ComputePolicyStatsStep(this.expressionsEvaluator.expressionEngine, this.objectiveRulesManager, this.jobRepository));
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _probabilisticSensitivityAnalysisJobParameters.ProbabilisticSensitivityAnalysisJobParameters(values);
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length <= 1) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[1].getProgress(execution.stepExecutions[1]);
    }
  }]);

  return ProbabilisticSensitivityAnalysisJob;
}(_sensitivityAnalysisJob.SensitivityAnalysisJob);

exports.ProbabilisticSensitivityAnalysisJob = ProbabilisticSensitivityAnalysisJob;

},{"../n-way/sensitivity-analysis-job":13,"../n-way/steps/init-policies-step":15,"./probabilistic-sensitivity-analysis-job-parameters":17,"./steps/compute-policy-stats-step":19,"./steps/prob-calculate-step":20}],19:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputePolicyStatsStep = void 0;

var _sdUtils = require("sd-utils");

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _sdExpressionEngine = require("sd-expression-engine");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var ComputePolicyStatsStep =
/*#__PURE__*/
function (_Step) {
  _inherits(ComputePolicyStatsStep, _Step);

  function ComputePolicyStatsStep(expressionEngine, objectiveRulesManager, jobRepository) {
    var _this;

    _classCallCheck(this, ComputePolicyStatsStep);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ComputePolicyStatsStep).call(this, "compute_policy_stats", jobRepository));
    _this.expressionEngine = expressionEngine;
    _this.objectiveRulesManager = objectiveRulesManager;
    return _this;
  }

  _createClass(ComputePolicyStatsStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var params = stepExecution.getJobParameters();
      var numberOfRuns = params.value("numberOfRuns");
      var ruleName = params.value("ruleName");
      var rule = this.objectiveRulesManager.ruleByName[ruleName];
      var payoffsPerPolicy = jobResult.data.policies.map(function () {
        return [];
      });
      jobResult.data.rows.forEach(function (row) {
        payoffsPerPolicy[row.policyIndex].push(_sdUtils.Utils.isString(row.payoff) ? 0 : row.payoff);
      });

      _sdUtils.log.debug('payoffsPerPolicy', payoffsPerPolicy, jobResult.data.rows.length, rule.maximization);

      jobResult.data.medians = payoffsPerPolicy.map(function (payoffs) {
        return _sdExpressionEngine.ExpressionEngine.median(payoffs);
      });
      jobResult.data.standardDeviations = payoffsPerPolicy.map(function (payoffs) {
        return _sdExpressionEngine.ExpressionEngine.std(payoffs);
      });

      if (rule.maximization) {
        jobResult.data.policyIsBestProbabilities = jobResult.data.policyToHighestPayoffCount.map(function (v) {
          return _sdExpressionEngine.ExpressionEngine.toFloat(_sdExpressionEngine.ExpressionEngine.divide(v, numberOfRuns));
        });
      } else {
        jobResult.data.policyIsBestProbabilities = jobResult.data.policyToLowestPayoffCount.map(function (v) {
          return _sdExpressionEngine.ExpressionEngine.toFloat(_sdExpressionEngine.ExpressionEngine.divide(v, numberOfRuns));
        });
      }

      jobResult.data.policyToHighestPayoffCount = jobResult.data.policyToHighestPayoffCount.map(function (v) {
        return _sdExpressionEngine.ExpressionEngine.toFloat(v);
      });
      jobResult.data.policyToLowestPayoffCount = jobResult.data.policyToLowestPayoffCount.map(function (v) {
        return _sdExpressionEngine.ExpressionEngine.toFloat(v);
      });
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return ComputePolicyStatsStep;
}(_step.Step);

exports.ComputePolicyStatsStep = ComputePolicyStatsStep;

},{"../../../../engine/job-status":53,"../../../../engine/step":58,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],20:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbCalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _calculateStep = require("../../n-way/steps/calculate-step");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);

      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var ProbCalculateStep =
/*#__PURE__*/
function (_CalculateStep) {
  _inherits(ProbCalculateStep, _CalculateStep);

  function ProbCalculateStep() {
    _classCallCheck(this, ProbCalculateStep);

    return _possibleConstructorReturn(this, _getPrototypeOf(ProbCalculateStep).apply(this, arguments));
  }

  _createClass(ProbCalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);

      if (!jobResult.data.rows) {
        jobResult.data.rows = [];
        jobResult.data.variableNames = variableNames;
        jobResult.data.expectedValues = _sdUtils.Utils.fill(new Array(jobResult.data.policies.length), 0);
        jobResult.data.policyToHighestPayoffCount = _sdUtils.Utils.fill(new Array(jobResult.data.policies.length), 0);
        jobResult.data.policyToLowestPayoffCount = _sdUtils.Utils.fill(new Array(jobResult.data.policies.length), 0);
      }

      return params.value("numberOfRuns");
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize, jobResult) {
      var _this = this;

      var params = stepExecution.getJobParameters();
      var variables = params.value("variables");
      var data = stepExecution.getData();
      var variableValues = [];

      for (var runIndex = 0; runIndex < chunkSize; runIndex++) {
        var singleRunVariableValues = [];
        var errors = [];
        variables.forEach(function (v) {
          try {
            var evaluated = _this.expressionsEvaluator.expressionEngine.eval(v.formula, true, _sdUtils.Utils.cloneDeep(data.expressionScope));

            singleRunVariableValues.push(_sdExpressionEngine.ExpressionEngine.toFloat(evaluated));
          } catch (e) {
            errors.push({
              variable: v,
              error: e
            });
          }
        });

        if (errors.length) {
          var errorData = {
            variables: []
          };
          errors.forEach(function (e) {
            errorData.variables[e.variable.name] = e.error.message;
          });
          throw new _jobComputationException.JobComputationException("param-computation", errorData);
        }

        variableValues.push(singleRunVariableValues);
      }

      return variableValues;
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, currentItemCount, jobResult) {
      var r = _get(_getPrototypeOf(ProbCalculateStep.prototype), "processItem", this).call(this, stepExecution, item, jobResult);

      var params = stepExecution.getJobParameters();
      var numberOfRuns = params.value("numberOfRuns");
      var policies = stepExecution.getJobExecutionContext().get("policies");
      this.updatePolicyStats(r, policies, numberOfRuns, jobResult);
      return r;
    }
  }, {
    key: "updatePolicyStats",
    value: function updatePolicyStats(r, policies, numberOfRuns, jobResult) {
      var highestPayoff = -Infinity;
      var lowestPayoff = Infinity;
      var bestPolicyIndexes = [];
      var worstPolicyIndexes = [];

      var zeroNum = _sdExpressionEngine.ExpressionEngine.toNumber(0);

      policies.forEach(function (policy, i) {
        var payoff = r.payoffs[i];

        if (_sdUtils.Utils.isString(payoff)) {
          payoff = zeroNum;
        }

        if (payoff < lowestPayoff) {
          lowestPayoff = payoff;
          worstPolicyIndexes = [i];
        } else if (payoff.equals(lowestPayoff)) {
          worstPolicyIndexes.push(i);
        }

        if (payoff > highestPayoff) {
          highestPayoff = payoff;
          bestPolicyIndexes = [i];
        } else if (payoff.equals(highestPayoff)) {
          bestPolicyIndexes.push(i);
        }

        jobResult.data.expectedValues[i] = _sdExpressionEngine.ExpressionEngine.add(jobResult.data.expectedValues[i], _sdExpressionEngine.ExpressionEngine.divide(payoff, numberOfRuns));
      });
      bestPolicyIndexes.forEach(function (policyIndex) {
        jobResult.data.policyToHighestPayoffCount[policyIndex] = _sdExpressionEngine.ExpressionEngine.add(jobResult.data.policyToHighestPayoffCount[policyIndex], _sdExpressionEngine.ExpressionEngine.divide(1, bestPolicyIndexes.length));
      });
      worstPolicyIndexes.forEach(function (policyIndex) {
        jobResult.data.policyToLowestPayoffCount[policyIndex] = _sdExpressionEngine.ExpressionEngine.add(jobResult.data.policyToLowestPayoffCount[policyIndex], _sdExpressionEngine.ExpressionEngine.divide(1, worstPolicyIndexes.length));
      });
    }
  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {
      var _this2 = this;

      jobResult.data.expectedValues = jobResult.data.expectedValues.map(function (v) {
        return _this2.toFloat(v);
      });
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return ProbCalculateStep;
}(_calculateStep.CalculateStep);

exports.ProbCalculateStep = ProbCalculateStep;

},{"../../../../engine/exceptions/job-computation-exception":31,"../../n-way/steps/calculate-step":14,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],21:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SpiderPlotJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var SpiderPlotJobParameters =
/*#__PURE__*/
function (_JobParameters) {
  _inherits(SpiderPlotJobParameters, _JobParameters);

  function SpiderPlotJobParameters() {
    _classCallCheck(this, SpiderPlotJobParameters);

    return _possibleConstructorReturn(this, _getPrototypeOf(SpiderPlotJobParameters).apply(this, arguments));
  }

  _createClass(SpiderPlotJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("percentageChangeRange", _jobParameterDefinition.PARAMETER_TYPE.NUMBER).set("singleValueValidator", function (v) {
        return v > 0 && v <= 100;
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("length", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v >= 0;
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING)], 1, Infinity, false, null, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        failOnInvalidTree: true
      };
    }
  }]);

  return SpiderPlotJobParameters;
}(_jobParameters.JobParameters);

exports.SpiderPlotJobParameters = SpiderPlotJobParameters;

},{"../../../engine/job-parameter-definition":46,"../../../engine/job-parameters":47,"sd-utils":"sd-utils"}],22:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SpiderPlotJob = void 0;

var _simpleJob = require("../../../engine/simple-job");

var _calculateStep = require("./steps/calculate-step");

var _spiderPlotJobParameters = require("./spider-plot-job-parameters");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var SpiderPlotJob =
/*#__PURE__*/
function (_SimpleJob) {
  _inherits(SpiderPlotJob, _SimpleJob);

  function SpiderPlotJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, SpiderPlotJob);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(SpiderPlotJob).call(this, "spider-plot", jobRepository));

    _this.addStep(new _calculateStep.CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager));

    return _this;
  }

  _createClass(SpiderPlotJob, [{
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _spiderPlotJobParameters.SpiderPlotJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length < 1) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[0].getProgress(execution.stepExecutions[0]);
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        result.push(['variable_name', 'policy_no'].concat(jobResult.percentageRangeValues));
      }

      jobResult.rows.forEach(function (row, index) {
        result.push.apply(result, _toConsumableArray(row.payoffs.map(function (payoffs, policyIndex) {
          return [row.variableName, policyIndex + 1].concat(_toConsumableArray(payoffs));
        })));
      });
      return result;
    }
  }]);

  return SpiderPlotJob;
}(_simpleJob.SimpleJob);

exports.SpiderPlotJob = SpiderPlotJob;

},{"../../../engine/simple-job":55,"./spider-plot-job-parameters":21,"./steps/calculate-step":23}],23:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

var _batchStep = require("../../../../engine/batch/batch-step");

var _treeValidator = require("../../../../../validation/tree-validator");

var _policy = require("../../../../../policies/policy");

var _policiesCollector = require("../../../../../policies/policies-collector");

var _computationsUtils = require("../../../../../computations-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var CalculateStep =
/*#__PURE__*/
function (_BatchStep) {
  _inherits(CalculateStep, _BatchStep);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalculateStep).call(this, "calculate_step", jobRepository, 1));
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var _this2 = this;

      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var percentageChangeRange = params.value("percentageChangeRange");
      var length = params.value("length");
      var variables = params.value("variables");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var payoff = treeRoot.computedValue(ruleName, 'payoff');
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalExpressions(data);
      this.objectiveRulesManager.recomputeTree(treeRoot, false);
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot, ruleName);
      var defaultValues = {};
      data.getGlobalVariableNames().forEach(function (name) {
        var v = data.expressionScope[name];

        try {
          defaultValues[name] = _this2.toFloat(v);
        } catch (e) {
          throw new _jobComputationException.JobComputationException("error computing float value of a variable", {
            name: name,
            value: v
          });
        }
      });

      var percentageRangeValues = _computationsUtils.ComputationsUtils.sequence(-percentageChangeRange, percentageChangeRange, 2 * length + 1);

      var variableValues = [];
      variables.forEach(function (v) {
        var defVal = defaultValues[v.name];
        variableValues.push(percentageRangeValues.map(function (p) {
          return _this2.toFloat(_sdExpressionEngine.ExpressionEngine.add(defVal, _sdExpressionEngine.ExpressionEngine.multiply(_sdExpressionEngine.ExpressionEngine.divide(p, 100), defVal)));
        }));
      });

      if (!jobResult.data) {
        jobResult.data = {
          variableNames: variableNames,
          defaultValues: defaultValues,
          percentageRangeValues: percentageRangeValues,
          defaultPayoff: this.toFloat(payoff)[0],
          policies: policiesCollector.policies,
          rows: []
        };
      }

      stepExecution.getJobExecutionContext().put("variableValues", variableValues);
      return variableValues.length;
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize) {
      var variableValues = stepExecution.getJobExecutionContext().get("variableValues");
      return variableValues.slice(startIndex, startIndex + chunkSize);
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, itemIndex, jobResult) {
      var _this3 = this;

      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var failOnInvalidTree = params.value("failOnInvalidTree");
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var variableNames = stepExecution.executionContext.get("variableNames");
      var variableName = variableNames[itemIndex];
      var payoffs = jobResult.data.policies.map(function (policy) {
        return [];
      });
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalGlobalCode(data);
      item.forEach(function (variableValue) {
        data.expressionScope[variableName] = variableValue;

        _this3.expressionsEvaluator.evalExpressionsForNode(data, treeRoot);

        var vr = _this3.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));

        var valid = vr.isValid();

        if (!valid && failOnInvalidTree) {
          var errorData = {
            variables: {}
          };
          errorData.variables[variableName] = variableValue;
          throw new _jobComputationException.JobComputationException("computations", errorData);
        }

        jobResult.data.policies.forEach(function (policy, policyIndex) {
          _this3.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

          var payoff = treeRoot.computedValue(ruleName, 'payoff')[0];
          payoffs[policyIndex].push(_this3.toFloat(payoff));
        });
      });
      return {
        variableName: variableName,
        variableIndex: itemIndex,
        variableValues: item,
        payoffs: payoffs
      };
    }
  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {
      var _jobResult$data$rows;

      (_jobResult$data$rows = jobResult.data.rows).push.apply(_jobResult$data$rows, _toConsumableArray(items));
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return CalculateStep;
}(_batchStep.BatchStep);

exports.CalculateStep = CalculateStep;

},{"../../../../../computations-utils":4,"../../../../../policies/policies-collector":81,"../../../../../policies/policy":82,"../../../../../validation/tree-validator":86,"../../../../engine/batch/batch-step":28,"../../../../engine/exceptions/job-computation-exception":31,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],24:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

var _batchStep = require("../../../../engine/batch/batch-step");

var _treeValidator = require("../../../../../validation/tree-validator");

var _policy = require("../../../../../policies/policy");

var _policiesCollector = require("../../../../../policies/policies-collector");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var CalculateStep =
/*#__PURE__*/
function (_BatchStep) {
  _inherits(CalculateStep, _BatchStep);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalculateStep).call(this, "calculate_step", jobRepository, 1));
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var _this2 = this;

      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableValues = jobExecutionContext.get("variableValues");
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var payoff = treeRoot.computedValue(ruleName, 'payoff');
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalExpressions(data);
      this.objectiveRulesManager.recomputeTree(treeRoot, false);
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot, ruleName);
      var defaultValues = {};
      data.getGlobalVariableNames().forEach(function (name) {
        var v = data.expressionScope[name];

        try {
          defaultValues[name] = _this2.toFloat(v);
        } catch (e) {
          throw new _jobComputationException.JobComputationException("error computing float value of a variable", {
            name: name,
            value: v
          });
        }
      });

      if (!jobResult.data) {
        jobResult.data = {
          variableNames: variableNames,
          defaultValues: defaultValues,
          variableExtents: variableValues.map(function (v) {
            return [v[0], v[v.length - 1]];
          }),
          defaultPayoff: this.toFloat(payoff)[0],
          policies: policiesCollector.policies,
          rows: []
        };
      }

      return variableValues.length;
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize) {
      var variableValues = stepExecution.getJobExecutionContext().get("variableValues");
      return variableValues.slice(startIndex, startIndex + chunkSize);
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, itemIndex, jobResult) {
      var _this3 = this;

      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var failOnInvalidTree = params.value("failOnInvalidTree");
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var variableNames = stepExecution.executionContext.get("variableNames");
      var variableName = variableNames[itemIndex];
      var extents = jobResult.data.policies.map(function (policy) {
        return {
          min: Infinity,
          max: -Infinity
        };
      });
      var values = jobResult.data.policies.map(function (policy) {
        return {
          min: null,
          max: null
        };
      });
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalGlobalCode(data);
      item.forEach(function (variableValue) {
        data.expressionScope[variableName] = variableValue;

        _this3.expressionsEvaluator.evalExpressionsForNode(data, treeRoot);

        var vr = _this3.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));

        var valid = vr.isValid();

        if (!valid && failOnInvalidTree) {
          var errorData = {
            variables: {}
          };
          errorData.variables[variableName] = variableValue;
          throw new _jobComputationException.JobComputationException("computations", errorData);
        }

        jobResult.data.policies.forEach(function (policy, policyIndex) {
          _this3.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

          var payoff = treeRoot.computedValue(ruleName, 'payoff')[0];

          if (payoff < extents[policyIndex].min) {
            extents[policyIndex].min = payoff;
            values[policyIndex].min = variableValue;
          }

          if (payoff > extents[policyIndex].max) {
            extents[policyIndex].max = payoff;
            values[policyIndex].max = variableValue;
          }
        });
      });
      return {
        variableName: variableName,
        variableIndex: itemIndex,
        extents: extents.map(function (e) {
          return [_this3.toFloat(e.min), _this3.toFloat(e.max)];
        }),
        extentVariableValues: values.map(function (v) {
          return [_this3.toFloat(v.min), _this3.toFloat(v.max)];
        })
      };
    }
  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {
      var _jobResult$data$rows;

      (_jobResult$data$rows = jobResult.data.rows).push.apply(_jobResult$data$rows, _toConsumableArray(items));
    }
  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {
      jobResult.data.rows.sort(function (a, b) {
        return b.extents[0][1] - b.extents[0][0] - (a.extents[0][1] - a.extents[0][0]);
      });
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return CalculateStep;
}(_batchStep.BatchStep);

exports.CalculateStep = CalculateStep;

},{"../../../../../policies/policies-collector":81,"../../../../../policies/policy":82,"../../../../../validation/tree-validator":86,"../../../../engine/batch/batch-step":28,"../../../../engine/exceptions/job-computation-exception":31,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],25:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PrepareVariablesStep = void 0;

var _sdUtils = require("sd-utils");

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _sdExpressionEngine = require("sd-expression-engine");

var _computationsUtils = require("../../../../../computations-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var PrepareVariablesStep =
/*#__PURE__*/
function (_Step) {
  _inherits(PrepareVariablesStep, _Step);

  function PrepareVariablesStep(jobRepository) {
    _classCallCheck(this, PrepareVariablesStep);

    return _possibleConstructorReturn(this, _getPrototypeOf(PrepareVariablesStep).call(this, "prepare_variables", jobRepository));
  }

  _createClass(PrepareVariablesStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution) {
      var params = stepExecution.getJobParameters();
      var variables = params.value("variables");
      var variableValues = [];
      variables.forEach(function (v) {
        variableValues.push(_computationsUtils.ComputationsUtils.sequence(v.min, v.max, v.length));
      });
      stepExecution.getJobExecutionContext().put("variableValues", variableValues);
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return PrepareVariablesStep;
}(_step.Step);

exports.PrepareVariablesStep = PrepareVariablesStep;

},{"../../../../../computations-utils":4,"../../../../engine/job-status":53,"../../../../engine/step":58,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],26:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TornadoDiagramJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var TornadoDiagramJobParameters =
/*#__PURE__*/
function (_JobParameters) {
  _inherits(TornadoDiagramJobParameters, _JobParameters);

  function TornadoDiagramJobParameters() {
    _classCallCheck(this, TornadoDiagramJobParameters);

    return _possibleConstructorReturn(this, _getPrototypeOf(TornadoDiagramJobParameters).apply(this, arguments));
  }

  _createClass(TornadoDiagramJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING), new _jobParameterDefinition.JobParameterDefinition("min", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("max", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("length", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v >= 0;
      })], 1, Infinity, false, function (v) {
        return v["min"] <= v["max"];
      }, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        failOnInvalidTree: true
      };
    }
  }]);

  return TornadoDiagramJobParameters;
}(_jobParameters.JobParameters);

exports.TornadoDiagramJobParameters = TornadoDiagramJobParameters;

},{"../../../engine/job-parameter-definition":46,"../../../engine/job-parameters":47,"sd-utils":"sd-utils"}],27:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TornadoDiagramJob = void 0;

var _simpleJob = require("../../../engine/simple-job");

var _prepareVariablesStep = require("./steps/prepare-variables-step");

var _calculateStep = require("./steps/calculate-step");

var _tornadoDiagramJobParameters = require("./tornado-diagram-job-parameters");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var TornadoDiagramJob =
/*#__PURE__*/
function (_SimpleJob) {
  _inherits(TornadoDiagramJob, _SimpleJob);

  function TornadoDiagramJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, TornadoDiagramJob);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(TornadoDiagramJob).call(this, "tornado-diagram", jobRepository));

    _this.addStep(new _prepareVariablesStep.PrepareVariablesStep(jobRepository));

    _this.addStep(new _calculateStep.CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager));

    return _this;
  }

  _createClass(TornadoDiagramJob, [{
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _tornadoDiagramJobParameters.TornadoDiagramJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length <= 1) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[1].getProgress(execution.stepExecutions[1]);
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        result.push(['variable_name', 'default_var_value', "min_var_value", "max_var_value", 'default_payoff', "min_payoff", "max_payoff", "policy_no"]);
      }

      jobResult.rows.forEach(function (row, index) {
        result.push.apply(result, _toConsumableArray(row.extents.map(function (extent, policyIndex) {
          return [row.variableName, jobResult.defaultValues[row.variableName], row.extentVariableValues[policyIndex][0], row.extentVariableValues[policyIndex][1], jobResult.defaultPayoff, extent[0], extent[1], policyIndex + 1];
        })));
      });
      return result;
    }
  }]);

  return TornadoDiagramJob;
}(_simpleJob.SimpleJob);

exports.TornadoDiagramJob = TornadoDiagramJob;

},{"../../../engine/simple-job":55,"./steps/calculate-step":24,"./steps/prepare-variables-step":25,"./tornado-diagram-job-parameters":26}],28:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BatchStep = void 0;

var _jobStatus = require("../job-status");

var _sdUtils = require("sd-utils");

var _step = require("../step");

var _jobInterruptedException = require("../exceptions/job-interrupted-exception");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/*job step that process batch of items*/


var BatchStep =
/*#__PURE__*/
function (_Step) {
  _inherits(BatchStep, _Step);

  function BatchStep(name, jobRepository, chunkSize) {
    var _this;

    _classCallCheck(this, BatchStep);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(BatchStep).call(this, name, jobRepository));
    _this.chunkSize = chunkSize;
    return _this;
  }
  /**
   * Extension point for subclasses to perform step initialization. Should return total item count
   */


  _createClass(BatchStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      throw "BatchStep.init function not implemented for step: " + this.name;
    }
    /**
     * Extension point for subclasses to read and return chunk of items to process
     */

  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize, jobResult) {
      throw "BatchStep.readNextChunk function not implemented for step: " + this.name;
    }
    /**
     * Extension point for subclasses to process single item
     * Must return processed item which will be passed in a chunk to writeChunk function
     */

  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, currentItemCount, jobResult) {
      throw "BatchStep.processItem function not implemented for step: " + this.name;
    }
    /**
     * Extension point for subclasses to write chunk of items. Not required
     */

  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {}
    /**
     * Extension point for subclasses to perform postprocessing after all items have been processed. Not required
     */

  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {}
  }, {
    key: "setTotalItemCount",
    value: function setTotalItemCount(stepExecution, count) {
      stepExecution.executionContext.put(BatchStep.TOTAL_ITEM_COUNT_PROP, count);
    }
  }, {
    key: "getTotalItemCount",
    value: function getTotalItemCount(stepExecution) {
      return stepExecution.executionContext.get(BatchStep.TOTAL_ITEM_COUNT_PROP);
    }
  }, {
    key: "setCurrentItemCount",
    value: function setCurrentItemCount(stepExecution, count) {
      stepExecution.executionContext.put(BatchStep.CURRENT_ITEM_COUNT_PROP, count);
    }
  }, {
    key: "getCurrentItemCount",
    value: function getCurrentItemCount(stepExecution) {
      return stepExecution.executionContext.get(BatchStep.CURRENT_ITEM_COUNT_PROP) || 0;
    }
  }, {
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var _this2 = this;

      return Promise.resolve().then(function () {
        return _this2.init(stepExecution, jobResult);
      })["catch"](function (e) {
        _sdUtils.log.error("Failed to initialize batch step: " + _this2.name, e);

        throw e;
      }).then(function (totalItemCount) {
        return Promise.resolve().then(function () {
          _this2.setCurrentItemCount(stepExecution, _this2.getCurrentItemCount(stepExecution));

          _this2.setTotalItemCount(stepExecution, totalItemCount);

          return _this2.handleNextChunk(stepExecution, jobResult);
        })["catch"](function (e) {
          if (!(e instanceof _jobInterruptedException.JobInterruptedException)) {
            _sdUtils.log.error("Failed to handle batch step: " + _this2.name, e);
          }

          throw e;
        });
      }).then(function () {
        return Promise.resolve().then(function () {
          return _this2.postProcess(stepExecution, jobResult);
        })["catch"](function (e) {
          _sdUtils.log.error("Failed to postProcess batch step: " + _this2.name, e);

          throw e;
        });
      }).then(function () {
        stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
        return stepExecution;
      });
    }
  }, {
    key: "handleNextChunk",
    value: function handleNextChunk(stepExecution, jobResult) {
      var _this3 = this;

      var currentItemCount = this.getCurrentItemCount(stepExecution);
      var totalItemCount = this.getTotalItemCount(stepExecution);
      var chunkSize = Math.min(this.chunkSize, totalItemCount - currentItemCount);

      if (currentItemCount >= totalItemCount) {
        return stepExecution;
      }

      return this.checkJobExecutionFlags(stepExecution).then(function () {
        // Check if someone is trying to stop us
        if (stepExecution.terminateOnly) {
          throw new _jobInterruptedException.JobInterruptedException("JobExecution interrupted.");
        }

        return stepExecution;
      }).then(function () {
        return Promise.resolve().then(function () {
          return _this3.readNextChunk(stepExecution, currentItemCount, chunkSize, jobResult);
        })["catch"](function (e) {
          _sdUtils.log.error("Failed to read chunk (" + currentItemCount + "," + chunkSize + ") in batch step: " + _this3.name, e);

          throw e;
        });
      }).then(function (chunk) {
        return Promise.resolve().then(function () {
          return _this3.processChunk(stepExecution, chunk, currentItemCount, jobResult);
        })["catch"](function (e) {
          _sdUtils.log.error("Failed to process chunk (" + currentItemCount + "," + chunkSize + ") in batch step: " + _this3.name, e);

          throw e;
        });
      }).then(function (processedChunk) {
        return Promise.resolve().then(function () {
          return _this3.writeChunk(stepExecution, processedChunk, jobResult);
        })["catch"](function (e) {
          _sdUtils.log.error("Failed to write chunk (" + currentItemCount + "," + chunkSize + ") in batch step: " + _this3.name, e);

          throw e;
        });
      }).then(function (res) {
        currentItemCount += chunkSize;

        _this3.setCurrentItemCount(stepExecution, currentItemCount);

        return _this3.updateJobProgress(stepExecution).then(function () {
          return _this3.handleNextChunk(stepExecution, jobResult);
        });
      });
    }
  }, {
    key: "processChunk",
    value: function processChunk(stepExecution, chunk, currentItemCount, jobResult) {
      var _this4 = this; //TODO promisify


      return chunk.map(function (item, i) {
        return _this4.processItem(stepExecution, item, currentItemCount + i, jobResult);
      });
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(stepExecution) {
      return {
        total: this.getTotalItemCount(stepExecution),
        current: this.getCurrentItemCount(stepExecution)
      };
    }
  }, {
    key: "updateJobProgress",
    value: function updateJobProgress(stepExecution) {
      var progress = this.jobRepository.getJobByName(stepExecution.jobExecution.jobInstance.jobName).getProgress(stepExecution.jobExecution);
      return this.jobRepository.updateJobExecutionProgress(stepExecution.jobExecution.id, progress);
    }
  }, {
    key: "checkJobExecutionFlags",
    value: function checkJobExecutionFlags(stepExecution) {
      return this.jobRepository.getJobByName(stepExecution.jobExecution.jobInstance.jobName).checkExecutionFlags(stepExecution.jobExecution);
    }
  }]);

  return BatchStep;
}(_step.Step);

exports.BatchStep = BatchStep;
BatchStep.CURRENT_ITEM_COUNT_PROP = 'batch_step_current_item_count';
BatchStep.TOTAL_ITEM_COUNT_PROP = 'batch_step_total_item_count';

},{"../exceptions/job-interrupted-exception":35,"../job-status":53,"../step":58,"sd-utils":"sd-utils"}],29:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExtendableError = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var ExtendableError = function ExtendableError(message, data) {
  _classCallCheck(this, ExtendableError);

  this.message = message;
  this.data = data;
  this.name = this.constructor.name;
};

exports.ExtendableError = ExtendableError;

},{}],30:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extendableError = require("./extendable-error");

Object.keys(_extendableError).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _extendableError[key];
    }
  });
});

var _jobDataInvalidException = require("./job-data-invalid-exception");

Object.keys(_jobDataInvalidException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobDataInvalidException[key];
    }
  });
});

var _jobExecutionAlreadyRunningException = require("./job-execution-already-running-exception");

Object.keys(_jobExecutionAlreadyRunningException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecutionAlreadyRunningException[key];
    }
  });
});

var _jobInstanceAlreadyCompleteException = require("./job-instance-already-complete-exception");

Object.keys(_jobInstanceAlreadyCompleteException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobInstanceAlreadyCompleteException[key];
    }
  });
});

var _jobInterruptedException = require("./job-interrupted-exception");

Object.keys(_jobInterruptedException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobInterruptedException[key];
    }
  });
});

var _jobParametersInvalidException = require("./job-parameters-invalid-exception");

Object.keys(_jobParametersInvalidException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobParametersInvalidException[key];
    }
  });
});

var _jobRestartException = require("./job-restart-exception");

Object.keys(_jobRestartException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobRestartException[key];
    }
  });
});

},{"./extendable-error":29,"./job-data-invalid-exception":32,"./job-execution-already-running-exception":33,"./job-instance-already-complete-exception":34,"./job-interrupted-exception":35,"./job-parameters-invalid-exception":36,"./job-restart-exception":37}],31:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobComputationException = void 0;

var _extendableError = require("./extendable-error");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var JobComputationException =
/*#__PURE__*/
function (_ExtendableError) {
  _inherits(JobComputationException, _ExtendableError);

  function JobComputationException() {
    _classCallCheck(this, JobComputationException);

    return _possibleConstructorReturn(this, _getPrototypeOf(JobComputationException).apply(this, arguments));
  }

  return JobComputationException;
}(_extendableError.ExtendableError);

exports.JobComputationException = JobComputationException;

},{"./extendable-error":29}],32:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobDataInvalidException = void 0;

var _extendableError = require("./extendable-error");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var JobDataInvalidException =
/*#__PURE__*/
function (_ExtendableError) {
  _inherits(JobDataInvalidException, _ExtendableError);

  function JobDataInvalidException() {
    _classCallCheck(this, JobDataInvalidException);

    return _possibleConstructorReturn(this, _getPrototypeOf(JobDataInvalidException).apply(this, arguments));
  }

  return JobDataInvalidException;
}(_extendableError.ExtendableError);

exports.JobDataInvalidException = JobDataInvalidException;

},{"./extendable-error":29}],33:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobExecutionAlreadyRunningException = void 0;

var _extendableError = require("./extendable-error");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var JobExecutionAlreadyRunningException =
/*#__PURE__*/
function (_ExtendableError) {
  _inherits(JobExecutionAlreadyRunningException, _ExtendableError);

  function JobExecutionAlreadyRunningException() {
    _classCallCheck(this, JobExecutionAlreadyRunningException);

    return _possibleConstructorReturn(this, _getPrototypeOf(JobExecutionAlreadyRunningException).apply(this, arguments));
  }

  return JobExecutionAlreadyRunningException;
}(_extendableError.ExtendableError);

exports.JobExecutionAlreadyRunningException = JobExecutionAlreadyRunningException;

},{"./extendable-error":29}],34:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInstanceAlreadyCompleteException = void 0;

var _extendableError = require("./extendable-error");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var JobInstanceAlreadyCompleteException =
/*#__PURE__*/
function (_ExtendableError) {
  _inherits(JobInstanceAlreadyCompleteException, _ExtendableError);

  function JobInstanceAlreadyCompleteException() {
    _classCallCheck(this, JobInstanceAlreadyCompleteException);

    return _possibleConstructorReturn(this, _getPrototypeOf(JobInstanceAlreadyCompleteException).apply(this, arguments));
  }

  return JobInstanceAlreadyCompleteException;
}(_extendableError.ExtendableError);

exports.JobInstanceAlreadyCompleteException = JobInstanceAlreadyCompleteException;

},{"./extendable-error":29}],35:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInterruptedException = void 0;

var _extendableError = require("./extendable-error");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var JobInterruptedException =
/*#__PURE__*/
function (_ExtendableError) {
  _inherits(JobInterruptedException, _ExtendableError);

  function JobInterruptedException() {
    _classCallCheck(this, JobInterruptedException);

    return _possibleConstructorReturn(this, _getPrototypeOf(JobInterruptedException).apply(this, arguments));
  }

  return JobInterruptedException;
}(_extendableError.ExtendableError);

exports.JobInterruptedException = JobInterruptedException;

},{"./extendable-error":29}],36:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobParametersInvalidException = void 0;

var _extendableError = require("./extendable-error");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var JobParametersInvalidException =
/*#__PURE__*/
function (_ExtendableError) {
  _inherits(JobParametersInvalidException, _ExtendableError);

  function JobParametersInvalidException() {
    _classCallCheck(this, JobParametersInvalidException);

    return _possibleConstructorReturn(this, _getPrototypeOf(JobParametersInvalidException).apply(this, arguments));
  }

  return JobParametersInvalidException;
}(_extendableError.ExtendableError);

exports.JobParametersInvalidException = JobParametersInvalidException;

},{"./extendable-error":29}],37:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobRestartException = void 0;

var _extendableError = require("./extendable-error");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var JobRestartException =
/*#__PURE__*/
function (_ExtendableError) {
  _inherits(JobRestartException, _ExtendableError);

  function JobRestartException() {
    _classCallCheck(this, JobRestartException);

    return _possibleConstructorReturn(this, _getPrototypeOf(JobRestartException).apply(this, arguments));
  }

  return JobRestartException;
}(_extendableError.ExtendableError);

exports.JobRestartException = JobRestartException;

},{"./extendable-error":29}],38:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExecutionContext = void 0;

var _sdUtils = require("sd-utils");

var _sdModel = require("sd-model");

var _stepExecution = require("./step-execution");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ExecutionContext =
/*#__PURE__*/
function () {
  function ExecutionContext(context) {
    _classCallCheck(this, ExecutionContext);

    this.dirty = false;
    this.context = {};

    if (context) {
      this.context = _sdUtils.Utils.clone(context);
    }
  }

  _createClass(ExecutionContext, [{
    key: "put",
    value: function put(key, value) {
      var prevValue = this.context[key];

      if (value != null) {
        var result = this.context[key] = value;
        this.dirty = prevValue == null || prevValue != null && prevValue != value;
      } else {
        delete this.context[key];
        this.dirty = prevValue != null;
      }
    }
  }, {
    key: "get",
    value: function get(key) {
      return this.context[key];
    }
  }, {
    key: "containsKey",
    value: function containsKey(key) {
      return this.context.hasOwnProperty(key);
    }
  }, {
    key: "remove",
    value: function remove(key) {
      delete this.context[key];
    }
  }, {
    key: "setData",
    value: function setData(data) {
      //set data model
      return this.put("data", data);
    }
  }, {
    key: "getData",
    value: function getData() {
      // get data model
      return this.get("data");
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      var _this = this;

      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      var dto = _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (value instanceof _sdModel.DataModel) {
          return value.getDTO();
        }

        if (value && value.$ObjectWithIdAndEditableFields && value.id && _this.getData().findById(value.id)) {
          return {
            '$ObjectWithIdAndEditableFields': true,
            id: value.id
          };
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }
      }));

      return dto;
    }
  }]);

  return ExecutionContext;
}();

exports.ExecutionContext = ExecutionContext;

},{"./step-execution":57,"sd-model":"sd-model","sd-utils":"sd-utils"}],39:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _exportNames = {
  exceptions: true
};
exports.exceptions = void 0;

var exceptions = _interopRequireWildcard(require("./exceptions"));

exports.exceptions = exceptions;

var _executionContext = require("./execution-context");

Object.keys(_executionContext).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _executionContext[key];
    }
  });
});

var _job = require("./job");

Object.keys(_job).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _job[key];
    }
  });
});

var _jobExecution = require("./job-execution");

Object.keys(_jobExecution).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecution[key];
    }
  });
});

var _jobExecutionFlag = require("./job-execution-flag");

Object.keys(_jobExecutionFlag).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecutionFlag[key];
    }
  });
});

var _jobExecutionListener = require("./job-execution-listener");

Object.keys(_jobExecutionListener).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecutionListener[key];
    }
  });
});

var _jobInstance = require("./job-instance");

Object.keys(_jobInstance).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobInstance[key];
    }
  });
});

var _jobKeyGenerator = require("./job-key-generator");

Object.keys(_jobKeyGenerator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobKeyGenerator[key];
    }
  });
});

var _jobLauncher = require("./job-launcher");

Object.keys(_jobLauncher).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobLauncher[key];
    }
  });
});

var _jobParameterDefinition = require("./job-parameter-definition");

Object.keys(_jobParameterDefinition).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobParameterDefinition[key];
    }
  });
});

var _jobParameters = require("./job-parameters");

Object.keys(_jobParameters).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobParameters[key];
    }
  });
});

var _jobStatus = require("./job-status");

Object.keys(_jobStatus).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobStatus[key];
    }
  });
});

var _simpleJob = require("./simple-job");

Object.keys(_simpleJob).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _simpleJob[key];
    }
  });
});

var _step = require("./step");

Object.keys(_step).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _step[key];
    }
  });
});

var _stepExecution = require("./step-execution");

Object.keys(_stepExecution).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _stepExecution[key];
    }
  });
});

var _stepExecutionListener = require("./step-execution-listener");

Object.keys(_stepExecutionListener).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _stepExecutionListener[key];
    }
  });
});

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};

  if (obj != null) {
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

        if (desc && (desc.get || desc.set)) {
          Object.defineProperty(newObj, key, desc);
        } else {
          newObj[key] = obj[key];
        }
      }
    }
  }

  newObj["default"] = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

},{"./exceptions":30,"./execution-context":38,"./job":54,"./job-execution":42,"./job-execution-flag":40,"./job-execution-listener":41,"./job-instance":43,"./job-key-generator":44,"./job-launcher":45,"./job-parameter-definition":46,"./job-parameters":47,"./job-status":53,"./simple-job":55,"./step":58,"./step-execution":57,"./step-execution-listener":56}],40:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JOB_EXECUTION_FLAG = void 0;
var JOB_EXECUTION_FLAG = {
  STOP: 'STOP'
};
exports.JOB_EXECUTION_FLAG = JOB_EXECUTION_FLAG;

},{}],41:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobExecutionListener = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobExecutionListener =
/*#__PURE__*/
function () {
  function JobExecutionListener() {
    _classCallCheck(this, JobExecutionListener);
  }

  _createClass(JobExecutionListener, [{
    key: "beforeJob",

    /*Called before a job executes*/
    value: function beforeJob(jobExecution) {}
    /*Called after completion of a job. Called after both successful and failed executions*/

  }, {
    key: "afterJob",
    value: function afterJob(jobExecution) {}
  }]);

  return JobExecutionListener;
}();

exports.JobExecutionListener = JobExecutionListener;

},{}],42:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobExecution = void 0;

var _jobStatus = require("./job-status");

var _stepExecution = require("./step-execution");

var _sdUtils = require("sd-utils");

var _executionContext = require("./execution-context");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*domain object representing the execution of a job.*/


var JobExecution =
/*#__PURE__*/
function () {
  function JobExecution(jobInstance, jobParameters, id) {
    _classCallCheck(this, JobExecution);

    this.stepExecutions = [];
    this.status = _jobStatus.JOB_STATUS.STARTING;
    this.exitStatus = _jobStatus.JOB_STATUS.UNKNOWN;
    this.executionContext = new _executionContext.ExecutionContext();
    this.startTime = null;
    this.createTime = new Date();
    this.endTime = null;
    this.lastUpdated = null;
    this.failureExceptions = [];

    if (id === null || id === undefined) {
      this.id = _sdUtils.Utils.guid();
    } else {
      this.id = id;
    }

    this.jobInstance = jobInstance;
    this.jobParameters = jobParameters;
  }
  /**
   * Register a step execution with the current job execution.
   * @param stepName the name of the step the new execution is associated with
   */


  _createClass(JobExecution, [{
    key: "createStepExecution",
    value: function createStepExecution(stepName) {
      var stepExecution = new _stepExecution.StepExecution(stepName, this);
      this.stepExecutions.push(stepExecution);
      return stepExecution;
    }
  }, {
    key: "isRunning",
    value: function isRunning() {
      return !this.endTime;
    }
    /**
     * Test if this JobExecution has been signalled to
     * stop.
     */

  }, {
    key: "isStopping",
    value: function isStopping() {
      return this.status === _jobStatus.JOB_STATUS.STOPPING;
    }
    /**
     * Signal the JobExecution to stop.
     */

  }, {
    key: "stop",
    value: function stop() {
      this.stepExecutions.forEach(function (se) {
        se.terminateOnly = true;
      });
      this.status = _jobStatus.JOB_STATUS.STOPPING;
    }
  }, {
    key: "getData",
    value: function getData() {
      return this.executionContext.getData();
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      return _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (["jobParameters", "executionContext"].indexOf(key) > -1) {
          return value.getDTO();
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }

        if (value instanceof _stepExecution.StepExecution) {
          return value.getDTO(["jobExecution"], deepClone);
        }
      }));
    }
  }]);

  return JobExecution;
}();

exports.JobExecution = JobExecution;

},{"./execution-context":38,"./job-status":53,"./step-execution":57,"sd-utils":"sd-utils"}],43:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInstance = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
/* object representing a uniquely identifiable job run. JobInstance can be restarted multiple times in case of execution failure and it's lifecycle ends with first successful execution*/


var JobInstance = function JobInstance(id, jobName) {
  _classCallCheck(this, JobInstance);

  this.id = id;
  this.jobName = jobName;
};

exports.JobInstance = JobInstance;

},{}],44:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobKeyGenerator = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobKeyGenerator =
/*#__PURE__*/
function () {
  function JobKeyGenerator() {
    _classCallCheck(this, JobKeyGenerator);
  }

  _createClass(JobKeyGenerator, null, [{
    key: "generateKey",

    /*Method to generate the unique key used to identify a job instance.*/
    value: function generateKey(jobParameters) {
      var result = "";
      jobParameters.definitions.forEach(function (d, i) {
        if (d.identifying) {
          result += d.name + "=" + jobParameters.values[d.name] + ";";
        }
      });
      return result;
    }
  }]);

  return JobKeyGenerator;
}();

exports.JobKeyGenerator = JobKeyGenerator;

},{}],45:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobLauncher = void 0;

var _jobRestartException = require("./exceptions/job-restart-exception");

var _jobStatus = require("./job-status");

var _sdUtils = require("sd-utils");

var _jobParametersInvalidException = require("./exceptions/job-parameters-invalid-exception");

var _jobDataInvalidException = require("./exceptions/job-data-invalid-exception");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobLauncher =
/*#__PURE__*/
function () {
  function JobLauncher(jobRepository, jobWorker, dataModelSerializer) {
    _classCallCheck(this, JobLauncher);

    this.jobRepository = jobRepository;
    this.jobWorker = jobWorker;
    this.dataModelSerializer = dataModelSerializer;
  }

  _createClass(JobLauncher, [{
    key: "run",
    value: function run(jobOrName, jobParametersValues, data) {
      var _this = this;

      var resolvePromiseAfterJobIsLaunched = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var job;
      var jobParameters;
      return Promise.resolve().then(function () {
        if (_sdUtils.Utils.isString(jobOrName)) {
          job = _this.jobRepository.getJobByName(jobOrName);
        } else {
          job = jobOrName;
        }

        if (!job) {
          throw new _jobRestartException.JobRestartException("No such job: " + jobOrName);
        }

        jobParameters = job.createJobParameters(jobParametersValues);
        return _this.validate(job, jobParameters, data);
      }).then(function (valid) {
        return _this.jobRepository.createJobExecution(job.name, jobParameters, data).then(function (jobExecution) {
          if (_this.jobWorker) {
            _sdUtils.log.debug("Job: [" + job.name + "] execution [" + jobExecution.id + "] delegated to worker");

            _this.jobWorker.executeJob(jobExecution.id);

            return jobExecution;
          }

          var executionPromise = _this._execute(job, jobExecution);

          if (resolvePromiseAfterJobIsLaunched) {
            return jobExecution;
          }

          return executionPromise;
        });
      });
    }
  }, {
    key: "validate",
    value: function validate(job, jobParameters, data) {
      return this.jobRepository.getLastJobExecution(job.name, jobParameters).then(function (lastExecution) {
        if (lastExecution != null) {
          if (!job.isRestartable) {
            throw new _jobRestartException.JobRestartException("JobInstance already exists and is not restartable");
          }

          lastExecution.stepExecutions.forEach(function (execution) {
            if (execution.status == _jobStatus.JOB_STATUS.UNKNOWN) {
              throw new _jobRestartException.JobRestartException("Step [" + execution.stepName + "] is of status UNKNOWN");
            }
          });
        }

        if (job.jobParametersValidator && !job.jobParametersValidator.validate(jobParameters)) {
          throw new _jobParametersInvalidException.JobParametersInvalidException("Invalid job parameters in jobLauncher.run for job: " + job.name);
        }

        if (job.jobDataValidator && !job.jobDataValidator.validate(data)) {
          throw new _jobDataInvalidException.JobDataInvalidException("Invalid job data in jobLauncher.run for job: " + job.name);
        }

        return true;
      });
    }
    /**Execute previously created job execution*/

  }, {
    key: "execute",
    value: function execute(jobExecutionOrId) {
      var _this2 = this;

      return Promise.resolve().then(function () {
        if (_sdUtils.Utils.isString(jobExecutionOrId)) {
          return _this2.jobRepository.getJobExecutionById(jobExecutionOrId);
        }

        return jobExecutionOrId;
      }).then(function (jobExecution) {
        if (!jobExecution) {
          throw new _jobRestartException.JobRestartException("JobExecution [" + jobExecutionOrId + "] is not found");
        }

        if (jobExecution.status !== _jobStatus.JOB_STATUS.STARTING) {
          throw new _jobRestartException.JobRestartException("JobExecution [" + jobExecution.id + "] already started");
        }

        var jobName = jobExecution.jobInstance.jobName;

        var job = _this2.jobRepository.getJobByName(jobName);

        if (!job) {
          throw new _jobRestartException.JobRestartException("No such job: " + jobName);
        }

        return _this2._execute(job, jobExecution);
      });
    }
  }, {
    key: "_execute",
    value: function _execute(job, jobExecution) {
      var jobName = job.name;

      _sdUtils.log.info("Job: [" + jobName + "] launched with the following parameters: [" + jobExecution.jobParameters + "]", jobExecution.getData());

      return job.execute(jobExecution).then(function (jobExecution) {
        _sdUtils.log.info("Job: [" + jobName + "] completed with the following parameters: [" + jobExecution.jobParameters + "] and the following status: [" + jobExecution.status + "]");

        return jobExecution;
      })["catch"](function (e) {
        _sdUtils.log.error("Job: [" + jobName + "] failed unexpectedly and fatally with the following parameters: [" + jobExecution.jobParameters + "]", e);

        throw e;
      });
    }
  }]);

  return JobLauncher;
}();

exports.JobLauncher = JobLauncher;

},{"./exceptions/job-data-invalid-exception":32,"./exceptions/job-parameters-invalid-exception":36,"./exceptions/job-restart-exception":37,"./job-status":53,"sd-utils":"sd-utils"}],46:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobParameterDefinition = exports.PARAMETER_TYPE = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var PARAMETER_TYPE = {
  STRING: 'STRING',
  DATE: 'DATE',
  INTEGER: 'INTEGER',
  NUMBER: 'FLOAT',
  BOOLEAN: 'BOOLEAN',
  NUMBER_EXPRESSION: 'NUMBER_EXPRESSION',
  COMPOSITE: 'COMPOSITE' //composite parameter with nested subparameters

};
exports.PARAMETER_TYPE = PARAMETER_TYPE;

var JobParameterDefinition =
/*#__PURE__*/
function () {
  function JobParameterDefinition(name, typeOrNestedParametersDefinitions) {
    var minOccurs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
    var maxOccurs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
    var identifying = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
    var singleValueValidator = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;
    var validator = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;

    _classCallCheck(this, JobParameterDefinition);

    this.nestedParameters = [];
    this.required = true;
    this.name = name;

    if (_sdUtils.Utils.isArray(typeOrNestedParametersDefinitions)) {
      this.type = PARAMETER_TYPE.COMPOSITE;
      this.nestedParameters = typeOrNestedParametersDefinitions;
    } else {
      this.type = typeOrNestedParametersDefinitions;
    }

    this.validator = validator;
    this.singleValueValidator = singleValueValidator;
    this.identifying = identifying;
    this.minOccurs = minOccurs;
    this.maxOccurs = maxOccurs;
  }

  _createClass(JobParameterDefinition, [{
    key: "set",
    value: function set(key, val) {
      this[key] = val;
      return this;
    }
  }, {
    key: "validate",
    value: function validate(value, allValues) {
      var _this = this;

      var isArray = _sdUtils.Utils.isArray(value);

      if (this.maxOccurs > 1 && !isArray) {
        return false;
      }

      if (!isArray) {
        return this.validateSingleValue(value, allValues);
      }

      if (value.length < this.minOccurs || value.length > this.maxOccurs) {
        return false;
      }

      if (!value.every(function (v) {
        return _this.validateSingleValue(v, value);
      })) {
        return false;
      }

      if (this.validator) {
        return this.validator(value, allValues);
      }

      return true;
    }
  }, {
    key: "validateSingleValue",
    // allValues - all values on the same level
    value: function validateSingleValue(value, allValues) {
      if (!value && value !== 0 && value !== false && this.minOccurs > 0) {
        return !this.required;
      }

      if (PARAMETER_TYPE.STRING === this.type && !_sdUtils.Utils.isString(value)) {
        return false;
      }

      if (PARAMETER_TYPE.DATE === this.type && !_sdUtils.Utils.isDate(value)) {
        return false;
      }

      if (PARAMETER_TYPE.INTEGER === this.type && !_sdUtils.Utils.isInt(value)) {
        return false;
      }

      if (PARAMETER_TYPE.NUMBER === this.type && !_sdUtils.Utils.isNumber(value)) {
        return false;
      }

      if (PARAMETER_TYPE.BOOLEAN === this.type && !_sdUtils.Utils.isBoolean(value)) {
        return false;
      }

      if (PARAMETER_TYPE.NUMBER_EXPRESSION === this.type) {
        value = JobParameterDefinition.computeNumberExpression(value);

        if (value === null) {
          return false;
        }
      }

      if (PARAMETER_TYPE.COMPOSITE === this.type) {
        if (!_sdUtils.Utils.isObject(value)) {
          return false;
        }

        if (!this.nestedParameters.every(function (nestedDef, i) {
          return nestedDef.validate(value[nestedDef.name]);
        })) {
          return false;
        }
      }

      if (this.singleValueValidator) {
        return this.singleValueValidator(value, allValues);
      }

      return true;
    }
  }, {
    key: "value",
    value: function value(_value) {
      if (PARAMETER_TYPE.NUMBER_EXPRESSION === this.type) {
        return JobParameterDefinition.computeNumberExpression(_value);
      }

      return _value;
    }
  }], [{
    key: "computeNumberExpression",
    value: function computeNumberExpression(val) {
      var parsed = parseFloat(val);

      if (parsed === Infinity || parsed === -Infinity) {
        return parsed;
      }

      if (!_sdExpressionEngine.ExpressionEngine.validate(val, {}, false)) {
        return null;
      }

      return _sdExpressionEngine.ExpressionEngine.eval(val, true);
    }
  }]);

  return JobParameterDefinition;
}();

exports.JobParameterDefinition = JobParameterDefinition;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],47:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobParameters = void 0;

var _jobParameterDefinition = require("./job-parameter-definition");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobParameters =
/*#__PURE__*/
function () {
  function JobParameters(values) {
    _classCallCheck(this, JobParameters);

    this.definitions = [];
    this.values = {};
    this.initDefinitions();
    this.initDefaultValues();

    if (values) {
      _sdUtils.Utils.deepExtend(this.values, values);
    }
  }

  _createClass(JobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {}
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {}
  }, {
    key: "validate",
    value: function validate() {
      var _this = this;

      return this.definitions.every(function (def, i) {
        return def.validate(_this.values[def.name], _this.values);
      });
    }
  }, {
    key: "getDefinition",
    value: function getDefinition(path) {
      var defs = this.definitions;
      var def = null;

      if (!path.split().every(function (name) {
        def = _sdUtils.Utils.find(defs, function (d) {
          return d.name == name;
        });

        if (!def) {
          return false;
        }

        defs = def.nestedParameters;
        return true;
      })) {
        return null;
      }

      return def;
    }
    /*get or set value by path*/

  }, {
    key: "value",
    value: function value(path, _value) {
      if (arguments.length === 1) {
        var def = this.getDefinition(path);

        var val = _sdUtils.Utils.get(this.values, path, null);

        if (def) {
          return def.value(val);
        }

        return val;
      }

      _sdUtils.Utils.set(this.values, path, _value);

      return _value;
    }
  }, {
    key: "toString",
    value: function toString() {
      var _this2 = this;

      var result = "JobParameters[";
      this.definitions.forEach(function (d, i) {
        var val = _this2.values[d.name]; // if(Utils.isArray(val)){
        //     var values = val;
        //
        //
        // }
        // if(PARAMETER_TYPE.COMPOSITE == d.type){
        //
        // }

        result += d.name + "=" + val + ";";
      });
      result += "]";
      return result;
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      return {
        values: this.values
      };
    }
  }]);

  return JobParameters;
}();

exports.JobParameters = JobParameters;

},{"./job-parameter-definition":46,"sd-utils":"sd-utils"}],48:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.IdbJobRepository = void 0;

var _jobRepository = require("./job-repository");

var _idb = require("idb");

var _sdUtils = require("sd-utils");

var _jobExecution = require("../job-execution");

var _jobInstance = require("../job-instance");

var _stepExecution = require("../step-execution");

var _executionContext = require("../execution-context");

var _sdModel = require("sd-model");

var _jobResult = require("../job-result");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/* IndexedDB job repository*/


var IdbJobRepository =
/*#__PURE__*/
function (_JobRepository) {
  _inherits(IdbJobRepository, _JobRepository);

  function IdbJobRepository(expressionsReviver) {
    var _this;

    var dbName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'sd-job-repository';
    var deleteDB = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    _classCallCheck(this, IdbJobRepository);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(IdbJobRepository).call(this));
    _this.dbName = dbName;
    _this.expressionsReviver = expressionsReviver;

    if (deleteDB) {
      _this.deleteDB().then(function () {
        _this.initDB();
      })["catch"](function (e) {
        _sdUtils.log.error(e);

        _this.initDB();
      });
    } else {
      _this.initDB();
    }

    return _this;
  }

  _createClass(IdbJobRepository, [{
    key: "initDB",
    value: function initDB() {
      this.dbPromise = (0, _idb.openDb)(this.dbName, 2, function (upgradeDB) {
        // Note: we don't use 'break' in this switch statement,
        // the fall-through behaviour is what we want.
        switch (upgradeDB.oldVersion) {
          case 0:
            upgradeDB.createObjectStore('job-instances');
            var jobExecutionsOS = upgradeDB.createObjectStore('job-executions');
            jobExecutionsOS.createIndex("jobInstanceId", "jobInstance.id", {
              unique: false
            });
            jobExecutionsOS.createIndex("createTime", "createTime", {
              unique: false
            });
            jobExecutionsOS.createIndex("status", "status", {
              unique: false
            });
            upgradeDB.createObjectStore('job-execution-progress');
            upgradeDB.createObjectStore('job-execution-flags');
            var stepExecutionsOS = upgradeDB.createObjectStore('step-executions');
            stepExecutionsOS.createIndex("jobExecutionId", "jobExecutionId", {
              unique: false
            });
            var jobResultOS = upgradeDB.createObjectStore('job-results');
            jobResultOS.createIndex("jobInstanceId", "jobInstance.id", {
              unique: true
            });

          case 1:
            upgradeDB.transaction.objectStore('job-instances').createIndex("id", "id", {
              unique: true
            });
        }
      });
      this.jobInstanceDao = new ObjectStoreDao('job-instances', this.dbPromise);
      this.jobExecutionDao = new ObjectStoreDao('job-executions', this.dbPromise);
      this.jobExecutionProgressDao = new ObjectStoreDao('job-execution-progress', this.dbPromise);
      this.jobExecutionFlagDao = new ObjectStoreDao('job-execution-flags', this.dbPromise);
      this.stepExecutionDao = new ObjectStoreDao('step-executions', this.dbPromise);
      this.jobResultDao = new ObjectStoreDao('job-results', this.dbPromise);
    }
  }, {
    key: "deleteDB",
    value: function deleteDB() {
      var _this2 = this;

      return Promise.resolve().then(function (_) {
        return (0, _idb.deleteDb)(_this2.dbName);
      });
    }
  }, {
    key: "removeJobInstance",
    value: function removeJobInstance(jobInstance, jobParameters) {
      var _this3 = this;

      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      return this.jobInstanceDao.remove(key).then(function () {
        _this3.findJobExecutions(jobInstance, false).then(function (jobExecutions) {
          //  Not waiting for promise resolves
          jobExecutions.forEach(_this3.removeJobExecution, _this3);
        });

        _this3.getJobResultByInstance(jobInstance).then(function (jobResult) {
          return _this3.removeJobResult(jobResult);
        });
      });
    }
  }, {
    key: "removeJobExecution",
    value: function removeJobExecution(jobExecution) {
      var _this4 = this;

      return this.jobExecutionDao.remove(jobExecution.id).then(function () {
        return _this4.findStepExecutions(jobExecution.id, false).then(function (stepExecutions) {
          // Not waiting for promise resolves
          stepExecutions.forEach(_this4.removeStepExecution, _this4);
        });
      });
    }
  }, {
    key: "removeStepExecution",
    value: function removeStepExecution(stepExecution) {
      return this.stepExecutionDao.remove(stepExecution.id);
    }
  }, {
    key: "removeJobResult",
    value: function removeJobResult(jobResult) {
      return this.jobResultDao.remove(jobResult.id);
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      var _this5 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.jobResultDao.get(jobResultId).then(function (dto) {
        return dto && revive ? _this5.reviveJobResult(dto) : dto;
      });
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      var _this6 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.jobResultDao.getByIndex("jobInstanceId", jobInstance.id).then(function (dto) {
        return dto && revive ? _this6.reviveJobResult(dto) : dto;
      });
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobExecution) {
      var _this7 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.getJobResultByInstance(jobExecution.jobInstance, false).then(function (dto) {
        return dto && revive ? _this7.reviveJobResult(dto, jobExecution) : dto;
      });
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      var dto = jobResult.getDTO();
      return this.jobResultDao.set(jobResult.id, dto).then(function (r) {
        return jobResult;
      });
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      var _this8 = this;

      var key = this.generateJobInstanceKey(jobName, jobParameters);
      return this.jobInstanceDao.get(key).then(function (dto) {
        return dto ? _this8.reviveJobInstance(dto) : dto;
      });
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(jobInstance, jobParameters) {
      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      return this.jobInstanceDao.set(key, jobInstance).then(function (r) {
        return jobInstance;
      });
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      var _this9 = this;

      var dto = jobExecution.getDTO();
      var stepExecutionsDTOs = dto.stepExecutions;
      dto.stepExecutions = null;
      return this.jobExecutionDao.set(jobExecution.id, dto).then(function (r) {
        return _this9.saveStepExecutionsDTOS(stepExecutionsDTOs);
      }).then(function (r) {
        return jobExecution;
      });
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      return this.jobExecutionProgressDao.set(jobExecutionId, progress);
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      return this.jobExecutionProgressDao.get(jobExecutionId);
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      return this.jobExecutionFlagDao.set(jobExecutionId, flag);
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      return this.jobExecutionFlagDao.get(jobExecutionId);
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      var dto = stepExecution.getDTO(["jobExecution"]);
      return this.stepExecutionDao.set(stepExecution.id, dto).then(function (r) {
        return stepExecution;
      });
    }
  }, {
    key: "saveStepExecutionsDTOS",
    value: function saveStepExecutionsDTOS(stepExecutions) {
      var _this10 = this;

      var savedExecutions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

      if (stepExecutions.length <= savedExecutions.length) {
        return Promise.resolve(savedExecutions);
      }

      var stepExecutionDTO = stepExecutions[savedExecutions.length];
      return this.stepExecutionDao.set(stepExecutionDTO.id, stepExecutionDTO).then(function () {
        savedExecutions.push(stepExecutionDTO);
        return _this10.saveStepExecutionsDTOS(stepExecutions, savedExecutions);
      });
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      var _this11 = this;

      return this.jobExecutionDao.get(id).then(function (dto) {
        return _this11.fetchJobExecutionRelations(dto);
      });
    }
  }, {
    key: "fetchJobExecutionRelations",
    value: function fetchJobExecutionRelations(jobExecutionDTO) {
      var _this12 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (!jobExecutionDTO) {
        return Promise.resolve(null);
      }

      return this.findStepExecutions(jobExecutionDTO.id, false).then(function (steps) {
        jobExecutionDTO.stepExecutions = steps;

        if (!revive) {
          return jobExecutionDTO;
        }

        return _this12.reviveJobExecution(jobExecutionDTO);
      });
    }
  }, {
    key: "fetchJobExecutionsRelations",
    value: function fetchJobExecutionsRelations(jobExecutionDtoList) {
      var _this13 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var fetched = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

      if (jobExecutionDtoList.length <= fetched.length) {
        return Promise.resolve(fetched);
      }

      return this.fetchJobExecutionRelations(jobExecutionDtoList[fetched.length], revive).then(function (jobExecution) {
        fetched.push(jobExecution);
        return _this13.fetchJobExecutionsRelations(jobExecutionDtoList, revive, fetched);
      });
    }
  }, {
    key: "findStepExecutions",
    value: function findStepExecutions(jobExecutionId) {
      var _this14 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.stepExecutionDao.getAllByIndex("jobExecutionId", jobExecutionId).then(function (dtos) {
        if (!revive) {
          return dtos;
        }

        return dtos.map(function (dto) {
          return _this14.reviveStepExecution(dto);
        });
      });
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      var _this15 = this;

      var fetchRelationsAndRevive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.jobExecutionDao.getAllByIndex("jobInstanceId", jobInstance.id).then(function (values) {
        var sorted = values.sort(function (a, b) {
          return a.createTime.getTime() - b.createTime.getTime();
        });

        if (!fetchRelationsAndRevive) {
          return sorted;
        }

        return _this15.fetchJobExecutionsRelations(sorted, true);
      });
    }
  }, {
    key: "getLastJobExecutionByInstance",
    value: function getLastJobExecutionByInstance(jobInstance) {
      var _this16 = this;

      var fetchRelationsAndRevive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.findJobExecutions(jobInstance, false).then(function (executions) {
        var execution = executions[executions.length - 1];

        if (!fetchRelationsAndRevive) {
          return execution;
        }

        _this16.fetchJobExecutionRelations(execution);
      });
    }
  }, {
    key: "getLastStepExecution",
    value: function getLastStepExecution(jobInstance, stepName) {
      return this.findJobExecutions(jobInstance).then(function (jobExecutions) {
        var stepExecutions = [];
        jobExecutions.forEach(function (jobExecution) {
          return jobExecution.stepExecutions.filter(function (s) {
            return s.stepName === stepName;
          }).forEach(function (s) {
            return stepExecutions.push(s);
          });
        });
        var latest = null;
        stepExecutions.forEach(function (s) {
          if (latest == null || latest.startTime.getTime() < s.startTime.getTime()) {
            latest = s;
          }
        });
        return latest;
      });
    }
  }, {
    key: "reviveJobInstance",
    value: function reviveJobInstance(dto) {
      return new _jobInstance.JobInstance(dto.id, dto.jobName);
    }
  }, {
    key: "reviveExecutionContext",
    value: function reviveExecutionContext(dto) {
      var executionContext = new _executionContext.ExecutionContext();
      executionContext.context = dto.context;
      var data = executionContext.getData();

      if (data) {
        var dataModel = new _sdModel.DataModel();
        dataModel.loadFromDTO(data, this.expressionsReviver);
        executionContext.setData(null);
        this.reviveFromDTO(executionContext.context, dto.context, dataModel);
        executionContext.setData(dataModel);
      }

      return executionContext;
    }
  }, {
    key: "reviveFromDTO",
    value: function reviveFromDTO(target, dto, dataModel) {
      return _sdUtils.Utils.mergeWith(target, dto, function (value, dtoValue, key) {
        if (dtoValue && dtoValue.$ObjectWithIdAndEditableFields && dtoValue.id) {
          return dataModel.findById(dtoValue.id) || value;
        }
      });
    }
  }, {
    key: "reviveJobExecution",
    value: function reviveJobExecution(dto) {
      var _this17 = this;

      var job = this.getJobByName(dto.jobInstance.jobName);
      var jobInstance = this.reviveJobInstance(dto.jobInstance);
      var jobParameters = job.createJobParameters(dto.jobParameters.values);
      var jobExecution = new _jobExecution.JobExecution(jobInstance, jobParameters, dto.id);
      var executionContext = this.reviveExecutionContext(dto.executionContext);
      return _sdUtils.Utils.mergeWith(jobExecution, dto, function (objValue, srcValue, key, object, source, stack) {
        if (key === "jobInstance") {
          return jobInstance;
        }

        if (key === "executionContext") {
          return executionContext;
        }

        if (key === "jobParameters") {
          return jobParameters;
        }

        if (key === "jobExecution") {
          return jobExecution;
        }

        if (key === "stepExecutions") {
          return srcValue.map(function (stepDTO) {
            return _this17.reviveStepExecution(stepDTO, jobExecution);
          });
        }
      });
    }
  }, {
    key: "reviveStepExecution",
    value: function reviveStepExecution(dto, jobExecution) {
      var stepExecution = new _stepExecution.StepExecution(dto.stepName, jobExecution, dto.id);
      var executionContext = this.reviveExecutionContext(dto.executionContext);
      return _sdUtils.Utils.mergeWith(stepExecution, dto, function (objValue, srcValue, key, object, source, stack) {
        if (key === "jobExecution") {
          return jobExecution;
        }

        if (key === "executionContext") {
          return executionContext;
        }
      });
    }
  }, {
    key: "reviveJobResult",
    value: function reviveJobResult(dto) {
      var _this18 = this;

      var jobExecution = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var job = this.getJobByName(dto.jobInstance.jobName);
      var jobInstance = this.reviveJobInstance(dto.jobInstance);
      var contextPromise;

      if (jobExecution != null) {
        contextPromise = Promise.resolve(jobExecution.executionContext);
      } else {
        contextPromise = this.getLastJobExecutionByInstance(jobInstance, false).then(function (jobExecutionDto) {
          return _this18.reviveExecutionContext(jobExecutionDto.executionContext);
        });
      }

      return contextPromise.then(function (executionContext) {
        return job.reviveResultData(_this18.reviveFromDTO({}, dto.data, executionContext.getData()), executionContext);
      }).then(function (d) {
        return new _jobResult.JobResult(jobInstance, dto.id, d);
      });
    }
  }]);

  return IdbJobRepository;
}(_jobRepository.JobRepository);

exports.IdbJobRepository = IdbJobRepository;

var ObjectStoreDao =
/*#__PURE__*/
function () {
  function ObjectStoreDao(name, dbPromise) {
    _classCallCheck(this, ObjectStoreDao);

    this.name = name;
    this.dbPromise = dbPromise;
  }

  _createClass(ObjectStoreDao, [{
    key: "get",
    value: function get(key) {
      var _this19 = this;

      return this.dbPromise.then(function (db) {
        return db.transaction(_this19.name).objectStore(_this19.name).get(key);
      });
    }
  }, {
    key: "getAllByIndex",
    value: function getAllByIndex(indexName, key) {
      var _this20 = this;

      return this.dbPromise.then(function (db) {
        return db.transaction(_this20.name).objectStore(_this20.name).index(indexName).getAll(key);
      });
    }
  }, {
    key: "getByIndex",
    value: function getByIndex(indexName, key) {
      var _this21 = this;

      return this.dbPromise.then(function (db) {
        return db.transaction(_this21.name).objectStore(_this21.name).index(indexName).get(key);
      });
    }
  }, {
    key: "set",
    value: function set(key, val) {
      var _this22 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this22.name, 'readwrite');
        tx.objectStore(_this22.name).put(val, key);
        return tx.complete;
      });
    }
  }, {
    key: "remove",
    value: function remove(key) {
      var _this23 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this23.name, 'readwrite');
        tx.objectStore(_this23.name)["delete"](key);
        return tx.complete;
      });
    }
  }, {
    key: "clear",
    value: function clear() {
      var _this24 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this24.name, 'readwrite');
        tx.objectStore(_this24.name).clear();
        return tx.complete;
      });
    }
  }, {
    key: "keys",
    value: function keys() {
      var _this25 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this25.name);
        var keys = [];
        var store = tx.objectStore(_this25.name); // This would be store.getAllKeys(), but it isn't supported by Edge or Safari.
        // openKeyCursor isn't supported by Safari, so we fall back

        (store.iterateKeyCursor || store.iterateCursor).call(store, function (cursor) {
          if (!cursor) return;
          keys.push(cursor.key);
          cursor["continue"]();
        });
        return tx.complete.then(function () {
          return keys;
        });
      });
    }
  }]);

  return ObjectStoreDao;
}();

},{"../execution-context":38,"../job-execution":42,"../job-instance":43,"../job-result":52,"../step-execution":57,"./job-repository":49,"idb":1,"sd-model":"sd-model","sd-utils":"sd-utils"}],49:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobRepository = void 0;

var _jobKeyGenerator = require("../job-key-generator");

var _jobInstance = require("../job-instance");

var _sdUtils = require("sd-utils");

var _jobExecution = require("../job-execution");

var _jobExecutionAlreadyRunningException = require("../exceptions/job-execution-already-running-exception");

var _jobStatus = require("../job-status");

var _jobInstanceAlreadyCompleteException = require("../exceptions/job-instance-already-complete-exception");

var _executionContext = require("../execution-context");

var _stepExecution = require("../step-execution");

var _sdModel = require("sd-model");

var _jobResult = require("../job-result");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobRepository =
/*#__PURE__*/
function () {
  function JobRepository() {
    _classCallCheck(this, JobRepository);

    this.jobByName = {};
  }

  _createClass(JobRepository, [{
    key: "registerJob",
    value: function registerJob(job) {
      this.jobByName[job.name] = job;
    }
  }, {
    key: "getJobByName",
    value: function getJobByName(name) {
      return this.jobByName[name];
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      throw "JobRepository getJobInstance function not implemented!";
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(key, jobInstance) {
      throw "JobRepository.saveJobInstance function not implemented!";
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      throw "JobRepository.getJobExecutionById function not implemented!";
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      throw "JobRepository.saveJobInstance function not implemented!";
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      throw "JobRepository.saveJobInstance function not implemented!";
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      throw "JobRepository.getJobExecutionProgress function not implemented!";
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      throw "JobRepository.saveJobExecutionFlag function not implemented!";
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      throw "JobRepository.getJobExecutionFlag function not implemented!";
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      throw "JobRepository.saveStepExecution function not implemented!";
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      throw "JobRepository.findJobExecutions function not implemented!";
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      throw "JobRepository.getJobResult function not implemented!";
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      throw "JobRepository.getJobResultByInstance function not implemented!";
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobInstance) {
      throw "JobRepository.getJobResultByExecution function not implemented!";
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      throw "JobRepository.setJobResult function not implemented!";
    }
  }, {
    key: "removeJobInstance",
    value: function removeJobInstance(jobInstance, jobParameters) {
      throw "JobRepository.removeJobInstance function not implemented!";
    }
  }, {
    key: "removeJobExecution",
    value: function removeJobExecution(jobExecution) {
      throw "JobRepository.removeJobExecution function not implemented!";
    }
  }, {
    key: "removeStepExecution",
    value: function removeStepExecution(stepExecution) {
      throw "JobRepository.removeStepExecution function not implemented!";
    }
  }, {
    key: "removeJobResult",
    value: function removeJobResult(jobResult) {
      throw "JobRepository.removeJobResult function not implemented!";
    }
    /*Create a new JobInstance with the name and job parameters provided. return promise*/

  }, {
    key: "createJobInstance",
    value: function createJobInstance(jobName, jobParameters) {
      var jobInstance = new _jobInstance.JobInstance(_sdUtils.Utils.guid(), jobName);
      return this.saveJobInstance(jobInstance, jobParameters);
    }
    /*Check if an instance of this job already exists with the parameters provided.*/

  }, {
    key: "isJobInstanceExists",
    value: function isJobInstanceExists(jobName, jobParameters) {
      return this.getJobInstance(jobName, jobParameters).then(function (result) {
        return !!result;
      })["catch"](function (error) {
        return false;
      });
    }
  }, {
    key: "generateJobInstanceKey",
    value: function generateJobInstanceKey(jobName, jobParameters) {
      return jobName + "|" + _jobKeyGenerator.JobKeyGenerator.generateKey(jobParameters);
    }
    /*Create a JobExecution for a given  Job and JobParameters. If matching JobInstance already exists,
     * the job must be restartable and it's last JobExecution must *not* be
     * completed. If matching JobInstance does not exist yet it will be  created.*/

  }, {
    key: "createJobExecution",
    value: function createJobExecution(jobName, jobParameters, data) {
      var _this = this;

      return this.getJobInstance(jobName, jobParameters).then(function (jobInstance) {
        if (jobInstance != null) {
          return _this.findJobExecutions(jobInstance).then(function (executions) {
            executions.forEach(function (execution) {
              if (execution.isRunning()) {
                throw new _jobExecutionAlreadyRunningException.JobExecutionAlreadyRunningException("A job execution for this job is already running: " + jobInstance.jobName);
              }

              if (execution.status == _jobStatus.JOB_STATUS.COMPLETED || execution.status == _jobStatus.JOB_STATUS.ABANDONED) {
                throw new _jobInstanceAlreadyCompleteException.JobInstanceAlreadyCompleteException("A job instance already exists and is complete for parameters=" + jobParameters + ".  If you want to run this job again, change the parameters.");
              }
            });
            var executionContext = executions[executions.length - 1].executionContext;
            return [jobInstance, executionContext];
          });
        } // no job found, create one


        jobInstance = _this.createJobInstance(jobName, jobParameters);
        var executionContext = new _executionContext.ExecutionContext();
        var dataModel = new _sdModel.DataModel();

        dataModel._setNewState(data.createStateSnapshot());

        executionContext.setData(dataModel);
        return Promise.all([jobInstance, executionContext]);
      }).then(function (instanceAndExecutionContext) {
        var jobExecution = new _jobExecution.JobExecution(instanceAndExecutionContext[0], jobParameters);
        jobExecution.executionContext = instanceAndExecutionContext[1];
        jobExecution.lastUpdated = new Date();
        return _this.saveJobExecution(jobExecution);
      })["catch"](function (e) {
        throw e;
      });
    }
  }, {
    key: "getLastJobExecution",
    value: function getLastJobExecution(jobName, jobParameters) {
      var _this2 = this;

      return this.getJobInstance(jobName, jobParameters).then(function (jobInstance) {
        if (!jobInstance) {
          return null;
        }

        return _this2.getLastJobExecutionByInstance(jobInstance);
      });
    }
  }, {
    key: "getLastJobExecutionByInstance",
    value: function getLastJobExecutionByInstance(jobInstance) {
      return this.findJobExecutions(jobInstance).then(function (executions) {
        return executions[executions.length - 1];
      });
    }
  }, {
    key: "getLastStepExecution",
    value: function getLastStepExecution(jobInstance, stepName) {
      return this.findJobExecutions(jobInstance).then(function (jobExecutions) {
        var stepExecutions = [];
        jobExecutions.forEach(function (jobExecution) {
          return jobExecution.stepExecutions.filter(function (s) {
            return s.stepName === stepName;
          }).forEach(function (s) {
            return stepExecutions.push(s);
          });
        });
        var latest = null;
        stepExecutions.forEach(function (s) {
          if (latest == null || latest.startTime.getTime() < s.startTime.getTime()) {
            latest = s;
          }
        });
        return latest;
      });
    }
  }, {
    key: "addStepExecution",
    value: function addStepExecution(stepExecution) {
      stepExecution.lastUpdated = new Date();
      return this.saveStepExecution(stepExecution);
    }
  }, {
    key: "update",
    value: function update(o) {
      o.lastUpdated = new Date();

      if (o instanceof _jobExecution.JobExecution) {
        return this.saveJobExecution(o);
      }

      if (o instanceof _stepExecution.StepExecution) {
        return this.saveStepExecution(o);
      }

      throw "Object not updatable: " + o;
    }
  }, {
    key: "remove",
    value: function remove(o) {
      if (o instanceof _jobExecution.JobExecution) {
        return this.removeJobExecution(o);
      }

      if (o instanceof _stepExecution.StepExecution) {
        return this.removeStepExecution(o);
      }

      if (o instanceof _jobResult.JobResult) {
        return this.removeJobResult();
      }

      return Promise.reject("Object not removable: " + o);
    }
  }, {
    key: "reviveJobInstance",
    value: function reviveJobInstance(dto) {
      return dto;
    }
  }, {
    key: "reviveExecutionContext",
    value: function reviveExecutionContext(dto) {
      return dto;
    }
  }, {
    key: "reviveJobExecution",
    value: function reviveJobExecution(dto) {
      return dto;
    }
  }, {
    key: "reviveStepExecution",
    value: function reviveStepExecution(dto, jobExecution) {
      return dto;
    }
  }]);

  return JobRepository;
}();

exports.JobRepository = JobRepository;

},{"../exceptions/job-execution-already-running-exception":33,"../exceptions/job-instance-already-complete-exception":34,"../execution-context":38,"../job-execution":42,"../job-instance":43,"../job-key-generator":44,"../job-result":52,"../job-status":53,"../step-execution":57,"sd-model":"sd-model","sd-utils":"sd-utils"}],50:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SimpleJobRepository = void 0;

var _jobRepository = require("./job-repository");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var SimpleJobRepository =
/*#__PURE__*/
function (_JobRepository) {
  _inherits(SimpleJobRepository, _JobRepository);

  function SimpleJobRepository() {
    var _getPrototypeOf2;

    var _temp, _this;

    _classCallCheck(this, SimpleJobRepository);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _possibleConstructorReturn(_this, (_temp = _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SimpleJobRepository)).call.apply(_getPrototypeOf2, [this].concat(args))), _this.jobInstancesByKey = {}, _this.jobExecutions = [], _this.stepExecutions = [], _this.executionProgress = {}, _this.executionFlags = {}, _this.jobResults = [], _temp));
  }

  _createClass(SimpleJobRepository, [{
    key: "removeJobInstance",
    value: function removeJobInstance(jobInstance) {
      var _this2 = this;

      _sdUtils.Utils.forOwn(this.jobInstancesByKey, function (ji, key) {
        if (ji === jobInstance) {
          delete _this2.jobInstancesByKey[key];
        }
      });

      this.jobExecutions.filter(function (jobExecution) {
        return jobExecution.jobInstance.id == jobInstance.id;
      }).reverse().forEach(this.removeJobExecution, this);
      this.jobResults.filter(function (jobResult) {
        return jobResult.jobInstance.id == jobInstance.id;
      }).reverse().forEach(this.removeJobResult, this);
      return Promise.resolve();
    }
  }, {
    key: "removeJobExecution",
    value: function removeJobExecution(jobExecution) {
      var index = this.jobExecutions.indexOf(jobExecution);

      if (index > -1) {
        this.jobExecutions.splice(index, 1);
      }

      this.stepExecutions.filter(function (stepExecution) {
        return stepExecution.jobExecution.id === jobExecution.id;
      }).reverse().forEach(this.removeStepExecution, this);
      return Promise.resolve();
    }
  }, {
    key: "removeStepExecution",
    value: function removeStepExecution(stepExecution) {
      var index = this.stepExecutions.indexOf(stepExecution);

      if (index > -1) {
        this.stepExecutions.splice(index, 1);
      }

      return Promise.resolve();
    }
  }, {
    key: "removeJobResult",
    value: function removeJobResult(jobResult) {
      var index = this.jobResults.indexOf(jobResult);

      if (index > -1) {
        this.jobResults.splice(index, 1);
      }

      return Promise.resolve();
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      var key = this.generateJobInstanceKey(jobName, jobParameters);
      return Promise.resolve(this.jobInstancesByKey[key]);
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(jobInstance, jobParameters) {
      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      this.jobInstancesByKey[key] = jobInstance;
      return Promise.resolve(jobInstance);
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      return Promise.resolve(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.id === jobResultId;
      }));
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      return Promise.resolve(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.jobInstance.id === jobInstance.id;
      }));
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobExecution) {
      return this.getJobResultByInstance(jobExecution.jobInstance);
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      this.jobResults.push(jobResult);
      return Promise.resolve(jobResult);
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      return Promise.resolve(_sdUtils.Utils.find(this.jobExecutions, function (ex) {
        return ex.id === id;
      }));
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      this.jobExecutions.push(jobExecution);
      return Promise.resolve(jobExecution);
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      this.executionProgress[jobExecutionId] = progress;
      return Promise.resolve(progress);
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      return Promise.resolve(this.executionProgress[jobExecutionId]);
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      this.executionFlags[jobExecutionId] = flag;
      return Promise.resolve(flag);
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      return Promise.resolve(this.executionFlags[jobExecutionId]);
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      this.stepExecutions.push(stepExecution);
      return Promise.resolve(stepExecution);
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      return Promise.resolve(this.jobExecutions.filter(function (e) {
        return e.jobInstance.id == jobInstance.id;
      }).sort(function (a, b) {
        return a.createTime.getTime() - b.createTime.getTime();
      }));
    }
  }]);

  return SimpleJobRepository;
}(_jobRepository.JobRepository);

exports.SimpleJobRepository = SimpleJobRepository;

},{"./job-repository":49,"sd-utils":"sd-utils"}],51:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimeoutJobRepository = void 0;

var _jobRepository = require("./job-repository");

var _sdUtils = require("sd-utils");

var _simpleJobRepository = require("./simple-job-repository");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var TimeoutJobRepository =
/*#__PURE__*/
function (_SimpleJobRepository) {
  _inherits(TimeoutJobRepository, _SimpleJobRepository);

  function TimeoutJobRepository() {
    _classCallCheck(this, TimeoutJobRepository);

    return _possibleConstructorReturn(this, _getPrototypeOf(TimeoutJobRepository).apply(this, arguments));
  }

  _createClass(TimeoutJobRepository, [{
    key: "createTimeoutPromise",
    value: function createTimeoutPromise(valueToResolve) {
      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      return new Promise(function (resolve) {
        setTimeout(function () {
          resolve(valueToResolve);
        }, delay);
      });
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      var key = this.generateJobInstanceKey(jobName, jobParameters);
      return this.createTimeoutPromise(this.jobInstancesByKey[key]);
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(jobInstance, jobParameters) {
      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      this.jobInstancesByKey[key] = jobInstance;
      return this.createTimeoutPromise(jobInstance);
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      return this.createTimeoutPromise(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.id === jobResultId;
      }));
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      return this.createTimeoutPromise(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.jobInstance.id === jobInstance.id;
      }));
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobExecution) {
      return this.getJobResultByInstance(jobExecution.jobInstance);
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      this.jobResults.push(jobResult);
      return this.createTimeoutPromise(jobResult);
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      return this.createTimeoutPromise(_sdUtils.Utils.find(this.jobExecutions, function (ex) {
        return ex.id === id;
      }));
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      this.jobExecutions.push(jobExecution);
      return this.createTimeoutPromise(jobExecution);
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      this.executionProgress[jobExecutionId] = progress;
      return this.createTimeoutPromise(progress);
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      return this.createTimeoutPromise(this.executionProgress[jobExecutionId]);
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      this.executionFlags[jobExecutionId] = flag;
      return this.createTimeoutPromise(flag);
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      return this.createTimeoutPromise(this.executionFlags[jobExecutionId]);
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      this.stepExecutions.push(stepExecution);
      return this.createTimeoutPromise(stepExecution);
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      return this.createTimeoutPromise(this.jobExecutions.filter(function (e) {
        return e.jobInstance.id == jobInstance.id;
      }).sort(function (a, b) {
        return a.createTime.getTime() - b.createTime.getTime();
      }));
    }
  }, {
    key: "remove",
    value: function remove(object) {//TODO
    }
  }]);

  return TimeoutJobRepository;
}(_simpleJobRepository.SimpleJobRepository);

exports.TimeoutJobRepository = TimeoutJobRepository;

},{"./job-repository":49,"./simple-job-repository":50,"sd-utils":"sd-utils"}],52:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobResult = void 0;

var _jobStatus = require("./job-status");

var _stepExecution = require("./step-execution");

var _sdUtils = require("sd-utils");

var _executionContext = require("./execution-context");

var _jobExecution = require("./job-execution");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*domain object representing the result of a job instance.*/


var JobResult =
/*#__PURE__*/
function () {
  // job result data - this is not a data model!
  function JobResult(jobInstance, id, data) {
    _classCallCheck(this, JobResult);

    this.lastUpdated = null;

    if (id === null || id === undefined) {
      this.id = _sdUtils.Utils.guid();
    } else {
      this.id = id;
    }

    this.jobInstance = jobInstance;
    this.data = data;
  }

  _createClass(JobResult, [{
    key: "getDTO",
    value: function getDTO() {
      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      var dto = _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (value && value.$ObjectWithIdAndEditableFields && value.id) {
          return {
            '$ObjectWithIdAndEditableFields': true,
            id: value.id
          };
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }
      }));

      return dto;
    }
  }]);

  return JobResult;
}();

exports.JobResult = JobResult;

},{"./execution-context":38,"./job-execution":42,"./job-status":53,"./step-execution":57,"sd-utils":"sd-utils"}],53:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JOB_STATUS = void 0;
var JOB_STATUS = {
  COMPLETED: 'COMPLETED',
  STARTING: 'STARTING',
  STARTED: 'STARTED',
  STOPPING: 'STOPPING',
  STOPPED: 'STOPPED',
  FAILED: 'FAILED',
  UNKNOWN: 'UNKNOWN',
  ABANDONED: 'ABANDONED',
  EXECUTING: 'EXECUTING' //for exit status only

};
exports.JOB_STATUS = JOB_STATUS;

},{}],54:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Job = void 0;

var _sdUtils = require("sd-utils");

var _jobStatus = require("./job-status");

var _jobInterruptedException = require("./exceptions/job-interrupted-exception");

var _jobParametersInvalidException = require("./exceptions/job-parameters-invalid-exception");

var _jobDataInvalidException = require("./exceptions/job-data-invalid-exception");

var _jobExecutionFlag = require("./job-execution-flag");

var _jobResult = require("./job-result");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/**
 * Base class for jobs
 * A Job is an entity that encapsulates an entire job process ( an abstraction representing the configuration of a job)
 * */


var Job =
/*#__PURE__*/
function () {
  function Job(name, jobRepository, expressionsEvaluator, objectiveRulesManager) {
    _classCallCheck(this, Job);

    this.steps = [];
    this.isRestartable = true;
    this.executionListeners = [];
    this.name = name;
    this.jobParametersValidator = this.getJobParametersValidator();
    this.jobDataValidator = this.getJobDataValidator();
    this.jobRepository = jobRepository;
    this.expressionsEvaluator = expressionsEvaluator;
    this.objectiveRulesManager = objectiveRulesManager;
  }

  _createClass(Job, [{
    key: "setJobRepository",
    value: function setJobRepository(jobRepository) {
      this.jobRepository = jobRepository;
    }
  }, {
    key: "execute",
    value: function execute(execution) {
      var _this = this;

      _sdUtils.log.debug("Job execution starting: ", execution);

      var jobResult;
      return this.checkExecutionFlags(execution).then(function (execution) {
        if (execution.status === _jobStatus.JOB_STATUS.STOPPING) {
          // The job was already stopped
          execution.status = _jobStatus.JOB_STATUS.STOPPED;
          execution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;

          _sdUtils.log.debug("Job execution was stopped: " + execution);

          return execution;
        }

        if (_this.jobParametersValidator && !_this.jobParametersValidator.validate(execution.jobParameters)) {
          throw new _jobParametersInvalidException.JobParametersInvalidException("Invalid job parameters in job execute");
        }

        if (_this.jobDataValidator && !_this.jobDataValidator.validate(execution.getData())) {
          throw new _jobDataInvalidException.JobDataInvalidException("Invalid job data in job execute");
        }

        execution.startTime = new Date();
        return Promise.all([_this.updateStatus(execution, _jobStatus.JOB_STATUS.STARTED), _this.getResult(execution), _this.updateProgress(execution)]).then(function (res) {
          execution = res[0];
          jobResult = res[1];

          if (!jobResult) {
            jobResult = new _jobResult.JobResult(execution.jobInstance);
          }

          _this.executionListeners.forEach(function (listener) {
            return listener.beforeJob(execution);
          });

          return _this.doExecute(execution, jobResult);
        });
      }).then(function (execution) {
        _sdUtils.log.debug("Job execution complete: ", execution);

        return execution;
      })["catch"](function (e) {
        if (e instanceof _jobInterruptedException.JobInterruptedException) {
          _sdUtils.log.info("Encountered interruption executing job", e);

          execution.status = _jobStatus.JOB_STATUS.STOPPED;
          execution.exitStatus = _jobStatus.JOB_STATUS.STOPPED;
        } else {
          _sdUtils.log.error("Encountered fatal error executing job", e);

          execution.status = _jobStatus.JOB_STATUS.FAILED;
          execution.exitStatus = _jobStatus.JOB_STATUS.FAILED;
        }

        execution.failureExceptions.push(e);
        return execution;
      }).then(function (execution) {
        if (jobResult) {
          return _this.jobRepository.saveJobResult(jobResult).then(function () {
            return execution;
          });
        }

        return execution;
      })["catch"](function (e) {
        _sdUtils.log.error("Encountered fatal error saving job results", e);

        if (e) {
          execution.failureExceptions.push(e);
        }

        execution.status = _jobStatus.JOB_STATUS.FAILED;
        execution.exitStatus = _jobStatus.JOB_STATUS.FAILED;
        return execution;
      }).then(function (execution) {
        execution.endTime = new Date();
        return Promise.all([_this.jobRepository.update(execution), _this.updateProgress(execution)]).then(function (res) {
          return res[0];
        });
      }).then(function (execution) {
        try {
          _this.executionListeners.forEach(function (listener) {
            return listener.afterJob(execution);
          });
        } catch (e) {
          _sdUtils.log.error("Exception encountered in afterStep callback", e);
        }

        return execution;
      });
    }
  }, {
    key: "updateStatus",
    value: function updateStatus(jobExecution, status) {
      jobExecution.status = status;
      return this.jobRepository.update(jobExecution);
    }
  }, {
    key: "updateProgress",
    value: function updateProgress(jobExecution) {
      return this.jobRepository.updateJobExecutionProgress(jobExecution.id, this.getProgress(jobExecution));
    }
    /* Extension point for subclasses allowing them to concentrate on processing logic and ignore listeners, returns promise*/

  }, {
    key: "doExecute",
    value: function doExecute(execution, jobResult) {
      throw 'doExecute function not implemented for job: ' + this.name;
    }
  }, {
    key: "getJobParametersValidator",
    value: function getJobParametersValidator() {
      return {
        validate: function validate(params) {
          return params.validate();
        }
      };
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return true;
        }
      };
    }
  }, {
    key: "addStep",
    value: function addStep(step) {
      this.steps.push(step);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      throw 'createJobParameters function not implemented for job: ' + this.name;
    }
    /*Should return progress object with fields:
    * current
    * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      return {
        total: 1,
        current: execution.status === _jobStatus.JOB_STATUS.COMPLETED ? 1 : 0
      };
    }
  }, {
    key: "registerExecutionListener",
    value: function registerExecutionListener(listener) {
      this.executionListeners.push(listener);
    }
  }, {
    key: "checkExecutionFlags",
    value: function checkExecutionFlags(execution) {
      return this.jobRepository.getJobExecutionFlag(execution.id).then(function (flag) {
        if (_jobExecutionFlag.JOB_EXECUTION_FLAG.STOP === flag) {
          execution.stop();
        }

        return execution;
      });
    }
  }, {
    key: "getResult",
    value: function getResult(execution) {
      return this.jobRepository.getJobResultByExecution(execution);
    }
    /* revive job result data (after conversion to dto) if needed*/

  }, {
    key: "reviveResultData",
    value: function reviveResultData(data, executionContext) {
      return data;
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      throw 'jobResultToCsvRows function not implemented for job: ' + this.name;
    }
  }]);

  return Job;
}();

exports.Job = Job;

},{"./exceptions/job-data-invalid-exception":32,"./exceptions/job-interrupted-exception":35,"./exceptions/job-parameters-invalid-exception":36,"./job-execution-flag":40,"./job-result":52,"./job-status":53,"sd-utils":"sd-utils"}],55:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SimpleJob = void 0;

var _sdUtils = require("sd-utils");

var _jobStatus = require("./job-status");

var _job = require("./job");

var _executionContext = require("./execution-context");

var _step = require("./step");

var _jobInterruptedException = require("./exceptions/job-interrupted-exception");

var _jobRestartException = require("./exceptions/job-restart-exception");

var _jobExecutionFlag = require("./job-execution-flag");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);

      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/* Simple Job that sequentially executes a job by iterating through its list of steps.  Any Step that fails will fail the job.  The job is
 considered complete when all steps have been executed.*/


var SimpleJob =
/*#__PURE__*/
function (_Job) {
  _inherits(SimpleJob, _Job);

  function SimpleJob(name, jobRepository, expressionsEvaluator, objectiveRulesManager) {
    _classCallCheck(this, SimpleJob);

    return _possibleConstructorReturn(this, _getPrototypeOf(SimpleJob).call(this, name, jobRepository, expressionsEvaluator, objectiveRulesManager));
  }

  _createClass(SimpleJob, [{
    key: "getStep",
    value: function getStep(stepName) {
      return _sdUtils.Utils.find(this.steps, function (s) {
        return s.name == stepName;
      });
    }
  }, {
    key: "doExecute",
    value: function doExecute(execution, jobResult) {
      return this.handleNextStep(execution, jobResult).then(function (lastExecutedStepExecution) {
        if (lastExecutedStepExecution != null) {
          var _execution$failureExc;

          _sdUtils.log.debug("Updating JobExecution status: ", lastExecutedStepExecution);

          execution.status = lastExecutedStepExecution.status;
          execution.exitStatus = lastExecutedStepExecution.exitStatus;

          (_execution$failureExc = execution.failureExceptions).push.apply(_execution$failureExc, _toConsumableArray(lastExecutedStepExecution.failureExceptions));
        }

        return execution;
      });
    }
  }, {
    key: "handleNextStep",
    value: function handleNextStep(jobExecution, jobResult) {
      var _this = this;

      var prevStep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var prevStepExecution = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      var stepIndex = 0;

      if (prevStep) {
        stepIndex = this.steps.indexOf(prevStep) + 1;
      }

      if (stepIndex >= this.steps.length) {
        return Promise.resolve(prevStepExecution);
      }

      var step = this.steps[stepIndex];
      return this.handleStep(step, jobExecution, jobResult).then(function (stepExecution) {
        if (stepExecution.status !== _jobStatus.JOB_STATUS.COMPLETED) {
          // Terminate the job if a step fails
          return stepExecution;
        }

        return _this.handleNextStep(jobExecution, jobResult, step, stepExecution);
      });
    }
  }, {
    key: "handleStep",
    value: function handleStep(step, jobExecution, jobResult) {
      var _this2 = this;

      var jobInstance = jobExecution.jobInstance;
      return this.checkExecutionFlags(jobExecution).then(function (jobExecution) {
        if (jobExecution.isStopping()) {
          throw new _jobInterruptedException.JobInterruptedException("JobExecution interrupted.");
        }

        return _this2.jobRepository.getLastStepExecution(jobInstance, step.name);
      }).then(function (lastStepExecution) {
        if (_this2.stepExecutionPartOfExistingJobExecution(jobExecution, lastStepExecution)) {
          // If the last execution of this step was in the same job, it's probably intentional so we want to run it again.
          _sdUtils.log.info("Duplicate step detected in execution of job. step: " + step.name + " jobName: ", jobInstance.jobName);

          lastStepExecution = null;
        }

        var currentStepExecution = lastStepExecution;

        if (!_this2.shouldStart(currentStepExecution, jobExecution, step)) {
          return currentStepExecution;
        }

        currentStepExecution = jobExecution.createStepExecution(step.name);
        var isCompleted = lastStepExecution != null && lastStepExecution.status === _jobStatus.JOB_STATUS.COMPLETED;
        var isRestart = lastStepExecution != null && !isCompleted;
        var skipExecution = isCompleted && step.skipOnRestartIfCompleted;

        if (isRestart) {
          currentStepExecution.executionContext = lastStepExecution.executionContext;

          if (lastStepExecution.executionContext.containsKey("executed")) {
            currentStepExecution.executionContext.remove("executed");
          }
        } else {
          currentStepExecution.executionContext = new _executionContext.ExecutionContext();
        }

        if (skipExecution) {
          currentStepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
          currentStepExecution.status = _jobStatus.JOB_STATUS.COMPLETED;
          currentStepExecution.executionContext.put("skipped", true);
        }

        return _this2.jobRepository.addStepExecution(currentStepExecution).then(function (_currentStepExecution) {
          currentStepExecution = _currentStepExecution;

          if (skipExecution) {
            _sdUtils.log.info("Skipping completed step execution: [" + step.name + "]");

            return currentStepExecution;
          }

          _sdUtils.log.info("Executing step: [" + step.name + "]");

          return step.execute(currentStepExecution, jobResult);
        }).then(function () {
          currentStepExecution.executionContext.put("executed", true);
          return currentStepExecution;
        })["catch"](function (e) {
          jobExecution.status = _jobStatus.JOB_STATUS.FAILED;
          return _this2.jobRepository.update(jobExecution).then(function (jobExecution) {
            throw e;
          });
        });
      }).then(function (currentStepExecution) {
        if (currentStepExecution.status == _jobStatus.JOB_STATUS.STOPPING || currentStepExecution.status == _jobStatus.JOB_STATUS.STOPPED) {
          // Ensure that the job gets the message that it is stopping
          jobExecution.status = _jobStatus.JOB_STATUS.STOPPING; // throw new Error("Job interrupted by step execution");
        }

        return _this2.updateProgress(jobExecution).then(function () {
          return currentStepExecution;
        });
      });
    }
  }, {
    key: "stepExecutionPartOfExistingJobExecution",
    value: function stepExecutionPartOfExistingJobExecution(jobExecution, stepExecution) {
      return stepExecution != null && stepExecution.jobExecution.id == jobExecution.id;
    }
  }, {
    key: "shouldStart",
    value: function shouldStart(lastStepExecution, execution, step) {
      var stepStatus;

      if (lastStepExecution == null) {
        stepStatus = _jobStatus.JOB_STATUS.STARTING;
      } else {
        stepStatus = lastStepExecution.status;
      }

      if (stepStatus == _jobStatus.JOB_STATUS.UNKNOWN) {
        throw new _jobRestartException.JobRestartException("Cannot restart step from UNKNOWN status");
      }

      return stepStatus != _jobStatus.JOB_STATUS.COMPLETED || step.isRestartable;
    }
  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      var completedSteps = execution.stepExecutions.length;
      var progress = {
        total: this.steps.length,
        current: completedSteps
      };

      if (!completedSteps) {
        return progress;
      }

      if (_jobStatus.JOB_STATUS.COMPLETED !== execution.stepExecutions[execution.stepExecutions.length - 1].status) {
        progress.current--;
      }

      return progress;
    }
  }, {
    key: "addStep",
    value: function addStep() {
      if (arguments.length === 1) {
        return _get(_getPrototypeOf(SimpleJob.prototype), "addStep", this).call(this, arguments[0]);
      }

      var step = new _step.Step(arguments[0], this.jobRepository);
      step.doExecute = arguments[1];
      return _get(_getPrototypeOf(SimpleJob.prototype), "addStep", this).call(this, step);
    }
  }]);

  return SimpleJob;
}(_job.Job);

exports.SimpleJob = SimpleJob;

},{"./exceptions/job-interrupted-exception":35,"./exceptions/job-restart-exception":37,"./execution-context":38,"./job":54,"./job-execution-flag":40,"./job-status":53,"./step":58,"sd-utils":"sd-utils"}],56:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StepExecutionListener = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var StepExecutionListener =
/*#__PURE__*/
function () {
  function StepExecutionListener() {
    _classCallCheck(this, StepExecutionListener);
  }

  _createClass(StepExecutionListener, [{
    key: "beforeStep",

    /*Called before a step executes*/
    value: function beforeStep(jobExecution) {}
    /*Called after completion of a step. Called after both successful and failed executions*/

  }, {
    key: "afterStep",
    value: function afterStep(jobExecution) {}
  }]);

  return StepExecutionListener;
}();

exports.StepExecutionListener = StepExecutionListener;

},{}],57:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StepExecution = void 0;

var _sdUtils = require("sd-utils");

var _executionContext = require("./execution-context");

var _jobStatus = require("./job-status");

var _jobExecution = require("./job-execution");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*
 representation of the execution of a step
 */


var StepExecution =
/*#__PURE__*/
function () {
  //execution context for single step level,
  //flag to indicate that an execution should halt
  function StepExecution(stepName, jobExecution, id) {
    _classCallCheck(this, StepExecution);

    this.status = _jobStatus.JOB_STATUS.STARTING;
    this.exitStatus = _jobStatus.JOB_STATUS.EXECUTING;
    this.executionContext = new _executionContext.ExecutionContext();
    this.startTime = new Date();
    this.endTime = null;
    this.lastUpdated = null;
    this.terminateOnly = false;
    this.failureExceptions = [];

    if (id === null || id === undefined) {
      this.id = _sdUtils.Utils.guid();
    } else {
      this.id = id;
    }

    this.stepName = stepName;
    this.jobExecution = jobExecution;
    this.jobExecutionId = jobExecution.id;
  }

  _createClass(StepExecution, [{
    key: "getJobParameters",
    value: function getJobParameters() {
      return this.jobExecution.jobParameters;
    }
  }, {
    key: "getJobExecutionContext",
    value: function getJobExecutionContext() {
      return this.jobExecution.executionContext;
    }
  }, {
    key: "getData",
    value: function getData() {
      return this.jobExecution.getData();
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      return _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (["executionContext"].indexOf(key) > -1) {
          return value.getDTO();
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }

        if (value instanceof _jobExecution.JobExecution) {
          return value.getDTO(["stepExecutions"], deepClone);
        }
      }));
    }
  }]);

  return StepExecution;
}();

exports.StepExecution = StepExecution;

},{"./execution-context":38,"./job-execution":42,"./job-status":53,"sd-utils":"sd-utils"}],58:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Step = void 0;

var _jobStatus = require("./job-status");

var _sdUtils = require("sd-utils");

var _jobInterruptedException = require("./exceptions/job-interrupted-exception");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*domain object representing the configuration of a job step*/


var Step =
/*#__PURE__*/
function () {
  function Step(name, jobRepository) {
    _classCallCheck(this, Step);

    this.isRestartable = true;
    this.skipOnRestartIfCompleted = true;
    this.steps = [];
    this.executionListeners = [];
    this.name = name;
    this.jobRepository = jobRepository;
  }

  _createClass(Step, [{
    key: "setJobRepository",
    value: function setJobRepository(jobRepository) {
      this.jobRepository = jobRepository;
    }
    /*Process the step and assign progress and status meta information to the StepExecution provided*/

  }, {
    key: "execute",
    value: function execute(stepExecution, jobResult) {
      var _this = this;

      _sdUtils.log.debug("Executing step: name=" + this.name);

      stepExecution.startTime = new Date();
      stepExecution.status = _jobStatus.JOB_STATUS.STARTED;
      var exitStatus;
      return this.jobRepository.update(stepExecution).then(function (stepExecution) {
        exitStatus = _jobStatus.JOB_STATUS.EXECUTING;

        _this.executionListeners.forEach(function (listener) {
          return listener.beforeStep(stepExecution);
        });

        _this.open(stepExecution.executionContext);

        return _this.doExecute(stepExecution, jobResult);
      }).then(function (_stepExecution) {
        stepExecution = _stepExecution;
        exitStatus = stepExecution.exitStatus; // Check if someone is trying to stop us

        if (stepExecution.terminateOnly) {
          throw new _jobInterruptedException.JobInterruptedException("JobExecution interrupted.");
        } // Need to upgrade here not set, in case the execution was stopped


        stepExecution.status = _jobStatus.JOB_STATUS.COMPLETED;

        _sdUtils.log.debug("Step execution success: name=" + _this.name);

        return stepExecution;
      })["catch"](function (e) {
        stepExecution.status = _this.determineJobStatus(e);
        exitStatus = stepExecution.status;
        stepExecution.failureExceptions.push(e);

        if (stepExecution.status == _jobStatus.JOB_STATUS.STOPPED) {
          _sdUtils.log.info("Encountered interruption executing step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);
        } else {
          _sdUtils.log.error("Encountered an error executing step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);
        }

        return stepExecution;
      }).then(function (stepExecution) {
        try {
          stepExecution.exitStatus = exitStatus;

          _this.executionListeners.forEach(function (listener) {
            return listener.afterStep(stepExecution);
          });
        } catch (e) {
          _sdUtils.log.error("Exception in afterStep callback in step " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);
        }

        stepExecution.endTime = new Date();
        stepExecution.exitStatus = exitStatus;
        return _this.jobRepository.update(stepExecution);
      }).then(function (stepExecution) {
        try {
          _this.close(stepExecution.executionContext);
        } catch (e) {
          _sdUtils.log.error("Exception while closing step execution resources in step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);

          stepExecution.failureExceptions.push(e);
        }

        try {
          _this.close(stepExecution.executionContext);
        } catch (e) {
          _sdUtils.log.error("Exception while closing step execution resources in step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);

          stepExecution.failureExceptions.push(e);
        } // doExecutionRelease();


        _sdUtils.log.debug("Step execution complete: " + stepExecution.id);

        return stepExecution;
      });
    }
  }, {
    key: "determineJobStatus",
    value: function determineJobStatus(e) {
      if (e instanceof _jobInterruptedException.JobInterruptedException) {
        return _jobStatus.JOB_STATUS.STOPPED;
      } else {
        return _jobStatus.JOB_STATUS.FAILED;
      }
    }
    /**
     * Extension point for subclasses to execute business logic. Subclasses should set the exitStatus on the
     * StepExecution before returning. Must return stepExecution
     */

  }, {
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {}
    /**
     * Extension point for subclasses to provide callbacks to their collaborators at the beginning of a step, to open or
     * acquire resources. Does nothing by default.
     */

  }, {
    key: "open",
    value: function open(executionContext) {}
    /**
     * Extension point for subclasses to provide callbacks to their collaborators at the end of a step (right at the end
     * of the finally block), to close or release resources. Does nothing by default.
     */

  }, {
    key: "close",
    value: function close(executionContext) {}
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(stepExecution) {
      return {
        total: 1,
        current: stepExecution.status === _jobStatus.JOB_STATUS.COMPLETED ? 1 : 0
      };
    }
  }]);

  return Step;
}();

exports.Step = Step;

},{"./exceptions/job-interrupted-exception":35,"./job-status":53,"sd-utils":"sd-utils"}],59:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _exportNames = {
  engine: true
};
exports.engine = void 0;

var engine = _interopRequireWildcard(require("./engine/index"));

exports.engine = engine;

var _jobsManager = require("./jobs-manager");

Object.keys(_jobsManager).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobsManager[key];
    }
  });
});

var _jobWorker = require("./job-worker");

Object.keys(_jobWorker).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobWorker[key];
    }
  });
});

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};

  if (obj != null) {
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

        if (desc && (desc.get || desc.set)) {
          Object.defineProperty(newObj, key, desc);
        } else {
          newObj[key] = obj[key];
        }
      }
    }
  }

  newObj["default"] = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

},{"./engine/index":39,"./job-worker":61,"./jobs-manager":62}],60:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInstanceManager = exports.JobInstanceManagerConfig = void 0;

var _jobExecutionListener = require("./engine/job-execution-listener");

var _jobStatus = require("./engine/job-status");

var _jobInstance = require("./engine/job-instance");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var JobInstanceManagerConfig = function JobInstanceManagerConfig(custom) {
  _classCallCheck(this, JobInstanceManagerConfig);

  this.onJobStarted = function () {};

  this.onJobCompleted = function (result) {};

  this.onJobFailed = function (errors) {};

  this.onJobStopped = function () {};

  this.onJobTerminated = function () {};

  this.onProgress = function (progress) {};

  this.updateInterval = 100;

  if (custom) {
    _sdUtils.Utils.deepExtend(this, custom);
  }
};
/*convenience class for managing and tracking job instance progress*/


exports.JobInstanceManagerConfig = JobInstanceManagerConfig;

var JobInstanceManager =
/*#__PURE__*/
function (_JobExecutionListener) {
  _inherits(JobInstanceManager, _JobExecutionListener);

  function JobInstanceManager(jobsManger, jobInstanceOrExecution, config) {
    var _this;

    _classCallCheck(this, JobInstanceManager);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(JobInstanceManager).call(this));
    _this.progress = null;
    _this.config = new JobInstanceManagerConfig(config);
    _this.jobsManger = jobsManger;

    if (jobInstanceOrExecution instanceof _jobInstance.JobInstance) {
      _this.jobInstance = jobInstanceOrExecution;

      _this.getLastJobExecution().then(function (je) {
        _this.checkProgress();
      });
    } else {
      _this.lastJobExecution = jobInstanceOrExecution;
      _this.jobInstance = _this.lastJobExecution.jobInstance;

      _this.checkProgress();
    }

    if (_this.lastJobExecution && !_this.lastJobExecution.isRunning()) {
      _this.afterJob(_this.lastJobExecution);

      return _possibleConstructorReturn(_this);
    }

    jobsManger.registerJobExecutionListener(_assertThisInitialized(_this));
    return _this;
  }

  _createClass(JobInstanceManager, [{
    key: "checkProgress",
    value: function checkProgress() {
      var _this2 = this;

      var self = this;

      if (this.terminated || !this.lastJobExecution.isRunning() || this.getProgressPercents(this.progress) === 100) {
        return;
      }

      this.jobsManger.getProgress(this.lastJobExecution).then(function (progress) {
        _this2.lastUpdateTime = new Date();

        if (progress) {
          _this2.progress = progress;

          _this2.config.onProgress.call(_this2.config.callbacksThisArg || _this2, progress);
        }

        setTimeout(function () {
          self.checkProgress();
        }, _this2.config.updateInterval);
      });
    }
  }, {
    key: "beforeJob",
    value: function beforeJob(jobExecution) {
      if (jobExecution.jobInstance.id !== this.jobInstance.id) {
        return;
      }

      this.lastJobExecution = jobExecution;
      this.config.onJobStarted.call(this.config.callbacksThisArg || this);
    }
  }, {
    key: "getProgressPercents",
    value: function getProgressPercents(progress) {
      if (!progress) {
        return 0;
      }

      return progress.current * 100 / progress.total;
    }
  }, {
    key: "getProgressFromExecution",
    value: function getProgressFromExecution(jobExecution) {
      var job = this.jobsManger.getJobByName(jobExecution.jobInstance.jobName);
      return job.getProgress(jobExecution);
    }
  }, {
    key: "afterJob",
    value: function afterJob(jobExecution) {
      var _this3 = this;

      if (jobExecution.jobInstance.id !== this.jobInstance.id) {
        return;
      }

      this.lastJobExecution = jobExecution;

      if (_jobStatus.JOB_STATUS.COMPLETED === jobExecution.status) {
        this.jobsManger.deregisterJobExecutionListener(this);
        this.progress = this.getProgressFromExecution(jobExecution);
        this.config.onProgress.call(this.config.callbacksThisArg || this, this.progress);
        this.jobsManger.getResult(jobExecution).then(function (result) {
          _this3.config.onJobCompleted.call(_this3.config.callbacksThisArg || _this3, result.data);
        })["catch"](function (e) {
          _sdUtils.log.error(e);
        });
      } else if (_jobStatus.JOB_STATUS.FAILED === jobExecution.status) {
        this.config.onJobFailed.call(this.config.callbacksThisArg || this, jobExecution.failureExceptions);
      } else if (_jobStatus.JOB_STATUS.STOPPED === jobExecution.status) {
        this.config.onJobStopped.call(this.config.callbacksThisArg || this);
      }
    }
  }, {
    key: "getLastJobExecution",
    value: function getLastJobExecution() {
      var _this4 = this;

      var forceUpdate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      if (!this.lastJobExecution || forceUpdate) {
        return this.jobsManger.jobRepository.getLastJobExecutionByInstance(this.jobInstance).then(function (je) {
          _this4.lastJobExecution = je;
          return je;
        });
      }

      return Promise.resolve(this.lastJobExecution);
    }
  }, {
    key: "stop",
    value: function stop() {
      var _this5 = this;

      return this.getLastJobExecution().then(function () {
        return _this5.jobsManger.stop(_this5.lastJobExecution);
      });
    }
  }, {
    key: "resume",
    value: function resume() {
      var _this6 = this;

      return this.getLastJobExecution().then(function () {
        return _this6.jobsManger.run(_this6.jobInstance.jobName, _this6.lastJobExecution.jobParameters.values, _this6.lastJobExecution.getData()).then(function (je) {
          _this6.lastJobExecution = je;

          _this6.checkProgress();

          return true;
        })["catch"](function (e) {
          _sdUtils.log.error(e);

          return false;
        });
      });
    }
  }, {
    key: "terminate",
    value: function terminate() {
      var _this7 = this;

      return this.getLastJobExecution().then(function () {
        return _this7.jobsManger.terminate(_this7.jobInstance).then(function () {
          _this7.terminated = true;

          _this7.config.onJobTerminated.call(_this7.config.callbacksThisArg || _this7, _this7.lastJobExecution);

          _this7.jobsManger.deregisterJobExecutionListener(_this7);

          return _this7.lastJobExecution;
        });
      })["catch"](function (e) {
        _sdUtils.log.error(e);

        return false;
      });
    }
  }]);

  return JobInstanceManager;
}(_jobExecutionListener.JobExecutionListener);

exports.JobInstanceManager = JobInstanceManager;

},{"./engine/job-execution-listener":41,"./engine/job-instance":43,"./engine/job-status":53,"sd-utils":"sd-utils"}],61:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobWorker = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobWorker =
/*#__PURE__*/
function () {
  function JobWorker(url, defaultListener, onError) {
    _classCallCheck(this, JobWorker);

    this.listeners = {};
    var instance = this;
    this.worker = new Worker(url);

    this.defaultListener = defaultListener || function () {};

    if (onError) {
      this.worker.onerror = onError;
    }

    this.worker.onmessage = function (event) {
      if (event.data instanceof Object && event.data.hasOwnProperty('queryMethodListener') && event.data.hasOwnProperty('queryMethodArguments')) {
        var listener = instance.listeners[event.data.queryMethodListener];
        var args = event.data.queryMethodArguments;

        if (listener.deserializer) {
          args = listener.deserializer(args);
        }

        listener.fn.apply(listener.thisArg, args);
      } else {
        this.defaultListener.call(instance, event.data);
      }
    };
  }

  _createClass(JobWorker, [{
    key: "sendQuery",
    value: function sendQuery() {
      if (arguments.length < 1) {
        throw new TypeError('JobWorker.sendQuery takes at least one argument');
      }

      this.worker.postMessage({
        'queryMethod': arguments[0],
        'queryArguments': Array.prototype.slice.call(arguments, 1)
      });
    }
  }, {
    key: "runJob",
    value: function runJob(jobName, jobParametersValues, dataDTO) {
      this.sendQuery('runJob', jobName, jobParametersValues, dataDTO);
    }
  }, {
    key: "executeJob",
    value: function executeJob(jobExecutionId) {
      this.sendQuery('executeJob', jobExecutionId);
    }
  }, {
    key: "recompute",
    value: function recompute(dataDTO, ruleNames, evalCode, evalNumeric) {
      this.sendQuery('recompute', dataDTO, ruleNames, evalCode, evalNumeric);
    }
  }, {
    key: "postMessage",
    value: function postMessage(message) {
      this.worker.postMessage(message);
    }
  }, {
    key: "terminate",
    value: function terminate() {
      this.worker.terminate();
    }
  }, {
    key: "addListener",
    value: function addListener(name, listener, thisArg, deserializer) {
      this.listeners[name] = {
        fn: listener,
        thisArg: thisArg || this,
        deserializer: deserializer
      };
    }
  }, {
    key: "removeListener",
    value: function removeListener(name) {
      delete this.listeners[name];
    }
  }]);

  return JobWorker;
}();

exports.JobWorker = JobWorker;

},{}],62:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobsManager = exports.JobsManagerConfig = void 0;

var _sdUtils = require("sd-utils");

var _sensitivityAnalysisJob = require("./configurations/sensitivity-analysis/n-way/sensitivity-analysis-job");

var _jobLauncher = require("./engine/job-launcher");

var _jobWorker = require("./job-worker");

var _jobExecutionListener = require("./engine/job-execution-listener");

var _jobParameters = require("./engine/job-parameters");

var _idbJobRepository = require("./engine/job-repository/idb-job-repository");

var _jobExecutionFlag = require("./engine/job-execution-flag");

var _recomputeJob = require("./configurations/recompute/recompute-job");

var _probabilisticSensitivityAnalysisJob = require("./configurations/sensitivity-analysis/probabilistic/probabilistic-sensitivity-analysis-job");

var _timeoutJobRepository = require("./engine/job-repository/timeout-job-repository");

var _tornadoDiagramJob = require("./configurations/sensitivity-analysis/tornado-diagram/tornado-diagram-job");

var _jobStatus = require("./engine/job-status");

var _simpleJobRepository = require("./engine/job-repository/simple-job-repository");

var _leagueTableJob = require("./configurations/league-table/league-table-job");

var _spiderPlotJob = require("./configurations/sensitivity-analysis/spider-plot/spider-plot-job");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var JobsManagerConfig = function JobsManagerConfig(custom) {
  _classCallCheck(this, JobsManagerConfig);

  this.workerUrl = null;
  this.repositoryType = 'idb';
  this.clearRepository = false;

  if (custom) {
    _sdUtils.Utils.deepExtend(this, custom);
  }
};

exports.JobsManagerConfig = JobsManagerConfig;

var JobsManager =
/*#__PURE__*/
function (_JobExecutionListener) {
  _inherits(JobsManager, _JobExecutionListener);

  function JobsManager(expressionsEvaluator, objectiveRulesManager, config) {
    var _this;

    _classCallCheck(this, JobsManager);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(JobsManager).call(this));
    _this.jobExecutionListeners = [];
    _this.afterJobExecutionPromiseResolves = {};
    _this.jobInstancesToTerminate = {};

    _this.setConfig(config);

    _this.expressionEngine = expressionsEvaluator.expressionEngine;
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.useWorker = !!_this.config.workerUrl;

    if (_this.useWorker) {
      _this.initWorker(_this.config.workerUrl);
    }

    _this.initRepository();

    _this.registerJobs();

    _this.jobLauncher = new _jobLauncher.JobLauncher(_this.jobRepository, _this.jobWorker, function (data) {
      return _this.serializeData(data);
    });
    return _this;
  }

  _createClass(JobsManager, [{
    key: "setConfig",
    value: function setConfig(config) {
      this.config = new JobsManagerConfig(config);
      return this;
    }
  }, {
    key: "initRepository",
    value: function initRepository() {
      switch (this.config.repositoryType) {
        case 'idb':
          this.jobRepository = new _idbJobRepository.IdbJobRepository(this.expressionEngine.getJsonReviver(), 'sd-job-repository', this.config.clearRepository);
          break;

        case 'timeout':
          this.jobRepository = new _timeoutJobRepository.TimeoutJobRepository(this.expressionEngine.getJsonReviver());
          break;

        case 'simple':
          this.jobRepository = new _simpleJobRepository.SimpleJobRepository(this.expressionEngine.getJsonReviver());
          break;

        default:
          _sdUtils.log.error('JobsManager configuration error! Unknown repository type: ' + this.config.repositoryType + '. Using default: idb');

          this.config.repositoryType = 'idb';
          this.initRepository();
      }
    }
  }, {
    key: "serializeData",
    value: function serializeData(data) {
      return data.serialize(true, false, false, this.expressionEngine.getJsonReplacer());
    }
  }, {
    key: "getProgress",
    value: function getProgress(jobExecutionOrId) {
      var id = jobExecutionOrId;

      if (!_sdUtils.Utils.isString(jobExecutionOrId)) {
        id = jobExecutionOrId.id;
      }

      return this.jobRepository.getJobExecutionProgress(id);
    }
  }, {
    key: "getResult",
    value: function getResult(jobInstanceOrExecution) {
      var jobInstance = jobInstanceOrExecution;
      var jobExecution = null;

      if (jobInstanceOrExecution.jobInstance) {
        jobExecution = jobInstanceOrExecution;
        jobInstance = jobExecution.jobInstance;
      }

      return this.jobRepository.getJobResultByInstance(jobInstance);
    }
  }, {
    key: "run",
    value: function run(jobName, jobParametersValues, data) {
      var _this2 = this;

      var resolvePromiseAfterJobIsLaunched = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      return this.jobLauncher.run(jobName, jobParametersValues, data, resolvePromiseAfterJobIsLaunched).then(function (jobExecution) {
        if (resolvePromiseAfterJobIsLaunched || !jobExecution.isRunning()) {
          return jobExecution;
        } //job was delegated to worker and is still running


        return new Promise(function (resolve, reject) {
          _this2.afterJobExecutionPromiseResolves[jobExecution.id] = resolve;
        });
      });
    }
  }, {
    key: "execute",
    value: function execute(jobExecutionOrId) {
      return this.jobLauncher.execute(jobExecutionOrId);
    }
  }, {
    key: "stop",
    value: function stop(jobExecutionOrId) {
      var _this3 = this;

      var id = jobExecutionOrId;

      if (!_sdUtils.Utils.isString(jobExecutionOrId)) {
        id = jobExecutionOrId.id;
      }

      return this.jobRepository.getJobExecutionById(id).then(function (jobExecution) {
        if (!jobExecution) {
          _sdUtils.log.error("Job Execution not found: " + jobExecutionOrId);

          return null;
        }

        if (!jobExecution.isRunning()) {
          _sdUtils.log.warn("Job Execution not running, status: " + jobExecution.status + ", endTime: " + jobExecution.endTime);

          return jobExecution;
        }

        return _this3.jobRepository.saveJobExecutionFlag(jobExecution.id, _jobExecutionFlag.JOB_EXECUTION_FLAG.STOP).then(function () {
          return jobExecution;
        });
      });
    }
    /*stop job execution if running and delete job instance from repository*/

  }, {
    key: "terminate",
    value: function terminate(jobInstance) {
      var _this4 = this;

      return this.jobRepository.getLastJobExecutionByInstance(jobInstance).then(function (jobExecution) {
        if (jobExecution) {
          if (jobExecution.isRunning()) {
            return _this4.jobRepository.saveJobExecutionFlag(jobExecution.id, _jobExecutionFlag.JOB_EXECUTION_FLAG.STOP).then(function () {
              return jobExecution;
            });
          } else {
            return _this4.jobRepository.removeJobInstance(jobInstance, jobExecution.jobParameters);
          }
        }
      }).then(function () {
        _this4.jobInstancesToTerminate[jobInstance.id] = jobInstance;
      });
    }
  }, {
    key: "getJobByName",
    value: function getJobByName(jobName) {
      return this.jobRepository.getJobByName(jobName);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(jobName, jobParametersValues) {
      var job = this.jobRepository.getJobByName(jobName);
      return job.createJobParameters(jobParametersValues);
    }
    /*Returns a promise*/

  }, {
    key: "getLastJobExecution",
    value: function getLastJobExecution(jobName, jobParameters) {
      if (this.useWorker) {
        return this.jobWorker;
      }

      if (!(jobParameters instanceof _jobParameters.JobParameters)) {
        jobParameters = this.createJobParameters(jobParameters);
      }

      return this.jobRepository.getLastJobExecution(jobName, jobParameters);
    }
  }, {
    key: "initWorker",
    value: function initWorker(workerUrl) {
      var _arguments = arguments,
          _this5 = this;

      this.jobWorker = new _jobWorker.JobWorker(workerUrl, function () {
        _sdUtils.log.error('error in worker', _arguments);
      });

      var argsDeserializer = function argsDeserializer(args) {
        return [_this5.jobRepository.reviveJobExecution(args[0])];
      };

      this.jobWorker.addListener("beforeJob", this.beforeJob, this, argsDeserializer);
      this.jobWorker.addListener("afterJob", this.afterJob, this, argsDeserializer);
      this.jobWorker.addListener("jobFatalError", this.onJobFatalError, this);
    }
  }, {
    key: "registerJobs",
    value: function registerJobs() {
      var sensitivityAnalysisJob = new _sensitivityAnalysisJob.SensitivityAnalysisJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager);
      var probabilisticSensitivityAnalysisJob = new _probabilisticSensitivityAnalysisJob.ProbabilisticSensitivityAnalysisJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager);

      if (!_sdUtils.Utils.isWorker()) {
        sensitivityAnalysisJob.setBatchSize(1);
        probabilisticSensitivityAnalysisJob.setBatchSize(1);
      }

      this.registerJob(sensitivityAnalysisJob);
      this.registerJob(new _tornadoDiagramJob.TornadoDiagramJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
      this.registerJob(probabilisticSensitivityAnalysisJob);
      this.registerJob(new _recomputeJob.RecomputeJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
      this.registerJob(new _leagueTableJob.LeagueTableJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
      this.registerJob(new _spiderPlotJob.SpiderPlotJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
    }
  }, {
    key: "registerJob",
    value: function registerJob(job) {
      this.jobRepository.registerJob(job);
      job.registerExecutionListener(this);
    }
  }, {
    key: "registerJobExecutionListener",
    value: function registerJobExecutionListener(listener) {
      this.jobExecutionListeners.push(listener);
    }
  }, {
    key: "deregisterJobExecutionListener",
    value: function deregisterJobExecutionListener(listener) {
      var index = this.jobExecutionListeners.indexOf(listener);

      if (index > -1) {
        this.jobExecutionListeners.splice(index, 1);
      }
    }
  }, {
    key: "beforeJob",
    value: function beforeJob(jobExecution) {
      _sdUtils.log.debug("beforeJob", this.useWorker, jobExecution);

      this.jobExecutionListeners.forEach(function (l) {
        return l.beforeJob(jobExecution);
      });
    }
  }, {
    key: "afterJob",
    value: function afterJob(jobExecution) {
      _sdUtils.log.debug("afterJob", this.useWorker, jobExecution);

      this.jobExecutionListeners.forEach(function (l) {
        return l.afterJob(jobExecution);
      });
      var promiseResolve = this.afterJobExecutionPromiseResolves[jobExecution.id];

      if (promiseResolve) {
        promiseResolve(jobExecution);
      }

      if (this.jobInstancesToTerminate[jobExecution.jobInstance.id]) {
        this.jobRepository.removeJobInstance(jobExecution.jobInstance, jobExecution.jobParameters);
      }
    }
  }, {
    key: "onJobFatalError",
    value: function onJobFatalError(jobExecutionId, error) {
      var _this6 = this;

      var promiseResolve = this.afterJobExecutionPromiseResolves[jobExecutionId];

      if (promiseResolve) {
        this.jobRepository.getJobExecutionById(jobExecutionId).then(function (jobExecution) {
          jobExecution.status = _jobStatus.JOB_STATUS.FAILED;

          if (error) {
            jobExecution.failureExceptions.push(error);
          }

          return _this6.jobRepository.saveJobExecution(jobExecution).then(function () {
            promiseResolve(jobExecution);
          });
        })["catch"](function (e) {
          _sdUtils.log.error(e);
        });
      }

      _sdUtils.log.debug('onJobFatalError', jobExecutionId, error);
    }
  }]);

  return JobsManager;
}(_jobExecutionListener.JobExecutionListener);

exports.JobsManager = JobsManager;

},{"./configurations/league-table/league-table-job":8,"./configurations/recompute/recompute-job":11,"./configurations/sensitivity-analysis/n-way/sensitivity-analysis-job":13,"./configurations/sensitivity-analysis/probabilistic/probabilistic-sensitivity-analysis-job":18,"./configurations/sensitivity-analysis/spider-plot/spider-plot-job":22,"./configurations/sensitivity-analysis/tornado-diagram/tornado-diagram-job":27,"./engine/job-execution-flag":40,"./engine/job-execution-listener":41,"./engine/job-launcher":45,"./engine/job-parameters":47,"./engine/job-repository/idb-job-repository":48,"./engine/job-repository/simple-job-repository":50,"./engine/job-repository/timeout-job-repository":51,"./engine/job-status":53,"./job-worker":61,"sd-utils":"sd-utils"}],63:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ObjectiveRulesManager = void 0;

var _rules = require("./rules");

var _sdUtils = require("sd-utils");

var model = _interopRequireWildcard(require("sd-model"));

var _minMaxRule = require("./rules/min-max-rule");

var _maxMinRule = require("./rules/max-min-rule");

var _minMinRule = require("./rules/min-min-rule");

var _maxMaxRule = require("./rules/max-max-rule");

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};

  if (obj != null) {
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

        if (desc && (desc.get || desc.set)) {
          Object.defineProperty(newObj, key, desc);
        } else {
          newObj[key] = obj[key];
        }
      }
    }
  }

  newObj["default"] = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ObjectiveRulesManager =
/*#__PURE__*/
function () {
  function ObjectiveRulesManager(expressionEngine, currentRuleName) {
    _classCallCheck(this, ObjectiveRulesManager);

    this.ruleByName = {};
    this.rules = [];
    this.flipPair = {};
    this.payoffIndex = 0;
    this.expressionEngine = expressionEngine;
    this.addRule(new _rules.ExpectedValueMaximizationRule(expressionEngine));
    this.addRule(new _rules.ExpectedValueMinimizationRule(expressionEngine));
    this.addRule(new _rules.MaxiMinRule(expressionEngine));
    this.addRule(new _rules.MaxiMaxRule(expressionEngine));
    this.addRule(new _rules.MiniMinRule(expressionEngine));
    this.addRule(new _rules.MiniMaxRule(expressionEngine));
    var minMax = new _minMaxRule.MinMaxRule(expressionEngine);
    this.addRule(minMax);
    var maxMin = new _maxMinRule.MaxMinRule(expressionEngine);
    this.addRule(maxMin);
    this.addFlipPair(minMax, maxMin);
    var minMin = new _minMinRule.MinMinRule(expressionEngine);
    this.addRule(minMin);
    var maxMax = new _maxMaxRule.MaxMaxRule(expressionEngine);
    this.addRule(maxMax);

    if (currentRuleName) {
      this.currentRule = this.ruleByName[currentRuleName];
    } else {
      this.currentRule = this.rules[0];
    }
  }

  _createClass(ObjectiveRulesManager, [{
    key: "setPayoffIndex",
    value: function setPayoffIndex(payoffIndex) {
      this.payoffIndex = payoffIndex || 0;
    }
  }, {
    key: "addRule",
    value: function addRule(rule) {
      this.ruleByName[rule.name] = rule;
      this.rules.push(rule);
    }
  }, {
    key: "isRuleName",
    value: function isRuleName(ruleName) {
      return !!this.ruleByName[ruleName];
    }
  }, {
    key: "setCurrentRuleByName",
    value: function setCurrentRuleByName(ruleName) {
      this.currentRule = this.ruleByName[ruleName];
    }
  }, {
    key: "getObjectiveRuleByName",
    value: function getObjectiveRuleByName(ruleName) {
      return this.ruleByName[ruleName];
    }
  }, {
    key: "flipRule",
    value: function flipRule() {
      var flipped = this.flipPair[this.currentRule.name];

      if (flipped) {
        this.currentRule = flipped;
      }
    }
  }, {
    key: "updateDefaultCriterion1Weight",
    value: function updateDefaultCriterion1Weight(defaultCriterion1Weight) {
      this.rules.filter(function (r) {
        return r.multiCriteria;
      }).forEach(function (r) {
        return r.setDefaultCriterion1Weight(defaultCriterion1Weight);
      });
    }
  }, {
    key: "recompute",
    value: function recompute(dataModel, allRules) {
      var _this = this;

      var decisionPolicy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var startTime = new Date().getTime();

      _sdUtils.log.trace('recomputing rules, all: ' + allRules);

      dataModel.getRoots().forEach(function (n) {
        _this.recomputeTree(n, allRules, decisionPolicy);
      });
      var time = new Date().getTime() - startTime / 1000;

      _sdUtils.log.trace('recomputation took ' + time + 's');

      return this;
    }
  }, {
    key: "recomputeTree",
    value: function recomputeTree(root, allRules) {
      var _this2 = this;

      var decisionPolicy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

      _sdUtils.log.trace('recomputing rules for tree ...', root);

      var startTime = new Date().getTime();
      var rules = [this.currentRule];

      if (allRules) {
        rules = this.rules;
      }

      rules.forEach(function (rule) {
        rule.setPayoffIndex(_this2.payoffIndex);
        rule.setDecisionPolicy(decisionPolicy);
        rule.computePayoff(root);
        rule.computeOptimal(root);
        rule.clearDecisionPolicy();
      });
      var time = (new Date().getTime() - startTime) / 1000;

      _sdUtils.log.trace('recomputation took ' + time + 's');

      return this;
    }
  }, {
    key: "getNodeDisplayValue",
    value: function getNodeDisplayValue(node, name) {
      return node.computedValue(this.currentRule.name, name);
    }
  }, {
    key: "getEdgeDisplayValue",
    value: function getEdgeDisplayValue(e, name) {
      if (name === 'probability') {
        if (e.parentNode instanceof model.domain.DecisionNode) {
          return e.computedValue(this.currentRule.name, 'probability');
        }

        if (e.parentNode instanceof model.domain.ChanceNode) {
          return e.computedBaseProbability();
        }

        return null;
      }

      if (name === 'payoff') {
        if (this.currentRule.multiCriteria) {
          return e.computedValue(null, 'payoff');
        } else {
          return e.computedValue(null, 'payoff[' + this.payoffIndex + ']');
        }
      }

      if (name === 'optimal') {
        return e.computedValue(this.currentRule.name, 'optimal');
      }
    }
  }, {
    key: "addFlipPair",
    value: function addFlipPair(rule1, rule2) {
      this.flipPair[rule1.name] = rule2;
      this.flipPair[rule2.name] = rule1;
    }
  }]);

  return ObjectiveRulesManager;
}();

exports.ObjectiveRulesManager = ObjectiveRulesManager;

},{"./rules":66,"./rules/max-max-rule":67,"./rules/max-min-rule":68,"./rules/min-max-rule":71,"./rules/min-min-rule":72,"sd-model":"sd-model","sd-utils":"sd-utils"}],64:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExpectedValueMaximizationRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var ExpectedValueMaximizationRule =
/*#__PURE__*/
function (_ObjectiveRule) {
  _inherits(ExpectedValueMaximizationRule, _ObjectiveRule);

  function ExpectedValueMaximizationRule(expressionEngine) {
    _classCallCheck(this, ExpectedValueMaximizationRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(ExpectedValueMaximizationRule).call(this, ExpectedValueMaximizationRule.NAME, true, expressionEngine));
  } //  payoff - parent edge payoff


  _createClass(ExpectedValueMaximizationRule, [{
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      node.childEdges.forEach(function (e) {
        if (_this.subtract(_this.computedPayoff(node), payoff).equals(_this.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode)) {
          _this.cValue(e, 'optimal', true);

          _this.computeOptimal(e.childNode, _this.basePayoff(e), _this.multiply(probabilityToEnter, _this.cValue(e, 'probability')));
        } else {
          _this.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return ExpectedValueMaximizationRule;
}(_objectiveRule.ObjectiveRule);

exports.ExpectedValueMaximizationRule = ExpectedValueMaximizationRule;
ExpectedValueMaximizationRule.NAME = 'expected-value-maximization';

},{"./objective-rule":76,"sd-model":"sd-model","sd-utils":"sd-utils"}],65:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExpectedValueMinimizationRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/*expected value minimization rule*/


var ExpectedValueMinimizationRule =
/*#__PURE__*/
function (_ObjectiveRule) {
  _inherits(ExpectedValueMinimizationRule, _ObjectiveRule);

  function ExpectedValueMinimizationRule(expressionEngine) {
    _classCallCheck(this, ExpectedValueMinimizationRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(ExpectedValueMinimizationRule).call(this, ExpectedValueMinimizationRule.NAME, false, expressionEngine));
  } //  payoff - parent edge payoff


  _createClass(ExpectedValueMinimizationRule, [{
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      node.childEdges.forEach(function (e) {
        if (_this.subtract(_this.computedPayoff(node), payoff).equals(_this.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode)) {
          _this.cValue(e, 'optimal', true);

          _this.computeOptimal(e.childNode, _this.basePayoff(e), _this.multiply(probabilityToEnter, _this.cValue(e, 'probability')));
        } else {
          _this.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return ExpectedValueMinimizationRule;
}(_objectiveRule.ObjectiveRule);

exports.ExpectedValueMinimizationRule = ExpectedValueMinimizationRule;
ExpectedValueMinimizationRule.NAME = 'expected-value-minimization';

},{"./objective-rule":76,"sd-model":"sd-model","sd-utils":"sd-utils"}],66:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _objectiveRule = require("./objective-rule");

Object.keys(_objectiveRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _objectiveRule[key];
    }
  });
});

var _expectedValueMaximizationRule = require("./expected-value-maximization-rule");

Object.keys(_expectedValueMaximizationRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _expectedValueMaximizationRule[key];
    }
  });
});

var _expectedValueMinimizationRule = require("./expected-value-minimization-rule");

Object.keys(_expectedValueMinimizationRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _expectedValueMinimizationRule[key];
    }
  });
});

var _maxiMaxRule = require("./maxi-max-rule");

Object.keys(_maxiMaxRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _maxiMaxRule[key];
    }
  });
});

var _maxiMinRule = require("./maxi-min-rule");

Object.keys(_maxiMinRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _maxiMinRule[key];
    }
  });
});

var _miniMaxRule = require("./mini-max-rule");

Object.keys(_miniMaxRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _miniMaxRule[key];
    }
  });
});

var _miniMinRule = require("./mini-min-rule");

Object.keys(_miniMinRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _miniMinRule[key];
    }
  });
});

},{"./expected-value-maximization-rule":64,"./expected-value-minimization-rule":65,"./maxi-max-rule":69,"./maxi-min-rule":70,"./mini-max-rule":73,"./mini-min-rule":74,"./objective-rule":76}],67:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxMaxRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var MaxMaxRule =
/*#__PURE__*/
function (_MultiCriteriaRule) {
  _inherits(MaxMaxRule, _MultiCriteriaRule);

  function MaxMaxRule(expressionEngine) {
    _classCallCheck(this, MaxMaxRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MaxMaxRule).call(this, MaxMaxRule.NAME, [1, 1], expressionEngine));
  }

  return MaxMaxRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MaxMaxRule = MaxMaxRule;
MaxMaxRule.NAME = 'max-max';

},{"./multi-criteria-rule":75}],68:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxMinRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var MaxMinRule =
/*#__PURE__*/
function (_MultiCriteriaRule) {
  _inherits(MaxMinRule, _MultiCriteriaRule);

  function MaxMinRule(expressionEngine) {
    _classCallCheck(this, MaxMinRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MaxMinRule).call(this, MaxMinRule.NAME, [1, -1], expressionEngine));
  }

  return MaxMinRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MaxMinRule = MaxMinRule;
MaxMinRule.NAME = 'max-min';

},{"./multi-criteria-rule":75}],69:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxiMaxRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/*maxi-max rule*/


var MaxiMaxRule =
/*#__PURE__*/
function (_ObjectiveRule) {
  _inherits(MaxiMaxRule, _ObjectiveRule);

  function MaxiMaxRule(expressionEngine) {
    _classCallCheck(this, MaxiMaxRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MaxiMaxRule).call(this, MaxiMaxRule.NAME, true, expressionEngine));
  }

  _createClass(MaxiMaxRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) < bestChildPayoff ? 0.0 : 1.0 / bestCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.maxBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MaxiMaxRule;
}(_objectiveRule.ObjectiveRule);

exports.MaxiMaxRule = MaxiMaxRule;
MaxiMaxRule.NAME = 'maxi-max';

},{"./objective-rule":76,"sd-model":"sd-model","sd-utils":"sd-utils"}],70:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxiMinRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/*maxi-min rule*/


var MaxiMinRule =
/*#__PURE__*/
function (_ObjectiveRule) {
  _inherits(MaxiMinRule, _ObjectiveRule);

  function MaxiMinRule(expressionEngine) {
    _classCallCheck(this, MaxiMinRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MaxiMinRule).call(this, MaxiMinRule.NAME, true, expressionEngine));
  }

  _createClass(MaxiMinRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) > worstChildPayoff ? 0.0 : 1.0 / worstCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.minBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MaxiMinRule;
}(_objectiveRule.ObjectiveRule);

exports.MaxiMinRule = MaxiMinRule;
MaxiMinRule.NAME = 'maxi-min';

},{"./objective-rule":76,"sd-model":"sd-model","sd-utils":"sd-utils"}],71:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MinMaxRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var MinMaxRule =
/*#__PURE__*/
function (_MultiCriteriaRule) {
  _inherits(MinMaxRule, _MultiCriteriaRule);

  function MinMaxRule(expressionEngine) {
    _classCallCheck(this, MinMaxRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MinMaxRule).call(this, MinMaxRule.NAME, [-1, 1], expressionEngine));
  }

  return MinMaxRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MinMaxRule = MinMaxRule;
MinMaxRule.NAME = 'min-max';

},{"./multi-criteria-rule":75}],72:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MinMinRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var MinMinRule =
/*#__PURE__*/
function (_MultiCriteriaRule) {
  _inherits(MinMinRule, _MultiCriteriaRule);

  function MinMinRule(expressionEngine) {
    _classCallCheck(this, MinMinRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MinMinRule).call(this, MinMinRule.NAME, [-1, -1], expressionEngine));
  }

  return MinMinRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MinMinRule = MinMinRule;
MinMinRule.NAME = 'min-min';

},{"./multi-criteria-rule":75}],73:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MiniMaxRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/*mini-max rule*/


var MiniMaxRule =
/*#__PURE__*/
function (_ObjectiveRule) {
  _inherits(MiniMaxRule, _ObjectiveRule);

  function MiniMaxRule(expressionEngine) {
    _classCallCheck(this, MiniMaxRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MiniMaxRule).call(this, MiniMaxRule.NAME, false, expressionEngine));
  }

  _createClass(MiniMaxRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) < bestChildPayoff ? 0.0 : 1.0 / bestCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.maxBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MiniMaxRule;
}(_objectiveRule.ObjectiveRule);

exports.MiniMaxRule = MiniMaxRule;
MiniMaxRule.NAME = 'mini-max';

},{"./objective-rule":76,"sd-model":"sd-model","sd-utils":"sd-utils"}],74:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MiniMinRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/*mini-min rule*/


var MiniMinRule =
/*#__PURE__*/
function (_ObjectiveRule) {
  _inherits(MiniMinRule, _ObjectiveRule);

  function MiniMinRule(expressionEngine) {
    _classCallCheck(this, MiniMinRule);

    return _possibleConstructorReturn(this, _getPrototypeOf(MiniMinRule).call(this, MiniMinRule.NAME, false, expressionEngine));
  }

  _createClass(MiniMinRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) > worstChildPayoff ? 0.0 : 1.0 / worstCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.minBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MiniMinRule;
}(_objectiveRule.ObjectiveRule);

exports.MiniMinRule = MiniMinRule;
MiniMinRule.NAME = 'mini-min';

},{"./objective-rule":76,"sd-model":"sd-model","sd-utils":"sd-utils"}],75:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MultiCriteriaRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _policy = require("../../policies/policy");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

var MultiCriteriaRule =
/*#__PURE__*/
function (_ObjectiveRule) {
  _inherits(MultiCriteriaRule, _ObjectiveRule);

  function MultiCriteriaRule(name, payoffCoeffs, expressionEngine) {
    var _this;

    _classCallCheck(this, MultiCriteriaRule);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(MultiCriteriaRule).call(this, name, true, expressionEngine, true));
    _this.criterion1Weight = 1;
    _this.payoffCoeffs = [1, -1];
    _this.payoffCoeffs = payoffCoeffs;
    return _this;
  }

  _createClass(MultiCriteriaRule, [{
    key: "setDefaultCriterion1Weight",
    value: function setDefaultCriterion1Weight(criterion1Weight) {
      this.criterion1Weight = criterion1Weight;
    } // payoff - parent edge payoff, aggregatedPayoff - aggregated payoff along path

  }, {
    key: "computePayoff",
    value: function computePayoff(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];
      var aggregatedPayoff = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];
      var childrenPayoff = [0, 0];

      if (node.childEdges.length) {
        if (node instanceof _sdModel.domain.DecisionNode) {
          var selectedIndexes = [];
          var bestChild = -Infinity;
          node.childEdges.forEach(function (e, i) {
            var basePayoffs = [_this2.basePayoff(e, 0), _this2.basePayoff(e, 1)];

            var childPayoff = _this2.computePayoff(e.childNode, basePayoffs, [_this2.add(basePayoffs[0], aggregatedPayoff[0]), _this2.add(basePayoffs[1], aggregatedPayoff[1])]);

            var childCombinedPayoff = _this2.cValue(e.childNode, 'combinedPayoff');

            if (childCombinedPayoff > bestChild) {
              bestChild = childCombinedPayoff;
              selectedIndexes = [i];
            } else if (bestChild.equals(childCombinedPayoff)) {
              selectedIndexes.push(i);
            }
          });

          if (this.decisionPolicy) {
            selectedIndexes = [];

            var decision = _policy.Policy.getDecision(this.decisionPolicy, node);

            if (decision) {
              selectedIndexes = [decision.decisionValue];
            }
          }

          node.childEdges.forEach(function (e, i) {
            _this2.clearComputedValues(e);

            _this2.cValue(e, 'probability', selectedIndexes.indexOf(i) < 0 ? 0.0 : 1.0);
          });
        } else {
          node.childEdges.forEach(function (e) {
            var basePayoffs = [_this2.basePayoff(e, 0), _this2.basePayoff(e, 1)];

            _this2.computePayoff(e.childNode, basePayoffs, [_this2.add(basePayoffs[0], aggregatedPayoff[0]), _this2.add(basePayoffs[1], aggregatedPayoff[1])]);

            _this2.clearComputedValues(e);

            _this2.cValue(e, 'probability', _this2.baseProbability(e));
          });
        }

        var sumweight = 0;
        node.childEdges.forEach(function (e) {
          sumweight = _this2.add(sumweight, _this2.cValue(e, 'probability'));
        });

        if (sumweight > 0) {
          node.childEdges.forEach(function (e) {
            childrenPayoff.forEach(function (p, i) {
              var ep = _this2.cValue(e.childNode, 'payoff[' + i + ']');

              childrenPayoff[i] = _this2.add(p, _this2.multiply(_this2.cValue(e, 'probability'), ep).div(sumweight));
            });
          });
        }
      }

      payoff.forEach(function (p, i) {
        payoff[i] = _this2.add(p, childrenPayoff[i]);
      });
      this.clearComputedValues(node);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'aggregatedPayoff', aggregatedPayoff);
        this.cValue(node, 'probabilityToEnter', 0); //initial value
      } else {
        this.cValue(node, 'childrenPayoff', childrenPayoff);
      }

      this.cValue(node, 'combinedPayoff', this.computeCombinedPayoff(payoff));
      return this.cValue(node, 'payoff', payoff);
    }
  }, {
    key: "computeCombinedPayoff",
    value: function computeCombinedPayoff(payoff) {
      // [criterion 1 coeff]*[criterion 1]*[weight]+[criterion 2 coeff]*[criterion 2]
      if (this.criterion1Weight === Infinity) {
        return this.multiply(this.payoffCoeffs[0], payoff[0]);
      }

      return this.add(this.multiply(this.payoffCoeffs[0], this.multiply(this.criterion1Weight, payoff[0])), this.multiply(this.payoffCoeffs[1], payoff[1]));
    } //  combinedPayoff - parent edge combinedPayoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this3 = this;

      var combinedPayoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      node.childEdges.forEach(function (e) {
        if (_this3.subtract(_this3.cValue(node, 'combinedPayoff'), combinedPayoff).equals(_this3.cValue(e.childNode, 'combinedPayoff')) || !(node instanceof _sdModel.domain.DecisionNode)) {
          _this3.cValue(e, 'optimal', true);

          _this3.computeOptimal(e.childNode, _this3.computeCombinedPayoff([_this3.basePayoff(e, 0), _this3.basePayoff(e, 1)]), _this3.multiply(probabilityToEnter, _this3.cValue(e, 'probability')));
        } else {
          _this3.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MultiCriteriaRule;
}(_objectiveRule.ObjectiveRule);

exports.MultiCriteriaRule = MultiCriteriaRule;

},{"../../policies/policy":82,"./objective-rule":76,"sd-model":"sd-model"}],76:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ObjectiveRule = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdModel = require("sd-model");

var _policy = require("../../policies/policy");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Base class for objective rules*/


var ObjectiveRule =
/*#__PURE__*/
function () {
  function ObjectiveRule(name, maximization, expressionEngine) {
    var multiCriteria = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

    _classCallCheck(this, ObjectiveRule);

    this.payoffIndex = 0;
    this.multiCriteria = false;
    this.name = name;
    this.maximization = maximization;
    this.expressionEngine = expressionEngine;
    this.multiCriteria = multiCriteria;
  }

  _createClass(ObjectiveRule, [{
    key: "setDecisionPolicy",
    value: function setDecisionPolicy(decisionPolicy) {
      this.decisionPolicy = decisionPolicy;
    }
  }, {
    key: "setPayoffIndex",
    value: function setPayoffIndex(payoffIndex) {
      this.payoffIndex = payoffIndex;
    }
  }, {
    key: "clearDecisionPolicy",
    value: function clearDecisionPolicy() {
      this.decisionPolicy = null;
    } // should return array of selected children indexes

  }, {
    key: "makeDecision",
    value: function makeDecision(decisionNode, childrenPayoffs) {
      var best;

      if (this.maximization) {
        best = this.max.apply(this, _toConsumableArray(childrenPayoffs));
      } else {
        best = this.min.apply(this, _toConsumableArray(childrenPayoffs));
      }

      var selectedIndexes = [];
      childrenPayoffs.forEach(function (p, i) {
        if (_sdExpressionEngine.ExpressionEngine.compare(best, p) == 0) {
          selectedIndexes.push(i);
        }
      });
      return selectedIndexes;
    }
  }, {
    key: "_makeDecision",
    value: function _makeDecision(decisionNode, childrenPayoffs) {
      if (this.decisionPolicy) {
        var decision = _policy.Policy.getDecision(this.decisionPolicy, decisionNode);

        if (decision) {
          return [decision.decisionValue];
        }

        return [];
      }

      return this.makeDecision(decisionNode, childrenPayoffs);
    } // extension point for changing computed probability of edges in a chance node

  }, {
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {} // payoff - parent edge payoff, aggregatedPayoff - aggregated payoff along path

  }, {
    key: "computePayoff",
    value: function computePayoff(node) {
      var _this = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var aggregatedPayoff = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var childrenPayoff = 0;

      if (node.childEdges.length) {
        if (node instanceof _sdModel.domain.DecisionNode) {
          var selectedIndexes = this._makeDecision(node, node.childEdges.map(function (e) {
            return _this.computePayoff(e.childNode, _this.basePayoff(e), _this.add(_this.basePayoff(e), aggregatedPayoff));
          }));

          node.childEdges.forEach(function (e, i) {
            _this.clearComputedValues(e);

            _this.cValue(e, 'probability', selectedIndexes.indexOf(i) < 0 ? 0.0 : 1.0);
          });
        } else {
          var bestChild = -Infinity;
          var bestCount = 1;
          var worstChild = Infinity;
          var worstCount = 1;
          node.childEdges.forEach(function (e) {
            var childPayoff = _this.computePayoff(e.childNode, _this.basePayoff(e), _this.add(_this.basePayoff(e), aggregatedPayoff));

            if (childPayoff < worstChild) {
              worstChild = childPayoff;
              worstCount = 1;
            } else if (childPayoff.equals(worstChild)) {
              worstCount++;
            }

            if (childPayoff > bestChild) {
              bestChild = childPayoff;
              bestCount = 1;
            } else if (childPayoff.equals(bestChild)) {
              bestCount++;
            }

            _this.clearComputedValues(e);

            _this.cValue(e, 'probability', _this.baseProbability(e));
          });
          this.modifyChanceProbability(node.childEdges, bestChild, bestCount, worstChild, worstCount);
        }

        var sumweight = 0;
        node.childEdges.forEach(function (e) {
          sumweight = _this.add(sumweight, _this.cValue(e, 'probability'));
        }); // console.log(payoff,node.childEdges,'sumweight',sumweight);

        if (sumweight > 0) {
          node.childEdges.forEach(function (e) {
            childrenPayoff = _this.add(childrenPayoff, _this.multiply(_this.cValue(e, 'probability'), _this.computedPayoff(e.childNode)).div(sumweight));
          });
        }
      }

      payoff = this.add(payoff, childrenPayoff);
      this.clearComputedValues(node);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'aggregatedPayoff' + '[' + this.payoffIndex + ']', aggregatedPayoff);
        this.cValue(node, 'probabilityToEnter', 0); //initial value
      } else {
        this.cValue(node, 'childrenPayoff' + '[' + this.payoffIndex + ']', childrenPayoff);
      }

      return this.computedPayoff(node, payoff);
    } // koloruje optymalne ścieżki

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      throw 'computeOptimal function not implemented for rule: ' + this.name;
    }
    /* get or set computed payoff*/

  }, {
    key: "computedPayoff",
    value: function computedPayoff(node, value) {
      return this.cValue(node, 'payoff[' + this.payoffIndex + ']', value);
    }
    /*Get or set object's computed value for current rule*/

  }, {
    key: "cValue",
    value: function cValue(object, fieldPath, value) {
      // if(fieldPath.trim() === 'payoff'){
      //     fieldPath += '[' + this.payoffIndex + ']';
      // }
      return object.computedValue(this.name, fieldPath, value);
    }
  }, {
    key: "baseProbability",
    value: function baseProbability(edge) {
      return edge.computedBaseProbability();
    }
  }, {
    key: "basePayoff",
    value: function basePayoff(edge, payoffIndex) {
      return edge.computedBasePayoff(undefined, payoffIndex || this.payoffIndex);
    }
  }, {
    key: "clearComputedValues",
    value: function clearComputedValues(object) {
      object.clearComputedValues(this.name);
    }
  }, {
    key: "add",
    value: function add(a, b) {
      return _sdExpressionEngine.ExpressionEngine.add(a, b);
    }
  }, {
    key: "subtract",
    value: function subtract(a, b) {
      return _sdExpressionEngine.ExpressionEngine.subtract(a, b);
    }
  }, {
    key: "divide",
    value: function divide(a, b) {
      return _sdExpressionEngine.ExpressionEngine.divide(a, b);
    }
  }, {
    key: "multiply",
    value: function multiply(a, b) {
      return _sdExpressionEngine.ExpressionEngine.multiply(a, b);
    }
  }, {
    key: "max",
    value: function max() {
      return _sdExpressionEngine.ExpressionEngine.max.apply(_sdExpressionEngine.ExpressionEngine, arguments);
    }
  }, {
    key: "min",
    value: function min() {
      return _sdExpressionEngine.ExpressionEngine.min.apply(_sdExpressionEngine.ExpressionEngine, arguments);
    }
  }]);

  return ObjectiveRule;
}();

exports.ObjectiveRule = ObjectiveRule;

},{"../../policies/policy":82,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model"}],77:[function(require,module,exports){
"use strict";

function _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FlipSubtree = void 0;

var _sdModel = require("sd-model");

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

var _operation = require("./operation");

var _treeValidator = require("../validation/tree-validator");

function _typeof(obj) {
  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {
    _typeof = function _typeof(obj) {
      return _typeof2(obj);
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);
    };
  }

  return _typeof(obj);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}
/*Subtree flipping operation*/


var FlipSubtree =
/*#__PURE__*/
function (_Operation) {
  _inherits(FlipSubtree, _Operation);

  function FlipSubtree(data, expressionEngine) {
    var _this;

    _classCallCheck(this, FlipSubtree);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(FlipSubtree).call(this, FlipSubtree.$NAME));
    _this.data = data;
    _this.expressionEngine = expressionEngine;
    _this.treeValidator = new _treeValidator.TreeValidator(expressionEngine);
    return _this;
  }

  _createClass(FlipSubtree, [{
    key: "isApplicable",
    value: function isApplicable(object) {
      return object instanceof _sdModel.domain.ChanceNode;
    }
  }, {
    key: "canPerform",
    value: function canPerform(node) {
      if (!this.isApplicable(node)) {
        return false;
      }

      if (!this.treeValidator.validate(this.data.getAllNodesInSubtree(node)).isValid()) {
        //check if the whole subtree is proper
        return false;
      }

      if (node.childEdges.length < 1) {
        return false;
      }

      var grandchildrenNumber = null;
      var grandchildrenEdgeLabels = [];
      var childrenEdgeLabelsSet = new Set();
      var grandchildrenEdgeLabelsSet;

      if (!node.childEdges.every(function (e) {
        var child = e.childNode;

        if (!(child instanceof _sdModel.domain.ChanceNode)) {
          return false;
        }

        if (childrenEdgeLabelsSet.has(e.name.trim())) {
          // edge labels should be unique
          return false;
        }

        childrenEdgeLabelsSet.add(e.name.trim());

        if (grandchildrenNumber === null) {
          grandchildrenNumber = child.childEdges.length;

          if (grandchildrenNumber < 1) {
            return false;
          }

          child.childEdges.forEach(function (ge) {
            grandchildrenEdgeLabels.push(ge.name.trim());
          });
          grandchildrenEdgeLabelsSet = new Set(grandchildrenEdgeLabels);

          if (grandchildrenEdgeLabelsSet.size !== grandchildrenEdgeLabels.length) {
            //grandchildren edge labels should be unique
            return false;
          }

          return true;
        }

        if (child.childEdges.length != grandchildrenNumber) {
          return false;
        }

        if (!child.childEdges.every(function (ge, i) {
          return grandchildrenEdgeLabels[i] === ge.name.trim();
        })) {
          return false;
        }

        return true;
      })) {
        return false;
      }

      return true;
    }
  }, {
    key: "perform",
    value: function perform(root) {
      var _this2 = this;

      var rootClone = this.data.cloneSubtree(root, true);
      var oldChildrenNumber = root.childEdges.length;
      var oldGrandChildrenNumber = root.childEdges[0].childNode.childEdges.length;
      var childrenNumber = oldGrandChildrenNumber;
      var grandChildrenNumber = oldChildrenNumber;
      var callbacksDisabled = this.data.callbacksDisabled;
      this.data.callbacksDisabled = true;
      var childX = root.childEdges[0].childNode.location.x;
      var topY = root.childEdges[0].childNode.childEdges[0].childNode.location.y;
      var bottomY = root.childEdges[oldChildrenNumber - 1].childNode.childEdges[oldGrandChildrenNumber - 1].childNode.location.y;
      var extentY = bottomY - topY;
      var stepY = extentY / (childrenNumber + 1);
      root.childEdges.slice().forEach(function (e) {
        return _this2.data.removeNode(e.childNode);
      });

      for (var i = 0; i < childrenNumber; i++) {
        var child = new _sdModel.domain.ChanceNode(new _sdModel.domain.Point(childX, topY + (i + 1) * stepY));
        var edge = this.data.addNode(child, root);
        edge.name = rootClone.childEdges[0].childNode.childEdges[i].name;
        edge.probability = 0;

        for (var j = 0; j < grandChildrenNumber; j++) {
          var grandChild = rootClone.childEdges[j].childNode.childEdges[i].childNode;
          var grandChildEdge = this.data.attachSubtree(grandChild, child);
          grandChildEdge.name = rootClone.childEdges[j].name;
          grandChildEdge.payoff = [_sdExpressionEngine.ExpressionEngine.add(rootClone.childEdges[j].computedBasePayoff(undefined, 0), rootClone.childEdges[j].childNode.childEdges[i].computedBasePayoff(undefined, 0)), _sdExpressionEngine.ExpressionEngine.add(rootClone.childEdges[j].computedBasePayoff(undefined, 1), rootClone.childEdges[j].childNode.childEdges[i].computedBasePayoff(undefined, 1))];
          grandChildEdge.probability = _sdExpressionEngine.ExpressionEngine.multiply(rootClone.childEdges[j].computedBaseProbability(), rootClone.childEdges[j].childNode.childEdges[i].computedBaseProbability());
          edge.probability = _sdExpressionEngine.ExpressionEngine.add(edge.probability, grandChildEdge.probability);
        }

        var divideGrandChildEdgeProbability = function divideGrandChildEdgeProbability(p) {
          return _sdExpressionEngine.ExpressionEngine.divide(p, edge.probability);
        };

        if (edge.probability.equals(0)) {
          var prob = _sdExpressionEngine.ExpressionEngine.divide(1, grandChildrenNumber);

          divideGrandChildEdgeProbability = function divideGrandChildEdgeProbability(p) {
            return prob;
          };
        }

        var probabilitySum = 0.0;
        child.childEdges.forEach(function (grandChildEdge) {
          grandChildEdge.probability = divideGrandChildEdgeProbability(grandChildEdge.probability);
          probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, grandChildEdge.probability);
          grandChildEdge.probability = _this2.expressionEngine.serialize(grandChildEdge.probability);
        });

        this._normalizeProbabilitiesAfterFlip(child.childEdges, probabilitySum);

        edge.probability = this.expressionEngine.serialize(edge.probability);
      }

      this._normalizeProbabilitiesAfterFlip(root.childEdges);

      this.data.callbacksDisabled = callbacksDisabled;

      this.data._fireNodeAddedCallback();
    }
  }, {
    key: "_normalizeProbabilitiesAfterFlip",
    value: function _normalizeProbabilitiesAfterFlip(childEdges, probabilitySum) {
      var _this3 = this;

      if (!probabilitySum) {
        probabilitySum = 0.0;
        childEdges.forEach(function (e) {
          probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, e.probability);
        });
      }

      if (!probabilitySum.equals(1)) {
        _sdUtils.log.info('Sum of the probabilities in child nodes is not equal to 1 : ', probabilitySum);

        var newProbabilitySum = 0.0;
        var cf = 1000000000000; //10^12

        var prec = 12;
        childEdges.forEach(function (e) {
          e.probability = parseInt(_sdExpressionEngine.ExpressionEngine.round(e.probability, prec) * cf);
          newProbabilitySum = newProbabilitySum + e.probability;
        });
        var rest = cf - newProbabilitySum;

        _sdUtils.log.info('Normalizing with rounding to precision: ' + prec, rest);

        childEdges[0].probability = _sdExpressionEngine.ExpressionEngine.add(rest, childEdges[0].probability);
        newProbabilitySum = 0.0;
        childEdges.forEach(function (e) {
          e.probability = _this3.expressionEngine.serialize(_sdExpressionEngine.ExpressionEngine.divide(parseInt(e.probability), cf));
        });
      }
    }
  }]);

  return FlipSubtree;
}(_operation.Operation);

exports.FlipSubtree = FlipSubtree;
FlipSubtree.$NAME = 'flipSubtree';

},{"../validation/tree-validator":86,"./operation":78,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model","sd-utils":"sd-utils"}],78:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Operation = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Base class for complex operations on tree structure*/


var Operation =
/*#__PURE__*/
function () {
  function Operation(name) {
    _classCallCheck(this, Operation);

    this.name = name;
  } //check if operation is potentially applicable for object


  _createClass(Operation, [{
    key: "isApplicable",
    value: function isApplicable() {
      throw 'isApplicable function not implemented for operation: ' + this.name;
    } //check if can perform operation for applicable object

  }, {
    key: "canPerform",
    value: function canPerform(object) {
      throw 'canPerform function not implemented for operation: ' + this.name;
    }
  }, {
    key: "perform",
    value: function perform(object) {
      throw 'perform function not implemented for operation: ' + this.name;
    }
  }]);

  return Operation;
}();

exports.Operation = Operation;

},{}],79:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.OperationsManager = void 0;

var _flipSubtree = require("./flip-subtree");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var OperationsManager =
/*#__PURE__*/
function () {
  function OperationsManager(data, expressionEngine) {
    _classCallCheck(this, OperationsManager);

    this.operations = [];
    this.operationByName = {};
    this.data = data;
    this.expressionEngine = expressionEngine;
    this.registerOperation(new _flipSubtree.FlipSubtree(data, expressionEngine));
  }

  _createClass(OperationsManager, [{
    key: "registerOperation",
    value: function registerOperation(operation) {
      this.operations.push(operation);
      this.operationByName[operation.name] = operation;
    }
  }, {
    key: "getOperationByName",
    value: function getOperationByName(name) {
      return this.operationByName[name];
    }
  }, {
    key: "operationsForObject",
    value: function operationsForObject(object) {
      return this.operations.filter(function (op) {
        return op.isApplicable(object);
      });
    }
  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
      this.operations.forEach(function (o) {
        return o.data = data;
      });
    }
  }]);

  return OperationsManager;
}();

exports.OperationsManager = OperationsManager;

},{"./flip-subtree":77}],80:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Decision = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var Decision =
/*#__PURE__*/
function () {
  //index of  selected edge
  function Decision(node, decisionValue) {
    _classCallCheck(this, Decision);

    this.children = [];
    this.node = node;
    this.decisionValue = decisionValue;
    this.key = Decision.generateKey(this);
  }

  _createClass(Decision, [{
    key: "addDecision",
    value: function addDecision(node, decisionValue) {
      var decision = new Decision(node, decisionValue);
      this.children.push(decision);
      this.key = Decision.generateKey(this);
      return decision;
    }
  }, {
    key: "getDecision",
    value: function getDecision(decisionNode) {
      return Decision.getDecision(this, decisionNode);
    }
  }, {
    key: "toDecisionString",
    value: function toDecisionString() {
      var indent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      return Decision.toDecisionString(this, indent);
    }
  }], [{
    key: "generateKey",
    value: function generateKey(decision) {
      var keyProperty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'id';
      var e = decision.node.childEdges[decision.decisionValue];
      var key = decision.node[keyProperty] + ":" + (e[keyProperty] ? e[keyProperty] : decision.decisionValue + 1);
      return key.replace(/\n/g, ' ');
    }
  }, {
    key: "getDecision",
    value: function getDecision(decision, decisionNode) {
      if (decision.node === decisionNode || decision.node.id === decisionNode.id) {
        return decision;
      }

      for (var i = 0; i < decision.children.length; i++) {
        var d = Decision.getDecision(decision.children[i], decisionNode);

        if (d) {
          return d;
        }
      }
    }
  }, {
    key: "toDecisionString",
    value: function toDecisionString(decision) {
      var extended = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var keyProperty = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'name';
      var indent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
      var res = Decision.generateKey(decision, keyProperty);
      var childrenRes = "";
      decision.children.forEach(function (d) {
        if (childrenRes) {
          if (extended) {
            childrenRes += '\n' + indent;
          } else {
            childrenRes += ", ";
          }
        }

        childrenRes += Decision.toDecisionString(d, extended, keyProperty, indent + '\t');
      });

      if (decision.children.length) {
        if (extended) {
          childrenRes = '\n' + indent + childrenRes;
        } else {
          childrenRes = " - (" + childrenRes + ")";
        }
      }

      return res + childrenRes;
    }
  }]);

  return Decision;
}();

exports.Decision = Decision;

},{}],81:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PoliciesCollector = void 0;

var _policy = require("./policy");

var _sdModel = require("sd-model");

var _sdUtils = require("sd-utils");

var _decision = require("./decision");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var PoliciesCollector =
/*#__PURE__*/
function () {
  function PoliciesCollector(root, optimalForRuleName) {
    var _this = this;

    _classCallCheck(this, PoliciesCollector);

    this.policies = [];
    this.ruleName = false;
    this.ruleName = optimalForRuleName;
    this.collect(root).forEach(function (decisions, i) {
      _this.policies.push(new _policy.Policy("#" + (i + 1), decisions));
    });

    if (this.policies.length === 1) {
      this.policies[0].id = "default";
    }
  }

  _createClass(PoliciesCollector, [{
    key: "collect",
    value: function collect(root) {
      var _this2 = this;

      var nodeQueue = [root];
      var node;
      var decisionNodes = [];

      while (nodeQueue.length) {
        node = nodeQueue.shift();

        if (this.ruleName && !node.computedValue(this.ruleName, 'optimal')) {
          continue;
        }

        if (node instanceof _sdModel.domain.DecisionNode) {
          decisionNodes.push(node);
          continue;
        }

        node.childEdges.forEach(function (edge, i) {
          nodeQueue.push(edge.childNode);
        });
      }

      return _sdUtils.Utils.cartesianProductOf(decisionNodes.map(function (decisionNode) {
        var decisions = [];
        decisionNode.childEdges.forEach(function (edge, i) {
          if (_this2.ruleName && !edge.computedValue(_this2.ruleName, 'optimal')) {
            return;
          }

          var childDecisions = _this2.collect(edge.childNode); //all possible child decisions (cartesian)


          childDecisions.forEach(function (cd) {
            var decision = new _decision.Decision(decisionNode, i);
            decisions.push(decision);
            decision.children = cd;
          });
        });
        return decisions;
      }));
    }
  }]);

  return PoliciesCollector;
}();

exports.PoliciesCollector = PoliciesCollector;

},{"./decision":80,"./policy":82,"sd-model":"sd-model","sd-utils":"sd-utils"}],82:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Policy = void 0;

var _decision = require("./decision");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var Policy =
/*#__PURE__*/
function () {
  function Policy(id, decisions) {
    _classCallCheck(this, Policy);

    this.decisions = [];
    this.id = id;
    this.decisions = decisions || [];
    this.key = Policy.generateKey(this);
  }

  _createClass(Policy, [{
    key: "addDecision",
    value: function addDecision(node, decisionValue) {
      var decision = new _decision.Decision(node, decisionValue);
      this.decisions.push(decision);
      this.key = Policy.generateKey(this);
      return decision;
    }
  }, {
    key: "equals",
    value: function equals(policy) {
      var ignoreId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (this.key != policy.key) {
        return false;
      }

      return ignoreId || this.id === policy.id;
    }
  }, {
    key: "getDecision",
    value: function getDecision(decisionNode) {
      return Policy.getDecision(this, decisionNode);
    }
  }, {
    key: "toPolicyString",
    value: function toPolicyString() {
      var indent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      return Policy.toPolicyString(this, indent);
    }
  }], [{
    key: "generateKey",
    value: function generateKey(policy) {
      var key = "";
      policy.decisions.forEach(function (d) {
        return key += (key ? "&" : "") + d.key;
      });
      return key;
    }
  }, {
    key: "getDecision",
    value: function getDecision(policy, decisionNode) {
      for (var i = 0; i < policy.decisions.length; i++) {
        var decision = _decision.Decision.getDecision(policy.decisions[i], decisionNode);

        if (decision) {
          return decision;
        }
      }

      return null;
    }
  }, {
    key: "toPolicyString",
    value: function toPolicyString(policy) {
      var extended = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var prependId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var res = "";
      policy.decisions.forEach(function (d) {
        if (res) {
          if (extended) {
            res += "\n";
          } else {
            res += ", ";
          }
        }

        res += _decision.Decision.toDecisionString(d, extended, 'name', '\t');
      });

      if (prependId && policy.id !== undefined) {
        return policy.id + " " + res;
      }

      return res;
    }
  }]);

  return Policy;
}();

exports.Policy = Policy;

},{"./decision":80}],83:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.McdmWeightValueValidator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var McdmWeightValueValidator =
/*#__PURE__*/
function () {
  function McdmWeightValueValidator(additionalValidator) {
    _classCallCheck(this, McdmWeightValueValidator);

    this.additionalValidator = null;
    this.additionalValidator = additionalValidator;
  }

  _createClass(McdmWeightValueValidator, [{
    key: "validate",
    value: function validate(value) {
      if (value === null || value === undefined) {
        return false;
      }

      var parsed = parseFloat(value);

      if (parsed !== Infinity && !_sdExpressionEngine.ExpressionEngine.validate(value, {}, false)) {
        return false;
      }

      value = _sdExpressionEngine.ExpressionEngine.toNumber(value);
      var maxSafeInteger = Number.MAX_SAFE_INTEGER || 9007199254740991; // Number.MAX_SAFE_INTEGER is undefined in IE

      if (_sdExpressionEngine.ExpressionEngine.compare(value, 0) < 0 || value !== Infinity && _sdExpressionEngine.ExpressionEngine.compare(value, maxSafeInteger) > 0) {
        return false;
      }

      if (this.additionalValidator) {
        return this.additionalValidator(_sdExpressionEngine.ExpressionEngine.toNumber(value));
      }

      return true;
    }
  }]);

  return McdmWeightValueValidator;
}();

exports.McdmWeightValueValidator = McdmWeightValueValidator;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],84:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PayoffValueValidator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Computed base value validator*/


var PayoffValueValidator =
/*#__PURE__*/
function () {
  function PayoffValueValidator(expressionEngine) {
    _classCallCheck(this, PayoffValueValidator);

    this.expressionEngine = expressionEngine;
  }

  _createClass(PayoffValueValidator, [{
    key: "validate",
    value: function validate(value) {
      if (value === null || value === undefined) {
        return false;
      }

      value = _sdExpressionEngine.ExpressionEngine.toNumber(value);
      var maxSafeInteger = Number.MAX_SAFE_INTEGER || 9007199254740991; // Number.MAX_SAFE_INTEGER in undefined in IE

      return _sdExpressionEngine.ExpressionEngine.compare(value, -maxSafeInteger) >= 0 && _sdExpressionEngine.ExpressionEngine.compare(value, maxSafeInteger) <= 0;
    }
  }]);

  return PayoffValueValidator;
}();

exports.PayoffValueValidator = PayoffValueValidator;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],85:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbabilityValueValidator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Computed base value validator*/


var ProbabilityValueValidator =
/*#__PURE__*/
function () {
  function ProbabilityValueValidator(expressionEngine) {
    _classCallCheck(this, ProbabilityValueValidator);

    this.expressionEngine = expressionEngine;
  }

  _createClass(ProbabilityValueValidator, [{
    key: "validate",
    value: function validate(value, edge) {
      if (value === null || value === undefined) {
        return false;
      }

      var value = _sdExpressionEngine.ExpressionEngine.toNumber(value);

      return value.compare(0) >= 0 && value.compare(1) <= 0;
    }
  }]);

  return ProbabilityValueValidator;
}();

exports.ProbabilityValueValidator = ProbabilityValueValidator;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],86:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TreeValidator = void 0;

var _sdModel = require("sd-model");

var _sdExpressionEngine = require("sd-expression-engine");

var _probabilityValueValidator = require("./probability-value-validator");

var _payoffValueValidator = require("./payoff-value-validator");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var TreeValidator =
/*#__PURE__*/
function () {
  function TreeValidator(expressionEngine) {
    _classCallCheck(this, TreeValidator);

    this.expressionEngine = expressionEngine;
    this.probabilityValueValidator = new _probabilityValueValidator.ProbabilityValueValidator(expressionEngine);
    this.payoffValueValidator = new _payoffValueValidator.PayoffValueValidator(expressionEngine);
  }

  _createClass(TreeValidator, [{
    key: "validate",
    value: function validate(nodes) {
      var _this = this;

      var validationResult = new _sdModel.ValidationResult();
      nodes.forEach(function (n) {
        _this.validateNode(n, validationResult);
      });
      return validationResult;
    }
  }, {
    key: "validateNode",
    value: function validateNode(node) {
      var _this2 = this;

      var validationResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _sdModel.ValidationResult();

      if (node instanceof _sdModel.domain.TerminalNode) {
        return;
      }

      if (!node.childEdges.length) {
        validationResult.addError('incompletePath', node);
      }

      var probabilitySum = _sdExpressionEngine.ExpressionEngine.toNumber(0);

      var withHash = false;
      node.childEdges.forEach(function (e, i) {
        e.setValueValidity('probability', true);

        if (node instanceof _sdModel.domain.ChanceNode) {
          var probability = e.computedBaseProbability();

          if (!_this2.probabilityValueValidator.validate(probability)) {
            if (!_sdExpressionEngine.ExpressionEngine.isHash(e.probability)) {
              validationResult.addError({
                name: 'invalidProbability',
                data: {
                  'number': i + 1
                }
              }, node);
              e.setValueValidity('probability', false);
            }
          } else {
            probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, probability);
          }
        }

        e.payoff.forEach(function (rawPayoff, payoffIndex) {
          var path = 'payoff[' + payoffIndex + ']';
          e.setValueValidity(path, true);
          var payoff = e.computedBasePayoff(undefined, payoffIndex);

          if (!_this2.payoffValueValidator.validate(payoff)) {
            validationResult.addError({
              name: 'invalidPayoff',
              data: {
                'number': i + 1
              }
            }, node);
            e.setValueValidity(path, false);
          }
        });
      });

      if (node instanceof _sdModel.domain.ChanceNode) {
        if (isNaN(probabilitySum) || !probabilitySum.equals(1)) {
          validationResult.addError('probabilityDoNotSumUpTo1', node);
        }
      }

      return validationResult;
    }
  }]);

  return TreeValidator;
}();

exports.TreeValidator = TreeValidator;

},{"./payoff-value-validator":84,"./probability-value-validator":85,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model"}],"sd-computations":[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require("./src/index");

Object.keys(_index).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _index[key];
    }
  });
});

},{"./src/index":6}]},{},[])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaWRiL2J1aWxkL2lkYi5qcyIsInNyYy9jb21wdXRhdGlvbnMtZW5naW5lLmpzIiwic3JjL2NvbXB1dGF0aW9ucy1tYW5hZ2VyLmpzIiwic3JjL2NvbXB1dGF0aW9ucy11dGlscy5qcyIsInNyYy9leHByZXNzaW9ucy1ldmFsdWF0b3IuanMiLCJzcmMvaW5kZXguanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9sZWFndWUtdGFibGUvbGVhZ3VlLXRhYmxlLWpvYi1wYXJhbWV0ZXJzLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvbGVhZ3VlLXRhYmxlL2xlYWd1ZS10YWJsZS1qb2IuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9sZWFndWUtdGFibGUvc3RlcHMvY2FsY3VsYXRlLXN0ZXAuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9yZWNvbXB1dGUvcmVjb21wdXRlLWpvYi1wYXJhbWV0ZXJzLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvcmVjb21wdXRlL3JlY29tcHV0ZS1qb2IuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9uLXdheS9zZW5zaXRpdml0eS1hbmFseXNpcy1qb2ItcGFyYW1ldGVycy5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL24td2F5L3NlbnNpdGl2aXR5LWFuYWx5c2lzLWpvYi5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL24td2F5L3N0ZXBzL2NhbGN1bGF0ZS1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvbi13YXkvc3RlcHMvaW5pdC1wb2xpY2llcy1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvbi13YXkvc3RlcHMvcHJlcGFyZS12YXJpYWJsZXMtc3RlcC5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3Byb2JhYmlsaXN0aWMvcHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpcy1qb2ItcGFyYW1ldGVycy5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3Byb2JhYmlsaXN0aWMvcHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpcy1qb2IuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9wcm9iYWJpbGlzdGljL3N0ZXBzL2NvbXB1dGUtcG9saWN5LXN0YXRzLXN0ZXAuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9wcm9iYWJpbGlzdGljL3N0ZXBzL3Byb2ItY2FsY3VsYXRlLXN0ZXAuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9zcGlkZXItcGxvdC9zcGlkZXItcGxvdC1qb2ItcGFyYW1ldGVycy5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3NwaWRlci1wbG90L3NwaWRlci1wbG90LWpvYi5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3NwaWRlci1wbG90L3N0ZXBzL2NhbGN1bGF0ZS1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvdG9ybmFkby1kaWFncmFtL3N0ZXBzL2NhbGN1bGF0ZS1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvdG9ybmFkby1kaWFncmFtL3N0ZXBzL3ByZXBhcmUtdmFyaWFibGVzLXN0ZXAuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy90b3JuYWRvLWRpYWdyYW0vdG9ybmFkby1kaWFncmFtLWpvYi1wYXJhbWV0ZXJzLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvdG9ybmFkby1kaWFncmFtL3Rvcm5hZG8tZGlhZ3JhbS1qb2IuanMiLCJzcmMvam9icy9lbmdpbmUvYmF0Y2gvYmF0Y2gtc3RlcC5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2V4dGVuZGFibGUtZXJyb3IuanMiLCJzcmMvam9icy9lbmdpbmUvZXhjZXB0aW9ucy9pbmRleC5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1jb21wdXRhdGlvbi1leGNlcHRpb24uanMiLCJzcmMvam9icy9lbmdpbmUvZXhjZXB0aW9ucy9qb2ItZGF0YS1pbnZhbGlkLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1leGVjdXRpb24tYWxyZWFkeS1ydW5uaW5nLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1pbnN0YW5jZS1hbHJlYWR5LWNvbXBsZXRlLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1pbnRlcnJ1cHRlZC1leGNlcHRpb24uanMiLCJzcmMvam9icy9lbmdpbmUvZXhjZXB0aW9ucy9qb2ItcGFyYW1ldGVycy1pbnZhbGlkLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1yZXN0YXJ0LWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGVjdXRpb24tY29udGV4dC5qcyIsInNyYy9qb2JzL2VuZ2luZS9pbmRleC5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItZXhlY3V0aW9uLWZsYWcuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLWV4ZWN1dGlvbi1saXN0ZW5lci5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItZXhlY3V0aW9uLmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1pbnN0YW5jZS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2Ita2V5LWdlbmVyYXRvci5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItbGF1bmNoZXIuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLXBhcmFtZXRlci1kZWZpbml0aW9uLmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1wYXJhbWV0ZXJzLmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1yZXBvc2l0b3J5L2lkYi1qb2ItcmVwb3NpdG9yeS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS9qb2ItcmVwb3NpdG9yeS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS9zaW1wbGUtam9iLXJlcG9zaXRvcnkuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLXJlcG9zaXRvcnkvdGltZW91dC1qb2ItcmVwb3NpdG9yeS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItcmVzdWx0LmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1zdGF0dXMuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLmpzIiwic3JjL2pvYnMvZW5naW5lL3NpbXBsZS1qb2IuanMiLCJzcmMvam9icy9lbmdpbmUvc3RlcC1leGVjdXRpb24tbGlzdGVuZXIuanMiLCJzcmMvam9icy9lbmdpbmUvc3RlcC1leGVjdXRpb24uanMiLCJzcmMvam9icy9lbmdpbmUvc3RlcC5qcyIsInNyYy9qb2JzL2luZGV4LmpzIiwic3JjL2pvYnMvam9iLWluc3RhbmNlLW1hbmFnZXIuanMiLCJzcmMvam9icy9qb2Itd29ya2VyLmpzIiwic3JjL2pvYnMvam9icy1tYW5hZ2VyLmpzIiwic3JjL29iamVjdGl2ZS9vYmplY3RpdmUtcnVsZXMtbWFuYWdlci5qcyIsInNyYy9vYmplY3RpdmUvcnVsZXMvZXhwZWN0ZWQtdmFsdWUtbWF4aW1pemF0aW9uLXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL2V4cGVjdGVkLXZhbHVlLW1pbmltaXphdGlvbi1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9pbmRleC5qcyIsInNyYy9vYmplY3RpdmUvcnVsZXMvbWF4LW1heC1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9tYXgtbWluLXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL21heGktbWF4LXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL21heGktbWluLXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL21pbi1tYXgtcnVsZS5qcyIsInNyYy9vYmplY3RpdmUvcnVsZXMvbWluLW1pbi1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9taW5pLW1heC1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9taW5pLW1pbi1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9tdWx0aS1jcml0ZXJpYS1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9vYmplY3RpdmUtcnVsZS5qcyIsInNyYy9vcGVyYXRpb25zL2ZsaXAtc3VidHJlZS5qcyIsInNyYy9vcGVyYXRpb25zL29wZXJhdGlvbi5qcyIsInNyYy9vcGVyYXRpb25zL29wZXJhdGlvbnMtbWFuYWdlci5qcyIsInNyYy9wb2xpY2llcy9kZWNpc2lvbi5qcyIsInNyYy9wb2xpY2llcy9wb2xpY2llcy1jb2xsZWN0b3IuanMiLCJzcmMvcG9saWNpZXMvcG9saWN5LmpzIiwic3JjL3ZhbGlkYXRpb24vbWNkbS13ZWlnaHQtdmFsdWUtdmFsaWRhdG9yLmpzIiwic3JjL3ZhbGlkYXRpb24vcGF5b2ZmLXZhbHVlLXZhbGlkYXRvci5qcyIsInNyYy92YWxpZGF0aW9uL3Byb2JhYmlsaXR5LXZhbHVlLXZhbGlkYXRvci5qcyIsInNyYy92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yLmpzIiwiaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUM1VEEsSUFBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQTs7QUFDQSxJQUFBLFFBQUEsR0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBOztBQUNBLElBQUEsb0JBQUEsR0FBQSxPQUFBLENBQUEsd0JBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUthLHdCOzs7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QSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsb0JBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEscUJBQUEsR0FBQSxPQUFBLENBQUEseUJBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLHFCQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEscUJBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsTUFBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxNQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsTUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7Ozs7Ozs7OztBQ0hBLElBQUEsUUFBQSxHQUFBLE9BQUEsQ0FB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QSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxvQ0FBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxvQ0FBQSxHQUFBLE9BQUEsQ0FBQSwyQ0FBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsb0NBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxvQ0FBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSx3QkFBQSxHQUFBLE9BQUEsQ0FBQSw2QkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsd0JBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSx3QkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSw4QkFBQSxHQUFBLE9BQUEsQ0FBQSxvQ0FBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsOEJBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSw4QkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxvQkFBQSxHQUFBLE9BQUEsQ0FBQSx5QkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsb0JBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxvQkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7Ozs7Ozs7OztBQ05BLElBQUEsZ0JBQUEsR0FBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQ2EsdUI7Ozs7Ozs7Ozs7OztFQUFnQyxnQkFBQSxDQUFBLGU7Ozs7Ozs7Ozs7Ozs7O0FDRDdDLElBQUEsZ0JBQUEsR0FBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQ2EsdUI7Ozs7Ozs7Ozs7OztFQUFnQyxnQkFBQSxDQUFBLGU7Ozs7Ozs7Ozs7Ozs7O0FDRDdDLElBQUEsZ0JBQUEsR0FBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQTs7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LGFBQUEsSUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxhQUFBLEdBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxhQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsYUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxpQkFBQSxHQUFBLE9BQUEsQ0FBQSxzQkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsaUJBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxpQkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxxQkFBQSxHQUFBLE9BQUEsQ0FBQSwwQkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEscUJBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxxQkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxnQkFBQSxHQUFBLE9BQUEsQ0FBQSxxQkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsZ0JBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxnQkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSx1QkFBQSxHQUFBLE9BQUEsQ0FBQSw0QkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsdUJBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSx1QkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxjQUFBLEdBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxjQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsY0FBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxVQUFBLEdBQUEsT0FBQSxDQUFBLGNBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLFVBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxVQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLFVBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsVUFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxNQUFBLENBQUEsU0FBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLFVBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxRQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsS0FBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxjQUFBLEdBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxjQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFB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LEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSw4QkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSw4QkFBQSxHQUFBLE9BQUEsQ0FBQSxvQ0FBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsOEJBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSw4QkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7Ozs7Ozs7OztBQ05BLElBQUEsa0JBQUEsR0FBQSxPQUFBLENBQUEsdUJB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QSxZQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsTUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwuaWRiID0ge30pKTtcbn0odGhpcywgZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIHRvQXJyYXkoYXJyKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycik7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICB2YXIgcmVxdWVzdDtcbiAgICB2YXIgcCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdCA9IG9ialttZXRob2RdLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIHAucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciBwID0gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpO1xuICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBwLnJlcXVlc3QpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlQcm9wZXJ0aWVzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3h5Q2xhc3MucHJvdG90eXBlLCBwcm9wLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgdGhpc1t0YXJnZXRQcm9wXVtwcm9wXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0uYXBwbHkodGhpc1t0YXJnZXRQcm9wXSwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gSW5kZXgoaW5kZXgpIHtcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEluZGV4LCAnX2luZGV4JywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ211bHRpRW50cnknLFxuICAgICd1bmlxdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdnZXQnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgZnVuY3Rpb24gQ3Vyc29yKGN1cnNvciwgcmVxdWVzdCkge1xuICAgIHRoaXMuX2N1cnNvciA9IGN1cnNvcjtcbiAgICB0aGlzLl9yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhDdXJzb3IsICdfY3Vyc29yJywgW1xuICAgICdkaXJlY3Rpb24nLFxuICAgICdrZXknLFxuICAgICdwcmltYXJ5S2V5JyxcbiAgICAndmFsdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoQ3Vyc29yLCAnX2N1cnNvcicsIElEQkN1cnNvciwgW1xuICAgICd1cGRhdGUnLFxuICAgICdkZWxldGUnXG4gIF0pO1xuXG4gIC8vIHByb3h5ICduZXh0JyBtZXRob2RzXG4gIFsnYWR2YW5jZScsICdjb250aW51ZScsICdjb250aW51ZVByaW1hcnlLZXknXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICBpZiAoIShtZXRob2ROYW1lIGluIElEQkN1cnNvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgQ3Vyc29yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnNvciA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJzb3IuX2N1cnNvclttZXRob2ROYW1lXS5hcHBseShjdXJzb3IuX2N1cnNvciwgYXJncyk7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KGN1cnNvci5fcmVxdWVzdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgY3Vyc29yLl9yZXF1ZXN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBPYmplY3RTdG9yZShzdG9yZSkge1xuICAgIHRoaXMuX3N0b3JlID0gc3RvcmU7XG4gIH1cblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuY3JlYXRlSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmNyZWF0ZUluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuaW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnaW5kZXhOYW1lcycsXG4gICAgJ2F1dG9JbmNyZW1lbnQnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdwdXQnLFxuICAgICdhZGQnLFxuICAgICdkZWxldGUnLFxuICAgICdjbGVhcicsXG4gICAgJ2dldCcsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdkZWxldGVJbmRleCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oaWRiVHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl90eCA9IGlkYlRyYW5zYWN0aW9uO1xuICAgIHRoaXMuY29tcGxldGUgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLm9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl90eC5vYmplY3RTdG9yZS5hcHBseSh0aGlzLl90eCwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFRyYW5zYWN0aW9uLCAnX3R4JywgW1xuICAgICdvYmplY3RTdG9yZU5hbWVzJyxcbiAgICAnbW9kZSdcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFRyYW5zYWN0aW9uLCAnX3R4JywgSURCVHJhbnNhY3Rpb24sIFtcbiAgICAnYWJvcnQnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFVwZ3JhZGVEQihkYiwgb2xkVmVyc2lvbiwgdHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICAgIHRoaXMub2xkVmVyc2lvbiA9IG9sZFZlcnNpb247XG4gICAgdGhpcy50cmFuc2FjdGlvbiA9IG5ldyBUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gIH1cblxuICBVcGdyYWRlREIucHJvdG90eXBlLmNyZWF0ZU9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl9kYi5jcmVhdGVPYmplY3RTdG9yZS5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFVwZ3JhZGVEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVXBncmFkZURCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnZGVsZXRlT2JqZWN0U3RvcmUnLFxuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gREIoZGIpIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICB9XG5cbiAgREIucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbih0aGlzLl9kYi50cmFuc2FjdGlvbi5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKERCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICAvLyBBZGQgY3Vyc29yIGl0ZXJhdG9yc1xuICAvLyBUT0RPOiByZW1vdmUgdGhpcyBvbmNlIGJyb3dzZXJzIGRvIHRoZSByaWdodCB0aGluZyB3aXRoIHByb21pc2VzXG4gIFsnb3BlbkN1cnNvcicsICdvcGVuS2V5Q3Vyc29yJ10uZm9yRWFjaChmdW5jdGlvbihmdW5jTmFtZSkge1xuICAgIFtPYmplY3RTdG9yZSwgSW5kZXhdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICAgIC8vIERvbid0IGNyZWF0ZSBpdGVyYXRlS2V5Q3Vyc29yIGlmIG9wZW5LZXlDdXJzb3IgZG9lc24ndCBleGlzdC5cbiAgICAgIGlmICghKGZ1bmNOYW1lIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcblxuICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW2Z1bmNOYW1lLnJlcGxhY2UoJ29wZW4nLCAnaXRlcmF0ZScpXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgICAgICB2YXIgbmF0aXZlT2JqZWN0ID0gdGhpcy5fc3RvcmUgfHwgdGhpcy5faW5kZXg7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmF0aXZlT2JqZWN0W2Z1bmNOYW1lXS5hcHBseShuYXRpdmVPYmplY3QsIGFyZ3Muc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBwb2x5ZmlsbCBnZXRBbGxcbiAgW0luZGV4LCBPYmplY3RTdG9yZV0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsKSByZXR1cm47XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKHF1ZXJ5LCBjb3VudCkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICBpbnN0YW5jZS5pdGVyYXRlQ3Vyc29yKHF1ZXJ5LCBmdW5jdGlvbihjdXJzb3IpIHtcbiAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goY3Vyc29yLnZhbHVlKTtcblxuICAgICAgICAgIGlmIChjb3VudCAhPT0gdW5kZWZpbmVkICYmIGl0ZW1zLmxlbmd0aCA9PSBjb3VudCkge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9wZW5EYihuYW1lLCB2ZXJzaW9uLCB1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICB2YXIgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ29wZW4nLCBbbmFtZSwgdmVyc2lvbl0pO1xuICAgIHZhciByZXF1ZXN0ID0gcC5yZXF1ZXN0O1xuXG4gICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKHVwZ3JhZGVDYWxsYmFjaykge1xuICAgICAgICAgIHVwZ3JhZGVDYWxsYmFjayhuZXcgVXBncmFkZURCKHJlcXVlc3QucmVzdWx0LCBldmVudC5vbGRWZXJzaW9uLCByZXF1ZXN0LnRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbihkYikge1xuICAgICAgcmV0dXJuIG5ldyBEQihkYik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxldGVEYihuYW1lKSB7XG4gICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ2RlbGV0ZURhdGFiYXNlJywgW25hbWVdKTtcbiAgfVxuXG4gIGV4cG9ydHMub3BlbkRiID0gb3BlbkRiO1xuICBleHBvcnRzLmRlbGV0ZURiID0gZGVsZXRlRGI7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpO1xuIiwiaW1wb3J0IHtVdGlscywgbG9nfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RGF0YU1vZGVsfSBmcm9tIFwic2QtbW9kZWxcIjtcbmltcG9ydCB7Q29tcHV0YXRpb25zTWFuYWdlcn0gZnJvbSBcIi4vY29tcHV0YXRpb25zLW1hbmFnZXJcIjtcbmltcG9ydCB7Q29tcHV0YXRpb25zTWFuYWdlckNvbmZpZ30gZnJvbSBcIi4vY29tcHV0YXRpb25zLW1hbmFnZXJcIjtcblxuXG5cbmV4cG9ydCBjbGFzcyBDb21wdXRhdGlvbnNFbmdpbmVDb25maWcgZXh0ZW5kcyBDb21wdXRhdGlvbnNNYW5hZ2VyQ29uZmlne1xuICAgIGxvZ0xldmVsID0gJ3dhcm4nO1xuICAgIGNvbnN0cnVjdG9yKGN1c3RvbSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoY3VzdG9tKSB7XG4gICAgICAgICAgICBVdGlscy5kZWVwRXh0ZW5kKHRoaXMsIGN1c3RvbSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogRW50cnkgcG9pbnQgY2xhc3MgZm9yIHN0YW5kYWxvbmUgY29tcHV0YXRpb24gd29ya2Vyc1xuICovXG5leHBvcnQgY2xhc3MgQ29tcHV0YXRpb25zRW5naW5lIGV4dGVuZHMgQ29tcHV0YXRpb25zTWFuYWdlcntcblxuICAgIGdsb2JhbCA9IFV0aWxzLmdldEdsb2JhbE9iamVjdCgpO1xuICAgIGlzV29ya2VyID0gVXRpbHMuaXNXb3JrZXIoKTtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZGF0YSl7XG4gICAgICAgIHN1cGVyKGNvbmZpZywgZGF0YSk7XG5cbiAgICAgICAgaWYodGhpcy5pc1dvcmtlcikge1xuICAgICAgICAgICAgdGhpcy5qb2JzTWFuZ2VyLnJlZ2lzdGVySm9iRXhlY3V0aW9uTGlzdGVuZXIoe1xuICAgICAgICAgICAgICAgIGJlZm9yZUpvYjogKGpvYkV4ZWN1dGlvbik9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBseSgnYmVmb3JlSm9iJywgam9iRXhlY3V0aW9uLmdldERUTygpKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgYWZ0ZXJKb2I6IChqb2JFeGVjdXRpb24pPT57XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVwbHkoJ2FmdGVySm9iJywgam9iRXhlY3V0aW9uLmdldERUTygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucXVlcnlhYmxlRnVuY3Rpb25zID0ge1xuICAgICAgICAgICAgICAgIHJ1bkpvYjogZnVuY3Rpb24oam9iTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcywgZGF0YURUTyl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMsIHNlcmlhbGl6ZWREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgRGF0YU1vZGVsKGRhdGFEVE8pO1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5ydW5Kb2Ioam9iTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcywgZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBleGVjdXRlSm9iOiBmdW5jdGlvbihqb2JFeGVjdXRpb25JZCl7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmpvYnNNYW5nZXIuZXhlY3V0ZShqb2JFeGVjdXRpb25JZCkuY2F0Y2goZT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UucmVwbHkoJ2pvYkZhdGFsRXJyb3InLCBqb2JFeGVjdXRpb25JZCwgVXRpbHMuZ2V0RXJyb3JEVE8oZSkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVjb21wdXRlOiBmdW5jdGlvbihkYXRhRFRPLCBydWxlTmFtZSwgZXZhbENvZGUsIGV2YWxOdW1lcmljKXtcbiAgICAgICAgICAgICAgICAgICAgaWYocnVsZU5hbWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2Uub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgYWxsUnVsZXMgPSAhcnVsZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IERhdGFNb2RlbChkYXRhRFRPKTtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuX2NoZWNrVmFsaWRpdHlBbmRSZWNvbXB1dGVPYmplY3RpdmUoZGF0YSwgYWxsUnVsZXMsIGV2YWxDb2RlLCBldmFsTnVtZXJpYylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBseSgncmVjb21wdXRlZCcsIGRhdGEuZ2V0RFRPKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihvRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAob0V2ZW50LmRhdGEgaW5zdGFuY2VvZiBPYmplY3QgJiYgb0V2ZW50LmRhdGEuaGFzT3duUHJvcGVydHkoJ3F1ZXJ5TWV0aG9kJykgJiYgb0V2ZW50LmRhdGEuaGFzT3duUHJvcGVydHkoJ3F1ZXJ5QXJndW1lbnRzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UucXVlcnlhYmxlRnVuY3Rpb25zW29FdmVudC5kYXRhLnF1ZXJ5TWV0aG9kXS5hcHBseShzZWxmLCBvRXZlbnQuZGF0YS5xdWVyeUFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuZGVmYXVsdFJlcGx5KG9FdmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIHNldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgc3VwZXIuc2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGlmKHRoaXMuY29uZmlnLmxvZ0xldmVsKXtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9nTGV2ZWwodGhpcy5jb25maWcubG9nTGV2ZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0TG9nTGV2ZWwobGV2ZWwpe1xuICAgICAgICBsb2cuc2V0TGV2ZWwobGV2ZWwpXG4gICAgfVxuXG4gICAgZGVmYXVsdFJlcGx5KG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5yZXBseSgndGVzdCcsIG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHJlcGx5KCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3JlcGx5IC0gbm90IGVub3VnaCBhcmd1bWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdsb2JhbC5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAncXVlcnlNZXRob2RMaXN0ZW5lcic6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICAgICdxdWVyeU1ldGhvZEFyZ3VtZW50cyc6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4iLCJpbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge09iamVjdGl2ZVJ1bGVzTWFuYWdlcn0gZnJvbSBcIi4vb2JqZWN0aXZlL29iamVjdGl2ZS1ydWxlcy1tYW5hZ2VyXCI7XG5pbXBvcnQge1RyZWVWYWxpZGF0b3J9IGZyb20gXCIuL3ZhbGlkYXRpb24vdHJlZS12YWxpZGF0b3JcIjtcbmltcG9ydCB7T3BlcmF0aW9uc01hbmFnZXJ9IGZyb20gXCIuL29wZXJhdGlvbnMvb3BlcmF0aW9ucy1tYW5hZ2VyXCI7XG5pbXBvcnQge0pvYnNNYW5hZ2VyfSBmcm9tIFwiLi9qb2JzL2pvYnMtbWFuYWdlclwiO1xuaW1wb3J0IHtFeHByZXNzaW9uc0V2YWx1YXRvcn0gZnJvbSBcIi4vZXhwcmVzc2lvbnMtZXZhbHVhdG9yXCI7XG5pbXBvcnQge0pvYkluc3RhbmNlTWFuYWdlcn0gZnJvbSBcIi4vam9icy9qb2ItaW5zdGFuY2UtbWFuYWdlclwiO1xuaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gXCJzZC1tb2RlbFwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuL3BvbGljaWVzL3BvbGljeVwiO1xuaW1wb3J0IHtNY2RtV2VpZ2h0VmFsdWVWYWxpZGF0b3J9IGZyb20gXCIuL3ZhbGlkYXRpb24vbWNkbS13ZWlnaHQtdmFsdWUtdmFsaWRhdG9yXCI7XG5cbi8qKiBDb21wdXRhdGlvbiBtYW5hZ2VyIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gKiBAcGFyYW0gY3VzdG9tIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHRvIGV4dGVuZFxuICovXG5leHBvcnQgY2xhc3MgQ29tcHV0YXRpb25zTWFuYWdlckNvbmZpZyB7XG5cbiAgICAvKipcbiAgICAgKiBsb2dnaW5nIGxldmVsXG4gICAgICogKi9cbiAgICBsb2dMZXZlbCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBkZWZhdWx0IG9iamVjdGl2ZSBydWxlIG5hbWVcbiAgICAgKiAqL1xuICAgIHJ1bGVOYW1lID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIHdvcmtlciBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgICAqICovXG4gICAgd29ya2VyID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogZGVsZWdhdGUgdHJlZSByZWNvbXB1dGF0aW9uIHRvIHdvcmtlclxuICAgICAgICAgKiAqL1xuICAgICAgICBkZWxlZ2F0ZVJlY29tcHV0YXRpb246IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3b3JrZXIgdXJsXG4gICAgICAgICAqICovXG4gICAgICAgIHVybDogbnVsbFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBqb2IgcmVwb3NpdG9yeSB0byB1c2UsIGF2YWlsYWJsZSB0eXBlczogaWRiLCB0aW1lb3V0LCBzaW1wbGVcbiAgICAqICovXG4gICAgam9iUmVwb3NpdG9yeVR5cGUgPSAnaWRiJztcblxuICAgIC8qKlxuICAgICAqIGNsZWFyIHJlcG9zaXRvcnkgYWZ0ZXIgaW5pdFxuICAgICAqICovXG4gICAgY2xlYXJSZXBvc2l0b3J5ID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihjdXN0b20pIHtcbiAgICAgICAgaWYgKGN1c3RvbSkge1xuICAgICAgICAgICAgVXRpbHMuZGVlcEV4dGVuZCh0aGlzLCBjdXN0b20pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKiogQ29tcHV0YXRpb24gbWFuYWdlclxuKiBAcGFyYW0ge29iamVjdH0gY29uZmlnXG4qIEBwYXJhbSB7RGF0YU1vZGVsfSBkYXRhIG1vZGVsIG9iamVjdFxuKiAqL1xuZXhwb3J0IGNsYXNzIENvbXB1dGF0aW9uc01hbmFnZXIge1xuXG4gICAgZGF0YTtcbiAgICBleHByZXNzaW9uRW5naW5lO1xuICAgIGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcbiAgICBvcGVyYXRpb25zTWFuYWdlcjtcbiAgICBqb2JzTWFuZ2VyO1xuXG4gICAgdHJlZVZhbGlkYXRvcjtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZGF0YSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5zZXRDb25maWcoY29uZmlnKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gbmV3IEV4cHJlc3Npb25FbmdpbmUoKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciA9IG5ldyBFeHByZXNzaW9uc0V2YWx1YXRvcih0aGlzLmV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciA9IG5ldyBPYmplY3RpdmVSdWxlc01hbmFnZXIodGhpcy5leHByZXNzaW9uRW5naW5lLCB0aGlzLmNvbmZpZy5ydWxlTmFtZSk7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uc01hbmFnZXIgPSBuZXcgT3BlcmF0aW9uc01hbmFnZXIodGhpcy5kYXRhLCB0aGlzLmV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLmpvYnNNYW5nZXIgPSBuZXcgSm9ic01hbmFnZXIodGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIsIHtcbiAgICAgICAgICAgIHdvcmtlclVybDogdGhpcy5jb25maWcud29ya2VyLnVybCxcbiAgICAgICAgICAgIHJlcG9zaXRvcnlUeXBlOiB0aGlzLmNvbmZpZy5qb2JSZXBvc2l0b3J5VHlwZSxcbiAgICAgICAgICAgIGNsZWFyUmVwb3NpdG9yeTogdGhpcy5jb25maWcuY2xlYXJSZXBvc2l0b3J5XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRyZWVWYWxpZGF0b3IgPSBuZXcgVHJlZVZhbGlkYXRvcih0aGlzLmV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLm1jZG1XZWlnaHRWYWx1ZVZhbGlkYXRvciA9IG5ldyBNY2RtV2VpZ2h0VmFsdWVWYWxpZGF0b3IoKTtcbiAgICB9XG5cbiAgICBzZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gbmV3IENvbXB1dGF0aW9uc01hbmFnZXJDb25maWcoY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0RGF0YShkYXRhKXtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zTWFuYWdlci5zZXREYXRhKGRhdGEpO1xuICAgIH1cblxuXG4gICAgLyoqIEFsaWFzIGZ1bmN0aW9uIGZvciBjaGVja1ZhbGlkaXR5QW5kUmVjb21wdXRlT2JqZWN0aXZlKi9cbiAgICByZWNvbXB1dGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tWYWxpZGl0eUFuZFJlY29tcHV0ZU9iamVjdGl2ZSguLi5hcmd1bWVudHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB2YWxpZGl0eSBvZiBkYXRhIG1vZGVsIGFuZCByZWNvbXB1dGVzIG9iamVjdGl2ZSBydWxlc1xuICAgICAqIEByZXR1cm5zIHByb21pc2VcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFsbFJ1bGVzIC0gcmVjb21wdXRlIGFsbCBvYmplY3RpdmUgcnVsZXNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGV2YWxDb2RlIC0gZXZhbHVhdGUgY29kZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZXZhbE51bWVyaWMgLSBldmFsdWF0ZSBudW1lcmljIGV4cHJlc3Npb25zXG4gICAgICovXG4gICAgY2hlY2tWYWxpZGl0eUFuZFJlY29tcHV0ZU9iamVjdGl2ZShhbGxSdWxlcywgZXZhbENvZGUgPSBmYWxzZSwgZXZhbE51bWVyaWMgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLndvcmtlci5kZWxlZ2F0ZVJlY29tcHV0YXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICBldmFsQ29kZTogZXZhbENvZGUsXG4gICAgICAgICAgICAgICAgICAgIGV2YWxOdW1lcmljOiBldmFsTnVtZXJpY1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKCFhbGxSdWxlcykge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMucnVsZU5hbWUgPSB0aGlzLmdldEN1cnJlbnRSdWxlKCkubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucnVuSm9iKFwicmVjb21wdXRlXCIsIHBhcmFtcywgdGhpcy5kYXRhLCBmYWxzZSkudGhlbigoam9iRXhlY3V0aW9uKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBqb2JFeGVjdXRpb24uZ2V0RGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEudXBkYXRlRnJvbShkKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tWYWxpZGl0eUFuZFJlY29tcHV0ZU9iamVjdGl2ZSh0aGlzLmRhdGEsIGFsbFJ1bGVzLCBldmFsQ29kZSwgZXZhbE51bWVyaWMpO1xuICAgICAgICB9KS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVEaXNwbGF5VmFsdWVzKHRoaXMuZGF0YSk7XG4gICAgICAgIH0pXG5cbiAgICB9XG5cbiAgICBfY2hlY2tWYWxpZGl0eUFuZFJlY29tcHV0ZU9iamVjdGl2ZShkYXRhLCBhbGxSdWxlcywgZXZhbENvZGUgPSBmYWxzZSwgZXZhbE51bWVyaWMgPSB0cnVlKSB7XG5cbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIudXBkYXRlRGVmYXVsdENyaXRlcmlvbjFXZWlnaHQoZGF0YS5kZWZhdWx0Q3JpdGVyaW9uMVdlaWdodCk7XG4gICAgICAgIGRhdGEudmFsaWRhdGlvblJlc3VsdHMgPSBbXTtcblxuICAgICAgICBpZiAoZXZhbENvZGUgfHwgZXZhbE51bWVyaWMpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEV4cHJlc3Npb25zKGRhdGEsIGV2YWxDb2RlLCBldmFsTnVtZXJpYyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgd2VpZ2h0VmFsaWQgPSB0aGlzLm1jZG1XZWlnaHRWYWx1ZVZhbGlkYXRvci52YWxpZGF0ZShkYXRhLmRlZmF1bHRDcml0ZXJpb24xV2VpZ2h0KTtcbiAgICAgICAgdmFyIG11bHRpQ3JpdGVyaWEgPSB0aGlzLmdldEN1cnJlbnRSdWxlKCkubXVsdGlDcml0ZXJpYTtcblxuXG4gICAgICAgIGRhdGEuZ2V0Um9vdHMoKS5mb3JFYWNoKHJvb3Q9PiB7XG4gICAgICAgICAgICB2YXIgdnIgPSB0aGlzLnRyZWVWYWxpZGF0b3IudmFsaWRhdGUoZGF0YS5nZXRBbGxOb2Rlc0luU3VidHJlZShyb290KSk7XG4gICAgICAgICAgICBkYXRhLnZhbGlkYXRpb25SZXN1bHRzLnB1c2godnIpO1xuICAgICAgICAgICAgaWYgKHZyLmlzVmFsaWQoKSAmJiAoIW11bHRpQ3JpdGVyaWEgfHwgd2VpZ2h0VmFsaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIucmVjb21wdXRlVHJlZShyb290LCBhbGxSdWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtPYmplY3RpdmVSdWxlfSBjdXJyZW50IG9iamVjdGl2ZSBydWxlXG4gICAgICogKi9cbiAgICBnZXRDdXJyZW50UnVsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLmN1cnJlbnRSdWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgY3VycmVudCBvYmplY3RpdmUgcnVsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlTmFtZSAtIG5hbWUgb2Ygb2JqZWN0aXZlIHJ1bGVcbiAgICAgKiAqL1xuICAgIHNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKSB7XG4gICAgICAgIHRoaXMuY29uZmlnLnJ1bGVOYW1lID0gcnVsZU5hbWU7XG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5zZXRDdXJyZW50UnVsZUJ5TmFtZShydWxlTmFtZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICBAcGFyYW0ge3N0cmluZ30gam9iTmFtZVxuICAgICAqICBAcmV0dXJucyB7Sm9ifVxuICAgICAqICovXG4gICAgZ2V0Sm9iQnlOYW1lKGpvYk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9ic01hbmdlci5nZXRKb2JCeU5hbWUoam9iTmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMgYXJyYXkgb2Ygb3BlcmF0aW9ucyBhcHBsaWNhYmxlIHRvIHRoZSBnaXZlbiBvYmplY3QgKG5vZGUgb3IgZWRnZSlcbiAgICAgKiBAcGFyYW0gb2JqZWN0XG4gICAgICovXG4gICAgb3BlcmF0aW9uc0Zvck9iamVjdChvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9uc01hbmFnZXIub3BlcmF0aW9uc0Zvck9iamVjdChvYmplY3QpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHZhbGlkaXR5IG9mIGRhdGEgbW9kZWwgd2l0aG91dCByZWNvbXB1dGF0aW9uIGFuZCByZXZhbGlkYXRpb25cbiAgICAgKiBAcGFyYW0ge0RhdGFNb2RlbH0gZGF0YSB0byBjaGVja1xuICAgICAqL1xuXG4gICAgaXNWYWxpZChkYXRhKSB7XG4gICAgICAgIHZhciBkYXRhID0gZGF0YSB8fCB0aGlzLmRhdGE7XG4gICAgICAgIHJldHVybiBkYXRhLnZhbGlkYXRpb25SZXN1bHRzLmV2ZXJ5KHZyPT52ci5pc1ZhbGlkKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW4gam9iXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBqb2IgbmFtZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBqb2JQYXJhbXNWYWx1ZXMgLSBqb2IgcGFyYW1ldGVyIHZhbHVlcyBvYmplY3RcbiAgICAgKiBAcGFyYW0ge0RhdGFNb2RlbH0gZGF0YSBtb2RlbFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVzb2x2ZVByb21pc2VBZnRlckpvYklzTGF1bmNoZWQgLSBpbW1lZGlhdGVseSByZXNvbHZlIHByb21pc2Ugd2l0aCBzdGlsbCBydW5uaW5nIEpvYkV4ZWN1dGlvblxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSByZXNvbHZpbmcgdG8gSm9iRXhlY3V0aW9uXG4gICAgICovXG4gICAgcnVuSm9iKG5hbWUsIGpvYlBhcmFtc1ZhbHVlcywgZGF0YSwgcmVzb2x2ZVByb21pc2VBZnRlckpvYklzTGF1bmNoZWQgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIucnVuKG5hbWUsIGpvYlBhcmFtc1ZhbHVlcywgZGF0YSB8fCB0aGlzLmRhdGEsIHJlc29sdmVQcm9taXNlQWZ0ZXJKb2JJc0xhdW5jaGVkKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1biBqb2IgdXNpbmcgSm9iSW5zdGFuY2VNYW5hZ2VyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBqb2IgbmFtZVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBqb2JQYXJhbXNWYWx1ZXMgLSBqb2IgcGFyYW1ldGVyIHZhbHVlcyBvYmplY3RcbiAgICAgKiBAcGFyYW0ge0pvYkluc3RhbmNlTWFuYWdlckNvbmZpZ30gam9iSW5zdGFuY2VNYW5hZ2VyQ29uZmlnIC0gSm9iSW5zdGFuY2VNYW5hZ2VyIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gcmVzb2x2aW5nIHRvIEpvYkluc3RhbmNlTWFuYWdlclxuICAgICAqL1xuICAgIHJ1bkpvYldpdGhJbnN0YW5jZU1hbmFnZXIobmFtZSwgam9iUGFyYW1zVmFsdWVzLCBqb2JJbnN0YW5jZU1hbmFnZXJDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuSm9iKG5hbWUsIGpvYlBhcmFtc1ZhbHVlcykudGhlbihqZT0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSm9iSW5zdGFuY2VNYW5hZ2VyKHRoaXMuam9ic01hbmdlciwgamUsIGpvYkluc3RhbmNlTWFuYWdlckNvbmZpZyk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0T2JqZWN0aXZlUnVsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5ydWxlcztcbiAgICB9XG5cbiAgICBnZXRPYmplY3RpdmVSdWxlQnlOYW1lKHJ1bGVOYW1lKXtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLmdldE9iamVjdGl2ZVJ1bGVCeU5hbWUocnVsZU5hbWUpXG4gICAgfVxuXG4gICAgaXNSdWxlTmFtZShydWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuaXNSdWxlTmFtZShydWxlTmFtZSlcbiAgICB9XG5cblxuICAgIGZsaXBDcml0ZXJpYShkYXRhKXtcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgdGhpcy5kYXRhO1xuICAgICAgICBkYXRhLnJldmVyc2VQYXlvZmZzKCk7XG4gICAgICAgIGxldCB0bXAgPSBkYXRhLndlaWdodExvd2VyQm91bmQ7XG4gICAgICAgIGRhdGEud2VpZ2h0TG93ZXJCb3VuZCA9IHRoaXMuZmxpcChkYXRhLndlaWdodFVwcGVyQm91bmQpO1xuICAgICAgICBkYXRhLndlaWdodFVwcGVyQm91bmQgPSB0aGlzLmZsaXAodG1wKTtcbiAgICAgICAgZGF0YS5kZWZhdWx0Q3JpdGVyaW9uMVdlaWdodCA9IHRoaXMuZmxpcChkYXRhLmRlZmF1bHRDcml0ZXJpb24xV2VpZ2h0KTtcbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuZmxpcFJ1bGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tWYWxpZGl0eUFuZFJlY29tcHV0ZU9iamVjdGl2ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgZmxpcChhKXtcbiAgICAgICAgaWYoYSA9PSBJbmZpbml0eSl7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGEgPT0gMCl7XG4gICAgICAgICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uRW5naW5lLnNlcmlhbGl6ZShFeHByZXNzaW9uRW5naW5lLmRpdmlkZSgxLCBhKSlcbiAgICB9XG5cbiAgICB1cGRhdGVEaXNwbGF5VmFsdWVzKGRhdGEsIHBvbGljeVRvRGlzcGxheSA9IG51bGwpIHtcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgdGhpcy5kYXRhO1xuICAgICAgICBpZiAocG9saWN5VG9EaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5UG9saWN5KGRhdGEsIHBvbGljeVRvRGlzcGxheSk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLm5vZGVzLmZvckVhY2gobj0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTm9kZURpc3BsYXlWYWx1ZXMobik7XG4gICAgICAgIH0pO1xuICAgICAgICBkYXRhLmVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWRnZURpc3BsYXlWYWx1ZXMoZSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdXBkYXRlTm9kZURpc3BsYXlWYWx1ZXMobm9kZSkge1xuICAgICAgICBub2RlLiRESVNQTEFZX1ZBTFVFX05BTUVTLmZvckVhY2gobj0+bm9kZS5kaXNwbGF5VmFsdWUobiwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuZ2V0Tm9kZURpc3BsYXlWYWx1ZShub2RlLCBuKSkpO1xuICAgIH1cblxuICAgIHVwZGF0ZUVkZ2VEaXNwbGF5VmFsdWVzKGUpIHtcbiAgICAgICAgZS4kRElTUExBWV9WQUxVRV9OQU1FUy5mb3JFYWNoKG49PmUuZGlzcGxheVZhbHVlKG4sIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLmdldEVkZ2VEaXNwbGF5VmFsdWUoZSwgbikpKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5UG9saWN5KHBvbGljeVRvRGlzcGxheSwgZGF0YSkge1xuXG5cbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgdGhpcy5kYXRhO1xuICAgICAgICBkYXRhLm5vZGVzLmZvckVhY2gobj0+IHtcbiAgICAgICAgICAgIG4uY2xlYXJEaXNwbGF5VmFsdWVzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYXRhLmVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgIGUuY2xlYXJEaXNwbGF5VmFsdWVzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBkYXRhLmdldFJvb3RzKCkuZm9yRWFjaCgocm9vdCk9PnRoaXMuZGlzcGxheVBvbGljeUZvck5vZGUocm9vdCwgcG9saWN5VG9EaXNwbGF5KSk7XG4gICAgfVxuXG4gICAgZGlzcGxheVBvbGljeUZvck5vZGUobm9kZSwgcG9saWN5KSB7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKSB7XG4gICAgICAgICAgICB2YXIgZGVjaXNpb24gPSBQb2xpY3kuZ2V0RGVjaXNpb24ocG9saWN5LCBub2RlKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGVjaXNpb24sIG5vZGUsIHBvbGljeSk7XG4gICAgICAgICAgICBpZiAoZGVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICBub2RlLmRpc3BsYXlWYWx1ZSgnb3B0aW1hbCcsIHRydWUpXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkRWRnZSA9IG5vZGUuY2hpbGRFZGdlc1tkZWNpc2lvbi5kZWNpc2lvblZhbHVlXTtcbiAgICAgICAgICAgICAgICBjaGlsZEVkZ2UuZGlzcGxheVZhbHVlKCdvcHRpbWFsJywgdHJ1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5UG9saWN5Rm9yTm9kZShjaGlsZEVkZ2UuY2hpbGROb2RlLCBwb2xpY3kpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZihub2RlIGluc3RhbmNlb2YgbW9kZWwuQ2hhbmNlTm9kZSl7XG4gICAgICAgICAgICBub2RlLmRpc3BsYXlWYWx1ZSgnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+e1xuICAgICAgICAgICAgICAgIGUuZGlzcGxheVZhbHVlKCdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5UG9saWN5Rm9yTm9kZShlLmNoaWxkTm9kZSwgcG9saWN5KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfWVsc2UgaWYobm9kZSBpbnN0YW5jZW9mIG1vZGVsLlRlcm1pbmFsTm9kZSl7XG4gICAgICAgICAgICBub2RlLmRpc3BsYXlWYWx1ZSgnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICB9XG5cblxuICAgIH1cbn1cbiIsImltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5leHBvcnQgY2xhc3MgQ29tcHV0YXRpb25zVXRpbHN7XG5cbiAgICBzdGF0aWMgc2VxdWVuY2UobWluLCBtYXgsIGxlbmd0aCkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gRXhwcmVzc2lvbkVuZ2luZS5zdWJ0cmFjdChtYXgsIG1pbik7XG4gICAgICAgIHZhciByZXN1bHQgPSBbbWluXTtcbiAgICAgICAgdmFyIHN0ZXBzID0gbGVuZ3RoIC0gMTtcbiAgICAgICAgaWYoIXN0ZXBzKXtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0ZXAgPSBFeHByZXNzaW9uRW5naW5lLmRpdmlkZShleHRlbnQsbGVuZ3RoIC0gMSk7XG4gICAgICAgIHZhciBjdXJyID0gbWluO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aCAtIDI7IGkrKykge1xuICAgICAgICAgICAgY3VyciA9IEV4cHJlc3Npb25FbmdpbmUuYWRkKGN1cnIsIHN0ZXApO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KGN1cnIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQucHVzaChtYXgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge2RvbWFpbiBhcyBtb2RlbH0gZnJvbSAnc2QtbW9kZWwnXG5pbXBvcnQge1V0aWxzLCBsb2d9IGZyb20gJ3NkLXV0aWxzJ1xuXG4vKkV2YWx1YXRlcyBjb2RlIGFuZCBleHByZXNzaW9ucyBpbiB0cmVlcyovXG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvbnNFdmFsdWF0b3Ige1xuICAgIGV4cHJlc3Npb25FbmdpbmU7XG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZSA9IGV4cHJlc3Npb25FbmdpbmU7XG4gICAgfVxuXG4gICAgY2xlYXIoZGF0YSl7XG4gICAgICAgIGRhdGEubm9kZXMuZm9yRWFjaChuPT57XG4gICAgICAgICAgICBuLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEuZWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICBlLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xlYXJUcmVlKGRhdGEsIHJvb3Qpe1xuICAgICAgICBkYXRhLmdldEFsbE5vZGVzSW5TdWJ0cmVlKHJvb3QpLmZvckVhY2gobj0+e1xuICAgICAgICAgICAgbi5jbGVhckNvbXB1dGVkVmFsdWVzKCk7XG4gICAgICAgICAgICBuLmNoaWxkRWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICAgICAgZS5jbGVhckNvbXB1dGVkVmFsdWVzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGV2YWxFeHByZXNzaW9ucyhkYXRhLCBldmFsQ29kZT10cnVlLCBldmFsTnVtZXJpYz10cnVlLCBpbml0U2NvcGVzPWZhbHNlKXtcbiAgICAgICAgbG9nLmRlYnVnKCdldmFsRXhwcmVzc2lvbnMgZXZhbENvZGU6JytldmFsQ29kZSsnIGV2YWxOdW1lcmljOicrZXZhbE51bWVyaWMpO1xuICAgICAgICBpZihldmFsQ29kZSl7XG4gICAgICAgICAgICB0aGlzLmV2YWxHbG9iYWxDb2RlKGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS5nZXRSb290cygpLmZvckVhY2gobj0+e1xuICAgICAgICAgICAgdGhpcy5jbGVhclRyZWUoZGF0YSwgbik7XG4gICAgICAgICAgICB0aGlzLmV2YWxFeHByZXNzaW9uc0Zvck5vZGUoZGF0YSwgbiwgZXZhbENvZGUsIGV2YWxOdW1lcmljLGluaXRTY29wZXMpO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGV2YWxHbG9iYWxDb2RlKGRhdGEpe1xuICAgICAgICBkYXRhLmNsZWFyRXhwcmVzc2lvblNjb3BlKCk7XG4gICAgICAgIGRhdGEuJGNvZGVEaXJ0eSA9IGZhbHNlO1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBkYXRhLiRjb2RlRXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lLmV2YWwoZGF0YS5jb2RlLCBmYWxzZSwgZGF0YS5leHByZXNzaW9uU2NvcGUpO1xuICAgICAgICB9Y2F0Y2ggKGUpe1xuICAgICAgICAgICAgZGF0YS4kY29kZUVycm9yID0gZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV2YWxQYXlvZmYoZWRnZSwgaW5kZXggPSAwKSB7XG4gICAgICAgIGlmIChFeHByZXNzaW9uRW5naW5lLmhhc0Fzc2lnbm1lbnRFeHByZXNzaW9uKGVkZ2UucGF5b2ZmW2luZGV4XSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25FbmdpbmUuZXZhbChlZGdlLnBheW9mZltpbmRleF0sIHRydWUsIGVkZ2UucGFyZW50Tm9kZS5leHByZXNzaW9uU2NvcGUpO1xuICAgIH1cblxuICAgIGV2YWxFeHByZXNzaW9uc0Zvck5vZGUoZGF0YSwgbm9kZSwgZXZhbENvZGU9dHJ1ZSwgZXZhbE51bWVyaWM9dHJ1ZSwgaW5pdFNjb3BlPWZhbHNlKSB7XG4gICAgICAgIGlmKCFub2RlLmV4cHJlc3Npb25TY29wZSB8fCBpbml0U2NvcGUgfHwgZXZhbENvZGUpe1xuICAgICAgICAgICAgdGhpcy5pbml0U2NvcGVGb3JOb2RlKGRhdGEsIG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGV2YWxDb2RlKXtcbiAgICAgICAgICAgIG5vZGUuJGNvZGVEaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYobm9kZS5jb2RlKXtcbiAgICAgICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuJGNvZGVFcnJvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZS5ldmFsKG5vZGUuY29kZSwgZmFsc2UsIG5vZGUuZXhwcmVzc2lvblNjb3BlKTtcbiAgICAgICAgICAgICAgICB9Y2F0Y2ggKGUpe1xuICAgICAgICAgICAgICAgICAgICBub2RlLiRjb2RlRXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoZXZhbE51bWVyaWMpe1xuICAgICAgICAgICAgdmFyIHNjb3BlID0gbm9kZS5leHByZXNzaW9uU2NvcGU7XG4gICAgICAgICAgICB2YXIgcHJvYmFiaWxpdHlTdW09RXhwcmVzc2lvbkVuZ2luZS50b051bWJlcigwKTtcbiAgICAgICAgICAgIHZhciBoYXNoRWRnZXM9IFtdO1xuICAgICAgICAgICAgdmFyIGludmFsaWRQcm9iID0gZmFsc2U7XG5cbiAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgICAgICBlLnBheW9mZi5mb3JFYWNoKChyYXdQYXlvZmYsIHBheW9mZkluZGV4KT0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSAncGF5b2ZmWycgKyBwYXlvZmZJbmRleCArICddJztcbiAgICAgICAgICAgICAgICAgICAgaWYoZS5pc0ZpZWxkVmFsaWQocGF0aCwgdHJ1ZSwgZmFsc2UpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNvbXB1dGVkVmFsdWUobnVsbCwgcGF0aCwgdGhpcy5ldmFsUGF5b2ZmKGUsIHBheW9mZkluZGV4KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaCAoZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIExlZnQgZW1wdHkgaW50ZW50aW9uYWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cblxuXG4gICAgICAgICAgICAgICAgaWYobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkNoYW5jZU5vZGUpe1xuICAgICAgICAgICAgICAgICAgICBpZihFeHByZXNzaW9uRW5naW5lLmlzSGFzaChlLnByb2JhYmlsaXR5KSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoRWRnZXMucHVzaChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKEV4cHJlc3Npb25FbmdpbmUuaGFzQXNzaWdubWVudEV4cHJlc3Npb24oZS5wcm9iYWJpbGl0eSkpeyAvL0l0IHNob3VsZCBub3Qgb2NjdXIgaGVyZSFcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiZXZhbEV4cHJlc3Npb25zRm9yTm9kZSBoYXNBc3NpZ25tZW50RXhwcmVzc2lvbiFcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKGUuaXNGaWVsZFZhbGlkKCdwcm9iYWJpbGl0eScsIHRydWUsIGZhbHNlKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2IgPSB0aGlzLmV4cHJlc3Npb25FbmdpbmUuZXZhbChlLnByb2JhYmlsaXR5LCB0cnVlLCBzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jb21wdXRlZFZhbHVlKG51bGwsICdwcm9iYWJpbGl0eScsIHByb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2JhYmlsaXR5U3VtID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQocHJvYmFiaWxpdHlTdW0sIHByb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoIChlcnIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRQcm9iID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkUHJvYiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIGlmKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlKXtcbiAgICAgICAgICAgICAgICB2YXIgY29tcHV0ZUhhc2ggPSBoYXNoRWRnZXMubGVuZ3RoICYmICFpbnZhbGlkUHJvYiAmJiAocHJvYmFiaWxpdHlTdW0uY29tcGFyZSgwKSA+PSAwICYmIHByb2JhYmlsaXR5U3VtLmNvbXBhcmUoMSkgPD0gMCk7XG5cbiAgICAgICAgICAgICAgICBpZihjb21wdXRlSGFzaCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGFzaCA9IEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKEV4cHJlc3Npb25FbmdpbmUuc3VidHJhY3QoMSwgcHJvYmFiaWxpdHlTdW0pLCBoYXNoRWRnZXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzaEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY29tcHV0ZWRWYWx1ZShudWxsLCAncHJvYmFiaWxpdHknLCBoYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICAgICAgdGhpcy5ldmFsRXhwcmVzc2lvbnNGb3JOb2RlKGRhdGEsIGUuY2hpbGROb2RlLCBldmFsQ29kZSwgZXZhbE51bWVyaWMsIGluaXRTY29wZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluaXRTY29wZUZvck5vZGUoZGF0YSwgbm9kZSl7XG4gICAgICAgIHZhciBwYXJlbnQgPSBub2RlLiRwYXJlbnQ7XG4gICAgICAgIHZhciBwYXJlbnRTY29wZSA9IHBhcmVudD9wYXJlbnQuZXhwcmVzc2lvblNjb3BlIDogZGF0YS5leHByZXNzaW9uU2NvcGU7XG4gICAgICAgIG5vZGUuZXhwcmVzc2lvblNjb3BlID0gVXRpbHMuY2xvbmVEZWVwKHBhcmVudFNjb3BlKTtcbiAgICB9XG59XG4iLCJleHBvcnQgKiBmcm9tICcuL2NvbXB1dGF0aW9ucy1lbmdpbmUnXG5leHBvcnQgKiBmcm9tICcuL2NvbXB1dGF0aW9ucy1tYW5hZ2VyJ1xuZXhwb3J0ICogZnJvbSAnLi9leHByZXNzaW9ucy1ldmFsdWF0b3InXG5leHBvcnQgKiBmcm9tICcuL2pvYnMvaW5kZXgnXG5cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlckRlZmluaXRpb24sIFBBUkFNRVRFUl9UWVBFfSBmcm9tIFwiLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgTGVhZ3VlVGFibGVKb2JQYXJhbWV0ZXJzIGV4dGVuZHMgSm9iUGFyYW1ldGVycyB7XG5cbiAgICBpbml0RGVmaW5pdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImlkXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORywgMSwgMSwgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJydWxlTmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvblwiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIndlaWdodExvd2VyQm91bmRcIiwgUEFSQU1FVEVSX1RZUEUuTlVNQkVSX0VYUFJFU1NJT04pLnNldChcInNpbmdsZVZhbHVlVmFsaWRhdG9yXCIsICh2LCBhbGxWYWxzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdiA+PSAwICYmIHYgPD0gSm9iUGFyYW1ldGVyRGVmaW5pdGlvbi5jb21wdXRlTnVtYmVyRXhwcmVzc2lvbihhbGxWYWxzWyd3ZWlnaHRVcHBlckJvdW5kJ10pXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiZGVmYXVsdFdlaWdodFwiLCBQQVJBTUVURVJfVFlQRS5OVU1CRVJfRVhQUkVTU0lPTikuc2V0KFwic2luZ2xlVmFsdWVWYWxpZGF0b3JcIiwgKHYsIGFsbFZhbHMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB2ID49IDAgJiYgdiA+PSBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLmNvbXB1dGVOdW1iZXJFeHByZXNzaW9uKGFsbFZhbHNbJ3dlaWdodExvd2VyQm91bmQnXSkgJiYgdiA8PSBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLmNvbXB1dGVOdW1iZXJFeHByZXNzaW9uKGFsbFZhbHNbJ3dlaWdodFVwcGVyQm91bmQnXSlcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJ3ZWlnaHRVcHBlckJvdW5kXCIsIFBBUkFNRVRFUl9UWVBFLk5VTUJFUl9FWFBSRVNTSU9OKS5zZXQoXCJzaW5nbGVWYWx1ZVZhbGlkYXRvclwiLCAodiwgYWxsVmFscykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHYgPj0gMCAmJiB2ID49IEpvYlBhcmFtZXRlckRlZmluaXRpb24uY29tcHV0ZU51bWJlckV4cHJlc3Npb24oYWxsVmFsc1snd2VpZ2h0TG93ZXJCb3VuZCddKVxuICAgICAgICB9KSk7XG5cbiAgICB9XG5cblxuICAgIGluaXREZWZhdWx0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHtcbiAgICAgICAgICAgIGlkOiBVdGlscy5ndWlkKCksXG4gICAgICAgICAgICBuYW1lT2ZDcml0ZXJpb24xOiAnQ29zdCcsXG4gICAgICAgICAgICBuYW1lT2ZDcml0ZXJpb24yOiAnRWZmZWN0JyxcbiAgICAgICAgICAgIGV4dGVuZGVkUG9saWN5RGVzY3JpcHRpb246IHRydWUsXG4gICAgICAgICAgICB3ZWlnaHRMb3dlckJvdW5kOiAwLFxuICAgICAgICAgICAgZGVmYXVsdFdlaWdodDogMCxcbiAgICAgICAgICAgIHdlaWdodFVwcGVyQm91bmQ6IEluZmluaXR5LFxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtTaW1wbGVKb2J9IGZyb20gXCIuLi8uLi9lbmdpbmUvc2ltcGxlLWpvYlwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuLi8uLi8uLi9wb2xpY2llcy9wb2xpY3lcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge0NhbGN1bGF0ZVN0ZXB9IGZyb20gXCIuL3N0ZXBzL2NhbGN1bGF0ZS1zdGVwXCI7XG5pbXBvcnQge0xlYWd1ZVRhYmxlSm9iUGFyYW1ldGVyc30gZnJvbSBcIi4vbGVhZ3VlLXRhYmxlLWpvYi1wYXJhbWV0ZXJzXCI7XG5cblxuZXhwb3J0IGNsYXNzIExlYWd1ZVRhYmxlSm9iIGV4dGVuZHMgU2ltcGxlSm9iIHtcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoXCJsZWFndWUtdGFibGVcIiwgam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcik7XG4gICAgICAgIHRoaXMuaW5pdFN0ZXBzKCk7XG4gICAgfVxuXG4gICAgaW5pdFN0ZXBzKCkge1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVN0ZXAgPSBuZXcgQ2FsY3VsYXRlU3RlcCh0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IsIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyKTtcbiAgICAgICAgdGhpcy5hZGRTdGVwKHRoaXMuY2FsY3VsYXRlU3RlcCk7XG4gICAgfVxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMZWFndWVUYWJsZUpvYlBhcmFtZXRlcnModmFsdWVzKTtcbiAgICB9XG5cbiAgICBnZXRKb2JEYXRhVmFsaWRhdG9yKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWRhdGU6IChkYXRhKSA9PiBkYXRhLmdldFJvb3RzKCkubGVuZ3RoID09PSAxXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBqb2JSZXN1bHRUb0NzdlJvd3Moam9iUmVzdWx0LCBqb2JQYXJhbWV0ZXJzLCB3aXRoSGVhZGVycyA9IHRydWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAod2l0aEhlYWRlcnMpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gWydwb2xpY3lfaWQnLCAncG9saWN5Jywgam9iUmVzdWx0LnBheW9mZk5hbWVzWzBdLCBqb2JSZXN1bHQucGF5b2ZmTmFtZXNbMV0sICdkb21pbmF0ZWRfYnknLCAnZXh0ZW5kZWQtZG9taW5hdGVkX2J5JywgJ2luY3JhdGlvJywgJ29wdGltYWwnLCAnb3B0aW1hbF9mb3JfZGVmYXVsdF93ZWlnaHQnXTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGhlYWRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgam9iUmVzdWx0LnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgcm93LnBvbGljaWVzLmZvckVhY2gocG9saWN5PT4ge1xuICAgICAgICAgICAgICAgIHZhciByb3dDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgcm93LmlkLFxuICAgICAgICAgICAgICAgICAgICBQb2xpY3kudG9Qb2xpY3lTdHJpbmcocG9saWN5LCBqb2JQYXJhbWV0ZXJzLnZhbHVlcy5leHRlbmRlZFBvbGljeURlc2NyaXB0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgcm93LnBheW9mZnNbMV0sXG4gICAgICAgICAgICAgICAgICAgIHJvdy5wYXlvZmZzWzBdLFxuICAgICAgICAgICAgICAgICAgICByb3cuZG9taW5hdGVkQnksXG4gICAgICAgICAgICAgICAgICAgIHJvdy5leHRlbmRlZERvbWluYXRlZEJ5ID09PSBudWxsID8gbnVsbCA6IHJvdy5leHRlbmRlZERvbWluYXRlZEJ5WzBdICsgJywgJyArIHJvdy5leHRlbmRlZERvbWluYXRlZEJ5WzFdLFxuICAgICAgICAgICAgICAgICAgICByb3cuaW5jcmF0aW8sXG4gICAgICAgICAgICAgICAgICAgIHJvdy5vcHRpbWFsLFxuICAgICAgICAgICAgICAgICAgICByb3cub3B0aW1hbEZvckRlZmF1bHRXZWlnaHRcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJvd0NlbGxzKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtTdGVwfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL3N0ZXBcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1BvbGljaWVzQ29sbGVjdG9yfSBmcm9tIFwiLi4vLi4vLi4vLi4vcG9saWNpZXMvcG9saWNpZXMtY29sbGVjdG9yXCI7XG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuaW1wb3J0IHtUcmVlVmFsaWRhdG9yfSBmcm9tIFwiLi4vLi4vLi4vLi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY3lcIjtcblxuZXhwb3J0IGNsYXNzIENhbGN1bGF0ZVN0ZXAgZXh0ZW5kcyBTdGVwIHtcbiAgICBjb25zdHJ1Y3Rvcihqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSB7XG4gICAgICAgIHN1cGVyKFwiY2FsY3VsYXRlX3N0ZXBcIiwgam9iUmVwb3NpdG9yeSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IgPSBleHByZXNzaW9uc0V2YWx1YXRvcjtcbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIgPSBvYmplY3RpdmVSdWxlc01hbmFnZXI7XG4gICAgICAgIHRoaXMudHJlZVZhbGlkYXRvciA9IG5ldyBUcmVlVmFsaWRhdG9yKCk7XG4gICAgfVxuXG4gICAgZG9FeGVjdXRlKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgZGF0YSA9IHN0ZXBFeGVjdXRpb24uZ2V0RGF0YSgpO1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciBydWxlTmFtZSA9IHBhcmFtcy52YWx1ZShcInJ1bGVOYW1lXCIpO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5zZXRDdXJyZW50UnVsZUJ5TmFtZShydWxlTmFtZSk7XG4gICAgICAgIGxldCBydWxlID0gdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuY3VycmVudFJ1bGU7XG4gICAgICAgIHZhciB0cmVlUm9vdCA9IGRhdGEuZ2V0Um9vdHMoKVswXTtcbiAgICAgICAgdmFyIHBvbGljaWVzQ29sbGVjdG9yID0gbmV3IFBvbGljaWVzQ29sbGVjdG9yKHRyZWVSb290KTtcblxuICAgICAgICB2YXIgcG9saWNpZXMgPSBwb2xpY2llc0NvbGxlY3Rvci5wb2xpY2llcztcblxuXG4gICAgICAgIHZhciBwYXlvZmZDb2VmZnMgPSB0aGlzLnBheW9mZkNvZWZmcyA9IHJ1bGUucGF5b2ZmQ29lZmZzO1xuXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEV4cHJlc3Npb25zKGRhdGEpO1xuICAgICAgICB2YXIgdnIgPSB0aGlzLnRyZWVWYWxpZGF0b3IudmFsaWRhdGUoZGF0YS5nZXRBbGxOb2Rlc0luU3VidHJlZSh0cmVlUm9vdCkpO1xuXG4gICAgICAgIGlmICghdnIuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb21wYXJlID0gKGEsIGIpPT4oLXBheW9mZkNvZWZmc1swXSAqICAoYi5wYXlvZmZzWzBdIC0gYS5wYXlvZmZzWzBdKSkgfHwgKC1wYXlvZmZDb2VmZnNbMV0gKiAgKGEucGF5b2Zmc1sxXSAtIGIucGF5b2Zmc1sxXSkpO1xuXG4gICAgICAgIHZhciByb3dzID0gcG9saWNpZXMubWFwKHBvbGljeSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5yZWNvbXB1dGVUcmVlKHRyZWVSb290LCBmYWxzZSwgcG9saWN5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcG9saWNpZXM6IFtwb2xpY3ldLFxuICAgICAgICAgICAgICAgIHBheW9mZnM6IHRyZWVSb290LmNvbXB1dGVkVmFsdWUocnVsZU5hbWUsICdwYXlvZmYnKS5zbGljZSgpLFxuICAgICAgICAgICAgICAgIGRvbWluYXRlZEJ5OiBudWxsLFxuICAgICAgICAgICAgICAgIGV4dGVuZGVkRG9taW5hdGVkQnk6IG51bGwsXG4gICAgICAgICAgICAgICAgaW5jcmF0aW86IG51bGwsXG4gICAgICAgICAgICAgICAgb3B0aW1hbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgb3B0aW1hbEZvckRlZmF1bHRXZWlnaHQ6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnNvcnQoY29tcGFyZSk7XG5cbiAgICAgICAgcm93cyA9IHJvd3MucmVkdWNlKChwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUsIGluZGV4LCBhcnJheSk9PntcbiAgICAgICAgICAgIGlmKCFwcmV2aW91c1ZhbHVlLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtjdXJyZW50VmFsdWVdXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwcmV2ID0gcHJldmlvdXNWYWx1ZVtwcmV2aW91c1ZhbHVlLmxlbmd0aC0xXTtcbiAgICAgICAgICAgIGlmKGNvbXBhcmUocHJldiwgY3VycmVudFZhbHVlKSA9PSAwKXtcbiAgICAgICAgICAgICAgICBwcmV2LnBvbGljaWVzLnB1c2goLi4uY3VycmVudFZhbHVlLnBvbGljaWVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldmlvdXNWYWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzVmFsdWUuY29uY2F0KGN1cnJlbnRWYWx1ZSlcbiAgICAgICAgfSwgW10pO1xuXG4gICAgICAgIHJvd3Muc29ydCgoYSwgYik9PihwYXlvZmZDb2VmZnNbMF0gKiAgKGEucGF5b2Zmc1swXSAtIGIucGF5b2Zmc1swXSkpIHx8ICgtcGF5b2ZmQ29lZmZzWzFdICogICAoYS5wYXlvZmZzWzFdIC0gYi5wYXlvZmZzWzFdKSkpO1xuICAgICAgICByb3dzLmZvckVhY2goKHIsIGkpPT4ge1xuICAgICAgICAgICAgci5pZCA9IGkrMTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHJvd3Muc29ydChjb21wYXJlKTtcbiAgICAgICAgcm93cy5zb3J0KChhLCBiKT0+KC1wYXlvZmZDb2VmZnNbMF0gKiAgKGEucGF5b2Zmc1swXSAtIGIucGF5b2Zmc1swXSkpIHx8ICgtcGF5b2ZmQ29lZmZzWzFdICogICAoYS5wYXlvZmZzWzFdIC0gYi5wYXlvZmZzWzFdKSkpO1xuXG4gICAgICAgIGxldCBiZXN0Q29zdCA9IC1wYXlvZmZDb2VmZnNbMV0gKiBJbmZpbml0eSxcbiAgICAgICAgICAgIGJlc3RDb3N0Um93ID0gbnVsbDtcblxuICAgICAgICBsZXQgY21wPSAoYSwgYikgPT4gYSA+IGI7XG4gICAgICAgIGlmKHBheW9mZkNvZWZmc1sxXTwwKXtcbiAgICAgICAgICAgIGNtcD0gKGEsIGIpID0+IGEgPCBiO1xuICAgICAgICB9XG5cbiAgICAgICAgcm93cy5mb3JFYWNoKChyLCBpKT0+IHtcbiAgICAgICAgICAgIGlmIChjbXAoci5wYXlvZmZzWzFdLCBiZXN0Q29zdCkpIHtcbiAgICAgICAgICAgICAgICBiZXN0Q29zdCA9IHIucGF5b2Zmc1sxXTtcbiAgICAgICAgICAgICAgICBiZXN0Q29zdFJvdyA9IHI7XG4gICAgICAgICAgICB9IGVsc2UgaWYoYmVzdENvc3RSb3cpIHtcbiAgICAgICAgICAgICAgICByLmRvbWluYXRlZEJ5ID0gYmVzdENvc3RSb3cuaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNtcD0gKGEsIGIpID0+IGEgPCBiO1xuICAgICAgICBpZihwYXlvZmZDb2VmZnNbMF0gPiAwICYmIHBheW9mZkNvZWZmc1sxXSA8IDApe1xuICAgICAgICAgICAgY21wPSAoYSwgYikgPT4gYSA8IGI7XG4gICAgICAgIH1lbHNlIGlmKHBheW9mZkNvZWZmc1swXSA8IDAgJiYgcGF5b2ZmQ29lZmZzWzFdID4gMCl7XG4gICAgICAgICAgICBjbXA9IChhLCBiKSA9PiBhIDwgYjtcbiAgICAgICAgfWVsc2UgaWYocGF5b2ZmQ29lZmZzWzFdPDApe1xuICAgICAgICAgICAgY21wPSAoYSwgYikgPT4gYSA+IGI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcHJldjJOb3REb21pbmF0ZWQgPSBudWxsO1xuXG5cbiAgICAgICAgcm93cy5maWx0ZXIocj0+IXIuZG9taW5hdGVkQnkpLnNvcnQoKGEsIGIpPT4oICBwYXlvZmZDb2VmZnNbMF0gKiAoYS5wYXlvZmZzWzBdIC0gYi5wYXlvZmZzWzBdKSkpLmZvckVhY2goKHIsIGksIGFycik9PiB7XG4gICAgICAgICAgICBpZiAoIWkpIHtcbiAgICAgICAgICAgICAgICByLmluY3JhdGlvID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwcmV2ID0gYXJyW2kgLSAxXTtcblxuICAgICAgICAgICAgci5pbmNyYXRpbyA9IHRoaXMuY29tcHV0ZUlDRVIociwgcHJldik7XG4gICAgICAgICAgICBpZiAoaSA8IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCFwcmV2Mk5vdERvbWluYXRlZCl7XG4gICAgICAgICAgICAgICAgcHJldjJOb3REb21pbmF0ZWQgPSBhcnJbaSAtIDJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihjbXAoci5pbmNyYXRpbyxwcmV2LmluY3JhdGlvKSl7XG4gICAgICAgICAgICAgICAgcHJldi5pbmNyYXRpbyA9IG51bGw7XG4gICAgICAgICAgICAgICAgcHJldi5leHRlbmRlZERvbWluYXRlZEJ5ID0gW3ByZXYyTm90RG9taW5hdGVkLmlkLCByLmlkXSA7XG4gICAgICAgICAgICAgICAgci5pbmNyYXRpbyA9IHRoaXMuY29tcHV0ZUlDRVIociwgcHJldjJOb3REb21pbmF0ZWQpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcHJldjJOb3REb21pbmF0ZWQgPSBwcmV2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgd2VpZ2h0TG93ZXJCb3VuZCA9IHBhcmFtcy52YWx1ZShcIndlaWdodExvd2VyQm91bmRcIik7XG4gICAgICAgIGxldCBkZWZhdWx0V2VpZ2h0ID0gcGFyYW1zLnZhbHVlKFwiZGVmYXVsdFdlaWdodFwiKTtcbiAgICAgICAgbGV0IHdlaWdodFVwcGVyQm91bmQgPSBwYXJhbXMudmFsdWUoXCJ3ZWlnaHRVcHBlckJvdW5kXCIpO1xuXG4gICAgICAgIC8vbWFyayBvcHRpbWFsIGZvciB3ZWlnaHQgaW4gW3dlaWdodExvd2VyQm91bmQsIHdlaWdodFVwcGVyQm91bmRdIGFuZCBvcHRpbWFsIGZvciBkZWZhdWx0IFdlaWdodFxuICAgICAgICBsZXQgbGFzdExFTG93ZXIgPSBudWxsO1xuICAgICAgICBsZXQgbGFzdExFTG93ZXJEZWYgPSBudWxsO1xuICAgICAgICByb3dzLnNsaWNlKCkuZmlsdGVyKHI9PiFyLmRvbWluYXRlZEJ5ICYmICFyLmV4dGVuZGVkRG9taW5hdGVkQnkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGxldCBzdWIgPSBhLmluY3JhdGlvIC0gYi5pbmNyYXRpbztcbiAgICAgICAgICAgIHJldHVybiBzdWIgPyBzdWIgOiBwYXlvZmZDb2VmZnNbMF0gKiAoYS5wYXlvZmZzWzBdIC0gYi5wYXlvZmZzWzBdKVxuICAgICAgICB9KS5mb3JFYWNoKChyb3csIGksIGFycik9PntcblxuICAgICAgICAgICAgaWYocm93LmluY3JhdGlvIDwgd2VpZ2h0TG93ZXJCb3VuZCl7XG4gICAgICAgICAgICAgICAgbGFzdExFTG93ZXIgID0gcm93O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocm93LmluY3JhdGlvIDwgZGVmYXVsdFdlaWdodCl7XG4gICAgICAgICAgICAgICAgbGFzdExFTG93ZXJEZWYgID0gcm93O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByb3cub3B0aW1hbCA9IHJvdy5pbmNyYXRpbyA+PSB3ZWlnaHRMb3dlckJvdW5kICYmIHJvdy5pbmNyYXRpbyA8PSB3ZWlnaHRVcHBlckJvdW5kO1xuICAgICAgICAgICAgcm93Lm9wdGltYWxGb3JEZWZhdWx0V2VpZ2h0ID0gcm93LmluY3JhdGlvID09IGRlZmF1bHRXZWlnaHQ7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIGlmKGxhc3RMRUxvd2VyKXtcbiAgICAgICAgICAgIGxhc3RMRUxvd2VyLm9wdGltYWwgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYobGFzdExFTG93ZXJEZWYpe1xuICAgICAgICAgICAgbGFzdExFTG93ZXJEZWYub3B0aW1hbEZvckRlZmF1bHRXZWlnaHQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcm93cy5mb3JFYWNoKHJvdz0+e1xuICAgICAgICAgICAgcm93LnBheW9mZnNbMF0gPSAgRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHJvdy5wYXlvZmZzWzBdKTtcbiAgICAgICAgICAgIHJvdy5wYXlvZmZzWzFdID0gIEV4cHJlc3Npb25FbmdpbmUudG9GbG9hdChyb3cucGF5b2Zmc1sxXSk7XG4gICAgICAgICAgICByb3cuaW5jcmF0aW8gPSByb3cuaW5jcmF0aW8gPT09IG51bGwgPyBudWxsIDogRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHJvdy5pbmNyYXRpbyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGpvYlJlc3VsdC5kYXRhID0ge1xuICAgICAgICAgICAgcGF5b2ZmTmFtZXM6IGRhdGEucGF5b2ZmTmFtZXMuc2xpY2UoKSxcbiAgICAgICAgICAgIHBheW9mZkNvZWZmcyA6IHBheW9mZkNvZWZmcyxcbiAgICAgICAgICAgIHJvd3M6IHJvd3Muc29ydCgoYSwgYik9PihhLmlkIC0gYi5pZCkpLFxuICAgICAgICAgICAgd2VpZ2h0TG93ZXJCb3VuZDogRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHdlaWdodExvd2VyQm91bmQpLFxuICAgICAgICAgICAgZGVmYXVsdFdlaWdodDogRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KGRlZmF1bHRXZWlnaHQpLFxuICAgICAgICAgICAgd2VpZ2h0VXBwZXJCb3VuZDogRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHdlaWdodFVwcGVyQm91bmQpXG4gICAgICAgIH07XG5cbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzID0gSk9CX1NUQVRVUy5DT01QTEVURUQ7XG4gICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgIH1cblxuICAgIGNvbXB1dGVJQ0VSKHIsIHByZXYpe1xuICAgICAgICBsZXQgZCA9IEV4cHJlc3Npb25FbmdpbmUuc3VidHJhY3Qoci5wYXlvZmZzWzBdLCBwcmV2LnBheW9mZnNbMF0pO1xuICAgICAgICBsZXQgbiA9IEV4cHJlc3Npb25FbmdpbmUuc3VidHJhY3Qoci5wYXlvZmZzWzFdLCBwcmV2LnBheW9mZnNbMV0pO1xuICAgICAgICBpZiAoZCA9PSAwKXtcbiAgICAgICAgICAgIGlmKG48MCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0gSW5maW5pdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKG4sIGQpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyc30gZnJvbSBcIi4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLCBQQVJBTUVURVJfVFlQRX0gZnJvbSBcIi4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyLWRlZmluaXRpb25cIjtcbmV4cG9ydCBjbGFzcyBSZWNvbXB1dGVKb2JQYXJhbWV0ZXJzIGV4dGVuZHMgSm9iUGFyYW1ldGVycyB7XG5cbiAgICBpbml0RGVmaW5pdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImlkXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORywgMSwgMSwgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJydWxlTmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpLnNldCgncmVxdWlyZWQnLCBmYWxzZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJldmFsQ29kZVwiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImV2YWxOdW1lcmljXCIsIFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4pKTtcbiAgICB9XG5cbiAgICBpbml0RGVmYXVsdFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7XG4gICAgICAgICAgICBpZDogVXRpbHMuZ3VpZCgpLFxuICAgICAgICAgICAgcnVsZU5hbWU6IG51bGwsIC8vcmVjb21wdXRlIGFsbCBydWxlc1xuICAgICAgICAgICAgZXZhbENvZGU6IHRydWUsXG4gICAgICAgICAgICBldmFsTnVtZXJpYzogdHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtTaW1wbGVKb2J9IGZyb20gXCIuLi8uLi9lbmdpbmUvc2ltcGxlLWpvYlwiO1xuaW1wb3J0IHtTdGVwfSBmcm9tIFwiLi4vLi4vZW5naW5lL3N0ZXBcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4uLy4uL2VuZ2luZS9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1RyZWVWYWxpZGF0b3J9IGZyb20gXCIuLi8uLi8uLi92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yXCI7XG5pbXBvcnQge0JhdGNoU3RlcH0gZnJvbSBcIi4uLy4uL2VuZ2luZS9iYXRjaC9iYXRjaC1zdGVwXCI7XG5pbXBvcnQge1JlY29tcHV0ZUpvYlBhcmFtZXRlcnN9IGZyb20gXCIuL3JlY29tcHV0ZS1qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtKb2J9IGZyb20gXCIuLi8uLi9lbmdpbmUvam9iXCI7XG5cbmV4cG9ydCBjbGFzcyBSZWNvbXB1dGVKb2IgZXh0ZW5kcyBKb2Ige1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikge1xuICAgICAgICBzdXBlcihcInJlY29tcHV0ZVwiLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5pc1Jlc3RhcnRhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IgPSBleHByZXNzaW9uc0V2YWx1YXRvcjtcbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIgPSBvYmplY3RpdmVSdWxlc01hbmFnZXI7XG4gICAgICAgIHRoaXMudHJlZVZhbGlkYXRvciA9IG5ldyBUcmVlVmFsaWRhdG9yKCk7XG4gICAgfVxuXG4gICAgZG9FeGVjdXRlKGV4ZWN1dGlvbikge1xuICAgICAgICB2YXIgZGF0YSA9IGV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBleGVjdXRpb24uam9iUGFyYW1ldGVycztcbiAgICAgICAgdmFyIHJ1bGVOYW1lID0gcGFyYW1zLnZhbHVlKFwicnVsZU5hbWVcIik7XG4gICAgICAgIHZhciBhbGxSdWxlcyA9ICFydWxlTmFtZTtcbiAgICAgICAgaWYocnVsZU5hbWUpe1xuICAgICAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuc2V0Q3VycmVudFJ1bGVCeU5hbWUocnVsZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hlY2tWYWxpZGl0eUFuZFJlY29tcHV0ZU9iamVjdGl2ZShkYXRhLCBhbGxSdWxlcywgcGFyYW1zLnZhbHVlKFwiZXZhbENvZGVcIiksIHBhcmFtcy52YWx1ZShcImV2YWxOdW1lcmljXCIpKVxuICAgICAgICByZXR1cm4gZXhlY3V0aW9uO1xuICAgIH1cblxuICAgIGNoZWNrVmFsaWRpdHlBbmRSZWNvbXB1dGVPYmplY3RpdmUoZGF0YSwgYWxsUnVsZXMsIGV2YWxDb2RlLCBldmFsTnVtZXJpYykge1xuICAgICAgICBkYXRhLnZhbGlkYXRpb25SZXN1bHRzID0gW107XG5cbiAgICAgICAgaWYoZXZhbENvZGV8fGV2YWxOdW1lcmljKXtcbiAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEV4cHJlc3Npb25zKGRhdGEsIGV2YWxDb2RlLCBldmFsTnVtZXJpYyk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLmdldFJvb3RzKCkuZm9yRWFjaChyb290PT4ge1xuICAgICAgICAgICAgdmFyIHZyID0gdGhpcy50cmVlVmFsaWRhdG9yLnZhbGlkYXRlKGRhdGEuZ2V0QWxsTm9kZXNJblN1YnRyZWUocm9vdCkpO1xuICAgICAgICAgICAgZGF0YS52YWxpZGF0aW9uUmVzdWx0cy5wdXNoKHZyKTtcbiAgICAgICAgICAgIGlmICh2ci5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5yZWNvbXB1dGVUcmVlKHJvb3QsIGFsbFJ1bGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWNvbXB1dGVKb2JQYXJhbWV0ZXJzKHZhbHVlcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlcnN9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvam9iLXBhcmFtZXRlcnNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyRGVmaW5pdGlvbiwgUEFSQU1FVEVSX1RZUEV9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvam9iLXBhcmFtZXRlci1kZWZpbml0aW9uXCI7XG5leHBvcnQgY2xhc3MgU2Vuc2l0aXZpdHlBbmFseXNpc0pvYlBhcmFtZXRlcnMgZXh0ZW5kcyBKb2JQYXJhbWV0ZXJzIHtcblxuICAgIGluaXREZWZpbml0aW9ucygpIHtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiaWRcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HLCAxLCAxLCB0cnVlKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcInJ1bGVOYW1lXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORykpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJleHRlbmRlZFBvbGljeURlc2NyaXB0aW9uXCIsIFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4pKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiZmFpbE9uSW52YWxpZFRyZWVcIiwgUEFSQU1FVEVSX1RZUEUuQk9PTEVBTikpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJ2YXJpYWJsZXNcIiwgW1xuICAgICAgICAgICAgICAgIG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwibmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpLFxuICAgICAgICAgICAgICAgIG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwibWluXCIsIFBBUkFNRVRFUl9UWVBFLk5VTUJFUiksXG4gICAgICAgICAgICAgICAgbmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJtYXhcIiwgUEFSQU1FVEVSX1RZUEUuTlVNQkVSKSxcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImxlbmd0aFwiLCBQQVJBTUVURVJfVFlQRS5JTlRFR0VSKS5zZXQoXCJzaW5nbGVWYWx1ZVZhbGlkYXRvclwiLCB2ID0+IHYgPj0gMiksXG4gICAgICAgICAgICBdLCAxLCBJbmZpbml0eSwgZmFsc2UsXG4gICAgICAgICAgICB2ID0+IHZbXCJtaW5cIl0gPCB2W1wibWF4XCJdLFxuICAgICAgICAgICAgdmFsdWVzID0+IFV0aWxzLmlzVW5pcXVlKHZhbHVlcywgdj0+dltcIm5hbWVcIl0pIC8vVmFyaWFibGUgbmFtZXMgc2hvdWxkIGJlIHVuaXF1ZVxuICAgICAgICApKVxuICAgIH1cblxuICAgIGluaXREZWZhdWx0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHtcbiAgICAgICAgICAgIGlkOiBVdGlscy5ndWlkKCksXG4gICAgICAgICAgICBleHRlbmRlZFBvbGljeURlc2NyaXB0aW9uOiB0cnVlLFxuICAgICAgICAgICAgZmFpbE9uSW52YWxpZFRyZWU6IHRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7U2ltcGxlSm9ifSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL3NpbXBsZS1qb2JcIjtcbmltcG9ydCB7U2Vuc2l0aXZpdHlBbmFseXNpc0pvYlBhcmFtZXRlcnN9IGZyb20gXCIuL3NlbnNpdGl2aXR5LWFuYWx5c2lzLWpvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge1ByZXBhcmVWYXJpYWJsZXNTdGVwfSBmcm9tIFwiLi9zdGVwcy9wcmVwYXJlLXZhcmlhYmxlcy1zdGVwXCI7XG5pbXBvcnQge0luaXRQb2xpY2llc1N0ZXB9IGZyb20gXCIuL3N0ZXBzL2luaXQtcG9saWNpZXMtc3RlcFwiO1xuaW1wb3J0IHtDYWxjdWxhdGVTdGVwfSBmcm9tIFwiLi9zdGVwcy9jYWxjdWxhdGUtc3RlcFwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY3lcIjtcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcblxuXG5leHBvcnQgY2xhc3MgU2Vuc2l0aXZpdHlBbmFseXNpc0pvYiBleHRlbmRzIFNpbXBsZUpvYiB7XG5cbiAgICBjb25zdHJ1Y3Rvcihqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyLCBiYXRjaFNpemU9NSkge1xuICAgICAgICBzdXBlcihcInNlbnNpdGl2aXR5LWFuYWx5c2lzXCIsIGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpO1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IDU7XG4gICAgICAgIHRoaXMuaW5pdFN0ZXBzKCk7XG4gICAgfVxuXG4gICAgaW5pdFN0ZXBzKCl7XG4gICAgICAgIHRoaXMuYWRkU3RlcChuZXcgUHJlcGFyZVZhcmlhYmxlc1N0ZXAodGhpcy5qb2JSZXBvc2l0b3J5LCB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmV4cHJlc3Npb25FbmdpbmUpKTtcbiAgICAgICAgdGhpcy5hZGRTdGVwKG5ldyBJbml0UG9saWNpZXNTdGVwKHRoaXMuam9iUmVwb3NpdG9yeSkpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVN0ZXAgPSBuZXcgQ2FsY3VsYXRlU3RlcCh0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IsIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLCB0aGlzLmJhdGNoU2l6ZSk7XG4gICAgICAgIHRoaXMuYWRkU3RlcCh0aGlzLmNhbGN1bGF0ZVN0ZXApO1xuICAgIH1cblxuICAgIGNyZWF0ZUpvYlBhcmFtZXRlcnModmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2Vuc2l0aXZpdHlBbmFseXNpc0pvYlBhcmFtZXRlcnModmFsdWVzKTtcbiAgICB9XG5cbiAgICBnZXRKb2JEYXRhVmFsaWRhdG9yKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWRhdGU6IChkYXRhKSA9PiBkYXRhLmdldFJvb3RzKCkubGVuZ3RoID09PSAxXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRCYXRjaFNpemUoYmF0Y2hTaXplKXtcbiAgICAgICAgdGhpcy5iYXRjaFNpemUgPSBiYXRjaFNpemU7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlU3RlcC5jaHVua1NpemUgPSBiYXRjaFNpemU7XG4gICAgfVxuXG4gICAgam9iUmVzdWx0VG9Dc3ZSb3dzKGpvYlJlc3VsdCwgam9iUGFyYW1ldGVycywgd2l0aEhlYWRlcnM9dHJ1ZSl7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgaWYod2l0aEhlYWRlcnMpe1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbJ3BvbGljeV9udW1iZXInLCAncG9saWN5J107XG4gICAgICAgICAgICBqb2JSZXN1bHQudmFyaWFibGVOYW1lcy5mb3JFYWNoKG49PmhlYWRlcnMucHVzaChuKSk7XG4gICAgICAgICAgICBoZWFkZXJzLnB1c2goJ3BheW9mZicpO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goaGVhZGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcm91bmRWYXJpYWJsZXMgPSAhIWpvYlBhcmFtZXRlcnMudmFsdWVzLnJvdW5kVmFyaWFibGVzO1xuICAgICAgICBpZihyb3VuZFZhcmlhYmxlcyl7XG4gICAgICAgICAgICB0aGlzLnJvdW5kVmFyaWFibGVzKGpvYlJlc3VsdCk7XG4gICAgICAgIH1cblxuICAgICAgICBqb2JSZXN1bHQucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICB2YXIgcG9saWN5ID0gam9iUmVzdWx0LnBvbGljaWVzW3Jvdy5wb2xpY3lJbmRleF07XG4gICAgICAgICAgICB2YXIgcm93Q2VsbHMgPSBbcm93LnBvbGljeUluZGV4KzEsIFBvbGljeS50b1BvbGljeVN0cmluZyhwb2xpY3ksIGpvYlBhcmFtZXRlcnMudmFsdWVzLmV4dGVuZGVkUG9saWN5RGVzY3JpcHRpb24pXTtcbiAgICAgICAgICAgIHJvdy52YXJpYWJsZXMuZm9yRWFjaCh2PT4gcm93Q2VsbHMucHVzaCh2KSk7XG4gICAgICAgICAgICByb3dDZWxscy5wdXNoKHJvdy5wYXlvZmYpO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gocm93Q2VsbHMpO1xuXG4gICAgICAgICAgICBpZihyb3cuX3ZhcmlhYmxlcyl7IC8vcmV2ZXJ0IG9yaWdpbmFsIHZhcmlhYmxlc1xuICAgICAgICAgICAgICAgIHJvdy52YXJpYWJsZXMgPSByb3cuX3ZhcmlhYmxlcztcbiAgICAgICAgICAgICAgICBkZWxldGUgcm93Ll92YXJpYWJsZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcm91bmRWYXJpYWJsZXMoam9iUmVzdWx0KXtcbiAgICAgICAgdmFyIHVuaXF1ZVZhbHVlcyA9IGpvYlJlc3VsdC52YXJpYWJsZU5hbWVzLm1hcCgoKT0+bmV3IFNldCgpKTtcblxuICAgICAgICBqb2JSZXN1bHQucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICByb3cuX3ZhcmlhYmxlcyA9IHJvdy52YXJpYWJsZXMuc2xpY2UoKTsgLy8gc2F2ZSBvcmlnaW5hbCByb3cgdmFyaWFibGVzXG4gICAgICAgICAgICByb3cudmFyaWFibGVzLmZvckVhY2goKHYsaSk9PiB7XG4gICAgICAgICAgICAgICAgdW5pcXVlVmFsdWVzW2ldLmFkZCh2KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciB1bmlxdWVWYWx1ZXNObyA9IHVuaXF1ZVZhbHVlcy5tYXAoKHMpPT5zLnNpemUpO1xuICAgICAgICB2YXIgbWF4UHJlY2lzaW9uID0gMTQ7XG4gICAgICAgIHZhciBwcmVjaXNpb24gPSAyO1xuICAgICAgICB2YXIgbm90UmVhZHlWYXJpYWJsZXNJbmRleGVzID0gam9iUmVzdWx0LnZhcmlhYmxlTmFtZXMubWFwKCh2LGkpPT5pKTtcbiAgICAgICAgd2hpbGUocHJlY2lzaW9uPD1tYXhQcmVjaXNpb24gJiYgbm90UmVhZHlWYXJpYWJsZXNJbmRleGVzLmxlbmd0aCl7XG4gICAgICAgICAgICB1bmlxdWVWYWx1ZXMgPSBub3RSZWFkeVZhcmlhYmxlc0luZGV4ZXMubWFwKCgpPT5uZXcgU2V0KCkpO1xuICAgICAgICAgICAgam9iUmVzdWx0LnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgICAgIG5vdFJlYWR5VmFyaWFibGVzSW5kZXhlcy5mb3JFYWNoKCh2YXJpYWJsZUluZGV4LCBub3RSZWFkeUluZGV4KT0+e1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSByb3cuX3ZhcmlhYmxlc1t2YXJpYWJsZUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gVXRpbHMucm91bmQodmFsLCBwcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWVWYWx1ZXNbbm90UmVhZHlJbmRleF0uYWRkKHZhbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcm93LnZhcmlhYmxlc1t2YXJpYWJsZUluZGV4XSA9IHZhbDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBuZXdSZWFkeUluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHVuaXF1ZVZhbHVlcy5mb3JFYWNoKCh1bmlxdWVWYWxzLCBub3RSZWFkeUluZGV4KT0+e1xuICAgICAgICAgICAgICAgIHZhciBvcmlnVW5pcXVlQ291bnQgPSB1bmlxdWVWYWx1ZXNOb1tub3RSZWFkeVZhcmlhYmxlc0luZGV4ZXNbbm90UmVhZHlJbmRleF1dIDtcbiAgICAgICAgICAgICAgICBpZihvcmlnVW5pcXVlQ291bnQ9PXVuaXF1ZVZhbHMuc2l6ZSl7IC8vcmVhZHkgaW4gcHJldmlvdXMgaXRlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIG5ld1JlYWR5SW5kZXhlcy5wdXNoKG5vdFJlYWR5SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYobmV3UmVhZHlJbmRleGVzLmxlbmd0aCkgeyAvL3JldmVydCB2YWx1ZXMgdG8gcHJldiBpdGVyYXRpb25cbiAgICAgICAgICAgICAgICBuZXdSZWFkeUluZGV4ZXMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIG5ld1JlYWR5SW5kZXhlcy5mb3JFYWNoKG5vdFJlYWR5SW5kZXg9PntcbiAgICAgICAgICAgICAgICAgICAgbm90UmVhZHlWYXJpYWJsZXNJbmRleGVzLnNwbGljZShub3RSZWFkeUluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJlY2lzaW9uKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlNob3VsZCByZXR1cm4gcHJvZ3Jlc3Mgb2JqZWN0IHdpdGggZmllbGRzOlxuICAgICAqIGN1cnJlbnRcbiAgICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKGV4ZWN1dGlvbil7XG5cbiAgICAgICAgaWYgKGV4ZWN1dGlvbi5zdGVwRXhlY3V0aW9ucy5sZW5ndGggPD0gMikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgICAgICBjdXJyZW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHNbMl0uZ2V0UHJvZ3Jlc3MoZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zWzJdKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge0JhdGNoU3RlcH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9iYXRjaC9iYXRjaC1zdGVwXCI7XG5pbXBvcnQge1RyZWVWYWxpZGF0b3J9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yXCI7XG5pbXBvcnQge1BvbGljeX0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3BvbGljaWVzL3BvbGljeVwiO1xuaW1wb3J0IHtKb2JDb21wdXRhdGlvbkV4Y2VwdGlvbn0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9leGNlcHRpb25zL2pvYi1jb21wdXRhdGlvbi1leGNlcHRpb25cIjtcblxuZXhwb3J0IGNsYXNzIENhbGN1bGF0ZVN0ZXAgZXh0ZW5kcyBCYXRjaFN0ZXAge1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlciwgYmF0Y2hTaXplKSB7XG4gICAgICAgIHN1cGVyKFwiY2FsY3VsYXRlX3N0ZXBcIiwgam9iUmVwb3NpdG9yeSwgYmF0Y2hTaXplKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciA9IGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciA9IG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcbiAgICAgICAgdGhpcy50cmVlVmFsaWRhdG9yID0gbmV3IFRyZWVWYWxpZGF0b3IoKTtcbiAgICB9XG5cbiAgICBpbml0KHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgam9iRXhlY3V0aW9uQ29udGV4dCA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpO1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciBydWxlTmFtZSA9IHBhcmFtcy52YWx1ZShcInJ1bGVOYW1lXCIpO1xuXG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKTtcbiAgICAgICAgdmFyIHZhcmlhYmxlVmFsdWVzID0gam9iUmVzdWx0LmRhdGEudmFyaWFibGVWYWx1ZXM7XG4gICAgICAgIHZhciB2YXJpYWJsZU5hbWVzID0gcGFyYW1zLnZhbHVlKFwidmFyaWFibGVzXCIpLm1hcCh2PT52Lm5hbWUpO1xuICAgICAgICBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucHV0KFwidmFyaWFibGVOYW1lc1wiLCB2YXJpYWJsZU5hbWVzKTtcblxuXG4gICAgICAgIGlmICgham9iUmVzdWx0LmRhdGEucm93cykge1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEucm93cyA9IFtdO1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEudmFyaWFibGVOYW1lcyA9IHZhcmlhYmxlTmFtZXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFyaWFibGVWYWx1ZXMubGVuZ3RoO1xuICAgIH1cblxuXG4gICAgcmVhZE5leHRDaHVuayhzdGVwRXhlY3V0aW9uLCBzdGFydEluZGV4LCBjaHVua1NpemUsIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgdmFyaWFibGVWYWx1ZXMgPSBqb2JSZXN1bHQuZGF0YS52YXJpYWJsZVZhbHVlcztcbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlVmFsdWVzLnNsaWNlKHN0YXJ0SW5kZXgsIHN0YXJ0SW5kZXggKyBjaHVua1NpemUpO1xuICAgIH1cblxuXG4gICAgcHJvY2Vzc0l0ZW0oc3RlcEV4ZWN1dGlvbiwgaXRlbSkge1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciBydWxlTmFtZSA9IHBhcmFtcy52YWx1ZShcInJ1bGVOYW1lXCIpO1xuICAgICAgICB2YXIgZmFpbE9uSW52YWxpZFRyZWUgPSBwYXJhbXMudmFsdWUoXCJmYWlsT25JbnZhbGlkVHJlZVwiKTtcbiAgICAgICAgdmFyIGRhdGEgPSBzdGVwRXhlY3V0aW9uLmdldERhdGEoKTtcbiAgICAgICAgdmFyIHRyZWVSb290ID0gZGF0YS5nZXRSb290cygpWzBdO1xuICAgICAgICB2YXIgdmFyaWFibGVOYW1lcyA9IHN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dC5nZXQoXCJ2YXJpYWJsZU5hbWVzXCIpO1xuICAgICAgICB2YXIgcG9saWNpZXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKS5nZXQoXCJwb2xpY2llc1wiKTtcblxuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmNsZWFyKGRhdGEpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmV2YWxHbG9iYWxDb2RlKGRhdGEpO1xuICAgICAgICB2YXJpYWJsZU5hbWVzLmZvckVhY2goKHZhcmlhYmxlTmFtZSwgaSk9PiB7XG4gICAgICAgICAgICBkYXRhLmV4cHJlc3Npb25TY29wZVt2YXJpYWJsZU5hbWVdID0gaXRlbVtpXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsRXhwcmVzc2lvbnNGb3JOb2RlKGRhdGEsIHRyZWVSb290KTtcbiAgICAgICAgdmFyIHZyID0gdGhpcy50cmVlVmFsaWRhdG9yLnZhbGlkYXRlKGRhdGEuZ2V0QWxsTm9kZXNJblN1YnRyZWUodHJlZVJvb3QpKTtcblxuICAgICAgICB2YXIgdmFsaWQgPSB2ci5pc1ZhbGlkKCk7XG5cbiAgICAgICAgaWYoIXZhbGlkICYmIGZhaWxPbkludmFsaWRUcmVlKXtcbiAgICAgICAgICAgIGxldCBlcnJvckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7fVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhcmlhYmxlTmFtZXMuZm9yRWFjaCgodmFyaWFibGVOYW1lLCBpKT0+IHtcbiAgICAgICAgICAgICAgICBlcnJvckRhdGEudmFyaWFibGVzW3ZhcmlhYmxlTmFtZV0gPSBpdGVtW2ldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSm9iQ29tcHV0YXRpb25FeGNlcHRpb24oXCJjb21wdXRhdGlvbnNcIiwgZXJyb3JEYXRhKVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBheW9mZnMgPSBbXTtcblxuICAgICAgICBwb2xpY2llcy5mb3JFYWNoKHBvbGljeT0+IHtcbiAgICAgICAgICAgIHZhciBwYXlvZmYgPSAnbi9hJztcbiAgICAgICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnJlY29tcHV0ZVRyZWUodHJlZVJvb3QsIGZhbHNlLCBwb2xpY3kpO1xuICAgICAgICAgICAgICAgIHBheW9mZiA9IHRyZWVSb290LmNvbXB1dGVkVmFsdWUocnVsZU5hbWUsICdwYXlvZmYnKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBheW9mZnMucHVzaChwYXlvZmYpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9saWNpZXM6IHBvbGljaWVzLFxuICAgICAgICAgICAgdmFyaWFibGVzOiBpdGVtLFxuICAgICAgICAgICAgcGF5b2ZmczogcGF5b2Zmc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHdyaXRlQ2h1bmsoc3RlcEV4ZWN1dGlvbiwgaXRlbXMsIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciBleHRlbmRlZFBvbGljeURlc2NyaXB0aW9uID0gcGFyYW1zLnZhbHVlKFwiZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvblwiKTtcblxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW09PiB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLnBvbGljaWVzLmZvckVhY2goKHBvbGljeSwgaSk9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHZhcmlhYmxlcyA9IGl0ZW0udmFyaWFibGVzLm1hcCh2ID0+IHRoaXMudG9GbG9hdCh2KSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGF5b2ZmID0gaXRlbS5wYXlvZmZzW2ldO1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBvbGljeUluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgcGF5b2ZmOiBVdGlscy5pc1N0cmluZyhwYXlvZmYpID8gcGF5b2ZmIDogdGhpcy50b0Zsb2F0KHBheW9mZilcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnJvd3MucHVzaChyb3cpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwb3N0UHJvY2VzcyhzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgZGVsZXRlIGpvYlJlc3VsdC5kYXRhLnZhcmlhYmxlVmFsdWVzO1xuICAgIH1cblxuXG4gICAgdG9GbG9hdCh2KSB7XG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQodik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtTdGVwfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL3N0ZXBcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1BvbGljaWVzQ29sbGVjdG9yfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vcG9saWNpZXMvcG9saWNpZXMtY29sbGVjdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBJbml0UG9saWNpZXNTdGVwIGV4dGVuZHMgU3RlcCB7XG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSkge1xuICAgICAgICBzdXBlcihcImluaXRfcG9saWNpZXNcIiwgam9iUmVwb3NpdG9yeSk7XG4gICAgfVxuXG4gICAgZG9FeGVjdXRlKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgZGF0YSA9IHN0ZXBFeGVjdXRpb24uZ2V0RGF0YSgpO1xuICAgICAgICB2YXIgdHJlZVJvb3QgPSBkYXRhLmdldFJvb3RzKClbMF07XG4gICAgICAgIHZhciBwb2xpY2llc0NvbGxlY3RvciA9IG5ldyBQb2xpY2llc0NvbGxlY3Rvcih0cmVlUm9vdCk7XG5cbiAgICAgICAgdmFyIHBvbGljaWVzID0gcG9saWNpZXNDb2xsZWN0b3IucG9saWNpZXM7XG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpLnB1dChcInBvbGljaWVzXCIsIHBvbGljaWVzKTtcblxuICAgICAgICBpZigham9iUmVzdWx0LmRhdGEpe1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGE9e31cbiAgICAgICAgfVxuXG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzID0gcG9saWNpZXM7XG5cbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzID0gSk9CX1NUQVRVUy5DT01QTEVURUQ7XG4gICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtTdGVwfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL3N0ZXBcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge0NvbXB1dGF0aW9uc1V0aWxzfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vY29tcHV0YXRpb25zLXV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBQcmVwYXJlVmFyaWFibGVzU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25FbmdpbmUpIHtcbiAgICAgICAgc3VwZXIoXCJwcmVwYXJlX3ZhcmlhYmxlc1wiLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbkVuZ2luZTtcbiAgICB9XG5cbiAgICBkb0V4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgdmFyIHZhcmlhYmxlcyA9IHBhcmFtcy52YWx1ZShcInZhcmlhYmxlc1wiKTtcblxuICAgICAgICB2YXIgdmFyaWFibGVWYWx1ZXMgPSBbXTtcbiAgICAgICAgdmFyaWFibGVzLmZvckVhY2godj0+IHtcbiAgICAgICAgICAgIHZhcmlhYmxlVmFsdWVzLnB1c2goQ29tcHV0YXRpb25zVXRpbHMuc2VxdWVuY2Uodi5taW4sIHYubWF4LCB2Lmxlbmd0aCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyaWFibGVWYWx1ZXMgPSBVdGlscy5jYXJ0ZXNpYW5Qcm9kdWN0T2YodmFyaWFibGVWYWx1ZXMpO1xuICAgICAgICBqb2JSZXN1bHQuZGF0YT17XG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlczogdmFyaWFibGVWYWx1ZXNcbiAgICAgICAgfTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzID0gSk9CX1NUQVRVUy5DT01QTEVURUQ7XG4gICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlckRlZmluaXRpb24sIFBBUkFNRVRFUl9UWVBFfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvblwiO1xuZXhwb3J0IGNsYXNzIFByb2JhYmlsaXN0aWNTZW5zaXRpdml0eUFuYWx5c2lzSm9iUGFyYW1ldGVycyBleHRlbmRzIEpvYlBhcmFtZXRlcnMge1xuXG4gICAgaW5pdERlZmluaXRpb25zKCkge1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJpZFwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcsIDEsIDEsIHRydWUpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwicnVsZU5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImZhaWxPbkludmFsaWRUcmVlXCIsIFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4pKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvblwiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm51bWJlck9mUnVuc1wiLCBQQVJBTUVURVJfVFlQRS5JTlRFR0VSKS5zZXQoXCJzaW5nbGVWYWx1ZVZhbGlkYXRvclwiLCB2ID0+IHYgPiAwKSk7XG5cbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwidmFyaWFibGVzXCIsIFtcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKSxcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImZvcm11bGFcIiwgUEFSQU1FVEVSX1RZUEUuTlVNQkVSX0VYUFJFU1NJT04pXG4gICAgICAgICAgICBdLCAxLCBJbmZpbml0eSwgZmFsc2UsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgdmFsdWVzID0+IFV0aWxzLmlzVW5pcXVlKHZhbHVlcywgdj0+dltcIm5hbWVcIl0pIC8vVmFyaWFibGUgbmFtZXMgc2hvdWxkIGJlIHVuaXF1ZVxuICAgICAgICApKVxuICAgIH1cblxuICAgIGluaXREZWZhdWx0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHtcbiAgICAgICAgICAgIGlkOiBVdGlscy5ndWlkKCksXG4gICAgICAgICAgICBleHRlbmRlZFBvbGljeURlc2NyaXB0aW9uOiB0cnVlLFxuICAgICAgICAgICAgZmFpbE9uSW52YWxpZFRyZWU6IHRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7UHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi9wcm9iYWJpbGlzdGljLXNlbnNpdGl2aXR5LWFuYWx5c2lzLWpvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0luaXRQb2xpY2llc1N0ZXB9IGZyb20gXCIuLi9uLXdheS9zdGVwcy9pbml0LXBvbGljaWVzLXN0ZXBcIjtcbmltcG9ydCB7U2Vuc2l0aXZpdHlBbmFseXNpc0pvYn0gZnJvbSBcIi4uL24td2F5L3NlbnNpdGl2aXR5LWFuYWx5c2lzLWpvYlwiO1xuaW1wb3J0IHtQcm9iQ2FsY3VsYXRlU3RlcH0gZnJvbSBcIi4vc3RlcHMvcHJvYi1jYWxjdWxhdGUtc3RlcFwiO1xuaW1wb3J0IHtDb21wdXRlUG9saWN5U3RhdHNTdGVwfSBmcm9tIFwiLi9zdGVwcy9jb21wdXRlLXBvbGljeS1zdGF0cy1zdGVwXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9iYWJpbGlzdGljU2Vuc2l0aXZpdHlBbmFseXNpc0pvYiBleHRlbmRzIFNlbnNpdGl2aXR5QW5hbHlzaXNKb2Ige1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlciwgYmF0Y2hTaXplPTUpIHtcbiAgICAgICAgc3VwZXIoam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlciwgYmF0Y2hTaXplKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJwcm9iYWJpbGlzdGljLXNlbnNpdGl2aXR5LWFuYWx5c2lzXCI7XG4gICAgfVxuXG4gICAgaW5pdFN0ZXBzKCkge1xuICAgICAgICB0aGlzLmFkZFN0ZXAobmV3IEluaXRQb2xpY2llc1N0ZXAodGhpcy5qb2JSZXBvc2l0b3J5KSk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlU3RlcCA9IG5ldyBQcm9iQ2FsY3VsYXRlU3RlcCh0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IsIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLCB0aGlzLmJhdGNoU2l6ZSk7XG4gICAgICAgIHRoaXMuYWRkU3RlcCh0aGlzLmNhbGN1bGF0ZVN0ZXApO1xuICAgICAgICB0aGlzLmFkZFN0ZXAobmV3IENvbXB1dGVQb2xpY3lTdGF0c1N0ZXAodGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5leHByZXNzaW9uRW5naW5lLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciwgdGhpcy5qb2JSZXBvc2l0b3J5KSk7XG4gICAgfVxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9iYWJpbGlzdGljU2Vuc2l0aXZpdHlBbmFseXNpc0pvYlBhcmFtZXRlcnModmFsdWVzKTtcbiAgICB9XG5cbiAgICAvKlNob3VsZCByZXR1cm4gcHJvZ3Jlc3Mgb2JqZWN0IHdpdGggZmllbGRzOlxuICAgICAqIGN1cnJlbnRcbiAgICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKGV4ZWN1dGlvbikge1xuXG4gICAgICAgIGlmIChleGVjdXRpb24uc3RlcEV4ZWN1dGlvbnMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG90YWw6IDEsXG4gICAgICAgICAgICAgICAgY3VycmVudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzWzFdLmdldFByb2dyZXNzKGV4ZWN1dGlvbi5zdGVwRXhlY3V0aW9uc1sxXSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtsb2csIFV0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7U3RlcH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9zdGVwXCI7XG5pbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcblxuZXhwb3J0IGNsYXNzIENvbXB1dGVQb2xpY3lTdGF0c1N0ZXAgZXh0ZW5kcyBTdGVwIHtcbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lLCBvYmplY3RpdmVSdWxlc01hbmFnZXIsIGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgc3VwZXIoXCJjb21wdXRlX3BvbGljeV9zdGF0c1wiLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbkVuZ2luZTtcbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIgPSBvYmplY3RpdmVSdWxlc01hbmFnZXI7XG4gICAgfVxuXG4gICAgZG9FeGVjdXRlKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciBudW1iZXJPZlJ1bnMgPSBwYXJhbXMudmFsdWUoXCJudW1iZXJPZlJ1bnNcIik7XG4gICAgICAgIHZhciBydWxlTmFtZSA9IHBhcmFtcy52YWx1ZShcInJ1bGVOYW1lXCIpO1xuXG4gICAgICAgIGxldCBydWxlID0gdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIucnVsZUJ5TmFtZVtydWxlTmFtZV07XG5cblxuICAgICAgICB2YXIgcGF5b2Zmc1BlclBvbGljeSA9IGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLm1hcCgoKT0+W10pO1xuXG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnJvd3MuZm9yRWFjaChyb3c9PiB7XG4gICAgICAgICAgICBwYXlvZmZzUGVyUG9saWN5W3Jvdy5wb2xpY3lJbmRleF0ucHVzaChVdGlscy5pc1N0cmluZyhyb3cucGF5b2ZmKSA/IDAgOiByb3cucGF5b2ZmKVxuICAgICAgICB9KTtcblxuICAgICAgICBsb2cuZGVidWcoJ3BheW9mZnNQZXJQb2xpY3knLCBwYXlvZmZzUGVyUG9saWN5LCBqb2JSZXN1bHQuZGF0YS5yb3dzLmxlbmd0aCwgcnVsZS5tYXhpbWl6YXRpb24pO1xuXG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLm1lZGlhbnMgPSBwYXlvZmZzUGVyUG9saWN5Lm1hcChwYXlvZmZzPT5FeHByZXNzaW9uRW5naW5lLm1lZGlhbihwYXlvZmZzKSk7XG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnN0YW5kYXJkRGV2aWF0aW9ucyA9IHBheW9mZnNQZXJQb2xpY3kubWFwKHBheW9mZnM9PkV4cHJlc3Npb25FbmdpbmUuc3RkKHBheW9mZnMpKTtcblxuICAgICAgICBpZiAocnVsZS5tYXhpbWl6YXRpb24pIHtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljeUlzQmVzdFByb2JhYmlsaXRpZXMgPSBqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0hpZ2hlc3RQYXlvZmZDb3VudC5tYXAodj0+RXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKHYsIG51bWJlck9mUnVucykpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljeUlzQmVzdFByb2JhYmlsaXRpZXMgPSBqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0xvd2VzdFBheW9mZkNvdW50Lm1hcCh2PT5FeHByZXNzaW9uRW5naW5lLnRvRmxvYXQoRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUodiwgbnVtYmVyT2ZSdW5zKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgam9iUmVzdWx0LmRhdGEucG9saWN5VG9IaWdoZXN0UGF5b2ZmQ291bnQgPSBqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0hpZ2hlc3RQYXlvZmZDb3VudC5tYXAodj0+RXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHYpKTtcbiAgICAgICAgam9iUmVzdWx0LmRhdGEucG9saWN5VG9Mb3dlc3RQYXlvZmZDb3VudCA9IGpvYlJlc3VsdC5kYXRhLnBvbGljeVRvTG93ZXN0UGF5b2ZmQ291bnQubWFwKHY9PkV4cHJlc3Npb25FbmdpbmUudG9GbG9hdCh2KSk7XG5cblxuICAgICAgICBzdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb247XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuaW1wb3J0IHtDYWxjdWxhdGVTdGVwfSBmcm9tIFwiLi4vLi4vbi13YXkvc3RlcHMvY2FsY3VsYXRlLXN0ZXBcIjtcbmltcG9ydCB7Sm9iQ29tcHV0YXRpb25FeGNlcHRpb259IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvZXhjZXB0aW9ucy9qb2ItY29tcHV0YXRpb24tZXhjZXB0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9iQ2FsY3VsYXRlU3RlcCBleHRlbmRzIENhbGN1bGF0ZVN0ZXAge1xuXG4gICAgaW5pdChzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdmFyIGpvYkV4ZWN1dGlvbkNvbnRleHQgPSBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKTtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgcnVsZU5hbWUgPSBwYXJhbXMudmFsdWUoXCJydWxlTmFtZVwiKTtcblxuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5zZXRDdXJyZW50UnVsZUJ5TmFtZShydWxlTmFtZSk7XG4gICAgICAgIHZhciB2YXJpYWJsZU5hbWVzID0gcGFyYW1zLnZhbHVlKFwidmFyaWFibGVzXCIpLm1hcCh2PT52Lm5hbWUpO1xuICAgICAgICBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucHV0KFwidmFyaWFibGVOYW1lc1wiLCB2YXJpYWJsZU5hbWVzKTtcblxuICAgICAgICBpZigham9iUmVzdWx0LmRhdGEucm93cyl7XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5yb3dzID0gW107XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS52YXJpYWJsZU5hbWVzID0gdmFyaWFibGVOYW1lcztcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLmV4cGVjdGVkVmFsdWVzID0gVXRpbHMuZmlsbChuZXcgQXJyYXkoam9iUmVzdWx0LmRhdGEucG9saWNpZXMubGVuZ3RoKSwgMCk7XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0hpZ2hlc3RQYXlvZmZDb3VudCA9IFV0aWxzLmZpbGwobmV3IEFycmF5KGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLmxlbmd0aCksIDApO1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEucG9saWN5VG9Mb3dlc3RQYXlvZmZDb3VudCA9IFV0aWxzLmZpbGwobmV3IEFycmF5KGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLmxlbmd0aCksIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcmFtcy52YWx1ZShcIm51bWJlck9mUnVuc1wiKTtcbiAgICB9XG5cbiAgICByZWFkTmV4dENodW5rKHN0ZXBFeGVjdXRpb24sIHN0YXJ0SW5kZXgsIGNodW5rU2l6ZSwgam9iUmVzdWx0KSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgdmFyIHZhcmlhYmxlcyA9IHBhcmFtcy52YWx1ZShcInZhcmlhYmxlc1wiKTtcbiAgICAgICAgdmFyIGRhdGEgPSBzdGVwRXhlY3V0aW9uLmdldERhdGEoKTtcbiAgICAgICAgdmFyIHZhcmlhYmxlVmFsdWVzID0gW107XG4gICAgICAgIGZvcih2YXIgcnVuSW5kZXg9MDsgcnVuSW5kZXg8Y2h1bmtTaXplOyBydW5JbmRleCsrKXtcbiAgICAgICAgICAgIHZhciBzaW5nbGVSdW5WYXJpYWJsZVZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGVycm9ycyA9IFtdO1xuICAgICAgICAgICAgdmFyaWFibGVzLmZvckVhY2godj0+IHtcbiAgICAgICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmFsdWF0ZWQgPSB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmV4cHJlc3Npb25FbmdpbmUuZXZhbCh2LmZvcm11bGEsIHRydWUsIFV0aWxzLmNsb25lRGVlcChkYXRhLmV4cHJlc3Npb25TY29wZSkpO1xuICAgICAgICAgICAgICAgICAgICBzaW5nbGVSdW5WYXJpYWJsZVZhbHVlcy5wdXNoKEV4cHJlc3Npb25FbmdpbmUudG9GbG9hdChldmFsdWF0ZWQpKTtcbiAgICAgICAgICAgICAgICB9Y2F0Y2goZSl7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlOiB2LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JEYXRhID0ge3ZhcmlhYmxlczogW119O1xuICAgICAgICAgICAgICAgIGVycm9ycy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JEYXRhLnZhcmlhYmxlc1tlLnZhcmlhYmxlLm5hbWVdID0gZS5lcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JDb21wdXRhdGlvbkV4Y2VwdGlvbihcInBhcmFtLWNvbXB1dGF0aW9uXCIsIGVycm9yRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhcmlhYmxlVmFsdWVzLnB1c2goc2luZ2xlUnVuVmFyaWFibGVWYWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFyaWFibGVWYWx1ZXM7XG4gICAgfVxuXG4gICAgcHJvY2Vzc0l0ZW0oc3RlcEV4ZWN1dGlvbiwgaXRlbSwgY3VycmVudEl0ZW1Db3VudCwgam9iUmVzdWx0KSB7XG4gICAgICAgIHZhciByID0gc3VwZXIucHJvY2Vzc0l0ZW0oc3RlcEV4ZWN1dGlvbiwgaXRlbSwgam9iUmVzdWx0KTtcblxuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciBudW1iZXJPZlJ1bnMgPSBwYXJhbXMudmFsdWUoXCJudW1iZXJPZlJ1bnNcIik7XG4gICAgICAgIHZhciBwb2xpY2llcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpLmdldChcInBvbGljaWVzXCIpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUG9saWN5U3RhdHMociwgcG9saWNpZXMsIG51bWJlck9mUnVucywgam9iUmVzdWx0KTtcblxuICAgICAgICByZXR1cm4gcjtcbiAgICB9XG5cbiAgICB1cGRhdGVQb2xpY3lTdGF0cyhyLCBwb2xpY2llcywgbnVtYmVyT2ZSdW5zLCBqb2JSZXN1bHQpe1xuICAgICAgICB2YXIgaGlnaGVzdFBheW9mZiA9IC1JbmZpbml0eTtcbiAgICAgICAgdmFyIGxvd2VzdFBheW9mZiA9IEluZmluaXR5O1xuICAgICAgICB2YXIgYmVzdFBvbGljeUluZGV4ZXMgPSBbXTtcbiAgICAgICAgdmFyIHdvcnN0UG9saWN5SW5kZXhlcyA9IFtdO1xuXG4gICAgICAgIHZhciB6ZXJvTnVtID0gRXhwcmVzc2lvbkVuZ2luZS50b051bWJlcigwKTtcblxuICAgICAgICBwb2xpY2llcy5mb3JFYWNoKChwb2xpY3ksaSk9PntcbiAgICAgICAgICAgIGxldCBwYXlvZmYgPSByLnBheW9mZnNbaV07XG4gICAgICAgICAgICBpZihVdGlscy5pc1N0cmluZyhwYXlvZmYpKXtcbiAgICAgICAgICAgICAgICBwYXlvZmYgPSB6ZXJvTnVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocGF5b2ZmIDwgbG93ZXN0UGF5b2ZmKXtcbiAgICAgICAgICAgICAgICBsb3dlc3RQYXlvZmYgPSBwYXlvZmY7XG4gICAgICAgICAgICAgICAgd29yc3RQb2xpY3lJbmRleGVzID0gW2ldO1xuICAgICAgICAgICAgfWVsc2UgaWYocGF5b2ZmLmVxdWFscyhsb3dlc3RQYXlvZmYpKXtcbiAgICAgICAgICAgICAgICB3b3JzdFBvbGljeUluZGV4ZXMucHVzaChpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocGF5b2ZmID4gaGlnaGVzdFBheW9mZil7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFBheW9mZiA9IHBheW9mZjtcbiAgICAgICAgICAgICAgICBiZXN0UG9saWN5SW5kZXhlcyA9IFtpXVxuICAgICAgICAgICAgfWVsc2UgaWYocGF5b2ZmLmVxdWFscyhoaWdoZXN0UGF5b2ZmKSl7XG4gICAgICAgICAgICAgICAgYmVzdFBvbGljeUluZGV4ZXMucHVzaChpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5leHBlY3RlZFZhbHVlc1tpXSA9IEV4cHJlc3Npb25FbmdpbmUuYWRkKGpvYlJlc3VsdC5kYXRhLmV4cGVjdGVkVmFsdWVzW2ldLCBFeHByZXNzaW9uRW5naW5lLmRpdmlkZShwYXlvZmYsIG51bWJlck9mUnVucykpO1xuICAgICAgICB9KTtcblxuICAgICAgICBiZXN0UG9saWN5SW5kZXhlcy5mb3JFYWNoKHBvbGljeUluZGV4PT57XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0hpZ2hlc3RQYXlvZmZDb3VudFtwb2xpY3lJbmRleF0gPSBFeHByZXNzaW9uRW5naW5lLmFkZChqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0hpZ2hlc3RQYXlvZmZDb3VudFtwb2xpY3lJbmRleF0sIEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKDEsIGJlc3RQb2xpY3lJbmRleGVzLmxlbmd0aCkpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdvcnN0UG9saWN5SW5kZXhlcy5mb3JFYWNoKHBvbGljeUluZGV4PT57XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0xvd2VzdFBheW9mZkNvdW50W3BvbGljeUluZGV4XSA9IEV4cHJlc3Npb25FbmdpbmUuYWRkKGpvYlJlc3VsdC5kYXRhLnBvbGljeVRvTG93ZXN0UGF5b2ZmQ291bnRbcG9saWN5SW5kZXhdLCBFeHByZXNzaW9uRW5naW5lLmRpdmlkZSgxLCB3b3JzdFBvbGljeUluZGV4ZXMubGVuZ3RoKSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBwb3N0UHJvY2VzcyhzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgam9iUmVzdWx0LmRhdGEuZXhwZWN0ZWRWYWx1ZXMgPSBqb2JSZXN1bHQuZGF0YS5leHBlY3RlZFZhbHVlcy5tYXAodj0+dGhpcy50b0Zsb2F0KHYpKTtcbiAgICB9XG5cblxuICAgIHRvRmxvYXQodikge1xuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHYpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlckRlZmluaXRpb24sIFBBUkFNRVRFUl9UWVBFfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvblwiO1xuZXhwb3J0IGNsYXNzIFNwaWRlclBsb3RKb2JQYXJhbWV0ZXJzIGV4dGVuZHMgSm9iUGFyYW1ldGVycyB7XG5cbiAgICBpbml0RGVmaW5pdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImlkXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORywgMSwgMSwgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJydWxlTmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwicGVyY2VudGFnZUNoYW5nZVJhbmdlXCIsIFBBUkFNRVRFUl9UWVBFLk5VTUJFUikuc2V0KFwic2luZ2xlVmFsdWVWYWxpZGF0b3JcIiwgdiA9PiB2ID4gMCAmJiB2IDw9MTAwKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImxlbmd0aFwiLCBQQVJBTUVURVJfVFlQRS5JTlRFR0VSKS5zZXQoXCJzaW5nbGVWYWx1ZVZhbGlkYXRvclwiLCB2ID0+IHYgPj0gMCkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJ2YXJpYWJsZXNcIiwgW1xuICAgICAgICAgICAgICAgIG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwibmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpLFxuICAgICAgICAgICAgXSwgMSwgSW5maW5pdHksIGZhbHNlLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHZhbHVlcyA9PiBVdGlscy5pc1VuaXF1ZSh2YWx1ZXMsIHY9PnZbXCJuYW1lXCJdKSAvL1ZhcmlhYmxlIG5hbWVzIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgICAgKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImZhaWxPbkludmFsaWRUcmVlXCIsIFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4pKTtcbiAgICB9XG5cbiAgICBpbml0RGVmYXVsdFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7XG4gICAgICAgICAgICBpZDogVXRpbHMuZ3VpZCgpLFxuICAgICAgICAgICAgZmFpbE9uSW52YWxpZFRyZWU6IHRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7U2ltcGxlSm9ifSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL3NpbXBsZS1qb2JcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU3RlcH0gZnJvbSBcIi4vc3RlcHMvY2FsY3VsYXRlLXN0ZXBcIjtcbmltcG9ydCB7U3BpZGVyUGxvdEpvYlBhcmFtZXRlcnN9IGZyb20gXCIuL3NwaWRlci1wbG90LWpvYi1wYXJhbWV0ZXJzXCI7XG5cbmV4cG9ydCBjbGFzcyBTcGlkZXJQbG90Sm9iIGV4dGVuZHMgU2ltcGxlSm9iIHtcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoXCJzcGlkZXItcGxvdFwiLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5hZGRTdGVwKG5ldyBDYWxjdWxhdGVTdGVwKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpKTtcbiAgICB9XG5cbiAgICBjcmVhdGVKb2JQYXJhbWV0ZXJzKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gbmV3IFNwaWRlclBsb3RKb2JQYXJhbWV0ZXJzKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRGF0YVZhbGlkYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gZGF0YS5nZXRSb290cygpLmxlbmd0aCA9PT0gMVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKlNob3VsZCByZXR1cm4gcHJvZ3Jlc3Mgb2JqZWN0IHdpdGggZmllbGRzOlxuICAgICAqIGN1cnJlbnRcbiAgICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKGV4ZWN1dGlvbil7XG4gICAgICAgIGlmIChleGVjdXRpb24uc3RlcEV4ZWN1dGlvbnMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgICAgICBjdXJyZW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHNbMF0uZ2V0UHJvZ3Jlc3MoZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zWzBdKTtcbiAgICB9XG5cbiAgICBqb2JSZXN1bHRUb0NzdlJvd3Moam9iUmVzdWx0LCBqb2JQYXJhbWV0ZXJzLCB3aXRoSGVhZGVycz10cnVlKXtcblxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGlmKHdpdGhIZWFkZXJzKXtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFsndmFyaWFibGVfbmFtZScsICdwb2xpY3lfbm8nXS5jb25jYXQoam9iUmVzdWx0LnBlcmNlbnRhZ2VSYW5nZVZhbHVlcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgam9iUmVzdWx0LnJvd3MuZm9yRWFjaCgocm93LCBpbmRleCkgPT4ge1xuXG4gICAgICAgICAgICByZXN1bHQucHVzaCguLi5yb3cucGF5b2Zmcy5tYXAoKHBheW9mZnMsIHBvbGljeUluZGV4KT0+W1xuICAgICAgICAgICAgICAgIHJvdy52YXJpYWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgcG9saWN5SW5kZXgrMSxcbiAgICAgICAgICAgICAgICAuLi5wYXlvZmZzXG4gICAgICAgICAgICBdKSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge0pvYkNvbXB1dGF0aW9uRXhjZXB0aW9ufSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL2V4Y2VwdGlvbnMvam9iLWNvbXB1dGF0aW9uLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtCYXRjaFN0ZXB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvYmF0Y2gvYmF0Y2gtc3RlcFwiO1xuaW1wb3J0IHtUcmVlVmFsaWRhdG9yfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY3lcIjtcbmltcG9ydCB7UG9saWNpZXNDb2xsZWN0b3J9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY2llcy1jb2xsZWN0b3JcIjtcbmltcG9ydCB7Q29tcHV0YXRpb25zVXRpbHN9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9jb21wdXRhdGlvbnMtdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIENhbGN1bGF0ZVN0ZXAgZXh0ZW5kcyBCYXRjaFN0ZXAge1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikge1xuICAgICAgICBzdXBlcihcImNhbGN1bGF0ZV9zdGVwXCIsIGpvYlJlcG9zaXRvcnksIDEpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yID0gZXhwcmVzc2lvbnNFdmFsdWF0b3I7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyID0gb2JqZWN0aXZlUnVsZXNNYW5hZ2VyO1xuICAgICAgICB0aGlzLnRyZWVWYWxpZGF0b3IgPSBuZXcgVHJlZVZhbGlkYXRvcigpO1xuICAgIH1cblxuICAgIGluaXQoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIGxldCBqb2JFeGVjdXRpb25Db250ZXh0ID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JFeGVjdXRpb25Db250ZXh0KCk7XG4gICAgICAgIGxldCBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgbGV0IHJ1bGVOYW1lID0gcGFyYW1zLnZhbHVlKFwicnVsZU5hbWVcIik7XG4gICAgICAgIGxldCBwZXJjZW50YWdlQ2hhbmdlUmFuZ2UgPSBwYXJhbXMudmFsdWUoXCJwZXJjZW50YWdlQ2hhbmdlUmFuZ2VcIik7XG4gICAgICAgIGxldCBsZW5ndGggPSBwYXJhbXMudmFsdWUoXCJsZW5ndGhcIik7XG4gICAgICAgIGxldCB2YXJpYWJsZXMgPSBwYXJhbXMudmFsdWUoXCJ2YXJpYWJsZXNcIik7XG5cbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuc2V0Q3VycmVudFJ1bGVCeU5hbWUocnVsZU5hbWUpO1xuICAgICAgICBsZXQgdmFyaWFibGVOYW1lcyA9IHBhcmFtcy52YWx1ZShcInZhcmlhYmxlc1wiKS5tYXAodj0+di5uYW1lKTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChcInZhcmlhYmxlTmFtZXNcIiwgdmFyaWFibGVOYW1lcyk7XG4gICAgICAgIGxldCBkYXRhID0gc3RlcEV4ZWN1dGlvbi5nZXREYXRhKCk7XG5cbiAgICAgICAgbGV0IHRyZWVSb290ID0gZGF0YS5nZXRSb290cygpWzBdO1xuICAgICAgICBsZXQgcGF5b2ZmID0gdHJlZVJvb3QuY29tcHV0ZWRWYWx1ZShydWxlTmFtZSwgJ3BheW9mZicpO1xuXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuY2xlYXIoZGF0YSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEV4cHJlc3Npb25zKGRhdGEpO1xuXG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnJlY29tcHV0ZVRyZWUodHJlZVJvb3QsIGZhbHNlKTtcblxuICAgICAgICBsZXQgcG9saWNpZXNDb2xsZWN0b3IgPSBuZXcgUG9saWNpZXNDb2xsZWN0b3IodHJlZVJvb3QsIHJ1bGVOYW1lKTtcblxuICAgICAgICBsZXQgZGVmYXVsdFZhbHVlcyA9IHt9O1xuICAgICAgICBkYXRhLmdldEdsb2JhbFZhcmlhYmxlTmFtZXMoKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgICAgbGV0IHYgPSBkYXRhLmV4cHJlc3Npb25TY29wZVtuYW1lXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlc1tuYW1lXSA9IHRoaXMudG9GbG9hdCh2KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iQ29tcHV0YXRpb25FeGNlcHRpb24oXCJlcnJvciBjb21wdXRpbmcgZmxvYXQgdmFsdWUgb2YgYSB2YXJpYWJsZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgbGV0IHBlcmNlbnRhZ2VSYW5nZVZhbHVlcyA9IENvbXB1dGF0aW9uc1V0aWxzLnNlcXVlbmNlKC1wZXJjZW50YWdlQ2hhbmdlUmFuZ2UsIHBlcmNlbnRhZ2VDaGFuZ2VSYW5nZSwgMipsZW5ndGgrMSk7XG5cbiAgICAgICAgbGV0IHZhcmlhYmxlVmFsdWVzID0gW107XG5cbiAgICAgICAgdmFyaWFibGVzLmZvckVhY2godj0+IHtcbiAgICAgICAgICAgIGxldCBkZWZWYWwgPSBkZWZhdWx0VmFsdWVzW3YubmFtZV07XG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlcy5wdXNoKHBlcmNlbnRhZ2VSYW5nZVZhbHVlcy5tYXAocD0+IHRoaXMudG9GbG9hdChFeHByZXNzaW9uRW5naW5lLmFkZChkZWZWYWwsIEV4cHJlc3Npb25FbmdpbmUubXVsdGlwbHkoRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUocCwxMDApLCBkZWZWYWwpKSkpKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBpZigham9iUmVzdWx0LmRhdGEpe1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdmFyaWFibGVOYW1lczogdmFyaWFibGVOYW1lcyxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWVzOiBkZWZhdWx0VmFsdWVzLFxuICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2VSYW5nZVZhbHVlczogcGVyY2VudGFnZVJhbmdlVmFsdWVzLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQYXlvZmY6IHRoaXMudG9GbG9hdChwYXlvZmYpWzBdLFxuICAgICAgICAgICAgICAgIHBvbGljaWVzOiBwb2xpY2llc0NvbGxlY3Rvci5wb2xpY2llcyxcbiAgICAgICAgICAgICAgICByb3dzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpLnB1dChcInZhcmlhYmxlVmFsdWVzXCIsIHZhcmlhYmxlVmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlVmFsdWVzLmxlbmd0aDtcbiAgICB9XG5cblxuICAgIHJlYWROZXh0Q2h1bmsoc3RlcEV4ZWN1dGlvbiwgc3RhcnRJbmRleCwgY2h1bmtTaXplKSB7XG4gICAgICAgIGxldCB2YXJpYWJsZVZhbHVlcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpLmdldChcInZhcmlhYmxlVmFsdWVzXCIpO1xuICAgICAgICByZXR1cm4gdmFyaWFibGVWYWx1ZXMuc2xpY2Uoc3RhcnRJbmRleCwgc3RhcnRJbmRleCArIGNodW5rU2l6ZSk7XG4gICAgfVxuXG4gICAgcHJvY2Vzc0l0ZW0oc3RlcEV4ZWN1dGlvbiwgaXRlbSwgaXRlbUluZGV4LCBqb2JSZXN1bHQpIHtcbiAgICAgICAgbGV0IHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICBsZXQgcnVsZU5hbWUgPSBwYXJhbXMudmFsdWUoXCJydWxlTmFtZVwiKTtcbiAgICAgICAgbGV0IGZhaWxPbkludmFsaWRUcmVlID0gcGFyYW1zLnZhbHVlKFwiZmFpbE9uSW52YWxpZFRyZWVcIik7XG4gICAgICAgIGxldCBkYXRhID0gc3RlcEV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgIGxldCB0cmVlUm9vdCA9IGRhdGEuZ2V0Um9vdHMoKVswXTtcbiAgICAgICAgbGV0IHZhcmlhYmxlTmFtZXMgPSBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQuZ2V0KFwidmFyaWFibGVOYW1lc1wiKTtcbiAgICAgICAgbGV0IHZhcmlhYmxlTmFtZSA9IHZhcmlhYmxlTmFtZXNbaXRlbUluZGV4XTtcblxuXG4gICAgICAgIGxldCBwYXlvZmZzID0gam9iUmVzdWx0LmRhdGEucG9saWNpZXMubWFwKHBvbGljeT0+W10pO1xuXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuY2xlYXIoZGF0YSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEdsb2JhbENvZGUoZGF0YSk7XG5cblxuICAgICAgICBpdGVtLmZvckVhY2godmFyaWFibGVWYWx1ZT0+e1xuXG4gICAgICAgICAgICBkYXRhLmV4cHJlc3Npb25TY29wZVt2YXJpYWJsZU5hbWVdID0gdmFyaWFibGVWYWx1ZTtcblxuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsRXhwcmVzc2lvbnNGb3JOb2RlKGRhdGEsIHRyZWVSb290KTtcbiAgICAgICAgICAgIGxldCB2ciA9IHRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZShkYXRhLmdldEFsbE5vZGVzSW5TdWJ0cmVlKHRyZWVSb290KSk7XG4gICAgICAgICAgICBsZXQgdmFsaWQgPSB2ci5pc1ZhbGlkKCk7XG5cbiAgICAgICAgICAgIGlmKCF2YWxpZCAmJiBmYWlsT25JbnZhbGlkVHJlZSl7XG4gICAgICAgICAgICAgICAgbGV0IGVycm9yRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZXJyb3JEYXRhLnZhcmlhYmxlc1t2YXJpYWJsZU5hbWVdID0gdmFyaWFibGVWYWx1ZTtcblxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JDb21wdXRhdGlvbkV4Y2VwdGlvbihcImNvbXB1dGF0aW9uc1wiLCBlcnJvckRhdGEpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLmZvckVhY2goKHBvbGljeSwgcG9saWN5SW5kZXgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIucmVjb21wdXRlVHJlZSh0cmVlUm9vdCwgZmFsc2UsIHBvbGljeSk7XG4gICAgICAgICAgICAgICAgbGV0IHBheW9mZiA9IHRyZWVSb290LmNvbXB1dGVkVmFsdWUocnVsZU5hbWUsICdwYXlvZmYnKVswXTtcbiAgICAgICAgICAgICAgICBwYXlvZmZzW3BvbGljeUluZGV4XS5wdXNoKHRoaXMudG9GbG9hdChwYXlvZmYpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YXJpYWJsZU5hbWU6IHZhcmlhYmxlTmFtZSxcbiAgICAgICAgICAgIHZhcmlhYmxlSW5kZXg6IGl0ZW1JbmRleCxcbiAgICAgICAgICAgIHZhcmlhYmxlVmFsdWVzOiBpdGVtLFxuICAgICAgICAgICAgcGF5b2ZmczogcGF5b2Zmc1xuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgd3JpdGVDaHVuayhzdGVwRXhlY3V0aW9uLCBpdGVtcywgam9iUmVzdWx0KSB7XG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnJvd3MucHVzaCguLi5pdGVtcyk7XG4gICAgfVxuXG5cbiAgICB0b0Zsb2F0KHYpe1xuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHYpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmltcG9ydCB7Sm9iQ29tcHV0YXRpb25FeGNlcHRpb259IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvZXhjZXB0aW9ucy9qb2ItY29tcHV0YXRpb24tZXhjZXB0aW9uXCI7XG5pbXBvcnQge0JhdGNoU3RlcH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9iYXRjaC9iYXRjaC1zdGVwXCI7XG5pbXBvcnQge1RyZWVWYWxpZGF0b3J9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yXCI7XG5pbXBvcnQge1BvbGljeX0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3BvbGljaWVzL3BvbGljeVwiO1xuaW1wb3J0IHtQb2xpY2llc0NvbGxlY3Rvcn0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3BvbGljaWVzL3BvbGljaWVzLWNvbGxlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRlU3RlcCBleHRlbmRzIEJhdGNoU3RlcCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSB7XG4gICAgICAgIHN1cGVyKFwiY2FsY3VsYXRlX3N0ZXBcIiwgam9iUmVwb3NpdG9yeSwgMSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IgPSBleHByZXNzaW9uc0V2YWx1YXRvcjtcbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIgPSBvYmplY3RpdmVSdWxlc01hbmFnZXI7XG4gICAgICAgIHRoaXMudHJlZVZhbGlkYXRvciA9IG5ldyBUcmVlVmFsaWRhdG9yKCk7XG4gICAgfVxuXG4gICAgaW5pdChzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgbGV0IGpvYkV4ZWN1dGlvbkNvbnRleHQgPSBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKTtcbiAgICAgICAgbGV0IHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICBsZXQgcnVsZU5hbWUgPSBwYXJhbXMudmFsdWUoXCJydWxlTmFtZVwiKTtcblxuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5zZXRDdXJyZW50UnVsZUJ5TmFtZShydWxlTmFtZSk7XG4gICAgICAgIGxldCB2YXJpYWJsZVZhbHVlcyA9IGpvYkV4ZWN1dGlvbkNvbnRleHQuZ2V0KFwidmFyaWFibGVWYWx1ZXNcIik7XG4gICAgICAgIGxldCB2YXJpYWJsZU5hbWVzID0gcGFyYW1zLnZhbHVlKFwidmFyaWFibGVzXCIpLm1hcCh2PT52Lm5hbWUpO1xuICAgICAgICBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucHV0KFwidmFyaWFibGVOYW1lc1wiLCB2YXJpYWJsZU5hbWVzKTtcbiAgICAgICAgbGV0IGRhdGEgPSBzdGVwRXhlY3V0aW9uLmdldERhdGEoKTtcblxuICAgICAgICBsZXQgdHJlZVJvb3QgPSBkYXRhLmdldFJvb3RzKClbMF07XG4gICAgICAgIGxldCBwYXlvZmYgPSB0cmVlUm9vdC5jb21wdXRlZFZhbHVlKHJ1bGVOYW1lLCAncGF5b2ZmJyk7XG5cbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5jbGVhcihkYXRhKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsRXhwcmVzc2lvbnMoZGF0YSk7XG5cbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIucmVjb21wdXRlVHJlZSh0cmVlUm9vdCwgZmFsc2UpO1xuXG5cblxuICAgICAgICBsZXQgcG9saWNpZXNDb2xsZWN0b3IgPSBuZXcgUG9saWNpZXNDb2xsZWN0b3IodHJlZVJvb3QsIHJ1bGVOYW1lKTtcblxuICAgICAgICBsZXQgZGVmYXVsdFZhbHVlcyA9IHt9O1xuICAgICAgICBkYXRhLmdldEdsb2JhbFZhcmlhYmxlTmFtZXMoKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgICAgbGV0IHYgPSBkYXRhLmV4cHJlc3Npb25TY29wZVtuYW1lXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlc1tuYW1lXSA9IHRoaXMudG9GbG9hdCh2KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iQ29tcHV0YXRpb25FeGNlcHRpb24oXCJlcnJvciBjb21wdXRpbmcgZmxvYXQgdmFsdWUgb2YgYSB2YXJpYWJsZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKCFqb2JSZXN1bHQuZGF0YSl7XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YSA9IHtcbiAgICAgICAgICAgICAgICB2YXJpYWJsZU5hbWVzOiB2YXJpYWJsZU5hbWVzLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZXM6IGRlZmF1bHRWYWx1ZXMsXG4gICAgICAgICAgICAgICAgdmFyaWFibGVFeHRlbnRzOiB2YXJpYWJsZVZhbHVlcy5tYXAodj0+W3ZbMF0sIHZbdi5sZW5ndGgtMV1dKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGF5b2ZmOiB0aGlzLnRvRmxvYXQocGF5b2ZmKVswXSxcbiAgICAgICAgICAgICAgICBwb2xpY2llczogcG9saWNpZXNDb2xsZWN0b3IucG9saWNpZXMsXG4gICAgICAgICAgICAgICAgcm93czogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFyaWFibGVWYWx1ZXMubGVuZ3RoO1xuICAgIH1cblxuXG4gICAgcmVhZE5leHRDaHVuayhzdGVwRXhlY3V0aW9uLCBzdGFydEluZGV4LCBjaHVua1NpemUpIHtcbiAgICAgICAgbGV0IHZhcmlhYmxlVmFsdWVzID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JFeGVjdXRpb25Db250ZXh0KCkuZ2V0KFwidmFyaWFibGVWYWx1ZXNcIik7XG4gICAgICAgIHJldHVybiB2YXJpYWJsZVZhbHVlcy5zbGljZShzdGFydEluZGV4LCBzdGFydEluZGV4ICsgY2h1bmtTaXplKTtcbiAgICB9XG5cbiAgICBwcm9jZXNzSXRlbShzdGVwRXhlY3V0aW9uLCBpdGVtLCBpdGVtSW5kZXgsIGpvYlJlc3VsdCkge1xuICAgICAgICBsZXQgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIGxldCBydWxlTmFtZSA9IHBhcmFtcy52YWx1ZShcInJ1bGVOYW1lXCIpO1xuICAgICAgICBsZXQgZmFpbE9uSW52YWxpZFRyZWUgPSBwYXJhbXMudmFsdWUoXCJmYWlsT25JbnZhbGlkVHJlZVwiKTtcbiAgICAgICAgbGV0IGRhdGEgPSBzdGVwRXhlY3V0aW9uLmdldERhdGEoKTtcbiAgICAgICAgbGV0IHRyZWVSb290ID0gZGF0YS5nZXRSb290cygpWzBdO1xuICAgICAgICBsZXQgdmFyaWFibGVOYW1lcyA9IHN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dC5nZXQoXCJ2YXJpYWJsZU5hbWVzXCIpO1xuICAgICAgICBsZXQgdmFyaWFibGVOYW1lID0gdmFyaWFibGVOYW1lc1tpdGVtSW5kZXhdO1xuXG4gICAgICAgIGxldCBleHRlbnRzID0gam9iUmVzdWx0LmRhdGEucG9saWNpZXMubWFwKHBvbGljeT0+e1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtaW46IEluZmluaXR5LFxuICAgICAgICAgICAgICAgIG1heDogLUluZmluaXR5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCB2YWx1ZXMgPSBqb2JSZXN1bHQuZGF0YS5wb2xpY2llcy5tYXAocG9saWN5PT57XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1pbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtYXg6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5jbGVhcihkYXRhKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsR2xvYmFsQ29kZShkYXRhKTtcblxuXG4gICAgICAgIGl0ZW0uZm9yRWFjaCh2YXJpYWJsZVZhbHVlPT57XG5cbiAgICAgICAgICAgIGRhdGEuZXhwcmVzc2lvblNjb3BlW3ZhcmlhYmxlTmFtZV0gPSB2YXJpYWJsZVZhbHVlO1xuXG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmV2YWxFeHByZXNzaW9uc0Zvck5vZGUoZGF0YSwgdHJlZVJvb3QpO1xuICAgICAgICAgICAgbGV0IHZyID0gdGhpcy50cmVlVmFsaWRhdG9yLnZhbGlkYXRlKGRhdGEuZ2V0QWxsTm9kZXNJblN1YnRyZWUodHJlZVJvb3QpKTtcbiAgICAgICAgICAgIGxldCB2YWxpZCA9IHZyLmlzVmFsaWQoKTtcblxuICAgICAgICAgICAgaWYoIXZhbGlkICYmIGZhaWxPbkludmFsaWRUcmVlKXtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBlcnJvckRhdGEudmFyaWFibGVzW3ZhcmlhYmxlTmFtZV0gPSB2YXJpYWJsZVZhbHVlO1xuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkNvbXB1dGF0aW9uRXhjZXB0aW9uKFwiY29tcHV0YXRpb25zXCIsIGVycm9yRGF0YSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEucG9saWNpZXMuZm9yRWFjaCgocG9saWN5LCBwb2xpY3lJbmRleCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5yZWNvbXB1dGVUcmVlKHRyZWVSb290LCBmYWxzZSwgcG9saWN5KTtcbiAgICAgICAgICAgICAgICBsZXQgcGF5b2ZmID0gdHJlZVJvb3QuY29tcHV0ZWRWYWx1ZShydWxlTmFtZSwgJ3BheW9mZicpWzBdO1xuXG4gICAgICAgICAgICAgICAgaWYocGF5b2ZmIDwgZXh0ZW50c1twb2xpY3lJbmRleF0ubWluKXtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50c1twb2xpY3lJbmRleF0ubWluID0gcGF5b2ZmO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbcG9saWN5SW5kZXhdLm1pbiA9IHZhcmlhYmxlVmFsdWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihwYXlvZmYgPiBleHRlbnRzW3BvbGljeUluZGV4XS5tYXgpe1xuICAgICAgICAgICAgICAgICAgICBleHRlbnRzW3BvbGljeUluZGV4XS5tYXggPSBwYXlvZmY7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlc1twb2xpY3lJbmRleF0ubWF4ID0gdmFyaWFibGVWYWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YXJpYWJsZU5hbWU6IHZhcmlhYmxlTmFtZSxcbiAgICAgICAgICAgIHZhcmlhYmxlSW5kZXg6IGl0ZW1JbmRleCxcbiAgICAgICAgICAgIGV4dGVudHM6IGV4dGVudHMubWFwKGU9Plt0aGlzLnRvRmxvYXQoZS5taW4pLCB0aGlzLnRvRmxvYXQoZS5tYXgpXSksXG4gICAgICAgICAgICBleHRlbnRWYXJpYWJsZVZhbHVlczogdmFsdWVzLm1hcCh2PT5bdGhpcy50b0Zsb2F0KHYubWluKSwgdGhpcy50b0Zsb2F0KHYubWF4KV0pXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICB3cml0ZUNodW5rKHN0ZXBFeGVjdXRpb24sIGl0ZW1zLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgam9iUmVzdWx0LmRhdGEucm93cy5wdXNoKC4uLml0ZW1zKTtcbiAgICB9XG5cbiAgICBwb3N0UHJvY2VzcyhzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgam9iUmVzdWx0LmRhdGEucm93cy5zb3J0KChhLCBiKT0+KGIuZXh0ZW50c1swXVsxXS1iLmV4dGVudHNbMF1bMF0pLShhLmV4dGVudHNbMF1bMV0tYS5leHRlbnRzWzBdWzBdKSlcblxuICAgIH1cblxuXG4gICAgdG9GbG9hdCh2KXtcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUudG9GbG9hdCh2KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7U3RlcH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9zdGVwXCI7XG5pbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmltcG9ydCB7Q29tcHV0YXRpb25zVXRpbHN9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9jb21wdXRhdGlvbnMtdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFByZXBhcmVWYXJpYWJsZXNTdGVwIGV4dGVuZHMgU3RlcCB7XG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSkge1xuICAgICAgICBzdXBlcihcInByZXBhcmVfdmFyaWFibGVzXCIsIGpvYlJlcG9zaXRvcnkpO1xuICAgIH1cblxuICAgIGRvRXhlY3V0ZShzdGVwRXhlY3V0aW9uKSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgdmFyIHZhcmlhYmxlcyA9IHBhcmFtcy52YWx1ZShcInZhcmlhYmxlc1wiKTtcblxuICAgICAgICB2YXIgdmFyaWFibGVWYWx1ZXMgPSBbXTtcbiAgICAgICAgdmFyaWFibGVzLmZvckVhY2godj0+IHtcbiAgICAgICAgICAgIHZhcmlhYmxlVmFsdWVzLnB1c2goQ29tcHV0YXRpb25zVXRpbHMuc2VxdWVuY2Uodi5taW4sIHYubWF4LCB2Lmxlbmd0aCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5nZXRKb2JFeGVjdXRpb25Db250ZXh0KCkucHV0KFwidmFyaWFibGVWYWx1ZXNcIiwgdmFyaWFibGVWYWx1ZXMpO1xuXG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuQ09NUExFVEVEO1xuICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlckRlZmluaXRpb24sIFBBUkFNRVRFUl9UWVBFfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvblwiO1xuZXhwb3J0IGNsYXNzIFRvcm5hZG9EaWFncmFtSm9iUGFyYW1ldGVycyBleHRlbmRzIEpvYlBhcmFtZXRlcnMge1xuXG4gICAgaW5pdERlZmluaXRpb25zKCkge1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJpZFwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcsIDEsIDEsIHRydWUpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwicnVsZU5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcInZhcmlhYmxlc1wiLCBbXG4gICAgICAgICAgICAgICAgbmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJuYW1lXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORyksXG4gICAgICAgICAgICAgICAgbmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJtaW5cIiwgUEFSQU1FVEVSX1RZUEUuTlVNQkVSKSxcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm1heFwiLCBQQVJBTUVURVJfVFlQRS5OVU1CRVIpLFxuICAgICAgICAgICAgICAgIG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwibGVuZ3RoXCIsIFBBUkFNRVRFUl9UWVBFLklOVEVHRVIpLnNldChcInNpbmdsZVZhbHVlVmFsaWRhdG9yXCIsIHYgPT4gdiA+PSAwKSxcbiAgICAgICAgICAgIF0sIDEsIEluZmluaXR5LCBmYWxzZSxcbiAgICAgICAgICAgIHYgPT4gdltcIm1pblwiXSA8PSB2W1wibWF4XCJdLFxuICAgICAgICAgICAgdmFsdWVzID0+IFV0aWxzLmlzVW5pcXVlKHZhbHVlcywgdj0+dltcIm5hbWVcIl0pIC8vVmFyaWFibGUgbmFtZXMgc2hvdWxkIGJlIHVuaXF1ZVxuICAgICAgICApKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiZmFpbE9uSW52YWxpZFRyZWVcIiwgUEFSQU1FVEVSX1RZUEUuQk9PTEVBTikpO1xuICAgIH1cblxuICAgIGluaXREZWZhdWx0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHtcbiAgICAgICAgICAgIGlkOiBVdGlscy5ndWlkKCksXG4gICAgICAgICAgICBmYWlsT25JbnZhbGlkVHJlZTogdHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtTaW1wbGVKb2J9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvc2ltcGxlLWpvYlwiO1xuaW1wb3J0IHtQcmVwYXJlVmFyaWFibGVzU3RlcH0gZnJvbSBcIi4vc3RlcHMvcHJlcGFyZS12YXJpYWJsZXMtc3RlcFwiO1xuaW1wb3J0IHtDYWxjdWxhdGVTdGVwfSBmcm9tIFwiLi9zdGVwcy9jYWxjdWxhdGUtc3RlcFwiO1xuaW1wb3J0IHtUb3JuYWRvRGlhZ3JhbUpvYlBhcmFtZXRlcnN9IGZyb20gXCIuL3Rvcm5hZG8tZGlhZ3JhbS1qb2ItcGFyYW1ldGVyc1wiO1xuXG5leHBvcnQgY2xhc3MgVG9ybmFkb0RpYWdyYW1Kb2IgZXh0ZW5kcyBTaW1wbGVKb2Ige1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikge1xuICAgICAgICBzdXBlcihcInRvcm5hZG8tZGlhZ3JhbVwiLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5hZGRTdGVwKG5ldyBQcmVwYXJlVmFyaWFibGVzU3RlcChqb2JSZXBvc2l0b3J5KSk7XG4gICAgICAgIHRoaXMuYWRkU3RlcChuZXcgQ2FsY3VsYXRlU3RlcChqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSk7XG4gICAgfVxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb3JuYWRvRGlhZ3JhbUpvYlBhcmFtZXRlcnModmFsdWVzKTtcbiAgICB9XG5cbiAgICBnZXRKb2JEYXRhVmFsaWRhdG9yKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWRhdGU6IChkYXRhKSA9PiBkYXRhLmdldFJvb3RzKCkubGVuZ3RoID09PSAxXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qU2hvdWxkIHJldHVybiBwcm9ncmVzcyBvYmplY3Qgd2l0aCBmaWVsZHM6XG4gICAgICogY3VycmVudFxuICAgICAqIHRvdGFsICovXG4gICAgZ2V0UHJvZ3Jlc3MoZXhlY3V0aW9uKXtcblxuICAgICAgICBpZiAoZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvdGFsOiAxLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zdGVwc1sxXS5nZXRQcm9ncmVzcyhleGVjdXRpb24uc3RlcEV4ZWN1dGlvbnNbMV0pO1xuICAgIH1cblxuICAgIGpvYlJlc3VsdFRvQ3N2Um93cyhqb2JSZXN1bHQsIGpvYlBhcmFtZXRlcnMsIHdpdGhIZWFkZXJzPXRydWUpe1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGlmKHdpdGhIZWFkZXJzKXtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFsndmFyaWFibGVfbmFtZScsICdkZWZhdWx0X3Zhcl92YWx1ZScsIFwibWluX3Zhcl92YWx1ZVwiLCBcIm1heF92YXJfdmFsdWVcIiwgJ2RlZmF1bHRfcGF5b2ZmJywgXCJtaW5fcGF5b2ZmXCIsIFwibWF4X3BheW9mZlwiLCBcInBvbGljeV9ub1wiXSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGpvYlJlc3VsdC5yb3dzLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHtcblxuICAgICAgICAgICAgcmVzdWx0LnB1c2goLi4ucm93LmV4dGVudHMubWFwKChleHRlbnQsIHBvbGljeUluZGV4KT0+W1xuICAgICAgICAgICAgICAgIHJvdy52YXJpYWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgam9iUmVzdWx0LmRlZmF1bHRWYWx1ZXNbcm93LnZhcmlhYmxlTmFtZV0sXG4gICAgICAgICAgICAgICAgcm93LmV4dGVudFZhcmlhYmxlVmFsdWVzW3BvbGljeUluZGV4XVswXSxcbiAgICAgICAgICAgICAgICByb3cuZXh0ZW50VmFyaWFibGVWYWx1ZXNbcG9saWN5SW5kZXhdWzFdLFxuICAgICAgICAgICAgICAgIGpvYlJlc3VsdC5kZWZhdWx0UGF5b2ZmLFxuICAgICAgICAgICAgICAgIGV4dGVudFswXSxcbiAgICAgICAgICAgICAgICBleHRlbnRbMV0sXG4gICAgICAgICAgICAgICAgcG9saWN5SW5kZXgrMVxuICAgICAgICAgICAgXSkpO1xuXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuLi9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge2xvZ30gZnJvbSAnc2QtdXRpbHMnXG5pbXBvcnQge1N0ZXB9IGZyb20gXCIuLi9zdGVwXCI7XG5pbXBvcnQge0pvYkludGVycnVwdGVkRXhjZXB0aW9ufSBmcm9tIFwiLi4vZXhjZXB0aW9ucy9qb2ItaW50ZXJydXB0ZWQtZXhjZXB0aW9uXCI7XG5cbi8qam9iIHN0ZXAgdGhhdCBwcm9jZXNzIGJhdGNoIG9mIGl0ZW1zKi9cbmV4cG9ydCBjbGFzcyBCYXRjaFN0ZXAgZXh0ZW5kcyBTdGVwIHtcblxuICAgIGNodW5rU2l6ZTtcbiAgICBzdGF0aWMgQ1VSUkVOVF9JVEVNX0NPVU5UX1BST1AgPSAnYmF0Y2hfc3RlcF9jdXJyZW50X2l0ZW1fY291bnQnO1xuICAgIHN0YXRpYyBUT1RBTF9JVEVNX0NPVU5UX1BST1AgPSAnYmF0Y2hfc3RlcF90b3RhbF9pdGVtX2NvdW50JztcblxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGpvYlJlcG9zaXRvcnksIGNodW5rU2l6ZSkge1xuICAgICAgICBzdXBlcihuYW1lLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5jaHVua1NpemUgPSBjaHVua1NpemU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIHBlcmZvcm0gc3RlcCBpbml0aWFsaXphdGlvbi4gU2hvdWxkIHJldHVybiB0b3RhbCBpdGVtIGNvdW50XG4gICAgICovXG4gICAgaW5pdChzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdGhyb3cgXCJCYXRjaFN0ZXAuaW5pdCBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIHN0ZXA6IFwiICsgdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3Igc3ViY2xhc3NlcyB0byByZWFkIGFuZCByZXR1cm4gY2h1bmsgb2YgaXRlbXMgdG8gcHJvY2Vzc1xuICAgICAqL1xuICAgIHJlYWROZXh0Q2h1bmsoc3RlcEV4ZWN1dGlvbiwgc3RhcnRJbmRleCwgY2h1bmtTaXplLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdGhyb3cgXCJCYXRjaFN0ZXAucmVhZE5leHRDaHVuayBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIHN0ZXA6IFwiICsgdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3Igc3ViY2xhc3NlcyB0byBwcm9jZXNzIHNpbmdsZSBpdGVtXG4gICAgICogTXVzdCByZXR1cm4gcHJvY2Vzc2VkIGl0ZW0gd2hpY2ggd2lsbCBiZSBwYXNzZWQgaW4gYSBjaHVuayB0byB3cml0ZUNodW5rIGZ1bmN0aW9uXG4gICAgICovXG4gICAgcHJvY2Vzc0l0ZW0oc3RlcEV4ZWN1dGlvbiwgaXRlbSwgY3VycmVudEl0ZW1Db3VudCwgam9iUmVzdWx0KSB7XG4gICAgICAgIHRocm93IFwiQmF0Y2hTdGVwLnByb2Nlc3NJdGVtIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igc3RlcDogXCIgKyB0aGlzLm5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIHdyaXRlIGNodW5rIG9mIGl0ZW1zLiBOb3QgcmVxdWlyZWRcbiAgICAgKi9cbiAgICB3cml0ZUNodW5rKHN0ZXBFeGVjdXRpb24sIGl0ZW1zLCBqb2JSZXN1bHQpIHtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRlbnNpb24gcG9pbnQgZm9yIHN1YmNsYXNzZXMgdG8gcGVyZm9ybSBwb3N0cHJvY2Vzc2luZyBhZnRlciBhbGwgaXRlbXMgaGF2ZSBiZWVuIHByb2Nlc3NlZC4gTm90IHJlcXVpcmVkXG4gICAgICovXG4gICAgcG9zdFByb2Nlc3Moc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgfVxuXG5cbiAgICBzZXRUb3RhbEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uLCBjb3VudCkge1xuICAgICAgICBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucHV0KEJhdGNoU3RlcC5UT1RBTF9JVEVNX0NPVU5UX1BST1AsIGNvdW50KTtcbiAgICB9XG5cbiAgICBnZXRUb3RhbEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uKSB7XG4gICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQuZ2V0KEJhdGNoU3RlcC5UT1RBTF9JVEVNX0NPVU5UX1BST1ApO1xuICAgIH1cblxuICAgIHNldEN1cnJlbnRJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbiwgY291bnQpIHtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChCYXRjaFN0ZXAuQ1VSUkVOVF9JVEVNX0NPVU5UX1BST1AsIGNvdW50KTtcbiAgICB9XG5cbiAgICBnZXRDdXJyZW50SXRlbUNvdW50KHN0ZXBFeGVjdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dC5nZXQoQmF0Y2hTdGVwLkNVUlJFTlRfSVRFTV9DT1VOVF9QUk9QKSB8fCAwO1xuICAgIH1cblxuXG4gICAgZG9FeGVjdXRlKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluaXQoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KVxuICAgICAgICB9KS5jYXRjaChlPT4ge1xuICAgICAgICAgICAgbG9nLmVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgYmF0Y2ggc3RlcDogXCIgKyB0aGlzLm5hbWUsIGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSkudGhlbih0b3RhbEl0ZW1Db3VudD0+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50SXRlbUNvdW50KHN0ZXBFeGVjdXRpb24sIHRoaXMuZ2V0Q3VycmVudEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUb3RhbEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uLCB0b3RhbEl0ZW1Db3VudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlTmV4dENodW5rKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdClcbiAgICAgICAgICAgIH0pLmNhdGNoKGU9PiB7XG4gICAgICAgICAgICAgICAgaWYoIShlIGluc3RhbmNlb2YgSm9iSW50ZXJydXB0ZWRFeGNlcHRpb24pKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKFwiRmFpbGVkIHRvIGhhbmRsZSBiYXRjaCBzdGVwOiBcIiArIHRoaXMubmFtZSwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wb3N0UHJvY2VzcyhzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpXG4gICAgICAgICAgICB9KS5jYXRjaChlPT4ge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkZhaWxlZCB0byBwb3N0UHJvY2VzcyBiYXRjaCBzdGVwOiBcIiArIHRoaXMubmFtZSwgZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4oKCk9PiB7XG4gICAgICAgICAgICBzdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgaGFuZGxlTmV4dENodW5rKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgY3VycmVudEl0ZW1Db3VudCA9IHRoaXMuZ2V0Q3VycmVudEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uKTtcbiAgICAgICAgdmFyIHRvdGFsSXRlbUNvdW50ID0gdGhpcy5nZXRUb3RhbEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uKTtcbiAgICAgICAgdmFyIGNodW5rU2l6ZSA9IE1hdGgubWluKHRoaXMuY2h1bmtTaXplLCB0b3RhbEl0ZW1Db3VudCAtIGN1cnJlbnRJdGVtQ291bnQpO1xuICAgICAgICBpZiAoY3VycmVudEl0ZW1Db3VudCA+PSB0b3RhbEl0ZW1Db3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tKb2JFeGVjdXRpb25GbGFncyhzdGVwRXhlY3V0aW9uKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc29tZW9uZSBpcyB0cnlpbmcgdG8gc3RvcCB1c1xuICAgICAgICAgICAgaWYgKHN0ZXBFeGVjdXRpb24udGVybWluYXRlT25seSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbihcIkpvYkV4ZWN1dGlvbiBpbnRlcnJ1cHRlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvblxuICAgICAgICB9KS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFkTmV4dENodW5rKHN0ZXBFeGVjdXRpb24sIGN1cnJlbnRJdGVtQ291bnQsIGNodW5rU2l6ZSwgam9iUmVzdWx0KVxuICAgICAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJGYWlsZWQgdG8gcmVhZCBjaHVuayAoXCIgKyBjdXJyZW50SXRlbUNvdW50ICsgXCIsXCIgKyBjaHVua1NpemUgKyBcIikgaW4gYmF0Y2ggc3RlcDogXCIgKyB0aGlzLm5hbWUsIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkudGhlbihjaHVuaz0+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0NodW5rKHN0ZXBFeGVjdXRpb24sIGNodW5rLCBjdXJyZW50SXRlbUNvdW50LCBqb2JSZXN1bHQpXG4gICAgICAgICAgICB9KS5jYXRjaChlPT4ge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkZhaWxlZCB0byBwcm9jZXNzIGNodW5rIChcIiArIGN1cnJlbnRJdGVtQ291bnQgKyBcIixcIiArIGNodW5rU2l6ZSArIFwiKSBpbiBiYXRjaCBzdGVwOiBcIiArIHRoaXMubmFtZSwgZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4ocHJvY2Vzc2VkQ2h1bms9PiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyaXRlQ2h1bmsoc3RlcEV4ZWN1dGlvbiwgcHJvY2Vzc2VkQ2h1bmssIGpvYlJlc3VsdClcbiAgICAgICAgICAgIH0pLmNhdGNoKGU9PiB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKFwiRmFpbGVkIHRvIHdyaXRlIGNodW5rIChcIiArIGN1cnJlbnRJdGVtQ291bnQgKyBcIixcIiArIGNodW5rU2l6ZSArIFwiKSBpbiBiYXRjaCBzdGVwOiBcIiArIHRoaXMubmFtZSwgZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4oKHJlcyk9PiB7XG4gICAgICAgICAgICBjdXJyZW50SXRlbUNvdW50ICs9IGNodW5rU2l6ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uLCBjdXJyZW50SXRlbUNvdW50KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUpvYlByb2dyZXNzKHN0ZXBFeGVjdXRpb24pLnRoZW4oKCk9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlTmV4dENodW5rKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcm9jZXNzQ2h1bmsoc3RlcEV4ZWN1dGlvbiwgY2h1bmssIGN1cnJlbnRJdGVtQ291bnQsIGpvYlJlc3VsdCkgeyAvL1RPRE8gcHJvbWlzaWZ5XG4gICAgICAgIHJldHVybiBjaHVuay5tYXAoKGl0ZW0sIGkpPT50aGlzLnByb2Nlc3NJdGVtKHN0ZXBFeGVjdXRpb24sIGl0ZW0sIGN1cnJlbnRJdGVtQ291bnQraSwgam9iUmVzdWx0KSk7XG4gICAgfVxuXG4gICAgLypTaG91bGQgcmV0dXJuIHByb2dyZXNzIG9iamVjdCB3aXRoIGZpZWxkczpcbiAgICAgKiBjdXJyZW50XG4gICAgICogdG90YWwgKi9cbiAgICBnZXRQcm9ncmVzcyhzdGVwRXhlY3V0aW9uKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLmdldFRvdGFsSXRlbUNvdW50KHN0ZXBFeGVjdXRpb24pLFxuICAgICAgICAgICAgY3VycmVudDogdGhpcy5nZXRDdXJyZW50SXRlbUNvdW50KHN0ZXBFeGVjdXRpb24pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVKb2JQcm9ncmVzcyhzdGVwRXhlY3V0aW9uKSB7XG4gICAgICAgIHZhciBwcm9ncmVzcyA9IHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JCeU5hbWUoc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSkuZ2V0UHJvZ3Jlc3Moc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnVwZGF0ZUpvYkV4ZWN1dGlvblByb2dyZXNzKHN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uLmlkLCBwcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgY2hlY2tKb2JFeGVjdXRpb25GbGFncyhzdGVwRXhlY3V0aW9uKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JCeU5hbWUoc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSkuY2hlY2tFeGVjdXRpb25GbGFncyhzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbik7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEV4dGVuZGFibGVFcnJvciB7XG4gICAgZGF0YTtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBkYXRhKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICB9XG59XG4iLCJleHBvcnQgKiBmcm9tICcuL2V4dGVuZGFibGUtZXJyb3InXG5leHBvcnQgKiBmcm9tICcuL2pvYi1kYXRhLWludmFsaWQtZXhjZXB0aW9uJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItZXhlY3V0aW9uLWFscmVhZHktcnVubmluZy1leGNlcHRpb24nXG5leHBvcnQgKiBmcm9tICcuL2pvYi1pbnN0YW5jZS1hbHJlYWR5LWNvbXBsZXRlLWV4Y2VwdGlvbidcbmV4cG9ydCAqIGZyb20gJy4vam9iLWludGVycnVwdGVkLWV4Y2VwdGlvbidcbmV4cG9ydCAqIGZyb20gJy4vam9iLXBhcmFtZXRlcnMtaW52YWxpZC1leGNlcHRpb24nXG5leHBvcnQgKiBmcm9tICcuL2pvYi1yZXN0YXJ0LWV4Y2VwdGlvbidcblxuXG4iLCJpbXBvcnQge0V4dGVuZGFibGVFcnJvcn0gZnJvbSBcIi4vZXh0ZW5kYWJsZS1lcnJvclwiO1xuZXhwb3J0IGNsYXNzIEpvYkNvbXB1dGF0aW9uRXhjZXB0aW9uIGV4dGVuZHMgRXh0ZW5kYWJsZUVycm9yIHtcbn1cbiIsImltcG9ydCB7RXh0ZW5kYWJsZUVycm9yfSBmcm9tIFwiLi9leHRlbmRhYmxlLWVycm9yXCI7XG5leHBvcnQgY2xhc3MgSm9iRGF0YUludmFsaWRFeGNlcHRpb24gZXh0ZW5kcyBFeHRlbmRhYmxlRXJyb3Ige1xufVxuIiwiaW1wb3J0IHtFeHRlbmRhYmxlRXJyb3J9IGZyb20gXCIuL2V4dGVuZGFibGUtZXJyb3JcIjtcbmV4cG9ydCBjbGFzcyBKb2JFeGVjdXRpb25BbHJlYWR5UnVubmluZ0V4Y2VwdGlvbiBleHRlbmRzIEV4dGVuZGFibGVFcnJvciB7XG59XG4iLCJpbXBvcnQge0V4dGVuZGFibGVFcnJvcn0gZnJvbSBcIi4vZXh0ZW5kYWJsZS1lcnJvclwiO1xuZXhwb3J0IGNsYXNzIEpvYkluc3RhbmNlQWxyZWFkeUNvbXBsZXRlRXhjZXB0aW9uIGV4dGVuZHMgRXh0ZW5kYWJsZUVycm9yIHtcbn1cbiIsImltcG9ydCB7RXh0ZW5kYWJsZUVycm9yfSBmcm9tIFwiLi9leHRlbmRhYmxlLWVycm9yXCI7XG5leHBvcnQgY2xhc3MgSm9iSW50ZXJydXB0ZWRFeGNlcHRpb24gZXh0ZW5kcyBFeHRlbmRhYmxlRXJyb3Ige1xufVxuIiwiaW1wb3J0IHtFeHRlbmRhYmxlRXJyb3J9IGZyb20gXCIuL2V4dGVuZGFibGUtZXJyb3JcIjtcbmV4cG9ydCBjbGFzcyBKb2JQYXJhbWV0ZXJzSW52YWxpZEV4Y2VwdGlvbiBleHRlbmRzIEV4dGVuZGFibGVFcnJvciB7XG59XG4iLCJpbXBvcnQge0V4dGVuZGFibGVFcnJvcn0gZnJvbSBcIi4vZXh0ZW5kYWJsZS1lcnJvclwiO1xuZXhwb3J0IGNsYXNzIEpvYlJlc3RhcnRFeGNlcHRpb24gZXh0ZW5kcyBFeHRlbmRhYmxlRXJyb3Ige1xufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0RhdGFNb2RlbH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge1N0ZXBFeGVjdXRpb259IGZyb20gXCIuL3N0ZXAtZXhlY3V0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBFeGVjdXRpb25Db250ZXh0IHtcblxuICAgIGRpcnR5ID0gZmFsc2U7XG4gICAgY29udGV4dCA9IHt9O1xuXG4gICAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gVXRpbHMuY2xvbmUoY29udGV4dClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1dChrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciBwcmV2VmFsdWUgPSB0aGlzLmNvbnRleHRba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNvbnRleHRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHByZXZWYWx1ZSA9PSBudWxsIHx8IHByZXZWYWx1ZSAhPSBudWxsICYmIHByZXZWYWx1ZSAhPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbnRleHRba2V5XTtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBwcmV2VmFsdWUgIT0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dFtrZXldO1xuICAgIH1cblxuICAgIGNvbnRhaW5zS2V5KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0Lmhhc093blByb3BlcnR5KGtleSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlKGtleSkge1xuICAgICAgICBkZWxldGUgdGhpcy5jb250ZXh0W2tleV07XG4gICAgfVxuXG4gICAgc2V0RGF0YShkYXRhKSB7IC8vc2V0IGRhdGEgbW9kZWxcbiAgICAgICAgcmV0dXJuIHRoaXMucHV0KFwiZGF0YVwiLCBkYXRhKTtcbiAgICB9XG5cbiAgICBnZXREYXRhKCkgeyAvLyBnZXQgZGF0YSBtb2RlbFxuICAgICAgICByZXR1cm4gdGhpcy5nZXQoXCJkYXRhXCIpO1xuICAgIH1cblxuXG4gICAgZ2V0RFRPKGZpbHRlcmVkUHJvcGVydGllcyA9IFtdLCBkZWVwQ2xvbmUgPSB0cnVlKSB7XG4gICAgICAgIHZhciBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lRGVlcFdpdGg7XG4gICAgICAgIGlmICghZGVlcENsb25lKSB7XG4gICAgICAgICAgICBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lV2l0aDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IGR0byA9IFV0aWxzLmFzc2lnbih7fSwgY2xvbmVNZXRob2QodGhpcywgKHZhbHVlLCBrZXksIG9iamVjdCwgc3RhY2spPT4ge1xuICAgICAgICAgICAgaWYgKGZpbHRlcmVkUHJvcGVydGllcy5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRhTW9kZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuZ2V0RFRPKClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodmFsdWUgJiYgdmFsdWUuJE9iamVjdFdpdGhJZEFuZEVkaXRhYmxlRmllbGRzICYmIHZhbHVlLmlkICYmIHRoaXMuZ2V0RGF0YSgpLmZpbmRCeUlkKHZhbHVlLmlkKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgJyRPYmplY3RXaXRoSWRBbmRFZGl0YWJsZUZpZWxkcyc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVXRpbHMuZ2V0RXJyb3JEVE8odmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pKTtcblxuICAgICAgICByZXR1cm4gZHRvXG4gICAgfVxuXG59XG4iLCJpbXBvcnQgKiBhcyBleGNlcHRpb25zIGZyb20gJy4vZXhjZXB0aW9ucydcblxuZXhwb3J0IHtleGNlcHRpb25zfVxuZXhwb3J0ICogZnJvbSAnLi9leGVjdXRpb24tY29udGV4dCdcbmV4cG9ydCAqIGZyb20gJy4vam9iJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItZXhlY3V0aW9uJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItZXhlY3V0aW9uLWZsYWcnXG5leHBvcnQgKiBmcm9tICcuL2pvYi1leGVjdXRpb24tbGlzdGVuZXInXG5leHBvcnQgKiBmcm9tICcuL2pvYi1pbnN0YW5jZSdcbmV4cG9ydCAqIGZyb20gJy4vam9iLWtleS1nZW5lcmF0b3InXG5leHBvcnQgKiBmcm9tICcuL2pvYi1sYXVuY2hlcidcbmV4cG9ydCAqIGZyb20gJy4vam9iLXBhcmFtZXRlci1kZWZpbml0aW9uJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItcGFyYW1ldGVycydcbmV4cG9ydCAqIGZyb20gJy4vam9iLXN0YXR1cydcbmV4cG9ydCAqIGZyb20gJy4vc2ltcGxlLWpvYidcbmV4cG9ydCAqIGZyb20gJy4vc3RlcCdcbmV4cG9ydCAqIGZyb20gJy4vc3RlcC1leGVjdXRpb24nXG5leHBvcnQgKiBmcm9tICcuL3N0ZXAtZXhlY3V0aW9uLWxpc3RlbmVyJ1xuXG5cblxuXG4iLCJleHBvcnQgY29uc3QgSk9CX0VYRUNVVElPTl9GTEFHID0ge1xuICAgIFNUT1A6ICdTVE9QJ1xufTtcbiIsImV4cG9ydCBjbGFzcyBKb2JFeGVjdXRpb25MaXN0ZW5lciB7XG4gICAgLypDYWxsZWQgYmVmb3JlIGEgam9iIGV4ZWN1dGVzKi9cbiAgICBiZWZvcmVKb2Ioam9iRXhlY3V0aW9uKSB7XG5cbiAgICB9XG5cbiAgICAvKkNhbGxlZCBhZnRlciBjb21wbGV0aW9uIG9mIGEgam9iLiBDYWxsZWQgYWZ0ZXIgYm90aCBzdWNjZXNzZnVsIGFuZCBmYWlsZWQgZXhlY3V0aW9ucyovXG4gICAgYWZ0ZXJKb2Ioam9iRXhlY3V0aW9uKSB7XG5cbiAgICB9XG59XG4iLCJpbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7U3RlcEV4ZWN1dGlvbn0gZnJvbSBcIi4vc3RlcC1leGVjdXRpb25cIjtcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtFeGVjdXRpb25Db250ZXh0fSBmcm9tIFwiLi9leGVjdXRpb24tY29udGV4dFwiO1xuXG4vKmRvbWFpbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBleGVjdXRpb24gb2YgYSBqb2IuKi9cbmV4cG9ydCBjbGFzcyBKb2JFeGVjdXRpb24ge1xuICAgIGlkO1xuICAgIGpvYkluc3RhbmNlO1xuICAgIGpvYlBhcmFtZXRlcnM7XG4gICAgc3RlcEV4ZWN1dGlvbnMgPSBbXTtcbiAgICBzdGF0dXMgPSBKT0JfU1RBVFVTLlNUQVJUSU5HO1xuICAgIGV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLlVOS05PV047XG4gICAgZXhlY3V0aW9uQ29udGV4dCA9IG5ldyBFeGVjdXRpb25Db250ZXh0KCk7XG5cbiAgICBzdGFydFRpbWUgPSBudWxsO1xuICAgIGNyZWF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIGVuZFRpbWUgPSBudWxsO1xuICAgIGxhc3RVcGRhdGVkID0gbnVsbDtcblxuICAgIGZhaWx1cmVFeGNlcHRpb25zID0gW107XG5cbiAgICBjb25zdHJ1Y3Rvcihqb2JJbnN0YW5jZSwgam9iUGFyYW1ldGVycywgaWQpIHtcbiAgICAgICAgaWYoaWQ9PT1udWxsIHx8IGlkID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgdGhpcy5pZCA9IFV0aWxzLmd1aWQoKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmpvYkluc3RhbmNlID0gam9iSW5zdGFuY2U7XG4gICAgICAgIHRoaXMuam9iUGFyYW1ldGVycyA9IGpvYlBhcmFtZXRlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgYSBzdGVwIGV4ZWN1dGlvbiB3aXRoIHRoZSBjdXJyZW50IGpvYiBleGVjdXRpb24uXG4gICAgICogQHBhcmFtIHN0ZXBOYW1lIHRoZSBuYW1lIG9mIHRoZSBzdGVwIHRoZSBuZXcgZXhlY3V0aW9uIGlzIGFzc29jaWF0ZWQgd2l0aFxuICAgICAqL1xuICAgIGNyZWF0ZVN0ZXBFeGVjdXRpb24oc3RlcE5hbWUpIHtcbiAgICAgICAgdmFyIHN0ZXBFeGVjdXRpb24gPSBuZXcgU3RlcEV4ZWN1dGlvbihzdGVwTmFtZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuc3RlcEV4ZWN1dGlvbnMucHVzaChzdGVwRXhlY3V0aW9uKTtcbiAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb247XG4gICAgfVxuXG4gICAgaXNSdW5uaW5nKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZW5kVGltZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoaXMgSm9iRXhlY3V0aW9uIGhhcyBiZWVuIHNpZ25hbGxlZCB0b1xuICAgICAqIHN0b3AuXG4gICAgICovXG4gICAgaXNTdG9wcGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSBKT0JfU1RBVFVTLlNUT1BQSU5HO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNpZ25hbCB0aGUgSm9iRXhlY3V0aW9uIHRvIHN0b3AuXG4gICAgICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5zdGVwRXhlY3V0aW9ucy5mb3JFYWNoKHNlPT4ge1xuICAgICAgICAgICAgc2UudGVybWluYXRlT25seSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IEpPQl9TVEFUVVMuU1RPUFBJTkc7XG4gICAgfVxuXG4gICAgZ2V0RGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY3V0aW9uQ29udGV4dC5nZXREYXRhKCk7XG4gICAgfVxuXG4gICAgZ2V0RFRPKGZpbHRlcmVkUHJvcGVydGllcyA9IFtdLCBkZWVwQ2xvbmUgPSB0cnVlKSB7XG4gICAgICAgIHZhciBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lRGVlcFdpdGg7XG4gICAgICAgIGlmICghZGVlcENsb25lKSB7XG4gICAgICAgICAgICBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lV2l0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBVdGlscy5hc3NpZ24oe30sIGNsb25lTWV0aG9kKHRoaXMsICh2YWx1ZSwga2V5LCBvYmplY3QsIHN0YWNrKT0+IHtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZFByb3BlcnRpZXMuaW5kZXhPZihrZXkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFtcImpvYlBhcmFtZXRlcnNcIiwgXCJleGVjdXRpb25Db250ZXh0XCJdLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmdldERUTygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBVdGlscy5nZXRFcnJvckRUTyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFN0ZXBFeGVjdXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuZ2V0RFRPKFtcImpvYkV4ZWN1dGlvblwiXSwgZGVlcENsb25lKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICB9XG59XG4iLCIvKiBvYmplY3QgcmVwcmVzZW50aW5nIGEgdW5pcXVlbHkgaWRlbnRpZmlhYmxlIGpvYiBydW4uIEpvYkluc3RhbmNlIGNhbiBiZSByZXN0YXJ0ZWQgbXVsdGlwbGUgdGltZXMgaW4gY2FzZSBvZiBleGVjdXRpb24gZmFpbHVyZSBhbmQgaXQncyBsaWZlY3ljbGUgZW5kcyB3aXRoIGZpcnN0IHN1Y2Nlc3NmdWwgZXhlY3V0aW9uKi9cbmV4cG9ydCBjbGFzcyBKb2JJbnN0YW5jZXtcblxuICAgIGlkO1xuICAgIGpvYk5hbWU7XG4gICAgY29uc3RydWN0b3IoaWQsIGpvYk5hbWUpe1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuam9iTmFtZSA9IGpvYk5hbWU7XG4gICAgfVxuXG59XG4iLCJcbmV4cG9ydCBjbGFzcyBKb2JLZXlHZW5lcmF0b3Ige1xuICAgIC8qTWV0aG9kIHRvIGdlbmVyYXRlIHRoZSB1bmlxdWUga2V5IHVzZWQgdG8gaWRlbnRpZnkgYSBqb2IgaW5zdGFuY2UuKi9cbiAgICBzdGF0aWMgZ2VuZXJhdGVLZXkoam9iUGFyYW1ldGVycykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgam9iUGFyYW1ldGVycy5kZWZpbml0aW9ucy5mb3JFYWNoKChkLCBpKT0+IHtcbiAgICAgICAgICAgIGlmKGQuaWRlbnRpZnlpbmcpe1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBkLm5hbWUgKyBcIj1cIiArIGpvYlBhcmFtZXRlcnMudmFsdWVzW2QubmFtZV0gKyBcIjtcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtKb2JSZXN0YXJ0RXhjZXB0aW9ufSBmcm9tIFwiLi9leGNlcHRpb25zL2pvYi1yZXN0YXJ0LWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1V0aWxzLCBsb2d9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzSW52YWxpZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItcGFyYW1ldGVycy1pbnZhbGlkLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKb2JEYXRhSW52YWxpZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItZGF0YS1pbnZhbGlkLWV4Y2VwdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgSm9iTGF1bmNoZXIge1xuXG4gICAgam9iUmVwb3NpdG9yeTtcbiAgICBqb2JXb3JrZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihqb2JSZXBvc2l0b3J5LCBqb2JXb3JrZXIsIGRhdGFNb2RlbFNlcmlhbGl6ZXIpIHtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICAgICAgdGhpcy5qb2JXb3JrZXIgPSBqb2JXb3JrZXI7XG4gICAgICAgIHRoaXMuZGF0YU1vZGVsU2VyaWFsaXplciA9IGRhdGFNb2RlbFNlcmlhbGl6ZXI7XG4gICAgfVxuXG5cbiAgICBydW4oam9iT3JOYW1lLCBqb2JQYXJhbWV0ZXJzVmFsdWVzLCBkYXRhLCByZXNvbHZlUHJvbWlzZUFmdGVySm9iSXNMYXVuY2hlZCA9IHRydWUpIHtcbiAgICAgICAgdmFyIGpvYjtcbiAgICAgICAgdmFyIGpvYlBhcmFtZXRlcnM7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB7XG4gICAgICAgICAgICBpZiAoVXRpbHMuaXNTdHJpbmcoam9iT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgIGpvYiA9IHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JCeU5hbWUoam9iT3JOYW1lKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBqb2IgPSBqb2JPck5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWpvYikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JSZXN0YXJ0RXhjZXB0aW9uKFwiTm8gc3VjaCBqb2I6IFwiICsgam9iT3JOYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgam9iUGFyYW1ldGVycyA9IGpvYi5jcmVhdGVKb2JQYXJhbWV0ZXJzKGpvYlBhcmFtZXRlcnNWYWx1ZXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZShqb2IsIGpvYlBhcmFtZXRlcnMsIGRhdGEpO1xuICAgICAgICB9KS50aGVuKHZhbGlkPT57XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmNyZWF0ZUpvYkV4ZWN1dGlvbihqb2IubmFtZSwgam9iUGFyYW1ldGVycywgZGF0YSkudGhlbihqb2JFeGVjdXRpb249PntcblxuXG4gICAgICAgICAgICAgICAgaWYodGhpcy5qb2JXb3JrZXIpe1xuICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJKb2I6IFtcIiArIGpvYi5uYW1lICsgXCJdIGV4ZWN1dGlvbiBbXCIram9iRXhlY3V0aW9uLmlkK1wiXSBkZWxlZ2F0ZWQgdG8gd29ya2VyXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmpvYldvcmtlci5leGVjdXRlSm9iKGpvYkV4ZWN1dGlvbi5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBqb2JFeGVjdXRpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGV4ZWN1dGlvblByb21pc2UgPSB0aGlzLl9leGVjdXRlKGpvYiwgam9iRXhlY3V0aW9uKTtcbiAgICAgICAgICAgICAgICBpZihyZXNvbHZlUHJvbWlzZUFmdGVySm9iSXNMYXVuY2hlZCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBqb2JFeGVjdXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB2YWxpZGF0ZShqb2IsIGpvYlBhcmFtZXRlcnMsIGRhdGEpe1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldExhc3RKb2JFeGVjdXRpb24oam9iLm5hbWUsIGpvYlBhcmFtZXRlcnMpLnRoZW4obGFzdEV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgaWYgKGxhc3RFeGVjdXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICgham9iLmlzUmVzdGFydGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYlJlc3RhcnRFeGNlcHRpb24oXCJKb2JJbnN0YW5jZSBhbHJlYWR5IGV4aXN0cyBhbmQgaXMgbm90IHJlc3RhcnRhYmxlXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhc3RFeGVjdXRpb24uc3RlcEV4ZWN1dGlvbnMuZm9yRWFjaChleGVjdXRpb249PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGVjdXRpb24uc3RhdHVzID09IEpPQl9TVEFUVVMuVU5LTk9XTikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYlJlc3RhcnRFeGNlcHRpb24oXCJTdGVwIFtcIiArIGV4ZWN1dGlvbi5zdGVwTmFtZSArIFwiXSBpcyBvZiBzdGF0dXMgVU5LTk9XTlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGpvYi5qb2JQYXJhbWV0ZXJzVmFsaWRhdG9yICYmICFqb2Iuam9iUGFyYW1ldGVyc1ZhbGlkYXRvci52YWxpZGF0ZShqb2JQYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JQYXJhbWV0ZXJzSW52YWxpZEV4Y2VwdGlvbihcIkludmFsaWQgam9iIHBhcmFtZXRlcnMgaW4gam9iTGF1bmNoZXIucnVuIGZvciBqb2I6IFwiK2pvYi5uYW1lKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihqb2Iuam9iRGF0YVZhbGlkYXRvciAmJiAham9iLmpvYkRhdGFWYWxpZGF0b3IudmFsaWRhdGUoZGF0YSkpe1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JEYXRhSW52YWxpZEV4Y2VwdGlvbihcIkludmFsaWQgam9iIGRhdGEgaW4gam9iTGF1bmNoZXIucnVuIGZvciBqb2I6IFwiK2pvYi5uYW1lKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipFeGVjdXRlIHByZXZpb3VzbHkgY3JlYXRlZCBqb2IgZXhlY3V0aW9uKi9cbiAgICBleGVjdXRlKGpvYkV4ZWN1dGlvbk9ySWQpe1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT57XG4gICAgICAgICAgICBpZihVdGlscy5pc1N0cmluZyhqb2JFeGVjdXRpb25PcklkKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JFeGVjdXRpb25CeUlkKGpvYkV4ZWN1dGlvbk9ySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGpvYkV4ZWN1dGlvbk9ySWQ7XG4gICAgICAgIH0pLnRoZW4oam9iRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBpZigham9iRXhlY3V0aW9uKXtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iUmVzdGFydEV4Y2VwdGlvbihcIkpvYkV4ZWN1dGlvbiBbXCIgKyBqb2JFeGVjdXRpb25PcklkICsgXCJdIGlzIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGpvYkV4ZWN1dGlvbi5zdGF0dXMgIT09IEpPQl9TVEFUVVMuU1RBUlRJTkcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iUmVzdGFydEV4Y2VwdGlvbihcIkpvYkV4ZWN1dGlvbiBbXCIgKyBqb2JFeGVjdXRpb24uaWQgKyBcIl0gYWxyZWFkeSBzdGFydGVkXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgam9iTmFtZSA9IGpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5qb2JOYW1lO1xuICAgICAgICAgICAgdmFyIGpvYiA9IHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JCeU5hbWUoam9iTmFtZSk7XG4gICAgICAgICAgICBpZigham9iKXtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iUmVzdGFydEV4Y2VwdGlvbihcIk5vIHN1Y2ggam9iOiBcIiArIGpvYk5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gIHRoaXMuX2V4ZWN1dGUoam9iLCBqb2JFeGVjdXRpb24pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIF9leGVjdXRlKGpvYiwgam9iRXhlY3V0aW9uKXtcbiAgICAgICAgdmFyIGpvYk5hbWUgPSBqb2IubmFtZTtcbiAgICAgICAgbG9nLmluZm8oXCJKb2I6IFtcIiArIGpvYk5hbWUgKyBcIl0gbGF1bmNoZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6IFtcIiArIGpvYkV4ZWN1dGlvbi5qb2JQYXJhbWV0ZXJzICsgXCJdXCIsIGpvYkV4ZWN1dGlvbi5nZXREYXRhKCkpO1xuICAgICAgICByZXR1cm4gam9iLmV4ZWN1dGUoam9iRXhlY3V0aW9uKS50aGVuKGpvYkV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgbG9nLmluZm8oXCJKb2I6IFtcIiArIGpvYk5hbWUgKyBcIl0gY29tcGxldGVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOiBbXCIgKyBqb2JFeGVjdXRpb24uam9iUGFyYW1ldGVycyArIFwiXSBhbmQgdGhlIGZvbGxvd2luZyBzdGF0dXM6IFtcIiArIGpvYkV4ZWN1dGlvbi5zdGF0dXMgKyBcIl1cIik7XG4gICAgICAgICAgICByZXR1cm4gam9iRXhlY3V0aW9uO1xuICAgICAgICB9KS5jYXRjaChlID0+e1xuICAgICAgICAgICAgbG9nLmVycm9yKFwiSm9iOiBbXCIgKyBqb2JOYW1lICsgXCJdIGZhaWxlZCB1bmV4cGVjdGVkbHkgYW5kIGZhdGFsbHkgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6IFtcIiArIGpvYkV4ZWN1dGlvbi5qb2JQYXJhbWV0ZXJzICsgXCJdXCIsIGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5cbmV4cG9ydCBjb25zdCBQQVJBTUVURVJfVFlQRSA9IHtcbiAgICBTVFJJTkc6ICdTVFJJTkcnLFxuICAgIERBVEU6ICdEQVRFJyxcbiAgICBJTlRFR0VSOiAnSU5URUdFUicsXG4gICAgTlVNQkVSOiAnRkxPQVQnLFxuICAgIEJPT0xFQU46ICdCT09MRUFOJyxcbiAgICBOVU1CRVJfRVhQUkVTU0lPTjogJ05VTUJFUl9FWFBSRVNTSU9OJyxcbiAgICBDT01QT1NJVEU6ICdDT01QT1NJVEUnIC8vY29tcG9zaXRlIHBhcmFtZXRlciB3aXRoIG5lc3RlZCBzdWJwYXJhbWV0ZXJzXG59O1xuXG5leHBvcnQgY2xhc3MgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbiB7XG4gICAgbmFtZTtcbiAgICB0eXBlO1xuICAgIG5lc3RlZFBhcmFtZXRlcnMgPSBbXTtcbiAgICBtaW5PY2N1cnM7XG4gICAgbWF4T2NjdXJzO1xuICAgIHJlcXVpcmVkID0gdHJ1ZTtcblxuICAgIGlkZW50aWZ5aW5nO1xuICAgIHZhbGlkYXRvcjtcbiAgICBzaW5nbGVWYWx1ZVZhbGlkYXRvcjtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHR5cGVPck5lc3RlZFBhcmFtZXRlcnNEZWZpbml0aW9ucywgbWluT2NjdXJzID0gMSwgbWF4T2NjdXJzID0gMSwgaWRlbnRpZnlpbmcgPSBmYWxzZSwgc2luZ2xlVmFsdWVWYWxpZGF0b3IgPSBudWxsLCB2YWxpZGF0b3IgPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIGlmIChVdGlscy5pc0FycmF5KHR5cGVPck5lc3RlZFBhcmFtZXRlcnNEZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IFBBUkFNRVRFUl9UWVBFLkNPTVBPU0lURTtcbiAgICAgICAgICAgIHRoaXMubmVzdGVkUGFyYW1ldGVycyA9IHR5cGVPck5lc3RlZFBhcmFtZXRlcnNEZWZpbml0aW9ucztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGVPck5lc3RlZFBhcmFtZXRlcnNEZWZpbml0aW9ucztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgICAgICAgdGhpcy5zaW5nbGVWYWx1ZVZhbGlkYXRvciA9IHNpbmdsZVZhbHVlVmFsaWRhdG9yO1xuICAgICAgICB0aGlzLmlkZW50aWZ5aW5nID0gaWRlbnRpZnlpbmc7XG4gICAgICAgIHRoaXMubWluT2NjdXJzID0gbWluT2NjdXJzO1xuICAgICAgICB0aGlzLm1heE9jY3VycyA9IG1heE9jY3VycztcbiAgICB9XG5cbiAgICBzZXQoa2V5LCB2YWwpIHtcbiAgICAgICAgdGhpc1trZXldID0gdmFsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YWxpZGF0ZSh2YWx1ZSwgYWxsVmFsdWVzKSB7XG4gICAgICAgIHZhciBpc0FycmF5ID0gVXRpbHMuaXNBcnJheSh2YWx1ZSk7XG5cbiAgICAgICAgaWYgKHRoaXMubWF4T2NjdXJzID4gMSAmJiAhaXNBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0FycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVNpbmdsZVZhbHVlKHZhbHVlLCBhbGxWYWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDwgdGhpcy5taW5PY2N1cnMgfHwgdmFsdWUubGVuZ3RoID4gdGhpcy5tYXhPY2N1cnMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsdWUuZXZlcnkodj0+dGhpcy52YWxpZGF0ZVNpbmdsZVZhbHVlKHYsIHZhbHVlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdG9yKHZhbHVlLCBhbGxWYWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgc3RhdGljIGNvbXB1dGVOdW1iZXJFeHByZXNzaW9uKHZhbCl7XG4gICAgICAgIGxldCBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbCk7XG4gICAgICAgIGlmKHBhcnNlZCA9PT0gSW5maW5pdHkgfHwgcGFyc2VkID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZighRXhwcmVzc2lvbkVuZ2luZS52YWxpZGF0ZSh2YWwsIHt9LCBmYWxzZSkpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLmV2YWwodmFsLCB0cnVlKVxuICAgIH1cblxuICAgIC8vIGFsbFZhbHVlcyAtIGFsbCB2YWx1ZXMgb24gdGhlIHNhbWUgbGV2ZWxcbiAgICB2YWxpZGF0ZVNpbmdsZVZhbHVlKHZhbHVlLCBhbGxWYWx1ZXMpIHtcblxuICAgICAgICBpZiAoKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCAmJiB2YWx1ZSAhPT0gZmFsc2UpICYmIHRoaXMubWluT2NjdXJzID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLnJlcXVpcmVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUEFSQU1FVEVSX1RZUEUuU1RSSU5HID09PSB0aGlzLnR5cGUgJiYgIVV0aWxzLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChQQVJBTUVURVJfVFlQRS5EQVRFID09PSB0aGlzLnR5cGUgJiYgIVV0aWxzLmlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUEFSQU1FVEVSX1RZUEUuSU5URUdFUiA9PT0gdGhpcy50eXBlICYmICFVdGlscy5pc0ludCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUEFSQU1FVEVSX1RZUEUuTlVNQkVSID09PSB0aGlzLnR5cGUgJiYgIVV0aWxzLmlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4gPT09IHRoaXMudHlwZSAmJiAhVXRpbHMuaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoUEFSQU1FVEVSX1RZUEUuTlVNQkVSX0VYUFJFU1NJT04gPT09IHRoaXMudHlwZSkge1xuICAgICAgICAgICAgdmFsdWUgPSBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLmNvbXB1dGVOdW1iZXJFeHByZXNzaW9uKHZhbHVlKTtcbiAgICAgICAgICAgIGlmKHZhbHVlID09PSBudWxsKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChQQVJBTUVURVJfVFlQRS5DT01QT1NJVEUgPT09IHRoaXMudHlwZSkge1xuICAgICAgICAgICAgaWYgKCFVdGlscy5pc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMubmVzdGVkUGFyYW1ldGVycy5ldmVyeSgobmVzdGVkRGVmLCBpKT0+bmVzdGVkRGVmLnZhbGlkYXRlKHZhbHVlW25lc3RlZERlZi5uYW1lXSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlVmFsdWVWYWxpZGF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpbmdsZVZhbHVlVmFsaWRhdG9yKHZhbHVlLCBhbGxWYWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFsdWUodmFsdWUpe1xuICAgICAgICBpZihQQVJBTUVURVJfVFlQRS5OVU1CRVJfRVhQUkVTU0lPTiA9PT0gdGhpcy50eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gSm9iUGFyYW1ldGVyRGVmaW5pdGlvbi5jb21wdXRlTnVtYmVyRXhwcmVzc2lvbih2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtQQVJBTUVURVJfVFlQRX0gZnJvbSBcIi4vam9iLXBhcmFtZXRlci1kZWZpbml0aW9uXCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEpvYlBhcmFtZXRlcnN7XG4gICAgZGVmaW5pdGlvbnMgPSBbXTtcbiAgICB2YWx1ZXM9e307XG5cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZXMpe1xuICAgICAgICB0aGlzLmluaXREZWZpbml0aW9ucygpO1xuICAgICAgICB0aGlzLmluaXREZWZhdWx0VmFsdWVzKCk7XG4gICAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgICAgIFV0aWxzLmRlZXBFeHRlbmQodGhpcy52YWx1ZXMsIHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbml0RGVmaW5pdGlvbnMoKXtcblxuICAgIH1cblxuICAgIGluaXREZWZhdWx0VmFsdWVzKCl7XG5cbiAgICB9XG5cbiAgICB2YWxpZGF0ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5kZWZpbml0aW9ucy5ldmVyeSgoZGVmLCBpKT0+ZGVmLnZhbGlkYXRlKHRoaXMudmFsdWVzW2RlZi5uYW1lXSwgdGhpcy52YWx1ZXMpKTtcbiAgICB9XG5cbiAgICBnZXREZWZpbml0aW9uKHBhdGgpe1xuICAgICAgICB2YXIgZGVmcyA9dGhpcy5kZWZpbml0aW9ucztcbiAgICAgICAgbGV0IGRlZiA9IG51bGw7XG4gICAgICAgIGlmKCFwYXRoLnNwbGl0KCkuZXZlcnkobmFtZT0+e1xuICAgICAgICAgICAgICAgIGRlZiA9IFV0aWxzLmZpbmQoZGVmcywgZD0+ZC5uYW1lID09IG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmKCFkZWYpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmcyA9IGRlZi5uZXN0ZWRQYXJhbWV0ZXJzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KSl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmO1xuICAgIH1cblxuICAgIC8qZ2V0IG9yIHNldCB2YWx1ZSBieSBwYXRoKi9cbiAgICB2YWx1ZShwYXRoLCB2YWx1ZSl7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBsZXQgZGVmID0gdGhpcy5nZXREZWZpbml0aW9uKHBhdGgpO1xuICAgICAgICAgICAgbGV0IHZhbCA9IFV0aWxzLmdldCh0aGlzLnZhbHVlcywgcGF0aCwgbnVsbCk7XG4gICAgICAgICAgICBpZihkZWYpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudmFsdWUodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAgdmFsO1xuICAgICAgICB9XG4gICAgICAgIFV0aWxzLnNldCh0aGlzLnZhbHVlcywgcGF0aCwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKXtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFwiSm9iUGFyYW1ldGVyc1tcIjtcblxuICAgICAgICB0aGlzLmRlZmluaXRpb25zLmZvckVhY2goKGQsIGkpPT4ge1xuXG4gICAgICAgICAgICB2YXIgdmFsID0gdGhpcy52YWx1ZXNbZC5uYW1lXTtcbiAgICAgICAgICAgIC8vIGlmKFV0aWxzLmlzQXJyYXkodmFsKSl7XG4gICAgICAgICAgICAvLyAgICAgdmFyIHZhbHVlcyA9IHZhbDtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gaWYoUEFSQU1FVEVSX1RZUEUuQ09NUE9TSVRFID09IGQudHlwZSl7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICByZXN1bHQgKz0gZC5uYW1lICsgXCI9XCIrdmFsICsgXCI7XCI7XG4gICAgICAgIH0pO1xuICAgICAgICByZXN1bHQrPVwiXVwiO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldERUTygpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWVzOiB0aGlzLnZhbHVlc1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtKb2JSZXBvc2l0b3J5fSBmcm9tIFwiLi9qb2ItcmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgb3BlbkRiLCBkZWxldGVEYiB9IGZyb20gJ2lkYic7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7Sm9iRXhlY3V0aW9ufSBmcm9tIFwiLi4vam9iLWV4ZWN1dGlvblwiO1xuaW1wb3J0IHtKb2JJbnN0YW5jZX0gZnJvbSBcIi4uL2pvYi1pbnN0YW5jZVwiO1xuaW1wb3J0IHtTdGVwRXhlY3V0aW9ufSBmcm9tIFwiLi4vc3RlcC1leGVjdXRpb25cIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4uL2V4ZWN1dGlvbi1jb250ZXh0XCI7XG5pbXBvcnQge0RhdGFNb2RlbH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge2xvZ30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0pvYlJlc3VsdH0gZnJvbSBcIi4uL2pvYi1yZXN1bHRcIjtcblxuLyogSW5kZXhlZERCIGpvYiByZXBvc2l0b3J5Ki9cbmV4cG9ydCBjbGFzcyBJZGJKb2JSZXBvc2l0b3J5IGV4dGVuZHMgSm9iUmVwb3NpdG9yeSB7XG5cbiAgICBkYlByb21pc2U7XG4gICAgam9iSW5zdGFuY2VEYW87XG4gICAgam9iRXhlY3V0aW9uRGFvO1xuICAgIHN0ZXBFeGVjdXRpb25EYW87XG4gICAgam9iUmVzdWx0RGFvO1xuICAgIGpvYkV4ZWN1dGlvblByb2dyZXNzRGFvO1xuICAgIGpvYkV4ZWN1dGlvbkZsYWdEYW87XG5cbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uc1Jldml2ZXIsIGRiTmFtZSA9ICdzZC1qb2ItcmVwb3NpdG9yeScsIGRlbGV0ZURCID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kYk5hbWUgPSBkYk5hbWU7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNSZXZpdmVyID0gZXhwcmVzc2lvbnNSZXZpdmVyO1xuICAgICAgICBpZiAoZGVsZXRlREIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlREIoKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdERCKClcbiAgICAgICAgICAgIH0pLmNhdGNoKGU9PiB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdERCKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbml0REIoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdERCKCkge1xuICAgICAgICB0aGlzLmRiUHJvbWlzZSA9IG9wZW5EYih0aGlzLmRiTmFtZSwgMiwgdXBncmFkZURCID0+IHtcbiAgICAgICAgICAgIC8vIE5vdGU6IHdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCxcbiAgICAgICAgICAgIC8vIHRoZSBmYWxsLXRocm91Z2ggYmVoYXZpb3VyIGlzIHdoYXQgd2Ugd2FudC5cbiAgICAgICAgICAgIHN3aXRjaCAodXBncmFkZURCLm9sZFZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZSgnam9iLWluc3RhbmNlcycpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgam9iRXhlY3V0aW9uc09TID0gdXBncmFkZURCLmNyZWF0ZU9iamVjdFN0b3JlKCdqb2ItZXhlY3V0aW9ucycpO1xuICAgICAgICAgICAgICAgICAgICBqb2JFeGVjdXRpb25zT1MuY3JlYXRlSW5kZXgoXCJqb2JJbnN0YW5jZUlkXCIsIFwiam9iSW5zdGFuY2UuaWRcIiwge3VuaXF1ZTogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICAgICAgam9iRXhlY3V0aW9uc09TLmNyZWF0ZUluZGV4KFwiY3JlYXRlVGltZVwiLCBcImNyZWF0ZVRpbWVcIiwge3VuaXF1ZTogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICAgICAgam9iRXhlY3V0aW9uc09TLmNyZWF0ZUluZGV4KFwic3RhdHVzXCIsIFwic3RhdHVzXCIsIHt1bmlxdWU6IGZhbHNlfSk7XG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZSgnam9iLWV4ZWN1dGlvbi1wcm9ncmVzcycpO1xuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlREIuY3JlYXRlT2JqZWN0U3RvcmUoJ2pvYi1leGVjdXRpb24tZmxhZ3MnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ZXBFeGVjdXRpb25zT1MgPSB1cGdyYWRlREIuY3JlYXRlT2JqZWN0U3RvcmUoJ3N0ZXAtZXhlY3V0aW9ucycpO1xuICAgICAgICAgICAgICAgICAgICBzdGVwRXhlY3V0aW9uc09TLmNyZWF0ZUluZGV4KFwiam9iRXhlY3V0aW9uSWRcIiwgXCJqb2JFeGVjdXRpb25JZFwiLCB7dW5pcXVlOiBmYWxzZX0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBqb2JSZXN1bHRPUyA9IHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZSgnam9iLXJlc3VsdHMnKTtcbiAgICAgICAgICAgICAgICAgICAgam9iUmVzdWx0T1MuY3JlYXRlSW5kZXgoXCJqb2JJbnN0YW5jZUlkXCIsIFwiam9iSW5zdGFuY2UuaWRcIiwge3VuaXF1ZTogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZURCLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCdqb2ItaW5zdGFuY2VzJykuY3JlYXRlSW5kZXgoXCJpZFwiLCBcImlkXCIsIHt1bmlxdWU6IHRydWV9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmpvYkluc3RhbmNlRGFvID0gbmV3IE9iamVjdFN0b3JlRGFvKCdqb2ItaW5zdGFuY2VzJywgdGhpcy5kYlByb21pc2UpO1xuICAgICAgICB0aGlzLmpvYkV4ZWN1dGlvbkRhbyA9IG5ldyBPYmplY3RTdG9yZURhbygnam9iLWV4ZWN1dGlvbnMnLCB0aGlzLmRiUHJvbWlzZSk7XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9uUHJvZ3Jlc3NEYW8gPSBuZXcgT2JqZWN0U3RvcmVEYW8oJ2pvYi1leGVjdXRpb24tcHJvZ3Jlc3MnLCB0aGlzLmRiUHJvbWlzZSk7XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9uRmxhZ0RhbyA9IG5ldyBPYmplY3RTdG9yZURhbygnam9iLWV4ZWN1dGlvbi1mbGFncycsIHRoaXMuZGJQcm9taXNlKTtcbiAgICAgICAgdGhpcy5zdGVwRXhlY3V0aW9uRGFvID0gbmV3IE9iamVjdFN0b3JlRGFvKCdzdGVwLWV4ZWN1dGlvbnMnLCB0aGlzLmRiUHJvbWlzZSk7XG4gICAgICAgIHRoaXMuam9iUmVzdWx0RGFvID0gbmV3IE9iamVjdFN0b3JlRGFvKCdqb2ItcmVzdWx0cycsIHRoaXMuZGJQcm9taXNlKTtcbiAgICB9XG5cbiAgICBkZWxldGVEQigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oXz0+ZGVsZXRlRGIodGhpcy5kYk5hbWUpKTtcbiAgICB9XG5cblxuICAgIHJlbW92ZUpvYkluc3RhbmNlKGpvYkluc3RhbmNlLCBqb2JQYXJhbWV0ZXJzKXtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2VuZXJhdGVKb2JJbnN0YW5jZUtleShqb2JJbnN0YW5jZS5qb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iSW5zdGFuY2VEYW8ucmVtb3ZlKGtleSkudGhlbigoKT0+e1xuICAgICAgICAgICAgdGhpcy5maW5kSm9iRXhlY3V0aW9ucyhqb2JJbnN0YW5jZSwgZmFsc2UpLnRoZW4oam9iRXhlY3V0aW9ucz0+eyAgLy8gIE5vdCB3YWl0aW5nIGZvciBwcm9taXNlIHJlc29sdmVzXG4gICAgICAgICAgICAgICAgam9iRXhlY3V0aW9ucy5mb3JFYWNoKHRoaXMucmVtb3ZlSm9iRXhlY3V0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2UpLnRoZW4oam9iUmVzdWx0PT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlSm9iUmVzdWx0KGpvYlJlc3VsdClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbW92ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb24pe1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb25EYW8ucmVtb3ZlKGpvYkV4ZWN1dGlvbi5pZCkudGhlbigoKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZFN0ZXBFeGVjdXRpb25zKGpvYkV4ZWN1dGlvbi5pZCwgZmFsc2UpLnRoZW4oc3RlcEV4ZWN1dGlvbnM9PnsgIC8vIE5vdCB3YWl0aW5nIGZvciBwcm9taXNlIHJlc29sdmVzXG4gICAgICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbnMuZm9yRWFjaCh0aGlzLnJlbW92ZVN0ZXBFeGVjdXRpb24sIHRoaXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbW92ZVN0ZXBFeGVjdXRpb24oc3RlcEV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBFeGVjdXRpb25EYW8ucmVtb3ZlKHN0ZXBFeGVjdXRpb24uaWQpXG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iUmVzdWx0KGpvYlJlc3VsdCl7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlc3VsdERhby5yZW1vdmUoam9iUmVzdWx0LmlkKTtcbiAgICB9XG5cblxuXG5cbiAgICBnZXRKb2JSZXN1bHQoam9iUmVzdWx0SWQsIHJldml2ZSA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVzdWx0RGFvLmdldChqb2JSZXN1bHRJZCkudGhlbihkdG8gPT4gZHRvICYmIHJldml2ZSA/IHRoaXMucmV2aXZlSm9iUmVzdWx0KGR0bykgOiBkdG8pO1xuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2UsIHJldml2ZSA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVzdWx0RGFvLmdldEJ5SW5kZXgoXCJqb2JJbnN0YW5jZUlkXCIsIGpvYkluc3RhbmNlLmlkKS50aGVuKGR0byA9PiBkdG8gJiYgcmV2aXZlID8gdGhpcy5yZXZpdmVKb2JSZXN1bHQoZHRvKSA6IGR0byk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUmVzdWx0QnlFeGVjdXRpb24oam9iRXhlY3V0aW9uLCByZXZpdmUgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlLCBmYWxzZSkudGhlbihkdG8gPT4gZHRvICYmIHJldml2ZSA/IHRoaXMucmV2aXZlSm9iUmVzdWx0KGR0bywgam9iRXhlY3V0aW9uKSA6IGR0byk7XG4gICAgfVxuXG4gICAgc2F2ZUpvYlJlc3VsdChqb2JSZXN1bHQpIHtcbiAgICAgICAgbGV0IGR0byA9IGpvYlJlc3VsdC5nZXREVE8oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVzdWx0RGFvLnNldChqb2JSZXN1bHQuaWQsIGR0bykudGhlbihyPT5qb2JSZXN1bHQpO1xuICAgIH1cblxuICAgIC8qcmV0dXJucyBwcm9taXNlKi9cbiAgICBnZXRKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdlbmVyYXRlSm9iSW5zdGFuY2VLZXkoam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkluc3RhbmNlRGFvLmdldChrZXkpLnRoZW4oZHRvPT5kdG8gPyB0aGlzLnJldml2ZUpvYkluc3RhbmNlKGR0bykgOiBkdG8pO1xuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gc2F2ZWQgaW5zdGFuY2UqL1xuICAgIHNhdmVKb2JJbnN0YW5jZShqb2JJbnN0YW5jZSwgam9iUGFyYW1ldGVycykge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYkluc3RhbmNlLmpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JJbnN0YW5jZURhby5zZXQoa2V5LCBqb2JJbnN0YW5jZSkudGhlbihyPT5qb2JJbnN0YW5jZSk7XG4gICAgfVxuXG4gICAgLypzaG91bGQgcmV0dXJuIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBzYXZlZCBqb2JFeGVjdXRpb24qL1xuICAgIHNhdmVKb2JFeGVjdXRpb24oam9iRXhlY3V0aW9uKSB7XG4gICAgICAgIHZhciBkdG8gPSBqb2JFeGVjdXRpb24uZ2V0RFRPKCk7XG4gICAgICAgIHZhciBzdGVwRXhlY3V0aW9uc0RUT3MgPSBkdG8uc3RlcEV4ZWN1dGlvbnM7XG4gICAgICAgIGR0by5zdGVwRXhlY3V0aW9ucyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvbkRhby5zZXQoam9iRXhlY3V0aW9uLmlkLCBkdG8pLnRoZW4ocj0+dGhpcy5zYXZlU3RlcEV4ZWN1dGlvbnNEVE9TKHN0ZXBFeGVjdXRpb25zRFRPcykpLnRoZW4ocj0+am9iRXhlY3V0aW9uKTtcbiAgICB9XG5cbiAgICB1cGRhdGVKb2JFeGVjdXRpb25Qcm9ncmVzcyhqb2JFeGVjdXRpb25JZCwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iRXhlY3V0aW9uUHJvZ3Jlc3NEYW8uc2V0KGpvYkV4ZWN1dGlvbklkLCBwcm9ncmVzcylcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25Qcm9ncmVzcyhqb2JFeGVjdXRpb25JZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb25Qcm9ncmVzc0Rhby5nZXQoam9iRXhlY3V0aW9uSWQpXG4gICAgfVxuXG4gICAgc2F2ZUpvYkV4ZWN1dGlvbkZsYWcoam9iRXhlY3V0aW9uSWQsIGZsYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iRXhlY3V0aW9uRmxhZ0Rhby5zZXQoam9iRXhlY3V0aW9uSWQsIGZsYWcpXG4gICAgfVxuXG4gICAgZ2V0Sm9iRXhlY3V0aW9uRmxhZyhqb2JFeGVjdXRpb25JZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb25GbGFnRGFvLmdldChqb2JFeGVjdXRpb25JZClcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBzYXZlZCBzdGVwRXhlY3V0aW9uKi9cbiAgICBzYXZlU3RlcEV4ZWN1dGlvbihzdGVwRXhlY3V0aW9uKSB7XG4gICAgICAgIHZhciBkdG8gPSBzdGVwRXhlY3V0aW9uLmdldERUTyhbXCJqb2JFeGVjdXRpb25cIl0pO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwRXhlY3V0aW9uRGFvLnNldChzdGVwRXhlY3V0aW9uLmlkLCBkdG8pLnRoZW4ocj0+c3RlcEV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgc2F2ZVN0ZXBFeGVjdXRpb25zRFRPUyhzdGVwRXhlY3V0aW9ucywgc2F2ZWRFeGVjdXRpb25zID0gW10pIHtcbiAgICAgICAgaWYgKHN0ZXBFeGVjdXRpb25zLmxlbmd0aCA8PSBzYXZlZEV4ZWN1dGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNhdmVkRXhlY3V0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0ZXBFeGVjdXRpb25EVE8gPSBzdGVwRXhlY3V0aW9uc1tzYXZlZEV4ZWN1dGlvbnMubGVuZ3RoXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcEV4ZWN1dGlvbkRhby5zZXQoc3RlcEV4ZWN1dGlvbkRUTy5pZCwgc3RlcEV4ZWN1dGlvbkRUTykudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHNhdmVkRXhlY3V0aW9ucy5wdXNoKHN0ZXBFeGVjdXRpb25EVE8pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVN0ZXBFeGVjdXRpb25zRFRPUyhzdGVwRXhlY3V0aW9ucywgc2F2ZWRFeGVjdXRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRXhlY3V0aW9uQnlJZChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb25EYW8uZ2V0KGlkKS50aGVuKGR0bz0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoSm9iRXhlY3V0aW9uUmVsYXRpb25zKGR0byk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZldGNoSm9iRXhlY3V0aW9uUmVsYXRpb25zKGpvYkV4ZWN1dGlvbkRUTywgcmV2aXZlID0gdHJ1ZSkge1xuICAgICAgICBpZiAoIWpvYkV4ZWN1dGlvbkRUTykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRTdGVwRXhlY3V0aW9ucyhqb2JFeGVjdXRpb25EVE8uaWQsIGZhbHNlKS50aGVuKHN0ZXBzPT4ge1xuICAgICAgICAgICAgam9iRXhlY3V0aW9uRFRPLnN0ZXBFeGVjdXRpb25zID0gc3RlcHM7XG4gICAgICAgICAgICBpZiAoIXJldml2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBqb2JFeGVjdXRpb25EVE87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZpdmVKb2JFeGVjdXRpb24oam9iRXhlY3V0aW9uRFRPKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmZXRjaEpvYkV4ZWN1dGlvbnNSZWxhdGlvbnMoam9iRXhlY3V0aW9uRHRvTGlzdCwgcmV2aXZlID0gdHJ1ZSwgZmV0Y2hlZCA9IFtdKSB7XG4gICAgICAgIGlmIChqb2JFeGVjdXRpb25EdG9MaXN0Lmxlbmd0aCA8PSBmZXRjaGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmZXRjaGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEpvYkV4ZWN1dGlvblJlbGF0aW9ucyhqb2JFeGVjdXRpb25EdG9MaXN0W2ZldGNoZWQubGVuZ3RoXSwgcmV2aXZlKS50aGVuKChqb2JFeGVjdXRpb24pPT4ge1xuICAgICAgICAgICAgZmV0Y2hlZC5wdXNoKGpvYkV4ZWN1dGlvbik7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoSm9iRXhlY3V0aW9uc1JlbGF0aW9ucyhqb2JFeGVjdXRpb25EdG9MaXN0LCByZXZpdmUsIGZldGNoZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmaW5kU3RlcEV4ZWN1dGlvbnMoam9iRXhlY3V0aW9uSWQsIHJldml2ZSA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcEV4ZWN1dGlvbkRhby5nZXRBbGxCeUluZGV4KFwiam9iRXhlY3V0aW9uSWRcIiwgam9iRXhlY3V0aW9uSWQpLnRoZW4oZHRvcz0+IHtcbiAgICAgICAgICAgIGlmICghcmV2aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGR0b3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZHRvcy5tYXAoZHRvPT50aGlzLnJldml2ZVN0ZXBFeGVjdXRpb24oZHRvKSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG5cbiAgICAvKmZpbmQgam9iIGV4ZWN1dGlvbnMgc29ydGVkIGJ5IGNyZWF0ZVRpbWUsIHJldHVybnMgcHJvbWlzZSovXG4gICAgZmluZEpvYkV4ZWN1dGlvbnMoam9iSW5zdGFuY2UsIGZldGNoUmVsYXRpb25zQW5kUmV2aXZlID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb25EYW8uZ2V0QWxsQnlJbmRleChcImpvYkluc3RhbmNlSWRcIiwgam9iSW5zdGFuY2UuaWQpLnRoZW4odmFsdWVzPT4ge1xuICAgICAgICAgICAgdmFyIHNvcnRlZCA9IHZhbHVlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuY3JlYXRlVGltZS5nZXRUaW1lKCkgLSBiLmNyZWF0ZVRpbWUuZ2V0VGltZSgpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFmZXRjaFJlbGF0aW9uc0FuZFJldml2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzb3J0ZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoSm9iRXhlY3V0aW9uc1JlbGF0aW9ucyhzb3J0ZWQsIHRydWUpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldExhc3RKb2JFeGVjdXRpb25CeUluc3RhbmNlKGpvYkluc3RhbmNlLCBmZXRjaFJlbGF0aW9uc0FuZFJldml2ZSA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEpvYkV4ZWN1dGlvbnMoam9iSW5zdGFuY2UsIGZhbHNlKS50aGVuKGV4ZWN1dGlvbnM9PntcbiAgICAgICAgICAgIGxldCBleGVjdXRpb24gPSBleGVjdXRpb25zW2V4ZWN1dGlvbnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAoIWZldGNoUmVsYXRpb25zQW5kUmV2aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmV0Y2hKb2JFeGVjdXRpb25SZWxhdGlvbnMoZXhlY3V0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0TGFzdFN0ZXBFeGVjdXRpb24oam9iSW5zdGFuY2UsIHN0ZXBOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRKb2JFeGVjdXRpb25zKGpvYkluc3RhbmNlKS50aGVuKGpvYkV4ZWN1dGlvbnM9PiB7XG4gICAgICAgICAgICB2YXIgc3RlcEV4ZWN1dGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGpvYkV4ZWN1dGlvbnMuZm9yRWFjaChqb2JFeGVjdXRpb249PmpvYkV4ZWN1dGlvbi5zdGVwRXhlY3V0aW9ucy5maWx0ZXIocz0+cy5zdGVwTmFtZSA9PT0gc3RlcE5hbWUpLmZvckVhY2goKHMpPT5zdGVwRXhlY3V0aW9ucy5wdXNoKHMpKSk7XG4gICAgICAgICAgICB2YXIgbGF0ZXN0ID0gbnVsbDtcbiAgICAgICAgICAgIHN0ZXBFeGVjdXRpb25zLmZvckVhY2gocz0+IHtcbiAgICAgICAgICAgICAgICBpZiAobGF0ZXN0ID09IG51bGwgfHwgbGF0ZXN0LnN0YXJ0VGltZS5nZXRUaW1lKCkgPCBzLnN0YXJ0VGltZS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0ID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBsYXRlc3Q7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV2aXZlSm9iSW5zdGFuY2UoZHRvKSB7XG4gICAgICAgIHJldHVybiBuZXcgSm9iSW5zdGFuY2UoZHRvLmlkLCBkdG8uam9iTmFtZSk7XG4gICAgfVxuXG4gICAgcmV2aXZlRXhlY3V0aW9uQ29udGV4dChkdG8pIHtcbiAgICAgICAgbGV0IGV4ZWN1dGlvbkNvbnRleHQgPSBuZXcgRXhlY3V0aW9uQ29udGV4dCgpO1xuICAgICAgICBleGVjdXRpb25Db250ZXh0LmNvbnRleHQgPSBkdG8uY29udGV4dDtcbiAgICAgICAgbGV0IGRhdGEgPSBleGVjdXRpb25Db250ZXh0LmdldERhdGEoKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIGxldCBkYXRhTW9kZWwgPSBuZXcgRGF0YU1vZGVsKCk7XG4gICAgICAgICAgICBkYXRhTW9kZWwubG9hZEZyb21EVE8oZGF0YSwgdGhpcy5leHByZXNzaW9uc1Jldml2ZXIpO1xuXG4gICAgICAgICAgICBleGVjdXRpb25Db250ZXh0LnNldERhdGEobnVsbCk7XG4gICAgICAgICAgICB0aGlzLnJldml2ZUZyb21EVE8oZXhlY3V0aW9uQ29udGV4dC5jb250ZXh0LCBkdG8uY29udGV4dCwgZGF0YU1vZGVsKTtcblxuICAgICAgICAgICAgZXhlY3V0aW9uQ29udGV4dC5zZXREYXRhKGRhdGFNb2RlbCk7XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXhlY3V0aW9uQ29udGV4dFxuICAgIH1cblxuICAgIHJldml2ZUZyb21EVE8odGFyZ2V0LCBkdG8sIGRhdGFNb2RlbCkge1xuICAgICAgICByZXR1cm4gVXRpbHMubWVyZ2VXaXRoKHRhcmdldCwgZHRvLCAodmFsdWUsIGR0b1ZhbHVlLCBrZXkpPT4ge1xuICAgICAgICAgICAgaWYoZHRvVmFsdWUgJiYgZHRvVmFsdWUuJE9iamVjdFdpdGhJZEFuZEVkaXRhYmxlRmllbGRzICYmIGR0b1ZhbHVlLmlkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YU1vZGVsLmZpbmRCeUlkKGR0b1ZhbHVlLmlkKSB8fCB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXZpdmVKb2JFeGVjdXRpb24oZHRvKSB7XG5cbiAgICAgICAgdmFyIGpvYiA9IHRoaXMuZ2V0Sm9iQnlOYW1lKGR0by5qb2JJbnN0YW5jZS5qb2JOYW1lKTtcbiAgICAgICAgdmFyIGpvYkluc3RhbmNlID0gdGhpcy5yZXZpdmVKb2JJbnN0YW5jZShkdG8uam9iSW5zdGFuY2UpO1xuICAgICAgICB2YXIgam9iUGFyYW1ldGVycyA9IGpvYi5jcmVhdGVKb2JQYXJhbWV0ZXJzKGR0by5qb2JQYXJhbWV0ZXJzLnZhbHVlcyk7XG4gICAgICAgIHZhciBqb2JFeGVjdXRpb24gPSBuZXcgSm9iRXhlY3V0aW9uKGpvYkluc3RhbmNlLCBqb2JQYXJhbWV0ZXJzLCBkdG8uaWQpO1xuICAgICAgICB2YXIgZXhlY3V0aW9uQ29udGV4dCA9IHRoaXMucmV2aXZlRXhlY3V0aW9uQ29udGV4dChkdG8uZXhlY3V0aW9uQ29udGV4dCk7XG4gICAgICAgIHJldHVybiBVdGlscy5tZXJnZVdpdGgoam9iRXhlY3V0aW9uLCBkdG8sIChvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKT0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiam9iSW5zdGFuY2VcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBqb2JJbnN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiZXhlY3V0aW9uQ29udGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGlvbkNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcImpvYlBhcmFtZXRlcnNcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBqb2JQYXJhbWV0ZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJqb2JFeGVjdXRpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBqb2JFeGVjdXRpb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwic3RlcEV4ZWN1dGlvbnNcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzcmNWYWx1ZS5tYXAoc3RlcERUTyA9PiB0aGlzLnJldml2ZVN0ZXBFeGVjdXRpb24oc3RlcERUTywgam9iRXhlY3V0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV2aXZlU3RlcEV4ZWN1dGlvbihkdG8sIGpvYkV4ZWN1dGlvbikge1xuICAgICAgICB2YXIgc3RlcEV4ZWN1dGlvbiA9IG5ldyBTdGVwRXhlY3V0aW9uKGR0by5zdGVwTmFtZSwgam9iRXhlY3V0aW9uLCBkdG8uaWQpO1xuICAgICAgICB2YXIgZXhlY3V0aW9uQ29udGV4dCA9IHRoaXMucmV2aXZlRXhlY3V0aW9uQ29udGV4dChkdG8uZXhlY3V0aW9uQ29udGV4dCk7XG4gICAgICAgIHJldHVybiBVdGlscy5tZXJnZVdpdGgoc3RlcEV4ZWN1dGlvbiwgZHRvLCAob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlLCBzdGFjayk9PiB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcImpvYkV4ZWN1dGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiZXhlY3V0aW9uQ29udGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGlvbkNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV2aXZlSm9iUmVzdWx0KGR0bywgam9iRXhlY3V0aW9uID0gbnVsbCkge1xuICAgICAgICBsZXQgam9iID0gdGhpcy5nZXRKb2JCeU5hbWUoZHRvLmpvYkluc3RhbmNlLmpvYk5hbWUpO1xuICAgICAgICBsZXQgam9iSW5zdGFuY2UgPSB0aGlzLnJldml2ZUpvYkluc3RhbmNlKGR0by5qb2JJbnN0YW5jZSk7XG5cbiAgICAgICAgbGV0IGNvbnRleHRQcm9taXNlO1xuICAgICAgICBpZiAoam9iRXhlY3V0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRleHRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGpvYkV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjb250ZXh0UHJvbWlzZSA9IHRoaXMuZ2V0TGFzdEpvYkV4ZWN1dGlvbkJ5SW5zdGFuY2Uoam9iSW5zdGFuY2UsIGZhbHNlKS50aGVuKGpvYkV4ZWN1dGlvbkR0byA9PiB0aGlzLnJldml2ZUV4ZWN1dGlvbkNvbnRleHQoam9iRXhlY3V0aW9uRHRvLmV4ZWN1dGlvbkNvbnRleHQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb250ZXh0UHJvbWlzZS50aGVuKGV4ZWN1dGlvbkNvbnRleHQgPT4gam9iLnJldml2ZVJlc3VsdERhdGEoIHRoaXMucmV2aXZlRnJvbURUTyh7fSwgZHRvLmRhdGEsIGV4ZWN1dGlvbkNvbnRleHQuZ2V0RGF0YSgpKSwgZXhlY3V0aW9uQ29udGV4dCkpLnRoZW4oZD0+bmV3IEpvYlJlc3VsdChqb2JJbnN0YW5jZSwgZHRvLmlkLCBkKSk7XG4gICAgfVxufVxuXG5cbmNsYXNzIE9iamVjdFN0b3JlRGFvIHtcblxuICAgIG5hbWU7XG4gICAgZGJQcm9taXNlO1xuXG4gICAgY29uc3RydWN0b3IobmFtZSwgZGJQcm9taXNlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGJQcm9taXNlID0gZGJQcm9taXNlO1xuICAgIH1cblxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGJQcm9taXNlLnRoZW4oZGIgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRiLnRyYW5zYWN0aW9uKHRoaXMubmFtZSlcbiAgICAgICAgICAgICAgICAub2JqZWN0U3RvcmUodGhpcy5uYW1lKS5nZXQoa2V5KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsQnlJbmRleChpbmRleE5hbWUsIGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGIudHJhbnNhY3Rpb24odGhpcy5uYW1lKVxuICAgICAgICAgICAgICAgIC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmluZGV4KGluZGV4TmFtZSkuZ2V0QWxsKGtleSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0QnlJbmRleChpbmRleE5hbWUsIGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGIudHJhbnNhY3Rpb24odGhpcy5uYW1lKVxuICAgICAgICAgICAgICAgIC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmluZGV4KGluZGV4TmFtZSkuZ2V0KGtleSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0KGtleSwgdmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiUHJvbWlzZS50aGVuKGRiID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24odGhpcy5uYW1lLCAncmVhZHdyaXRlJyk7XG4gICAgICAgICAgICB0eC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLnB1dCh2YWwsIGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdHguY29tcGxldGU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbW92ZShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGJQcm9taXNlLnRoZW4oZGIgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbih0aGlzLm5hbWUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKHRoaXMubmFtZSkuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdHguY29tcGxldGU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKHRoaXMubmFtZSwgJ3JlYWR3cml0ZScpO1xuICAgICAgICAgICAgdHgub2JqZWN0U3RvcmUodGhpcy5uYW1lKS5jbGVhcigpO1xuICAgICAgICAgICAgcmV0dXJuIHR4LmNvbXBsZXRlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKHRoaXMubmFtZSk7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKHRoaXMubmFtZSk7XG5cbiAgICAgICAgICAgIC8vIFRoaXMgd291bGQgYmUgc3RvcmUuZ2V0QWxsS2V5cygpLCBidXQgaXQgaXNuJ3Qgc3VwcG9ydGVkIGJ5IEVkZ2Ugb3IgU2FmYXJpLlxuICAgICAgICAgICAgLy8gb3BlbktleUN1cnNvciBpc24ndCBzdXBwb3J0ZWQgYnkgU2FmYXJpLCBzbyB3ZSBmYWxsIGJhY2tcbiAgICAgICAgICAgIChzdG9yZS5pdGVyYXRlS2V5Q3Vyc29yIHx8IHN0b3JlLml0ZXJhdGVDdXJzb3IpLmNhbGwoc3RvcmUsIGN1cnNvciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IpIHJldHVybjtcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHR4LmNvbXBsZXRlLnRoZW4oKCkgPT4ga2V5cyk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Sm9iS2V5R2VuZXJhdG9yfSBmcm9tIFwiLi4vam9iLWtleS1nZW5lcmF0b3JcIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2V9IGZyb20gXCIuLi9qb2ItaW5zdGFuY2VcIjtcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JFeGVjdXRpb259IGZyb20gXCIuLi9qb2ItZXhlY3V0aW9uXCI7XG5pbXBvcnQge0pvYkV4ZWN1dGlvbkFscmVhZHlSdW5uaW5nRXhjZXB0aW9ufSBmcm9tIFwiLi4vZXhjZXB0aW9ucy9qb2ItZXhlY3V0aW9uLWFscmVhZHktcnVubmluZy1leGNlcHRpb25cIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4uL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2VBbHJlYWR5Q29tcGxldGVFeGNlcHRpb259IGZyb20gXCIuLi9leGNlcHRpb25zL2pvYi1pbnN0YW5jZS1hbHJlYWR5LWNvbXBsZXRlLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtFeGVjdXRpb25Db250ZXh0fSBmcm9tIFwiLi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7U3RlcEV4ZWN1dGlvbn0gZnJvbSBcIi4uL3N0ZXAtZXhlY3V0aW9uXCI7XG5pbXBvcnQge0RhdGFNb2RlbH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge0pvYlJlc3VsdH0gZnJvbSBcIi4uL2pvYi1yZXN1bHRcIjtcblxuZXhwb3J0IGNsYXNzIEpvYlJlcG9zaXRvcnkge1xuXG4gICAgam9iQnlOYW1lID0ge307XG5cbiAgICByZWdpc3RlckpvYihqb2IpIHtcbiAgICAgICAgdGhpcy5qb2JCeU5hbWVbam9iLm5hbWVdID0gam9iO1xuICAgIH1cblxuICAgIGdldEpvYkJ5TmFtZShuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkJ5TmFtZVtuYW1lXTtcbiAgICB9XG5cblxuICAgIC8qcmV0dXJucyBwcm9taXNlKi9cbiAgICBnZXRKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5IGdldEpvYkluc3RhbmNlIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gc2F2ZWQgaW5zdGFuY2UqL1xuICAgIHNhdmVKb2JJbnN0YW5jZShrZXksIGpvYkluc3RhbmNlKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnNhdmVKb2JJbnN0YW5jZSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25CeUlkKGlkKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LmdldEpvYkV4ZWN1dGlvbkJ5SWQgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgLypzaG91bGQgcmV0dXJuIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBzYXZlZCBqb2JFeGVjdXRpb24qL1xuICAgIHNhdmVKb2JFeGVjdXRpb24oam9iRXhlY3V0aW9uKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnNhdmVKb2JJbnN0YW5jZSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICB1cGRhdGVKb2JFeGVjdXRpb25Qcm9ncmVzcyhqb2JFeGVjdXRpb25JZCwgcHJvZ3Jlc3Mpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuc2F2ZUpvYkluc3RhbmNlIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIGdldEpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LmdldEpvYkV4ZWN1dGlvblByb2dyZXNzIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIHNhdmVKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkLCBmbGFnKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnNhdmVKb2JFeGVjdXRpb25GbGFnIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIGdldEpvYkV4ZWN1dGlvbkZsYWcoam9iRXhlY3V0aW9uSWQpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuZ2V0Sm9iRXhlY3V0aW9uRmxhZyBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHNhdmVkIHN0ZXBFeGVjdXRpb24qL1xuICAgIHNhdmVTdGVwRXhlY3V0aW9uKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuc2F2ZVN0ZXBFeGVjdXRpb24gZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgLypmaW5kIGpvYiBleGVjdXRpb25zIHNvcnRlZCBieSBjcmVhdGVUaW1lLCByZXR1cm5zIHByb21pc2UqL1xuICAgIGZpbmRKb2JFeGVjdXRpb25zKGpvYkluc3RhbmNlKSB7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5maW5kSm9iRXhlY3V0aW9ucyBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBnZXRKb2JSZXN1bHQoam9iUmVzdWx0SWQpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuZ2V0Sm9iUmVzdWx0IGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2Upe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBnZXRKb2JSZXN1bHRCeUV4ZWN1dGlvbihqb2JJbnN0YW5jZSl7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5nZXRKb2JSZXN1bHRCeUV4ZWN1dGlvbiBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBzYXZlSm9iUmVzdWx0KGpvYlJlc3VsdCkge1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuc2V0Sm9iUmVzdWx0IGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuXG4gICAgcmVtb3ZlSm9iSW5zdGFuY2Uoam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkucmVtb3ZlSm9iSW5zdGFuY2UgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5yZW1vdmVKb2JFeGVjdXRpb24gZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgcmVtb3ZlU3RlcEV4ZWN1dGlvbihzdGVwRXhlY3V0aW9uKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnJlbW92ZVN0ZXBFeGVjdXRpb24gZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iUmVzdWx0KGpvYlJlc3VsdCl7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5yZW1vdmVKb2JSZXN1bHQgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgLypDcmVhdGUgYSBuZXcgSm9iSW5zdGFuY2Ugd2l0aCB0aGUgbmFtZSBhbmQgam9iIHBhcmFtZXRlcnMgcHJvdmlkZWQuIHJldHVybiBwcm9taXNlKi9cbiAgICBjcmVhdGVKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBqb2JJbnN0YW5jZSA9IG5ldyBKb2JJbnN0YW5jZShVdGlscy5ndWlkKCksIGpvYk5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5zYXZlSm9iSW5zdGFuY2Uoam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMpO1xuICAgIH1cblxuICAgIC8qQ2hlY2sgaWYgYW4gaW5zdGFuY2Ugb2YgdGhpcyBqb2IgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgcGFyYW1ldGVycyBwcm92aWRlZC4qL1xuICAgIGlzSm9iSW5zdGFuY2VFeGlzdHMoam9iTmFtZSwgam9iUGFyYW1ldGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKS50aGVuKHJlc3VsdCA9PiAhIXJlc3VsdCkuY2F0Y2goZXJyb3I9PmZhbHNlKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGpvYk5hbWUgKyBcInxcIiArIEpvYktleUdlbmVyYXRvci5nZW5lcmF0ZUtleShqb2JQYXJhbWV0ZXJzKTtcbiAgICB9XG5cbiAgICAvKkNyZWF0ZSBhIEpvYkV4ZWN1dGlvbiBmb3IgYSBnaXZlbiAgSm9iIGFuZCBKb2JQYXJhbWV0ZXJzLiBJZiBtYXRjaGluZyBKb2JJbnN0YW5jZSBhbHJlYWR5IGV4aXN0cyxcbiAgICAgKiB0aGUgam9iIG11c3QgYmUgcmVzdGFydGFibGUgYW5kIGl0J3MgbGFzdCBKb2JFeGVjdXRpb24gbXVzdCAqbm90KiBiZVxuICAgICAqIGNvbXBsZXRlZC4gSWYgbWF0Y2hpbmcgSm9iSW5zdGFuY2UgZG9lcyBub3QgZXhpc3QgeWV0IGl0IHdpbGwgYmUgIGNyZWF0ZWQuKi9cblxuICAgIGNyZWF0ZUpvYkV4ZWN1dGlvbihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzLCBkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYkluc3RhbmNlKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpLnRoZW4oam9iSW5zdGFuY2U9PntcbiAgICAgICAgICAgIGlmIChqb2JJbnN0YW5jZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEpvYkV4ZWN1dGlvbnMoam9iSW5zdGFuY2UpLnRoZW4oZXhlY3V0aW9ucz0+e1xuICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25zLmZvckVhY2goZXhlY3V0aW9uPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4ZWN1dGlvbi5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JFeGVjdXRpb25BbHJlYWR5UnVubmluZ0V4Y2VwdGlvbihcIkEgam9iIGV4ZWN1dGlvbiBmb3IgdGhpcyBqb2IgaXMgYWxyZWFkeSBydW5uaW5nOiBcIiArIGpvYkluc3RhbmNlLmpvYk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4ZWN1dGlvbi5zdGF0dXMgPT0gSk9CX1NUQVRVUy5DT01QTEVURUQgfHwgZXhlY3V0aW9uLnN0YXR1cyA9PSBKT0JfU1RBVFVTLkFCQU5ET05FRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JJbnN0YW5jZUFscmVhZHlDb21wbGV0ZUV4Y2VwdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBIGpvYiBpbnN0YW5jZSBhbHJlYWR5IGV4aXN0cyBhbmQgaXMgY29tcGxldGUgZm9yIHBhcmFtZXRlcnM9XCIgKyBqb2JQYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIuICBJZiB5b3Ugd2FudCB0byBydW4gdGhpcyBqb2IgYWdhaW4sIGNoYW5nZSB0aGUgcGFyYW1ldGVycy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBleGVjdXRpb25Db250ZXh0ID0gZXhlY3V0aW9uc1tleGVjdXRpb25zLmxlbmd0aCAtIDFdLmV4ZWN1dGlvbkNvbnRleHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtqb2JJbnN0YW5jZSwgZXhlY3V0aW9uQ29udGV4dF07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbm8gam9iIGZvdW5kLCBjcmVhdGUgb25lXG4gICAgICAgICAgICBqb2JJbnN0YW5jZSA9IHRoaXMuY3JlYXRlSm9iSW5zdGFuY2Uoam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgICAgICB2YXIgZXhlY3V0aW9uQ29udGV4dCA9IG5ldyBFeGVjdXRpb25Db250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgZGF0YU1vZGVsID0gbmV3IERhdGFNb2RlbCgpO1xuICAgICAgICAgICAgZGF0YU1vZGVsLl9zZXROZXdTdGF0ZShkYXRhLmNyZWF0ZVN0YXRlU25hcHNob3QoKSk7XG4gICAgICAgICAgICBleGVjdXRpb25Db250ZXh0LnNldERhdGEoZGF0YU1vZGVsKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbam9iSW5zdGFuY2UsIGV4ZWN1dGlvbkNvbnRleHRdKTtcbiAgICAgICAgfSkudGhlbihpbnN0YW5jZUFuZEV4ZWN1dGlvbkNvbnRleHQ9PntcbiAgICAgICAgICAgIHZhciBqb2JFeGVjdXRpb24gPSBuZXcgSm9iRXhlY3V0aW9uKGluc3RhbmNlQW5kRXhlY3V0aW9uQ29udGV4dFswXSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgICAgICBqb2JFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dCA9IGluc3RhbmNlQW5kRXhlY3V0aW9uQ29udGV4dFsxXTtcbiAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5sYXN0VXBkYXRlZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbik7XG4gICAgICAgIH0pLmNhdGNoKGU9PntcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0TGFzdEpvYkV4ZWN1dGlvbihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYkluc3RhbmNlKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpLnRoZW4oKGpvYkluc3RhbmNlKT0+e1xuICAgICAgICAgICAgaWYoIWpvYkluc3RhbmNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExhc3RKb2JFeGVjdXRpb25CeUluc3RhbmNlKGpvYkluc3RhbmNlKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXRMYXN0Sm9iRXhlY3V0aW9uQnlJbnN0YW5jZShqb2JJbnN0YW5jZSl7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRKb2JFeGVjdXRpb25zKGpvYkluc3RhbmNlKS50aGVuKGV4ZWN1dGlvbnM9PmV4ZWN1dGlvbnNbZXhlY3V0aW9ucy5sZW5ndGggLTFdKTtcbiAgICB9XG5cbiAgICBnZXRMYXN0U3RlcEV4ZWN1dGlvbihqb2JJbnN0YW5jZSwgc3RlcE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEpvYkV4ZWN1dGlvbnMoam9iSW5zdGFuY2UpLnRoZW4oam9iRXhlY3V0aW9ucz0+e1xuICAgICAgICAgICAgdmFyIHN0ZXBFeGVjdXRpb25zPVtdO1xuICAgICAgICAgICAgam9iRXhlY3V0aW9ucy5mb3JFYWNoKGpvYkV4ZWN1dGlvbj0+am9iRXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmZpbHRlcihzPT5zLnN0ZXBOYW1lID09PSBzdGVwTmFtZSkuZm9yRWFjaCgocyk9PnN0ZXBFeGVjdXRpb25zLnB1c2gocykpKTtcbiAgICAgICAgICAgIHZhciBsYXRlc3QgPSBudWxsO1xuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbnMuZm9yRWFjaChzPT57XG4gICAgICAgICAgICAgICAgaWYgKGxhdGVzdCA9PSBudWxsIHx8IGxhdGVzdC5zdGFydFRpbWUuZ2V0VGltZSgpIDwgcy5zdGFydFRpbWUuZ2V0VGltZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdCA9IHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbGF0ZXN0O1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGFkZFN0ZXBFeGVjdXRpb24oc3RlcEV4ZWN1dGlvbikge1xuICAgICAgICBzdGVwRXhlY3V0aW9uLmxhc3RVcGRhdGVkID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVN0ZXBFeGVjdXRpb24oc3RlcEV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgdXBkYXRlKG8pe1xuICAgICAgICBvLmxhc3RVcGRhdGVkID0gbmV3IERhdGUoKTtcblxuICAgICAgICBpZihvIGluc3RhbmNlb2YgSm9iRXhlY3V0aW9uKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNhdmVKb2JFeGVjdXRpb24obyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihvIGluc3RhbmNlb2YgU3RlcEV4ZWN1dGlvbil7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlU3RlcEV4ZWN1dGlvbihvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IFwiT2JqZWN0IG5vdCB1cGRhdGFibGU6IFwiK29cbiAgICB9XG5cbiAgICByZW1vdmUobyl7XG5cbiAgICAgICAgaWYobyBpbnN0YW5jZW9mIEpvYkV4ZWN1dGlvbil7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVKb2JFeGVjdXRpb24obyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihvIGluc3RhbmNlb2YgU3RlcEV4ZWN1dGlvbil7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVTdGVwRXhlY3V0aW9uKG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYobyBpbnN0YW5jZW9mIEpvYlJlc3VsdCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVKb2JSZXN1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIk9iamVjdCBub3QgcmVtb3ZhYmxlOiBcIitvKTtcbiAgICB9XG5cblxuICAgIHJldml2ZUpvYkluc3RhbmNlKGR0bykge1xuICAgICAgICByZXR1cm4gZHRvO1xuICAgIH1cblxuICAgIHJldml2ZUV4ZWN1dGlvbkNvbnRleHQoZHRvKSB7XG4gICAgICAgIHJldHVybiBkdG87XG4gICAgfVxuXG4gICAgcmV2aXZlSm9iRXhlY3V0aW9uKGR0bykge1xuICAgICAgICByZXR1cm4gZHRvO1xuICAgIH1cblxuICAgIHJldml2ZVN0ZXBFeGVjdXRpb24oZHRvLCBqb2JFeGVjdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGR0bztcbiAgICB9XG59XG4iLCJpbXBvcnQge0pvYlJlcG9zaXRvcnl9IGZyb20gXCIuL2pvYi1yZXBvc2l0b3J5XCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFNpbXBsZUpvYlJlcG9zaXRvcnkgZXh0ZW5kcyBKb2JSZXBvc2l0b3J5e1xuICAgIGpvYkluc3RhbmNlc0J5S2V5ID0ge307XG4gICAgam9iRXhlY3V0aW9ucyA9IFtdO1xuICAgIHN0ZXBFeGVjdXRpb25zID0gW107XG4gICAgZXhlY3V0aW9uUHJvZ3Jlc3MgPSB7fTtcbiAgICBleGVjdXRpb25GbGFncyA9IHt9O1xuICAgIGpvYlJlc3VsdHMgPSBbXTtcblxuICAgIHJlbW92ZUpvYkluc3RhbmNlKGpvYkluc3RhbmNlKXtcbiAgICAgICAgVXRpbHMuZm9yT3duKHRoaXMuam9iSW5zdGFuY2VzQnlLZXksICAoamksIGtleSk9PntcbiAgICAgICAgICAgIGlmKGppPT09am9iSW5zdGFuY2Upe1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmpvYkluc3RhbmNlc0J5S2V5W2tleV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25zLmZpbHRlcihqb2JFeGVjdXRpb249PmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5pZCA9PSBqb2JJbnN0YW5jZS5pZCkucmV2ZXJzZSgpLmZvckVhY2godGhpcy5yZW1vdmVKb2JFeGVjdXRpb24sIHRoaXMpO1xuICAgICAgICB0aGlzLmpvYlJlc3VsdHMuZmlsdGVyKGpvYlJlc3VsdD0+am9iUmVzdWx0LmpvYkluc3RhbmNlLmlkID09IGpvYkluc3RhbmNlLmlkKS5yZXZlcnNlKCkuZm9yRWFjaCh0aGlzLnJlbW92ZUpvYlJlc3VsdCwgdGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHJlbW92ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb24pe1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmpvYkV4ZWN1dGlvbnMuaW5kZXhPZihqb2JFeGVjdXRpb24pO1xuICAgICAgICBpZihpbmRleD4tMSkge1xuICAgICAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25zLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RlcEV4ZWN1dGlvbnMuZmlsdGVyKHN0ZXBFeGVjdXRpb249PnN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uLmlkID09PSBqb2JFeGVjdXRpb24uaWQpLnJldmVyc2UoKS5mb3JFYWNoKHRoaXMucmVtb3ZlU3RlcEV4ZWN1dGlvbiwgdGhpcyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZW1vdmVTdGVwRXhlY3V0aW9uKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnN0ZXBFeGVjdXRpb25zLmluZGV4T2Yoc3RlcEV4ZWN1dGlvbik7XG4gICAgICAgIGlmKGluZGV4Pi0xKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXBFeGVjdXRpb25zLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iUmVzdWx0KGpvYlJlc3VsdCl7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuam9iUmVzdWx0cy5pbmRleE9mKGpvYlJlc3VsdCk7XG4gICAgICAgIGlmKGluZGV4Pi0xKSB7XG4gICAgICAgICAgICB0aGlzLmpvYlJlc3VsdHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cblxuICAgIC8qcmV0dXJucyBwcm9taXNlKi9cbiAgICBnZXRKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdlbmVyYXRlSm9iSW5zdGFuY2VLZXkoam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5qb2JJbnN0YW5jZXNCeUtleVtrZXldKTtcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHNhdmVkIGluc3RhbmNlKi9cbiAgICBzYXZlSm9iSW5zdGFuY2Uoam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMpe1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYkluc3RhbmNlLmpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmpvYkluc3RhbmNlc0J5S2V5W2tleV0gPSBqb2JJbnN0YW5jZTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqb2JJbnN0YW5jZSlcbiAgICB9XG5cbiAgICBnZXRKb2JSZXN1bHQoam9iUmVzdWx0SWQpe1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFV0aWxzLmZpbmQodGhpcy5qb2JSZXN1bHRzLCByPT5yLmlkPT09am9iUmVzdWx0SWQpKVxuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2Upe1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFV0aWxzLmZpbmQodGhpcy5qb2JSZXN1bHRzLCByPT5yLmpvYkluc3RhbmNlLmlkPT09am9iSW5zdGFuY2UuaWQpKVxuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5RXhlY3V0aW9uKGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlKTtcbiAgICB9XG5cbiAgICBzYXZlSm9iUmVzdWx0KGpvYlJlc3VsdCkge1xuICAgICAgICB0aGlzLmpvYlJlc3VsdHMucHVzaChqb2JSZXN1bHQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpvYlJlc3VsdCk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRXhlY3V0aW9uQnlJZChpZCl7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoVXRpbHMuZmluZCh0aGlzLmpvYkV4ZWN1dGlvbnMsIGV4PT5leC5pZD09PWlkKSlcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHNhdmVkIGpvYkV4ZWN1dGlvbiovXG4gICAgc2F2ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb24pe1xuICAgICAgICB0aGlzLmpvYkV4ZWN1dGlvbnMucHVzaChqb2JFeGVjdXRpb24pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpvYkV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgdXBkYXRlSm9iRXhlY3V0aW9uUHJvZ3Jlc3Moam9iRXhlY3V0aW9uSWQsIHByb2dyZXNzKXtcbiAgICAgICAgdGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0gPSBwcm9ncmVzcztcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9ncmVzcylcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25Qcm9ncmVzcyhqb2JFeGVjdXRpb25JZCl7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0pXG4gICAgfVxuXG4gICAgc2F2ZUpvYkV4ZWN1dGlvbkZsYWcoam9iRXhlY3V0aW9uSWQsIGZsYWcpe1xuICAgICAgICB0aGlzLmV4ZWN1dGlvbkZsYWdzW2pvYkV4ZWN1dGlvbklkXSA9IGZsYWc7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmxhZylcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmV4ZWN1dGlvbkZsYWdzW2pvYkV4ZWN1dGlvbklkXSlcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBzYXZlZCBzdGVwRXhlY3V0aW9uKi9cbiAgICBzYXZlU3RlcEV4ZWN1dGlvbihzdGVwRXhlY3V0aW9uKXtcbiAgICAgICAgdGhpcy5zdGVwRXhlY3V0aW9ucy5wdXNoKHN0ZXBFeGVjdXRpb24pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHN0ZXBFeGVjdXRpb24pO1xuICAgIH1cblxuICAgIC8qZmluZCBqb2IgZXhlY3V0aW9ucyBzb3J0ZWQgYnkgY3JlYXRlVGltZSwgcmV0dXJucyBwcm9taXNlKi9cbiAgICBmaW5kSm9iRXhlY3V0aW9ucyhqb2JJbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuam9iRXhlY3V0aW9ucy5maWx0ZXIoZT0+ZS5qb2JJbnN0YW5jZS5pZCA9PSBqb2JJbnN0YW5jZS5pZCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuY3JlYXRlVGltZS5nZXRUaW1lKCkgLSBiLmNyZWF0ZVRpbWUuZ2V0VGltZSgpXG4gICAgICAgIH0pKTtcbiAgICB9XG5cblxufVxuIiwiaW1wb3J0IHtKb2JSZXBvc2l0b3J5fSBmcm9tIFwiLi9qb2ItcmVwb3NpdG9yeVwiO1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge1NpbXBsZUpvYlJlcG9zaXRvcnl9IGZyb20gXCIuL3NpbXBsZS1qb2ItcmVwb3NpdG9yeVwiO1xuXG5cblxuZXhwb3J0IGNsYXNzIFRpbWVvdXRKb2JSZXBvc2l0b3J5IGV4dGVuZHMgU2ltcGxlSm9iUmVwb3NpdG9yeXtcblxuICAgIGNyZWF0ZVRpbWVvdXRQcm9taXNlKHZhbHVlVG9SZXNvbHZlLCBkZWxheT0xKXtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmU9PntcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlVG9SZXNvbHZlKTtcbiAgICAgICAgICAgIH0sIGRlbGF5KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKnJldHVybnMgcHJvbWlzZSovXG4gICAgZ2V0Sm9iSW5zdGFuY2Uoam9iTmFtZSwgam9iUGFyYW1ldGVycykge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZSh0aGlzLmpvYkluc3RhbmNlc0J5S2V5W2tleV0pO1xuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gc2F2ZWQgaW5zdGFuY2UqL1xuICAgIHNhdmVKb2JJbnN0YW5jZShqb2JJbnN0YW5jZSwgam9iUGFyYW1ldGVycyl7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdlbmVyYXRlSm9iSW5zdGFuY2VLZXkoam9iSW5zdGFuY2Uuam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuam9iSW5zdGFuY2VzQnlLZXlba2V5XSA9IGpvYkluc3RhbmNlO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZShqb2JJbnN0YW5jZSk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUmVzdWx0KGpvYlJlc3VsdElkKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UoVXRpbHMuZmluZCh0aGlzLmpvYlJlc3VsdHMsIHI9PnIuaWQ9PT1qb2JSZXN1bHRJZCkpO1xuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2Upe1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZShVdGlscy5maW5kKHRoaXMuam9iUmVzdWx0cywgcj0+ci5qb2JJbnN0YW5jZS5pZD09PWpvYkluc3RhbmNlLmlkKSk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUmVzdWx0QnlFeGVjdXRpb24oam9iRXhlY3V0aW9uKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZShqb2JFeGVjdXRpb24uam9iSW5zdGFuY2UpO1xuICAgIH1cblxuICAgIHNhdmVKb2JSZXN1bHQoam9iUmVzdWx0KSB7XG4gICAgICAgIHRoaXMuam9iUmVzdWx0cy5wdXNoKGpvYlJlc3VsdCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKGpvYlJlc3VsdCk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRXhlY3V0aW9uQnlJZChpZCl7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKFV0aWxzLmZpbmQodGhpcy5qb2JFeGVjdXRpb25zLCBleD0+ZXguaWQ9PT1pZCkpO1xuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gc2F2ZWQgam9iRXhlY3V0aW9uKi9cbiAgICBzYXZlSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9ucy5wdXNoKGpvYkV4ZWN1dGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKGpvYkV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgdXBkYXRlSm9iRXhlY3V0aW9uUHJvZ3Jlc3Moam9iRXhlY3V0aW9uSWQsIHByb2dyZXNzKXtcbiAgICAgICAgdGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0gPSBwcm9ncmVzcztcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UocHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGdldEpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UodGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0pO1xuICAgIH1cblxuICAgIHNhdmVKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkLCBmbGFnKXtcbiAgICAgICAgdGhpcy5leGVjdXRpb25GbGFnc1tqb2JFeGVjdXRpb25JZF0gPSBmbGFnO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZShmbGFnKTtcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UodGhpcy5leGVjdXRpb25GbGFnc1tqb2JFeGVjdXRpb25JZF0pO1xuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHNhdmVkIHN0ZXBFeGVjdXRpb24qL1xuICAgIHNhdmVTdGVwRXhlY3V0aW9uKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICB0aGlzLnN0ZXBFeGVjdXRpb25zLnB1c2goc3RlcEV4ZWN1dGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKHN0ZXBFeGVjdXRpb24pO1xuICAgIH1cblxuICAgIC8qZmluZCBqb2IgZXhlY3V0aW9ucyBzb3J0ZWQgYnkgY3JlYXRlVGltZSwgcmV0dXJucyBwcm9taXNlKi9cbiAgICBmaW5kSm9iRXhlY3V0aW9ucyhqb2JJbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZSh0aGlzLmpvYkV4ZWN1dGlvbnMuZmlsdGVyKGU9PmUuam9iSW5zdGFuY2UuaWQgPT0gam9iSW5zdGFuY2UuaWQpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmNyZWF0ZVRpbWUuZ2V0VGltZSgpIC0gYi5jcmVhdGVUaW1lLmdldFRpbWUoKVxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlKG9iamVjdCl7IC8vVE9ET1xuXG4gICAgfVxufVxuIiwiaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1N0ZXBFeGVjdXRpb259IGZyb20gXCIuL3N0ZXAtZXhlY3V0aW9uXCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7Sm9iRXhlY3V0aW9ufSBmcm9tIFwiLi9qb2ItZXhlY3V0aW9uXCI7XG5cbi8qZG9tYWluIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhIGpvYiBpbnN0YW5jZS4qL1xuZXhwb3J0IGNsYXNzIEpvYlJlc3VsdCB7XG4gICAgaWQ7XG4gICAgam9iSW5zdGFuY2U7XG4gICAgbGFzdFVwZGF0ZWQgPSBudWxsO1xuXG4gICAgZGF0YTsgLy8gam9iIHJlc3VsdCBkYXRhIC0gdGhpcyBpcyBub3QgYSBkYXRhIG1vZGVsIVxuXG4gICAgY29uc3RydWN0b3Ioam9iSW5zdGFuY2UsIGlkLCBkYXRhKSB7XG4gICAgICAgIGlmKGlkPT09bnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBVdGlscy5ndWlkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5qb2JJbnN0YW5jZSA9IGpvYkluc3RhbmNlO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH1cblxuICAgIGdldERUTyhmaWx0ZXJlZFByb3BlcnRpZXM9W10sIGRlZXBDbG9uZSA9IHRydWUpe1xuXG4gICAgICAgIHZhciBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lRGVlcFdpdGg7XG4gICAgICAgIGlmKCFkZWVwQ2xvbmUpIHtcbiAgICAgICAgICAgIGNsb25lTWV0aG9kID0gVXRpbHMuY2xvbmVXaXRoO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGR0byA9IFV0aWxzLmFzc2lnbih7fSwgY2xvbmVNZXRob2QodGhpcywgKHZhbHVlLCBrZXksIG9iamVjdCwgc3RhY2spPT4ge1xuICAgICAgICAgICAgaWYoZmlsdGVyZWRQcm9wZXJ0aWVzLmluZGV4T2Yoa2V5KT4tMSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHZhbHVlICYmIHZhbHVlLiRPYmplY3RXaXRoSWRBbmRFZGl0YWJsZUZpZWxkcyAmJiB2YWx1ZS5pZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgJyRPYmplY3RXaXRoSWRBbmRFZGl0YWJsZUZpZWxkcyc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBFcnJvcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0aWxzLmdldEVycm9yRFRPKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiBkdG9cbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgSk9CX1NUQVRVUyA9IHtcbiAgICBDT01QTEVURUQ6ICdDT01QTEVURUQnLFxuICAgIFNUQVJUSU5HOiAnU1RBUlRJTkcnLFxuICAgIFNUQVJURUQ6ICdTVEFSVEVEJyxcbiAgICBTVE9QUElORzogJ1NUT1BQSU5HJyxcbiAgICBTVE9QUEVEOiAnU1RPUFBFRCcsXG4gICAgRkFJTEVEOiAnRkFJTEVEJyxcbiAgICBVTktOT1dOOiAnVU5LTk9XTicsXG4gICAgQUJBTkRPTkVEOiAnQUJBTkRPTkVEJyxcbiAgICBFWEVDVVRJTkc6ICdFWEVDVVRJTkcnIC8vZm9yIGV4aXQgc3RhdHVzIG9ubHlcbn07XG4iLCJpbXBvcnQge2xvZ30gZnJvbSAnc2QtdXRpbHMnXG5pbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7Sm9iSW50ZXJydXB0ZWRFeGNlcHRpb259IGZyb20gXCIuL2V4Y2VwdGlvbnMvam9iLWludGVycnVwdGVkLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzSW52YWxpZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItcGFyYW1ldGVycy1pbnZhbGlkLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKb2JEYXRhSW52YWxpZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItZGF0YS1pbnZhbGlkLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKT0JfRVhFQ1VUSU9OX0ZMQUd9IGZyb20gXCIuL2pvYi1leGVjdXRpb24tZmxhZ1wiO1xuaW1wb3J0IHtKb2JSZXN1bHR9IGZyb20gXCIuL2pvYi1yZXN1bHRcIjtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBqb2JzXG4gKiBBIEpvYiBpcyBhbiBlbnRpdHkgdGhhdCBlbmNhcHN1bGF0ZXMgYW4gZW50aXJlIGpvYiBwcm9jZXNzICggYW4gYWJzdHJhY3Rpb24gcmVwcmVzZW50aW5nIHRoZSBjb25maWd1cmF0aW9uIG9mIGEgam9iKVxuICogKi9cblxuZXhwb3J0IGNsYXNzIEpvYiB7XG5cbiAgICBpZDtcbiAgICBuYW1lO1xuICAgIHN0ZXBzID0gW107XG5cbiAgICBpc1Jlc3RhcnRhYmxlPXRydWU7XG4gICAgZXhlY3V0aW9uTGlzdGVuZXJzID0gW107XG4gICAgam9iUGFyYW1ldGVyc1ZhbGlkYXRvcjtcblxuICAgIGpvYlJlcG9zaXRvcnk7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuam9iUGFyYW1ldGVyc1ZhbGlkYXRvciA9IHRoaXMuZ2V0Sm9iUGFyYW1ldGVyc1ZhbGlkYXRvcigpO1xuICAgICAgICB0aGlzLmpvYkRhdGFWYWxpZGF0b3IgPSB0aGlzLmdldEpvYkRhdGFWYWxpZGF0b3IoKTtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciA9IGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciA9IG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcbiAgICB9XG5cbiAgICBzZXRKb2JSZXBvc2l0b3J5KGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICB9XG5cbiAgICBleGVjdXRlKGV4ZWN1dGlvbikge1xuICAgICAgICBsb2cuZGVidWcoXCJKb2IgZXhlY3V0aW9uIHN0YXJ0aW5nOiBcIiwgZXhlY3V0aW9uKTtcbiAgICAgICAgdmFyIGpvYlJlc3VsdDtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFeGVjdXRpb25GbGFncyhleGVjdXRpb24pLnRoZW4oZXhlY3V0aW9uPT57XG5cbiAgICAgICAgICAgIGlmIChleGVjdXRpb24uc3RhdHVzID09PSBKT0JfU1RBVFVTLlNUT1BQSU5HKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGpvYiB3YXMgYWxyZWFkeSBzdG9wcGVkXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uLnN0YXR1cyA9IEpPQl9TVEFUVVMuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuQ09NUExFVEVEO1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkpvYiBleGVjdXRpb24gd2FzIHN0b3BwZWQ6IFwiICsgZXhlY3V0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5qb2JQYXJhbWV0ZXJzVmFsaWRhdG9yICYmICF0aGlzLmpvYlBhcmFtZXRlcnNWYWxpZGF0b3IudmFsaWRhdGUoZXhlY3V0aW9uLmpvYlBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYlBhcmFtZXRlcnNJbnZhbGlkRXhjZXB0aW9uKFwiSW52YWxpZCBqb2IgcGFyYW1ldGVycyBpbiBqb2IgZXhlY3V0ZVwiKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLmpvYkRhdGFWYWxpZGF0b3IgJiYgIXRoaXMuam9iRGF0YVZhbGlkYXRvci52YWxpZGF0ZShleGVjdXRpb24uZ2V0RGF0YSgpKSl7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkRhdGFJbnZhbGlkRXhjZXB0aW9uKFwiSW52YWxpZCBqb2IgZGF0YSBpbiBqb2IgZXhlY3V0ZVwiKVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGV4ZWN1dGlvbi5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLnVwZGF0ZVN0YXR1cyhleGVjdXRpb24sIEpPQl9TVEFUVVMuU1RBUlRFRCksIHRoaXMuZ2V0UmVzdWx0KGV4ZWN1dGlvbiksIHRoaXMudXBkYXRlUHJvZ3Jlc3MoZXhlY3V0aW9uKV0pLnRoZW4ocmVzPT57XG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uPXJlc1swXTtcbiAgICAgICAgICAgICAgICBqb2JSZXN1bHQgPSByZXNbMV07XG4gICAgICAgICAgICAgICAgaWYoIWpvYlJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBqb2JSZXN1bHQgPSBuZXcgSm9iUmVzdWx0KGV4ZWN1dGlvbi5qb2JJbnN0YW5jZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25MaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lcj0+bGlzdGVuZXIuYmVmb3JlSm9iKGV4ZWN1dGlvbikpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9FeGVjdXRlKGV4ZWN1dGlvbiwgam9iUmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pLnRoZW4oZXhlY3V0aW9uPT57XG4gICAgICAgICAgICBsb2cuZGVidWcoXCJKb2IgZXhlY3V0aW9uIGNvbXBsZXRlOiBcIixleGVjdXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGlvblxuICAgICAgICB9KS5jYXRjaChlPT57XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEpvYkludGVycnVwdGVkRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgbG9nLmluZm8oXCJFbmNvdW50ZXJlZCBpbnRlcnJ1cHRpb24gZXhlY3V0aW5nIGpvYlwiLCBlKTtcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uc3RhdHVzID0gSk9CX1NUQVRVUy5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5leGl0U3RhdHVzID0gSk9CX1NUQVRVUy5TVE9QUEVEO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJFbmNvdW50ZXJlZCBmYXRhbCBlcnJvciBleGVjdXRpbmcgam9iXCIsIGUpO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkZBSUxFRDtcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhlY3V0aW9uLmZhaWx1cmVFeGNlcHRpb25zLnB1c2goZSk7XG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uO1xuICAgICAgICB9KS50aGVuKGV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgaWYoam9iUmVzdWx0KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnNhdmVKb2JSZXN1bHQoam9iUmVzdWx0KS50aGVuKCgpPT5leGVjdXRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uXG4gICAgICAgIH0pLmNhdGNoKGU9PntcbiAgICAgICAgICAgIGxvZy5lcnJvcihcIkVuY291bnRlcmVkIGZhdGFsIGVycm9yIHNhdmluZyBqb2IgcmVzdWx0c1wiLCBlKTtcbiAgICAgICAgICAgIGlmKGUpe1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5mYWlsdXJlRXhjZXB0aW9ucy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhlY3V0aW9uLnN0YXR1cyA9IEpPQl9TVEFUVVMuRkFJTEVEO1xuICAgICAgICAgICAgZXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkZBSUxFRDtcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRpb247XG4gICAgICAgIH0pLnRoZW4oZXhlY3V0aW9uPT57XG4gICAgICAgICAgICBleGVjdXRpb24uZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuam9iUmVwb3NpdG9yeS51cGRhdGUoZXhlY3V0aW9uKSwgdGhpcy51cGRhdGVQcm9ncmVzcyhleGVjdXRpb24pXSkudGhlbihyZXM9PnJlc1swXSlcbiAgICAgICAgfSkudGhlbihleGVjdXRpb249PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25MaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lcj0+bGlzdGVuZXIuYWZ0ZXJKb2IoZXhlY3V0aW9uKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKFwiRXhjZXB0aW9uIGVuY291bnRlcmVkIGluIGFmdGVyU3RlcCBjYWxsYmFja1wiLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBleGVjdXRpb247XG4gICAgICAgIH0pXG4gICAgfVxuXG5cbiAgICB1cGRhdGVTdGF0dXMoam9iRXhlY3V0aW9uLCBzdGF0dXMpIHtcbiAgICAgICAgam9iRXhlY3V0aW9uLnN0YXR1cz1zdGF0dXM7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkudXBkYXRlKGpvYkV4ZWN1dGlvbilcbiAgICB9XG5cbiAgICB1cGRhdGVQcm9ncmVzcyhqb2JFeGVjdXRpb24pe1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnVwZGF0ZUpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbi5pZCwgdGhpcy5nZXRQcm9ncmVzcyhqb2JFeGVjdXRpb24pKTtcbiAgICB9XG5cbiAgICAvKiBFeHRlbnNpb24gcG9pbnQgZm9yIHN1YmNsYXNzZXMgYWxsb3dpbmcgdGhlbSB0byBjb25jZW50cmF0ZSBvbiBwcm9jZXNzaW5nIGxvZ2ljIGFuZCBpZ25vcmUgbGlzdGVuZXJzLCByZXR1cm5zIHByb21pc2UqL1xuICAgIGRvRXhlY3V0ZShleGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB0aHJvdyAnZG9FeGVjdXRlIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igam9iOiAnICsgdGhpcy5uYW1lXG4gICAgfVxuXG4gICAgZ2V0Sm9iUGFyYW1ldGVyc1ZhbGlkYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkYXRlOiAocGFyYW1zKSA9PiBwYXJhbXMudmFsaWRhdGUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Sm9iRGF0YVZhbGlkYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkU3RlcChzdGVwKXtcbiAgICAgICAgdGhpcy5zdGVwcy5wdXNoKHN0ZXApO1xuICAgIH1cblxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpe1xuICAgICAgICB0aHJvdyAnY3JlYXRlSm9iUGFyYW1ldGVycyBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIGpvYjogJyArIHRoaXMubmFtZVxuICAgIH1cblxuICAgIC8qU2hvdWxkIHJldHVybiBwcm9ncmVzcyBvYmplY3Qgd2l0aCBmaWVsZHM6XG4gICAgKiBjdXJyZW50XG4gICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKGV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgIGN1cnJlbnQ6IGV4ZWN1dGlvbi5zdGF0dXMgPT09IEpPQl9TVEFUVVMuQ09NUExFVEVEID8gMSA6IDBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlZ2lzdGVyRXhlY3V0aW9uTGlzdGVuZXIobGlzdGVuZXIpe1xuICAgICAgICB0aGlzLmV4ZWN1dGlvbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBjaGVja0V4ZWN1dGlvbkZsYWdzKGV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iRXhlY3V0aW9uRmxhZyhleGVjdXRpb24uaWQpLnRoZW4oZmxhZz0+e1xuICAgICAgICAgICAgaWYoSk9CX0VYRUNVVElPTl9GTEFHLlNUT1AgPT09IGZsYWcpe1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0UmVzdWx0KGV4ZWN1dGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldEpvYlJlc3VsdEJ5RXhlY3V0aW9uKGV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgLyogcmV2aXZlIGpvYiByZXN1bHQgZGF0YSAoYWZ0ZXIgY29udmVyc2lvbiB0byBkdG8pIGlmIG5lZWRlZCovXG4gICAgcmV2aXZlUmVzdWx0RGF0YShkYXRhLCBleGVjdXRpb25Db250ZXh0KSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGpvYlJlc3VsdFRvQ3N2Um93cyhqb2JSZXN1bHQsIGpvYlBhcmFtZXRlcnMpe1xuICAgICAgICB0aHJvdyAnam9iUmVzdWx0VG9Dc3ZSb3dzIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igam9iOiAnICsgdGhpcy5uYW1lXG4gICAgfVxufVxuIiwiaW1wb3J0IHtsb2d9IGZyb20gJ3NkLXV0aWxzJ1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge0pvYn0gZnJvbSBcIi4vam9iXCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7U3RlcH0gZnJvbSBcIi4vc3RlcFwiO1xuaW1wb3J0IHtKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItaW50ZXJydXB0ZWQtZXhjZXB0aW9uXCI7XG5pbXBvcnQge0pvYlJlc3RhcnRFeGNlcHRpb259IGZyb20gXCIuL2V4Y2VwdGlvbnMvam9iLXJlc3RhcnQtZXhjZXB0aW9uXCI7XG5pbXBvcnQge0pPQl9FWEVDVVRJT05fRkxBR30gZnJvbSBcIi4vam9iLWV4ZWN1dGlvbi1mbGFnXCI7XG5cbi8qIFNpbXBsZSBKb2IgdGhhdCBzZXF1ZW50aWFsbHkgZXhlY3V0ZXMgYSBqb2IgYnkgaXRlcmF0aW5nIHRocm91Z2ggaXRzIGxpc3Qgb2Ygc3RlcHMuICBBbnkgU3RlcCB0aGF0IGZhaWxzIHdpbGwgZmFpbCB0aGUgam9iLiAgVGhlIGpvYiBpc1xuIGNvbnNpZGVyZWQgY29tcGxldGUgd2hlbiBhbGwgc3RlcHMgaGF2ZSBiZWVuIGV4ZWN1dGVkLiovXG5cbmV4cG9ydCBjbGFzcyBTaW1wbGVKb2IgZXh0ZW5kcyBKb2Ige1xuXG4gICAgY29uc3RydWN0b3IobmFtZSwgam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikge1xuICAgICAgICBzdXBlcihuYW1lLCBqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKVxuICAgIH1cblxuICAgIGdldFN0ZXAoc3RlcE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIFV0aWxzLmZpbmQodGhpcy5zdGVwcywgcz0+cy5uYW1lID09IHN0ZXBOYW1lKTtcbiAgICB9XG5cbiAgICBkb0V4ZWN1dGUoZXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVOZXh0U3RlcChleGVjdXRpb24sIGpvYlJlc3VsdCkudGhlbihsYXN0RXhlY3V0ZWRTdGVwRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBpZiAobGFzdEV4ZWN1dGVkU3RlcEV4ZWN1dGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiVXBkYXRpbmcgSm9iRXhlY3V0aW9uIHN0YXR1czogXCIsIGxhc3RFeGVjdXRlZFN0ZXBFeGVjdXRpb24pO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5zdGF0dXMgPSBsYXN0RXhlY3V0ZWRTdGVwRXhlY3V0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZXhpdFN0YXR1cyA9IGxhc3RFeGVjdXRlZFN0ZXBFeGVjdXRpb24uZXhpdFN0YXR1cztcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZmFpbHVyZUV4Y2VwdGlvbnMucHVzaCguLi5sYXN0RXhlY3V0ZWRTdGVwRXhlY3V0aW9uLmZhaWx1cmVFeGNlcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGlvbjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlTmV4dFN0ZXAoam9iRXhlY3V0aW9uLCBqb2JSZXN1bHQsIHByZXZTdGVwPW51bGwsIHByZXZTdGVwRXhlY3V0aW9uPW51bGwpe1xuICAgICAgICB2YXIgc3RlcEluZGV4ID0gMDtcbiAgICAgICAgaWYocHJldlN0ZXApe1xuICAgICAgICAgICAgc3RlcEluZGV4ID0gdGhpcy5zdGVwcy5pbmRleE9mKHByZXZTdGVwKSsxO1xuICAgICAgICB9XG4gICAgICAgIGlmKHN0ZXBJbmRleD49dGhpcy5zdGVwcy5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcmV2U3RlcEV4ZWN1dGlvbilcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RlcCA9IHRoaXMuc3RlcHNbc3RlcEluZGV4XTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3RlcChzdGVwLCBqb2JFeGVjdXRpb24sIGpvYlJlc3VsdCkudGhlbihzdGVwRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBpZihzdGVwRXhlY3V0aW9uLnN0YXR1cyAhPT0gSk9CX1NUQVRVUy5DT01QTEVURUQpeyAvLyBUZXJtaW5hdGUgdGhlIGpvYiBpZiBhIHN0ZXAgZmFpbHNcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZU5leHRTdGVwKGpvYkV4ZWN1dGlvbiwgam9iUmVzdWx0LCBzdGVwLCBzdGVwRXhlY3V0aW9uKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBoYW5kbGVTdGVwKHN0ZXAsIGpvYkV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIHZhciBqb2JJbnN0YW5jZSA9IGpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFeGVjdXRpb25GbGFncyhqb2JFeGVjdXRpb24pLnRoZW4oam9iRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBpZiAoam9iRXhlY3V0aW9uLmlzU3RvcHBpbmcoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbihcIkpvYkV4ZWN1dGlvbiBpbnRlcnJ1cHRlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldExhc3RTdGVwRXhlY3V0aW9uKGpvYkluc3RhbmNlLCBzdGVwLm5hbWUpXG5cbiAgICAgICAgfSkudGhlbihsYXN0U3RlcEV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RlcEV4ZWN1dGlvblBhcnRPZkV4aXN0aW5nSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbiwgbGFzdFN0ZXBFeGVjdXRpb24pKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGxhc3QgZXhlY3V0aW9uIG9mIHRoaXMgc3RlcCB3YXMgaW4gdGhlIHNhbWUgam9iLCBpdCdzIHByb2JhYmx5IGludGVudGlvbmFsIHNvIHdlIHdhbnQgdG8gcnVuIGl0IGFnYWluLlxuICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwiRHVwbGljYXRlIHN0ZXAgZGV0ZWN0ZWQgaW4gZXhlY3V0aW9uIG9mIGpvYi4gc3RlcDogXCIgKyBzdGVwLm5hbWUgKyBcIiBqb2JOYW1lOiBcIiwgam9iSW5zdGFuY2Uuam9iTmFtZSk7XG4gICAgICAgICAgICAgICAgbGFzdFN0ZXBFeGVjdXRpb24gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY3VycmVudFN0ZXBFeGVjdXRpb24gPSBsYXN0U3RlcEV4ZWN1dGlvbjtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3VsZFN0YXJ0KGN1cnJlbnRTdGVwRXhlY3V0aW9uLCBqb2JFeGVjdXRpb24sIHN0ZXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGVwRXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbiA9IGpvYkV4ZWN1dGlvbi5jcmVhdGVTdGVwRXhlY3V0aW9uKHN0ZXAubmFtZSk7XG5cbiAgICAgICAgICAgIHZhciBpc0NvbXBsZXRlZCA9IGxhc3RTdGVwRXhlY3V0aW9uICE9IG51bGwgJiYgbGFzdFN0ZXBFeGVjdXRpb24uc3RhdHVzID09PSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgIHZhciBpc1Jlc3RhcnQgPSBsYXN0U3RlcEV4ZWN1dGlvbiAhPSBudWxsICYmICFpc0NvbXBsZXRlZDtcbiAgICAgICAgICAgIHZhciBza2lwRXhlY3V0aW9uID0gaXNDb21wbGV0ZWQgJiYgc3RlcC5za2lwT25SZXN0YXJ0SWZDb21wbGV0ZWQ7XG5cbiAgICAgICAgICAgIGlmIChpc1Jlc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0ID0gbGFzdFN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdFN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dC5jb250YWluc0tleShcImV4ZWN1dGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucmVtb3ZlKFwiZXhlY3V0ZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0ID0gbmV3IEV4ZWN1dGlvbkNvbnRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHNraXBFeGVjdXRpb24pe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChcInNraXBwZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuYWRkU3RlcEV4ZWN1dGlvbihjdXJyZW50U3RlcEV4ZWN1dGlvbikudGhlbigoX2N1cnJlbnRTdGVwRXhlY3V0aW9uKT0+e1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uPV9jdXJyZW50U3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgICAgICAgICBpZihza2lwRXhlY3V0aW9uKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oXCJTa2lwcGluZyBjb21wbGV0ZWQgc3RlcCBleGVjdXRpb246IFtcIiArIHN0ZXAubmFtZSArIFwiXVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGVwRXhlY3V0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2cuaW5mbyhcIkV4ZWN1dGluZyBzdGVwOiBbXCIgKyBzdGVwLm5hbWUgKyBcIl1cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0ZXAuZXhlY3V0ZShjdXJyZW50U3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KVxuICAgICAgICAgICAgfSkudGhlbigoKT0+e1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucHV0KFwiZXhlY3V0ZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGVwRXhlY3V0aW9uO1xuICAgICAgICAgICAgfSkuY2F0Y2ggKGUgPT4ge1xuICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkZBSUxFRDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnVwZGF0ZShqb2JFeGVjdXRpb24pLnRoZW4oam9iRXhlY3V0aW9uPT57dGhyb3cgZX0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KS50aGVuKChjdXJyZW50U3RlcEV4ZWN1dGlvbik9PntcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RlcEV4ZWN1dGlvbi5zdGF0dXMgPT0gSk9CX1NUQVRVUy5TVE9QUElOR1xuICAgICAgICAgICAgICAgIHx8IGN1cnJlbnRTdGVwRXhlY3V0aW9uLnN0YXR1cyA9PSBKT0JfU1RBVFVTLlNUT1BQRUQpIHtcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgam9iIGdldHMgdGhlIG1lc3NhZ2UgdGhhdCBpdCBpcyBzdG9wcGluZ1xuICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLlNUT1BQSU5HO1xuICAgICAgICAgICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIkpvYiBpbnRlcnJ1cHRlZCBieSBzdGVwIGV4ZWN1dGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVByb2dyZXNzKGpvYkV4ZWN1dGlvbikudGhlbigoKT0+Y3VycmVudFN0ZXBFeGVjdXRpb24pO1xuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgc3RlcEV4ZWN1dGlvblBhcnRPZkV4aXN0aW5nSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbiwgc3RlcEV4ZWN1dGlvbikge1xuICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbiAhPSBudWxsICYmIHN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uLmlkID09IGpvYkV4ZWN1dGlvbi5pZFxuICAgIH1cblxuICAgIHNob3VsZFN0YXJ0KGxhc3RTdGVwRXhlY3V0aW9uLCBleGVjdXRpb24sIHN0ZXApIHtcbiAgICAgICAgdmFyIHN0ZXBTdGF0dXM7XG4gICAgICAgIGlmIChsYXN0U3RlcEV4ZWN1dGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBzdGVwU3RhdHVzID0gSk9CX1NUQVRVUy5TVEFSVElORztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0ZXBTdGF0dXMgPSBsYXN0U3RlcEV4ZWN1dGlvbi5zdGF0dXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RlcFN0YXR1cyA9PSBKT0JfU1RBVFVTLlVOS05PV04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKb2JSZXN0YXJ0RXhjZXB0aW9uKFwiQ2Fubm90IHJlc3RhcnQgc3RlcCBmcm9tIFVOS05PV04gc3RhdHVzXCIpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3RlcFN0YXR1cyAhPSBKT0JfU1RBVFVTLkNPTVBMRVRFRCB8fCBzdGVwLmlzUmVzdGFydGFibGU7XG4gICAgfVxuXG4gICAgZ2V0UHJvZ3Jlc3MoZXhlY3V0aW9uKXtcbiAgICAgICAgdmFyIGNvbXBsZXRlZFN0ZXBzID0gZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmxlbmd0aDtcbiAgICAgICAgbGV0IHByb2dyZXNzID0ge1xuICAgICAgICAgICAgdG90YWw6IHRoaXMuc3RlcHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudDogY29tcGxldGVkU3RlcHNcbiAgICAgICAgfTtcbiAgICAgICAgaWYoIWNvbXBsZXRlZFN0ZXBzKXtcbiAgICAgICAgICAgIHJldHVybiBwcm9ncmVzc1xuICAgICAgICB9XG4gICAgICAgIGlmKEpPQl9TVEFUVVMuQ09NUExFVEVEICE9PSBleGVjdXRpb24uc3RlcEV4ZWN1dGlvbnNbZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmxlbmd0aC0xXS5zdGF0dXMpe1xuICAgICAgICAgICAgcHJvZ3Jlc3MuY3VycmVudC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgIH1cblxuICAgIGFkZFN0ZXAoKXtcbiAgICAgICAgaWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmFkZFN0ZXAoYXJndW1lbnRzWzBdKVxuICAgICAgICB9XG4gICAgICAgIHZhciBzdGVwID0gbmV3IFN0ZXAoYXJndW1lbnRzWzBdLCB0aGlzLmpvYlJlcG9zaXRvcnkpO1xuICAgICAgICBzdGVwLmRvRXhlY3V0ZSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmFkZFN0ZXAoc3RlcCk7XG4gICAgfVxuXG59XG4iLCJleHBvcnQgY2xhc3MgU3RlcEV4ZWN1dGlvbkxpc3RlbmVyIHtcbiAgICAvKkNhbGxlZCBiZWZvcmUgYSBzdGVwIGV4ZWN1dGVzKi9cbiAgICBiZWZvcmVTdGVwKGpvYkV4ZWN1dGlvbikge1xuXG4gICAgfVxuXG4gICAgLypDYWxsZWQgYWZ0ZXIgY29tcGxldGlvbiBvZiBhIHN0ZXAuIENhbGxlZCBhZnRlciBib3RoIHN1Y2Nlc3NmdWwgYW5kIGZhaWxlZCBleGVjdXRpb25zKi9cbiAgICBhZnRlclN0ZXAoam9iRXhlY3V0aW9uKSB7XG5cbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4vam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtKb2JFeGVjdXRpb259IGZyb20gXCIuL2pvYi1leGVjdXRpb25cIjtcblxuLypcbiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZXhlY3V0aW9uIG9mIGEgc3RlcFxuICovXG5leHBvcnQgY2xhc3MgU3RlcEV4ZWN1dGlvbiB7XG4gICAgaWQ7XG4gICAgc3RlcE5hbWU7XG4gICAgam9iRXhlY3V0aW9uO1xuXG4gICAgc3RhdHVzID0gSk9CX1NUQVRVUy5TVEFSVElORztcbiAgICBleGl0U3RhdHVzID0gSk9CX1NUQVRVUy5FWEVDVVRJTkc7XG4gICAgZXhlY3V0aW9uQ29udGV4dCA9IG5ldyBFeGVjdXRpb25Db250ZXh0KCk7IC8vZXhlY3V0aW9uIGNvbnRleHQgZm9yIHNpbmdsZSBzdGVwIGxldmVsLFxuXG4gICAgc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcbiAgICBlbmRUaW1lID0gbnVsbDtcbiAgICBsYXN0VXBkYXRlZCA9IG51bGw7XG5cbiAgICB0ZXJtaW5hdGVPbmx5ID0gZmFsc2U7IC8vZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGFuIGV4ZWN1dGlvbiBzaG91bGQgaGFsdFxuICAgIGZhaWx1cmVFeGNlcHRpb25zID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihzdGVwTmFtZSwgam9iRXhlY3V0aW9uLCBpZCkge1xuICAgICAgICBpZihpZD09PW51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICB0aGlzLmlkID0gVXRpbHMuZ3VpZCgpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RlcE5hbWUgPSBzdGVwTmFtZTtcbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb24gPSBqb2JFeGVjdXRpb247XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9uSWQgPSBqb2JFeGVjdXRpb24uaWQ7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUGFyYW1ldGVycygpe1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb24uam9iUGFyYW1ldGVycztcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25Db250ZXh0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0O1xuICAgIH1cblxuICAgIGdldERhdGEoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iRXhlY3V0aW9uLmdldERhdGEoKTtcbiAgICB9XG5cbiAgICBnZXREVE8oZmlsdGVyZWRQcm9wZXJ0aWVzPVtdLCBkZWVwQ2xvbmUgPSB0cnVlKXtcblxuICAgICAgICB2YXIgY2xvbmVNZXRob2QgPSBVdGlscy5jbG9uZURlZXBXaXRoO1xuICAgICAgICBpZighZGVlcENsb25lKSB7XG4gICAgICAgICAgICBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lV2l0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBVdGlscy5hc3NpZ24oe30sIGNsb25lTWV0aG9kKHRoaXMsICh2YWx1ZSwga2V5LCBvYmplY3QsIHN0YWNrKT0+IHtcbiAgICAgICAgICAgIGlmKGZpbHRlcmVkUHJvcGVydGllcy5pbmRleE9mKGtleSk+LTEpe1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoW1wiZXhlY3V0aW9uQ29udGV4dFwiXS5pbmRleE9mKGtleSk+LTEpe1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5nZXREVE8oKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBFcnJvcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0aWxzLmdldEVycm9yRFRPKHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSm9iRXhlY3V0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmdldERUTyhbXCJzdGVwRXhlY3V0aW9uc1wiXSwgZGVlcENsb25lKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICB9XG59XG4iLCJpbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7bG9nfSBmcm9tICdzZC11dGlscydcblxuaW1wb3J0IHtKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItaW50ZXJydXB0ZWQtZXhjZXB0aW9uXCI7XG4vKmRvbWFpbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjb25maWd1cmF0aW9uIG9mIGEgam9iIHN0ZXAqL1xuZXhwb3J0IGNsYXNzIFN0ZXAge1xuXG4gICAgaWQ7XG4gICAgbmFtZTtcbiAgICBpc1Jlc3RhcnRhYmxlID0gdHJ1ZTtcbiAgICBza2lwT25SZXN0YXJ0SWZDb21wbGV0ZWQ9dHJ1ZTtcbiAgICBzdGVwcyA9IFtdO1xuICAgIGV4ZWN1dGlvbkxpc3RlbmVycyA9IFtdO1xuXG4gICAgam9iUmVwb3NpdG9yeTtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICB9XG5cbiAgICBzZXRKb2JSZXBvc2l0b3J5KGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICB9XG5cbiAgICAvKlByb2Nlc3MgdGhlIHN0ZXAgYW5kIGFzc2lnbiBwcm9ncmVzcyBhbmQgc3RhdHVzIG1ldGEgaW5mb3JtYXRpb24gdG8gdGhlIFN0ZXBFeGVjdXRpb24gcHJvdmlkZWQqL1xuICAgIGV4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcIkV4ZWN1dGluZyBzdGVwOiBuYW1lPVwiICsgdGhpcy5uYW1lKTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBzdGVwRXhlY3V0aW9uLnN0YXR1cyA9IEpPQl9TVEFUVVMuU1RBUlRFRDtcbiAgICAgICAgdmFyIGV4aXRTdGF0dXM7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkudXBkYXRlKHN0ZXBFeGVjdXRpb24pLnRoZW4oc3RlcEV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuRVhFQ1VUSU5HO1xuXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGlvbkxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyPT5saXN0ZW5lci5iZWZvcmVTdGVwKHN0ZXBFeGVjdXRpb24pKTtcbiAgICAgICAgICAgIHRoaXMub3BlbihzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb0V4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KVxuICAgICAgICB9KS50aGVuKF9zdGVwRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBzdGVwRXhlY3V0aW9uID0gX3N0ZXBFeGVjdXRpb247XG4gICAgICAgICAgICBleGl0U3RhdHVzID0gc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzb21lb25lIGlzIHRyeWluZyB0byBzdG9wIHVzXG4gICAgICAgICAgICBpZiAoc3RlcEV4ZWN1dGlvbi50ZXJtaW5hdGVPbmx5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkludGVycnVwdGVkRXhjZXB0aW9uKFwiSm9iRXhlY3V0aW9uIGludGVycnVwdGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5lZWQgdG8gdXBncmFkZSBoZXJlIG5vdCBzZXQsIGluIGNhc2UgdGhlIGV4ZWN1dGlvbiB3YXMgc3RvcHBlZFxuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlN0ZXAgZXhlY3V0aW9uIHN1Y2Nlc3M6IG5hbWU9XCIgKyB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb25cbiAgICAgICAgfSkuY2F0Y2goZT0+e1xuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5zdGF0dXMgPSB0aGlzLmRldGVybWluZUpvYlN0YXR1cyhlKTtcbiAgICAgICAgICAgIGV4aXRTdGF0dXMgPSBzdGVwRXhlY3V0aW9uLnN0YXR1cztcbiAgICAgICAgICAgIHN0ZXBFeGVjdXRpb24uZmFpbHVyZUV4Y2VwdGlvbnMucHVzaChlKTtcblxuICAgICAgICAgICAgaWYgKHN0ZXBFeGVjdXRpb24uc3RhdHVzID09IEpPQl9TVEFUVVMuU1RPUFBFRCkge1xuICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwiRW5jb3VudGVyZWQgaW50ZXJydXB0aW9uIGV4ZWN1dGluZyBzdGVwOiBcIiArIHRoaXMubmFtZSArIFwiIGluIGpvYjogXCIgKyBzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5qb2JOYW1lLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkVuY291bnRlcmVkIGFuIGVycm9yIGV4ZWN1dGluZyBzdGVwOiBcIiArIHRoaXMubmFtZSArIFwiIGluIGpvYjogXCIgKyBzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5qb2JOYW1lLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgICAgICB9KS50aGVuKHN0ZXBFeGVjdXRpb249PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzID0gZXhpdFN0YXR1cztcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGlvbkxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyPT5saXN0ZW5lci5hZnRlclN0ZXAoc3RlcEV4ZWN1dGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJFeGNlcHRpb24gaW4gYWZ0ZXJTdGVwIGNhbGxiYWNrIGluIHN0ZXAgXCIgKyB0aGlzLm5hbWUgKyBcIiBpbiBqb2I6IFwiICsgc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSwgZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0ZXBFeGVjdXRpb24uZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBzdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBleGl0U3RhdHVzO1xuXG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkudXBkYXRlKHN0ZXBFeGVjdXRpb24pXG4gICAgICAgIH0pLnRoZW4oc3RlcEV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKHN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkV4Y2VwdGlvbiB3aGlsZSBjbG9zaW5nIHN0ZXAgZXhlY3V0aW9uIHJlc291cmNlcyBpbiBzdGVwOiBcIiArIHRoaXMubmFtZSArIFwiIGluIGpvYjogXCIgKyBzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5qb2JOYW1lLCBlKTtcbiAgICAgICAgICAgICAgICBzdGVwRXhlY3V0aW9uLmZhaWx1cmVFeGNlcHRpb25zLnB1c2goZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZShzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJFeGNlcHRpb24gd2hpbGUgY2xvc2luZyBzdGVwIGV4ZWN1dGlvbiByZXNvdXJjZXMgaW4gc3RlcDogXCIgKyB0aGlzLm5hbWUgKyBcIiBpbiBqb2I6IFwiICsgc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSwgZSk7XG4gICAgICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5mYWlsdXJlRXhjZXB0aW9ucy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkb0V4ZWN1dGlvblJlbGVhc2UoKTtcblxuICAgICAgICAgICAgbG9nLmRlYnVnKFwiU3RlcCBleGVjdXRpb24gY29tcGxldGU6IFwiICsgc3RlcEV4ZWN1dGlvbi5pZCk7XG4gICAgICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBkZXRlcm1pbmVKb2JTdGF0dXMoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEpvYkludGVycnVwdGVkRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gSk9CX1NUQVRVUy5TVE9QUEVEO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEpPQl9TVEFUVVMuRkFJTEVEO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIGV4ZWN1dGUgYnVzaW5lc3MgbG9naWMuIFN1YmNsYXNzZXMgc2hvdWxkIHNldCB0aGUgZXhpdFN0YXR1cyBvbiB0aGVcbiAgICAgKiBTdGVwRXhlY3V0aW9uIGJlZm9yZSByZXR1cm5pbmcuIE11c3QgcmV0dXJuIHN0ZXBFeGVjdXRpb25cbiAgICAgKi9cbiAgICBkb0V4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIHByb3ZpZGUgY2FsbGJhY2tzIHRvIHRoZWlyIGNvbGxhYm9yYXRvcnMgYXQgdGhlIGJlZ2lubmluZyBvZiBhIHN0ZXAsIHRvIG9wZW4gb3JcbiAgICAgKiBhY3F1aXJlIHJlc291cmNlcy4gRG9lcyBub3RoaW5nIGJ5IGRlZmF1bHQuXG4gICAgICovXG4gICAgb3BlbihleGVjdXRpb25Db250ZXh0KSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIHByb3ZpZGUgY2FsbGJhY2tzIHRvIHRoZWlyIGNvbGxhYm9yYXRvcnMgYXQgdGhlIGVuZCBvZiBhIHN0ZXAgKHJpZ2h0IGF0IHRoZSBlbmRcbiAgICAgKiBvZiB0aGUgZmluYWxseSBibG9jayksIHRvIGNsb3NlIG9yIHJlbGVhc2UgcmVzb3VyY2VzLiBEb2VzIG5vdGhpbmcgYnkgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBjbG9zZShleGVjdXRpb25Db250ZXh0KSB7XG4gICAgfVxuXG5cbiAgICAvKlNob3VsZCByZXR1cm4gcHJvZ3Jlc3Mgb2JqZWN0IHdpdGggZmllbGRzOlxuICAgICAqIGN1cnJlbnRcbiAgICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG90YWw6IDEsXG4gICAgICAgICAgICBjdXJyZW50OiBzdGVwRXhlY3V0aW9uLnN0YXR1cyA9PT0gSk9CX1NUQVRVUy5DT01QTEVURUQgPyAxIDogMFxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgZW5naW5lIGZyb20gJy4vZW5naW5lL2luZGV4J1xuXG5leHBvcnQge2VuZ2luZX1cbmV4cG9ydCAqIGZyb20gJy4vam9icy1tYW5hZ2VyJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2Itd29ya2VyJ1xuXG5cblxuIiwiaW1wb3J0IHtKb2JFeGVjdXRpb25MaXN0ZW5lcn0gZnJvbSBcIi4vZW5naW5lL2pvYi1leGVjdXRpb24tbGlzdGVuZXJcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4vZW5naW5lL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2V9IGZyb20gXCIuL2VuZ2luZS9qb2ItaW5zdGFuY2VcIjtcbmltcG9ydCB7VXRpbHMsIGxvZ30gZnJvbSBcInNkLXV0aWxzXCI7XG5cblxuZXhwb3J0IGNsYXNzIEpvYkluc3RhbmNlTWFuYWdlckNvbmZpZyB7XG4gICAgb25Kb2JTdGFydGVkID0gKCkgPT4ge307XG4gICAgb25Kb2JDb21wbGV0ZWQgPSByZXN1bHQgPT4ge307XG4gICAgb25Kb2JGYWlsZWQgPSBlcnJvcnMgPT4ge307XG4gICAgb25Kb2JTdG9wcGVkID0gKCkgPT4ge307XG4gICAgb25Kb2JUZXJtaW5hdGVkID0gKCkgPT4ge307XG4gICAgb25Qcm9ncmVzcyA9IChwcm9ncmVzcykgPT4ge307XG4gICAgY2FsbGJhY2tzVGhpc0FyZztcbiAgICB1cGRhdGVJbnRlcnZhbCA9IDEwMDtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbSkge1xuICAgICAgICBpZiAoY3VzdG9tKSB7XG4gICAgICAgICAgICBVdGlscy5kZWVwRXh0ZW5kKHRoaXMsIGN1c3RvbSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qY29udmVuaWVuY2UgY2xhc3MgZm9yIG1hbmFnaW5nIGFuZCB0cmFja2luZyBqb2IgaW5zdGFuY2UgcHJvZ3Jlc3MqL1xuZXhwb3J0IGNsYXNzIEpvYkluc3RhbmNlTWFuYWdlciBleHRlbmRzIEpvYkV4ZWN1dGlvbkxpc3RlbmVyIHtcblxuICAgIGpvYnNNYW5nZXI7XG4gICAgam9iSW5zdGFuY2U7XG4gICAgY29uZmlnO1xuXG4gICAgbGFzdEpvYkV4ZWN1dGlvbjtcbiAgICBsYXN0VXBkYXRlVGltZTtcbiAgICBwcm9ncmVzcyA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcihqb2JzTWFuZ2VyLCBqb2JJbnN0YW5jZU9yRXhlY3V0aW9uLCBjb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgSm9iSW5zdGFuY2VNYW5hZ2VyQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuam9ic01hbmdlciA9IGpvYnNNYW5nZXI7XG4gICAgICAgIGlmIChqb2JJbnN0YW5jZU9yRXhlY3V0aW9uIGluc3RhbmNlb2YgSm9iSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMuam9iSW5zdGFuY2UgPSBqb2JJbnN0YW5jZU9yRXhlY3V0aW9uO1xuICAgICAgICAgICAgdGhpcy5nZXRMYXN0Sm9iRXhlY3V0aW9uKCkudGhlbihqZT0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RKb2JFeGVjdXRpb24gPSBqb2JJbnN0YW5jZU9yRXhlY3V0aW9uO1xuICAgICAgICAgICAgdGhpcy5qb2JJbnN0YW5jZSA9IHRoaXMubGFzdEpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tQcm9ncmVzcygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxhc3RKb2JFeGVjdXRpb24gJiYgIXRoaXMubGFzdEpvYkV4ZWN1dGlvbi5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5hZnRlckpvYih0aGlzLmxhc3RKb2JFeGVjdXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGpvYnNNYW5nZXIucmVnaXN0ZXJKb2JFeGVjdXRpb25MaXN0ZW5lcih0aGlzKTtcbiAgICB9XG5cbiAgICBjaGVja1Byb2dyZXNzKCkge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMudGVybWluYXRlZCB8fCAhdGhpcy5sYXN0Sm9iRXhlY3V0aW9uLmlzUnVubmluZygpIHx8IHRoaXMuZ2V0UHJvZ3Jlc3NQZXJjZW50cyh0aGlzLnByb2dyZXNzKSA9PT0gMTAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5qb2JzTWFuZ2VyLmdldFByb2dyZXNzKHRoaXMubGFzdEpvYkV4ZWN1dGlvbikudGhlbihwcm9ncmVzcz0+IHtcbiAgICAgICAgICAgIHRoaXMubGFzdFVwZGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgaWYgKHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uUHJvZ3Jlc3MuY2FsbCh0aGlzLmNvbmZpZy5jYWxsYmFja3NUaGlzQXJnIHx8IHRoaXMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jaGVja1Byb2dyZXNzKCk7XG4gICAgICAgICAgICB9LCB0aGlzLmNvbmZpZy51cGRhdGVJbnRlcnZhbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBiZWZvcmVKb2Ioam9iRXhlY3V0aW9uKSB7XG4gICAgICAgIGlmIChqb2JFeGVjdXRpb24uam9iSW5zdGFuY2UuaWQgIT09IHRoaXMuam9iSW5zdGFuY2UuaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgdGhpcy5jb25maWcub25Kb2JTdGFydGVkLmNhbGwodGhpcy5jb25maWcuY2FsbGJhY2tzVGhpc0FyZyB8fCB0aGlzKTtcbiAgICB9XG5cbiAgICBnZXRQcm9ncmVzc1BlcmNlbnRzKHByb2dyZXNzKSB7XG4gICAgICAgIGlmICghcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9ncmVzcy5jdXJyZW50ICogMTAwIC8gcHJvZ3Jlc3MudG90YWw7XG4gICAgfVxuXG4gICAgZ2V0UHJvZ3Jlc3NGcm9tRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbikge1xuICAgICAgICB2YXIgam9iID0gdGhpcy5qb2JzTWFuZ2VyLmdldEpvYkJ5TmFtZShqb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSk7XG4gICAgICAgIHJldHVybiBqb2IuZ2V0UHJvZ3Jlc3Moam9iRXhlY3V0aW9uKTtcbiAgICB9XG5cbiAgICBhZnRlckpvYihqb2JFeGVjdXRpb24pIHtcbiAgICAgICAgaWYgKGpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5pZCAhPT0gdGhpcy5qb2JJbnN0YW5jZS5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgaWYgKEpPQl9TVEFUVVMuQ09NUExFVEVEID09PSBqb2JFeGVjdXRpb24uc3RhdHVzKSB7XG4gICAgICAgICAgICB0aGlzLmpvYnNNYW5nZXIuZGVyZWdpc3RlckpvYkV4ZWN1dGlvbkxpc3RlbmVyKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuZ2V0UHJvZ3Jlc3NGcm9tRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbik7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5vblByb2dyZXNzLmNhbGwodGhpcy5jb25maWcuY2FsbGJhY2tzVGhpc0FyZyB8fCB0aGlzLCB0aGlzLnByb2dyZXNzKTtcbiAgICAgICAgICAgIHRoaXMuam9ic01hbmdlci5nZXRSZXN1bHQoam9iRXhlY3V0aW9uKS50aGVuKHJlc3VsdD0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5vbkpvYkNvbXBsZXRlZC5jYWxsKHRoaXMuY29uZmlnLmNhbGxiYWNrc1RoaXNBcmcgfHwgdGhpcywgcmVzdWx0LmRhdGEpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgfSBlbHNlIGlmIChKT0JfU1RBVFVTLkZBSUxFRCA9PT0gam9iRXhlY3V0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcub25Kb2JGYWlsZWQuY2FsbCh0aGlzLmNvbmZpZy5jYWxsYmFja3NUaGlzQXJnIHx8IHRoaXMsIGpvYkV4ZWN1dGlvbi5mYWlsdXJlRXhjZXB0aW9ucyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChKT0JfU1RBVFVTLlNUT1BQRUQgPT09IGpvYkV4ZWN1dGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uSm9iU3RvcHBlZC5jYWxsKHRoaXMuY29uZmlnLmNhbGxiYWNrc1RoaXNBcmcgfHwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMYXN0Sm9iRXhlY3V0aW9uKGZvcmNlVXBkYXRlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhc3RKb2JFeGVjdXRpb24gfHwgZm9yY2VVcGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIuam9iUmVwb3NpdG9yeS5nZXRMYXN0Sm9iRXhlY3V0aW9uQnlJbnN0YW5jZSh0aGlzLmpvYkluc3RhbmNlKS50aGVuKGplPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGplO1xuICAgICAgICAgICAgICAgIHJldHVybiBqZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5sYXN0Sm9iRXhlY3V0aW9uKTtcbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0Sm9iRXhlY3V0aW9uKCkudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIuc3RvcCh0aGlzLmxhc3RKb2JFeGVjdXRpb24pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVzdW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0Sm9iRXhlY3V0aW9uKCkudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIucnVuKHRoaXMuam9iSW5zdGFuY2Uuam9iTmFtZSwgdGhpcy5sYXN0Sm9iRXhlY3V0aW9uLmpvYlBhcmFtZXRlcnMudmFsdWVzLCB0aGlzLmxhc3RKb2JFeGVjdXRpb24uZ2V0RGF0YSgpKS50aGVuKGplPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGplO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQcm9ncmVzcygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExhc3RKb2JFeGVjdXRpb24oKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9ic01hbmdlci50ZXJtaW5hdGUodGhpcy5qb2JJbnN0YW5jZSkudGhlbigoKT0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uSm9iVGVybWluYXRlZC5jYWxsKHRoaXMuY29uZmlnLmNhbGxiYWNrc1RoaXNBcmcgfHwgdGhpcywgdGhpcy5sYXN0Sm9iRXhlY3V0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmpvYnNNYW5nZXIuZGVyZWdpc3RlckpvYkV4ZWN1dGlvbkxpc3RlbmVyKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFzdEpvYkV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLmNhdGNoKGU9PiB7XG4gICAgICAgICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pXG4gICAgfVxuXG59XG4iLCJleHBvcnQgY2xhc3MgSm9iV29ya2Vye1xuXG4gICAgd29ya2VyO1xuICAgIGxpc3RlbmVycyA9IHt9O1xuICAgIGRlZmF1bHRMaXN0ZW5lcjtcblxuICAgIGNvbnN0cnVjdG9yKHVybCwgZGVmYXVsdExpc3RlbmVyLCBvbkVycm9yKXtcbiAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgICAgdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKHVybCk7XG4gICAgICAgIHRoaXMuZGVmYXVsdExpc3RlbmVyID0gZGVmYXVsdExpc3RlbmVyIHx8IGZ1bmN0aW9uKCkge307XG4gICAgICAgIGlmIChvbkVycm9yKSB7dGhpcy53b3JrZXIub25lcnJvciA9IG9uRXJyb3I7fVxuXG4gICAgICAgIHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSBpbnN0YW5jZW9mIE9iamVjdCAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaGFzT3duUHJvcGVydHkoJ3F1ZXJ5TWV0aG9kTGlzdGVuZXInKSAmJiBldmVudC5kYXRhLmhhc093blByb3BlcnR5KCdxdWVyeU1ldGhvZEFyZ3VtZW50cycpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gaW5zdGFuY2UubGlzdGVuZXJzW2V2ZW50LmRhdGEucXVlcnlNZXRob2RMaXN0ZW5lcl07XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBldmVudC5kYXRhLnF1ZXJ5TWV0aG9kQXJndW1lbnRzO1xuICAgICAgICAgICAgICAgIGlmKGxpc3RlbmVyLmRlc2VyaWFsaXplcil7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBsaXN0ZW5lci5kZXNlcmlhbGl6ZXIoYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmZuLmFwcGx5KGxpc3RlbmVyLnRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRMaXN0ZW5lci5jYWxsKGluc3RhbmNlLCBldmVudC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgc2VuZFF1ZXJ5KCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0pvYldvcmtlci5zZW5kUXVlcnkgdGFrZXMgYXQgbGVhc3Qgb25lIGFyZ3VtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgJ3F1ZXJ5TWV0aG9kJzogYXJndW1lbnRzWzBdLFxuICAgICAgICAgICAgJ3F1ZXJ5QXJndW1lbnRzJzogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBydW5Kb2Ioam9iTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcywgZGF0YURUTyl7XG4gICAgICAgIHRoaXMuc2VuZFF1ZXJ5KCdydW5Kb2InLCBqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzVmFsdWVzLCBkYXRhRFRPKVxuICAgIH1cblxuICAgIGV4ZWN1dGVKb2Ioam9iRXhlY3V0aW9uSWQpe1xuICAgICAgICB0aGlzLnNlbmRRdWVyeSgnZXhlY3V0ZUpvYicsIGpvYkV4ZWN1dGlvbklkKVxuICAgIH1cblxuICAgIHJlY29tcHV0ZShkYXRhRFRPLCBydWxlTmFtZXMsIGV2YWxDb2RlLCBldmFsTnVtZXJpYyl7XG4gICAgICAgIHRoaXMuc2VuZFF1ZXJ5KCdyZWNvbXB1dGUnLCBkYXRhRFRPLCBydWxlTmFtZXMsIGV2YWxDb2RlLCBldmFsTnVtZXJpYylcbiAgICB9XG5cbiAgICBwb3N0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXIobmFtZSwgbGlzdGVuZXIsIHRoaXNBcmcsIGRlc2VyaWFsaXplcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVyc1tuYW1lXSA9IHtcbiAgICAgICAgICAgIGZuOiBsaXN0ZW5lcixcbiAgICAgICAgICAgIHRoaXNBcmc6IHRoaXNBcmcgfHwgdGhpcyxcbiAgICAgICAgICAgIGRlc2VyaWFsaXplcjogZGVzZXJpYWxpemVyXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmVtb3ZlTGlzdGVuZXIobmFtZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbbmFtZV07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlscywgbG9nfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7U2Vuc2l0aXZpdHlBbmFseXNpc0pvYn0gZnJvbSBcIi4vY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvbi13YXkvc2Vuc2l0aXZpdHktYW5hbHlzaXMtam9iXCI7XG5pbXBvcnQge0pvYkxhdW5jaGVyfSBmcm9tIFwiLi9lbmdpbmUvam9iLWxhdW5jaGVyXCI7XG5pbXBvcnQge0pvYldvcmtlcn0gZnJvbSBcIi4vam9iLXdvcmtlclwiO1xuaW1wb3J0IHtKb2JFeGVjdXRpb25MaXN0ZW5lcn0gZnJvbSBcIi4vZW5naW5lL2pvYi1leGVjdXRpb24tbGlzdGVuZXJcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyc30gZnJvbSBcIi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0lkYkpvYlJlcG9zaXRvcnl9IGZyb20gXCIuL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS9pZGItam9iLXJlcG9zaXRvcnlcIjtcbmltcG9ydCB7Sk9CX0VYRUNVVElPTl9GTEFHfSBmcm9tIFwiLi9lbmdpbmUvam9iLWV4ZWN1dGlvbi1mbGFnXCI7XG5pbXBvcnQge1JlY29tcHV0ZUpvYn0gZnJvbSBcIi4vY29uZmlndXJhdGlvbnMvcmVjb21wdXRlL3JlY29tcHV0ZS1qb2JcIjtcbmltcG9ydCB7UHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2J9IGZyb20gXCIuL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3Byb2JhYmlsaXN0aWMvcHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpcy1qb2JcIjtcbmltcG9ydCB7VGltZW91dEpvYlJlcG9zaXRvcnl9IGZyb20gXCIuL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS90aW1lb3V0LWpvYi1yZXBvc2l0b3J5XCI7XG5pbXBvcnQge1Rvcm5hZG9EaWFncmFtSm9ifSBmcm9tIFwiLi9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy90b3JuYWRvLWRpYWdyYW0vdG9ybmFkby1kaWFncmFtLWpvYlwiO1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9lbmdpbmUvam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtTaW1wbGVKb2JSZXBvc2l0b3J5fSBmcm9tIFwiLi9lbmdpbmUvam9iLXJlcG9zaXRvcnkvc2ltcGxlLWpvYi1yZXBvc2l0b3J5XCI7XG5pbXBvcnQge0xlYWd1ZVRhYmxlSm9ifSBmcm9tIFwiLi9jb25maWd1cmF0aW9ucy9sZWFndWUtdGFibGUvbGVhZ3VlLXRhYmxlLWpvYlwiO1xuaW1wb3J0IHtTcGlkZXJQbG90Sm9ifSBmcm9tIFwiLi9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9zcGlkZXItcGxvdC9zcGlkZXItcGxvdC1qb2JcIjtcblxuXG5leHBvcnQgY2xhc3MgSm9ic01hbmFnZXJDb25maWcge1xuXG4gICAgd29ya2VyVXJsID0gbnVsbDtcbiAgICByZXBvc2l0b3J5VHlwZSA9ICdpZGInO1xuICAgIGNsZWFyUmVwb3NpdG9yeSA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoY3VzdG9tKSB7XG4gICAgICAgIGlmIChjdXN0b20pIHtcbiAgICAgICAgICAgIFV0aWxzLmRlZXBFeHRlbmQodGhpcywgY3VzdG9tKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEpvYnNNYW5hZ2VyIGV4dGVuZHMgSm9iRXhlY3V0aW9uTGlzdGVuZXIge1xuXG5cbiAgICB1c2VXb3JrZXI7XG4gICAgZXhwcmVzc2lvbnNFdmFsdWF0b3I7XG4gICAgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyO1xuICAgIGpvYldvcmtlcjtcblxuICAgIGpvYlJlcG9zaXRvcnk7XG4gICAgam9iTGF1bmNoZXI7XG5cbiAgICBqb2JFeGVjdXRpb25MaXN0ZW5lcnMgPSBbXTtcblxuICAgIGFmdGVySm9iRXhlY3V0aW9uUHJvbWlzZVJlc29sdmVzID0ge307XG4gICAgam9iSW5zdGFuY2VzVG9UZXJtaW5hdGUgPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIsIGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNldENvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmUgPSBleHByZXNzaW9uc0V2YWx1YXRvci5leHByZXNzaW9uRW5naW5lO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yID0gZXhwcmVzc2lvbnNFdmFsdWF0b3I7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyID0gb2JqZWN0aXZlUnVsZXNNYW5hZ2VyO1xuXG5cbiAgICAgICAgdGhpcy51c2VXb3JrZXIgPSAhIXRoaXMuY29uZmlnLndvcmtlclVybDtcbiAgICAgICAgaWYgKHRoaXMudXNlV29ya2VyKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRXb3JrZXIodGhpcy5jb25maWcud29ya2VyVXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5pdFJlcG9zaXRvcnkoKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVySm9icygpO1xuXG5cblxuICAgICAgICB0aGlzLmpvYkxhdW5jaGVyID0gbmV3IEpvYkxhdW5jaGVyKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5qb2JXb3JrZXIsIChkYXRhKT0+dGhpcy5zZXJpYWxpemVEYXRhKGRhdGEpKTtcbiAgICB9XG5cbiAgICBzZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gbmV3IEpvYnNNYW5hZ2VyQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGluaXRSZXBvc2l0b3J5KCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuY29uZmlnLnJlcG9zaXRvcnlUeXBlKXtcbiAgICAgICAgICAgIGNhc2UgJ2lkYic6XG4gICAgICAgICAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gbmV3IElkYkpvYlJlcG9zaXRvcnkodGhpcy5leHByZXNzaW9uRW5naW5lLmdldEpzb25SZXZpdmVyKCksICdzZC1qb2ItcmVwb3NpdG9yeScsIHRoaXMuY29uZmlnLmNsZWFyUmVwb3NpdG9yeSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0aW1lb3V0JzpcbiAgICAgICAgICAgICAgICB0aGlzLmpvYlJlcG9zaXRvcnkgPSBuZXcgVGltZW91dEpvYlJlcG9zaXRvcnkodGhpcy5leHByZXNzaW9uRW5naW5lLmdldEpzb25SZXZpdmVyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc2ltcGxlJzpcbiAgICAgICAgICAgICAgICB0aGlzLmpvYlJlcG9zaXRvcnkgPSBuZXcgU2ltcGxlSm9iUmVwb3NpdG9yeSh0aGlzLmV4cHJlc3Npb25FbmdpbmUuZ2V0SnNvblJldml2ZXIoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGxvZy5lcnJvcignSm9ic01hbmFnZXIgY29uZmlndXJhdGlvbiBlcnJvciEgVW5rbm93biByZXBvc2l0b3J5IHR5cGU6ICcrdGhpcy5jb25maWcucmVwb3NpdG9yeVR5cGUrJy4gVXNpbmcgZGVmYXVsdDogaWRiJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcucmVwb3NpdG9yeVR5cGUgPSAnaWRiJztcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRSZXBvc2l0b3J5KClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlcmlhbGl6ZURhdGEoZGF0YSkge1xuICAgICAgICByZXR1cm4gZGF0YS5zZXJpYWxpemUodHJ1ZSwgZmFsc2UsIGZhbHNlLCB0aGlzLmV4cHJlc3Npb25FbmdpbmUuZ2V0SnNvblJlcGxhY2VyKCkpO1xuICAgIH1cblxuICAgIGdldFByb2dyZXNzKGpvYkV4ZWN1dGlvbk9ySWQpIHtcbiAgICAgICAgdmFyIGlkID0gam9iRXhlY3V0aW9uT3JJZDtcbiAgICAgICAgaWYgKCFVdGlscy5pc1N0cmluZyhqb2JFeGVjdXRpb25PcklkKSkge1xuICAgICAgICAgICAgaWQgPSBqb2JFeGVjdXRpb25PcklkLmlkXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JFeGVjdXRpb25Qcm9ncmVzcyhpZCk7XG4gICAgfVxuXG4gICAgZ2V0UmVzdWx0KGpvYkluc3RhbmNlT3JFeGVjdXRpb24pIHtcbiAgICAgICAgbGV0IGpvYkluc3RhbmNlID0gam9iSW5zdGFuY2VPckV4ZWN1dGlvbjtcbiAgICAgICAgbGV0IGpvYkV4ZWN1dGlvbiA9IG51bGw7XG4gICAgICAgIGlmKGpvYkluc3RhbmNlT3JFeGVjdXRpb24uam9iSW5zdGFuY2Upe1xuICAgICAgICAgICAgam9iRXhlY3V0aW9uID0gam9iSW5zdGFuY2VPckV4ZWN1dGlvbjtcbiAgICAgICAgICAgIGpvYkluc3RhbmNlID0gam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JSZXN1bHRCeUluc3RhbmNlKGpvYkluc3RhbmNlKTtcbiAgICB9XG5cbiAgICBydW4oam9iTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcywgZGF0YSwgcmVzb2x2ZVByb21pc2VBZnRlckpvYklzTGF1bmNoZWQgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkxhdW5jaGVyLnJ1bihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzVmFsdWVzLCBkYXRhLCByZXNvbHZlUHJvbWlzZUFmdGVySm9iSXNMYXVuY2hlZCkudGhlbihqb2JFeGVjdXRpb249PiB7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZVByb21pc2VBZnRlckpvYklzTGF1bmNoZWQgfHwgIWpvYkV4ZWN1dGlvbi5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBqb2JFeGVjdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2pvYiB3YXMgZGVsZWdhdGVkIHRvIHdvcmtlciBhbmQgaXMgc3RpbGwgcnVubmluZ1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlckpvYkV4ZWN1dGlvblByb21pc2VSZXNvbHZlc1tqb2JFeGVjdXRpb24uaWRdID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBleGVjdXRlKGpvYkV4ZWN1dGlvbk9ySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iTGF1bmNoZXIuZXhlY3V0ZShqb2JFeGVjdXRpb25PcklkKTtcbiAgICB9XG5cbiAgICBzdG9wKGpvYkV4ZWN1dGlvbk9ySWQpIHtcbiAgICAgICAgdmFyIGlkID0gam9iRXhlY3V0aW9uT3JJZDtcbiAgICAgICAgaWYgKCFVdGlscy5pc1N0cmluZyhqb2JFeGVjdXRpb25PcklkKSkge1xuICAgICAgICAgICAgaWQgPSBqb2JFeGVjdXRpb25PcklkLmlkXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldEpvYkV4ZWN1dGlvbkJ5SWQoaWQpLnRoZW4oam9iRXhlY3V0aW9uPT4ge1xuICAgICAgICAgICAgaWYgKCFqb2JFeGVjdXRpb24pIHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJKb2IgRXhlY3V0aW9uIG5vdCBmb3VuZDogXCIgKyBqb2JFeGVjdXRpb25PcklkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgham9iRXhlY3V0aW9uLmlzUnVubmluZygpKSB7XG4gICAgICAgICAgICAgICAgbG9nLndhcm4oXCJKb2IgRXhlY3V0aW9uIG5vdCBydW5uaW5nLCBzdGF0dXM6IFwiICsgam9iRXhlY3V0aW9uLnN0YXR1cyArIFwiLCBlbmRUaW1lOiBcIiArIGpvYkV4ZWN1dGlvbi5lbmRUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gam9iRXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnNhdmVKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbi5pZCwgSk9CX0VYRUNVVElPTl9GTEFHLlNUT1ApLnRoZW4oKCk9PmpvYkV4ZWN1dGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qc3RvcCBqb2IgZXhlY3V0aW9uIGlmIHJ1bm5pbmcgYW5kIGRlbGV0ZSBqb2IgaW5zdGFuY2UgZnJvbSByZXBvc2l0b3J5Ki9cbiAgICB0ZXJtaW5hdGUoam9iSW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRMYXN0Sm9iRXhlY3V0aW9uQnlJbnN0YW5jZShqb2JJbnN0YW5jZSkudGhlbihqb2JFeGVjdXRpb249PiB7XG4gICAgICAgICAgICBpZiAoam9iRXhlY3V0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYoam9iRXhlY3V0aW9uLmlzUnVubmluZygpKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5zYXZlSm9iRXhlY3V0aW9uRmxhZyhqb2JFeGVjdXRpb24uaWQsIEpPQl9FWEVDVVRJT05fRkxBRy5TVE9QKS50aGVuKCgpPT5qb2JFeGVjdXRpb24pO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnJlbW92ZUpvYkluc3RhbmNlKGpvYkluc3RhbmNlLCBqb2JFeGVjdXRpb24uam9iUGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKCgpPT57XG4gICAgICAgICAgICB0aGlzLmpvYkluc3RhbmNlc1RvVGVybWluYXRlW2pvYkluc3RhbmNlLmlkXT1qb2JJbnN0YW5jZTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXRKb2JCeU5hbWUoam9iTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldEpvYkJ5TmFtZShqb2JOYW1lKTtcbiAgICB9XG5cblxuICAgIGNyZWF0ZUpvYlBhcmFtZXRlcnMoam9iTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcykge1xuICAgICAgICB2YXIgam9iID0gdGhpcy5qb2JSZXBvc2l0b3J5LmdldEpvYkJ5TmFtZShqb2JOYW1lKTtcbiAgICAgICAgcmV0dXJuIGpvYi5jcmVhdGVKb2JQYXJhbWV0ZXJzKGpvYlBhcmFtZXRlcnNWYWx1ZXMpO1xuICAgIH1cblxuXG4gICAgLypSZXR1cm5zIGEgcHJvbWlzZSovXG4gICAgZ2V0TGFzdEpvYkV4ZWN1dGlvbihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLnVzZVdvcmtlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9iV29ya2VyO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGpvYlBhcmFtZXRlcnMgaW5zdGFuY2VvZiBKb2JQYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgam9iUGFyYW1ldGVycyA9IHRoaXMuY3JlYXRlSm9iUGFyYW1ldGVycyhqb2JQYXJhbWV0ZXJzKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0TGFzdEpvYkV4ZWN1dGlvbihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKTtcbiAgICB9XG5cbiAgICBpbml0V29ya2VyKHdvcmtlclVybCkge1xuICAgICAgICB0aGlzLmpvYldvcmtlciA9IG5ldyBKb2JXb3JrZXIod29ya2VyVXJsLCAoKT0+e1xuICAgICAgICAgICAgbG9nLmVycm9yKCdlcnJvciBpbiB3b3JrZXInLCBhcmd1bWVudHMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGFyZ3NEZXNlcmlhbGl6ZXIgPSAoYXJncyk9PiB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuam9iUmVwb3NpdG9yeS5yZXZpdmVKb2JFeGVjdXRpb24oYXJnc1swXSldXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5qb2JXb3JrZXIuYWRkTGlzdGVuZXIoXCJiZWZvcmVKb2JcIiwgdGhpcy5iZWZvcmVKb2IsIHRoaXMsIGFyZ3NEZXNlcmlhbGl6ZXIpO1xuICAgICAgICB0aGlzLmpvYldvcmtlci5hZGRMaXN0ZW5lcihcImFmdGVySm9iXCIsIHRoaXMuYWZ0ZXJKb2IsIHRoaXMsIGFyZ3NEZXNlcmlhbGl6ZXIpO1xuICAgICAgICB0aGlzLmpvYldvcmtlci5hZGRMaXN0ZW5lcihcImpvYkZhdGFsRXJyb3JcIiwgdGhpcy5vbkpvYkZhdGFsRXJyb3IsIHRoaXMpO1xuICAgIH1cblxuICAgIHJlZ2lzdGVySm9icygpIHtcblxuICAgICAgICBsZXQgc2Vuc2l0aXZpdHlBbmFseXNpc0pvYiA9IG5ldyBTZW5zaXRpdml0eUFuYWx5c2lzSm9iKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIpO1xuICAgICAgICBsZXQgcHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2IgPSBuZXcgUHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2IodGhpcy5qb2JSZXBvc2l0b3J5LCB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlcik7XG4gICAgICAgIGlmKCFVdGlscy5pc1dvcmtlcigpKXtcbiAgICAgICAgICAgIHNlbnNpdGl2aXR5QW5hbHlzaXNKb2Iuc2V0QmF0Y2hTaXplKDEpO1xuICAgICAgICAgICAgcHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2Iuc2V0QmF0Y2hTaXplKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckpvYihzZW5zaXRpdml0eUFuYWx5c2lzSm9iKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckpvYihuZXcgVG9ybmFkb0RpYWdyYW1Kb2IodGhpcy5qb2JSZXBvc2l0b3J5LCB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlcikpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVySm9iKHByb2JhYmlsaXN0aWNTZW5zaXRpdml0eUFuYWx5c2lzSm9iKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckpvYihuZXcgUmVjb21wdXRlSm9iKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckpvYihuZXcgTGVhZ3VlVGFibGVKb2IodGhpcy5qb2JSZXBvc2l0b3J5LCB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlcikpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVySm9iKG5ldyBTcGlkZXJQbG90Sm9iKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIpKTtcbiAgICB9XG5cbiAgICByZWdpc3RlckpvYihqb2IpIHtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5LnJlZ2lzdGVySm9iKGpvYik7XG4gICAgICAgIGpvYi5yZWdpc3RlckV4ZWN1dGlvbkxpc3RlbmVyKHRoaXMpXG4gICAgfVxuXG4gICAgcmVnaXN0ZXJKb2JFeGVjdXRpb25MaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmpvYkV4ZWN1dGlvbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBkZXJlZ2lzdGVySm9iRXhlY3V0aW9uTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5qb2JFeGVjdXRpb25MaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmpvYkV4ZWN1dGlvbkxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBiZWZvcmVKb2Ioam9iRXhlY3V0aW9uKSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcImJlZm9yZUpvYlwiLCB0aGlzLnVzZVdvcmtlciwgam9iRXhlY3V0aW9uKTtcbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25MaXN0ZW5lcnMuZm9yRWFjaChsPT5sLmJlZm9yZUpvYihqb2JFeGVjdXRpb24pKTtcbiAgICB9XG5cbiAgICBhZnRlckpvYihqb2JFeGVjdXRpb24pIHtcbiAgICAgICAgbG9nLmRlYnVnKFwiYWZ0ZXJKb2JcIiwgdGhpcy51c2VXb3JrZXIsIGpvYkV4ZWN1dGlvbik7XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9uTGlzdGVuZXJzLmZvckVhY2gobD0+bC5hZnRlckpvYihqb2JFeGVjdXRpb24pKTtcbiAgICAgICAgdmFyIHByb21pc2VSZXNvbHZlID0gdGhpcy5hZnRlckpvYkV4ZWN1dGlvblByb21pc2VSZXNvbHZlc1tqb2JFeGVjdXRpb24uaWRdO1xuICAgICAgICBpZiAocHJvbWlzZVJlc29sdmUpIHtcbiAgICAgICAgICAgIHByb21pc2VSZXNvbHZlKGpvYkV4ZWN1dGlvbilcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuam9iSW5zdGFuY2VzVG9UZXJtaW5hdGVbam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlLmlkXSl7XG4gICAgICAgICAgICB0aGlzLmpvYlJlcG9zaXRvcnkucmVtb3ZlSm9iSW5zdGFuY2Uoam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlLCBqb2JFeGVjdXRpb24uam9iUGFyYW1ldGVycyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkpvYkZhdGFsRXJyb3Ioam9iRXhlY3V0aW9uSWQsIGVycm9yKXtcbiAgICAgICAgdmFyIHByb21pc2VSZXNvbHZlID0gdGhpcy5hZnRlckpvYkV4ZWN1dGlvblByb21pc2VSZXNvbHZlc1tqb2JFeGVjdXRpb25JZF07XG4gICAgICAgIGlmIChwcm9taXNlUmVzb2x2ZSkge1xuICAgICAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5LmdldEpvYkV4ZWN1dGlvbkJ5SWQoam9iRXhlY3V0aW9uSWQpLnRoZW4oam9iRXhlY3V0aW9uPT57XG4gICAgICAgICAgICAgICAgam9iRXhlY3V0aW9uLnN0YXR1cyA9IEpPQl9TVEFUVVMuRkFJTEVEO1xuICAgICAgICAgICAgICAgIGlmKGVycm9yKXtcbiAgICAgICAgICAgICAgICAgICAgam9iRXhlY3V0aW9uLmZhaWx1cmVFeGNlcHRpb25zLnB1c2goZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuc2F2ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb24pLnRoZW4oKCk9PntcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZVJlc29sdmUoam9iRXhlY3V0aW9uKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSkuY2F0Y2goZT0+e1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihlKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfVxuICAgICAgICBsb2cuZGVidWcoJ29uSm9iRmF0YWxFcnJvcicsIGpvYkV4ZWN1dGlvbklkLCBlcnJvcik7XG4gICAgfVxuXG5cbn1cbiIsImltcG9ydCB7XG4gICAgRXhwZWN0ZWRWYWx1ZU1heGltaXphdGlvblJ1bGUsXG4gICAgRXhwZWN0ZWRWYWx1ZU1pbmltaXphdGlvblJ1bGUsXG4gICAgTWF4aU1pblJ1bGUsXG4gICAgTWF4aU1heFJ1bGUsXG4gICAgTWluaU1pblJ1bGUsXG4gICAgTWluaU1heFJ1bGVcbn0gZnJvbSBcIi4vcnVsZXNcIjtcbmltcG9ydCB7bG9nfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCAqIGFzIG1vZGVsIGZyb20gXCJzZC1tb2RlbFwiO1xuaW1wb3J0IHtNaW5NYXhSdWxlfSBmcm9tIFwiLi9ydWxlcy9taW4tbWF4LXJ1bGVcIjtcbmltcG9ydCB7TWF4TWluUnVsZX0gZnJvbSBcIi4vcnVsZXMvbWF4LW1pbi1ydWxlXCI7XG5pbXBvcnQge01pbk1pblJ1bGV9IGZyb20gXCIuL3J1bGVzL21pbi1taW4tcnVsZVwiO1xuaW1wb3J0IHtNYXhNYXhSdWxlfSBmcm9tIFwiLi9ydWxlcy9tYXgtbWF4LXJ1bGVcIjtcblxuZXhwb3J0IGNsYXNzIE9iamVjdGl2ZVJ1bGVzTWFuYWdlcntcblxuICAgIGV4cHJlc3Npb25FbmdpbmU7XG4gICAgY3VycmVudFJ1bGU7XG4gICAgcnVsZUJ5TmFtZSA9IHt9O1xuICAgIHJ1bGVzID0gW107XG5cblxuICAgIGZsaXBQYWlyID0ge307XG4gICAgcGF5b2ZmSW5kZXggPSAwO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSwgY3VycmVudFJ1bGVOYW1lKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZSA9IGV4cHJlc3Npb25FbmdpbmU7XG4gICAgICAgIHRoaXMuYWRkUnVsZShuZXcgRXhwZWN0ZWRWYWx1ZU1heGltaXphdGlvblJ1bGUoZXhwcmVzc2lvbkVuZ2luZSkpO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobmV3IEV4cGVjdGVkVmFsdWVNaW5pbWl6YXRpb25SdWxlKGV4cHJlc3Npb25FbmdpbmUpKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG5ldyBNYXhpTWluUnVsZShleHByZXNzaW9uRW5naW5lKSk7XG4gICAgICAgIHRoaXMuYWRkUnVsZShuZXcgTWF4aU1heFJ1bGUoZXhwcmVzc2lvbkVuZ2luZSkpO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobmV3IE1pbmlNaW5SdWxlKGV4cHJlc3Npb25FbmdpbmUpKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG5ldyBNaW5pTWF4UnVsZShleHByZXNzaW9uRW5naW5lKSk7XG5cbiAgICAgICAgbGV0IG1pbk1heCA9IG5ldyBNaW5NYXhSdWxlKGV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobWluTWF4KTtcbiAgICAgICAgbGV0IG1heE1pbiA9IG5ldyBNYXhNaW5SdWxlKGV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobWF4TWluKTtcbiAgICAgICAgdGhpcy5hZGRGbGlwUGFpcihtaW5NYXgsIG1heE1pbik7XG5cbiAgICAgICAgbGV0IG1pbk1pbiA9IG5ldyBNaW5NaW5SdWxlKGV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobWluTWluKTtcbiAgICAgICAgbGV0IG1heE1heCA9IG5ldyBNYXhNYXhSdWxlKGV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobWF4TWF4KTtcblxuXG4gICAgICAgIGlmIChjdXJyZW50UnVsZU5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJ1bGUgPSB0aGlzLnJ1bGVCeU5hbWVbY3VycmVudFJ1bGVOYW1lXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJ1bGUgPSB0aGlzLnJ1bGVzWzBdO1xuICAgICAgICB9XG5cbiAgICB9XG5cblxuICAgIHNldFBheW9mZkluZGV4KHBheW9mZkluZGV4KXtcbiAgICAgICAgdGhpcy5wYXlvZmZJbmRleCA9IHBheW9mZkluZGV4IHx8IDA7XG4gICAgfVxuXG4gICAgYWRkUnVsZShydWxlKXtcbiAgICAgICAgdGhpcy5ydWxlQnlOYW1lW3J1bGUubmFtZV09cnVsZTtcbiAgICAgICAgdGhpcy5ydWxlcy5wdXNoKHJ1bGUpO1xuICAgIH1cblxuICAgIGlzUnVsZU5hbWUocnVsZU5hbWUpe1xuICAgICAgICAgcmV0dXJuICEhdGhpcy5ydWxlQnlOYW1lW3J1bGVOYW1lXVxuICAgIH1cblxuICAgIHNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKXtcbiAgICAgICAgdGhpcy5jdXJyZW50UnVsZSA9IHRoaXMucnVsZUJ5TmFtZVtydWxlTmFtZV07XG4gICAgfVxuXG4gICAgZ2V0T2JqZWN0aXZlUnVsZUJ5TmFtZShydWxlTmFtZSl7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bGVCeU5hbWVbcnVsZU5hbWVdO1xuICAgIH1cblxuICAgIGZsaXBSdWxlKCl7XG4gICAgICAgIHZhciBmbGlwcGVkID0gdGhpcy5mbGlwUGFpclt0aGlzLmN1cnJlbnRSdWxlLm5hbWVdO1xuICAgICAgICBpZihmbGlwcGVkKXtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJ1bGUgPSBmbGlwcGVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlRGVmYXVsdENyaXRlcmlvbjFXZWlnaHQoZGVmYXVsdENyaXRlcmlvbjFXZWlnaHQpe1xuICAgICAgICB0aGlzLnJ1bGVzLmZpbHRlcihyPT5yLm11bHRpQ3JpdGVyaWEpLmZvckVhY2gocj0+ci5zZXREZWZhdWx0Q3JpdGVyaW9uMVdlaWdodChkZWZhdWx0Q3JpdGVyaW9uMVdlaWdodCkpO1xuICAgIH1cblxuICAgIHJlY29tcHV0ZShkYXRhTW9kZWwsIGFsbFJ1bGVzLCBkZWNpc2lvblBvbGljeT1udWxsKXtcblxuICAgICAgICB2YXIgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIGxvZy50cmFjZSgncmVjb21wdXRpbmcgcnVsZXMsIGFsbDogJythbGxSdWxlcyk7XG5cbiAgICAgICAgZGF0YU1vZGVsLmdldFJvb3RzKCkuZm9yRWFjaChuPT57XG4gICAgICAgICAgICB0aGlzLnJlY29tcHV0ZVRyZWUobiwgYWxsUnVsZXMsIGRlY2lzaW9uUG9saWN5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHRpbWUgID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lLzEwMDApO1xuICAgICAgICBsb2cudHJhY2UoJ3JlY29tcHV0YXRpb24gdG9vayAnK3RpbWUrJ3MnKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICByZWNvbXB1dGVUcmVlKHJvb3QsIGFsbFJ1bGVzLCBkZWNpc2lvblBvbGljeT1udWxsKXtcbiAgICAgICAgbG9nLnRyYWNlKCdyZWNvbXB1dGluZyBydWxlcyBmb3IgdHJlZSAuLi4nLCByb290KTtcblxuICAgICAgICB2YXIgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgdmFyIHJ1bGVzICA9IFt0aGlzLmN1cnJlbnRSdWxlXTtcbiAgICAgICAgaWYoYWxsUnVsZXMpe1xuICAgICAgICAgICAgcnVsZXMgPSB0aGlzLnJ1bGVzO1xuICAgICAgICB9XG5cbiAgICAgICAgcnVsZXMuZm9yRWFjaChydWxlPT4ge1xuICAgICAgICAgICAgcnVsZS5zZXRQYXlvZmZJbmRleCh0aGlzLnBheW9mZkluZGV4KTtcbiAgICAgICAgICAgIHJ1bGUuc2V0RGVjaXNpb25Qb2xpY3koZGVjaXNpb25Qb2xpY3kpO1xuICAgICAgICAgICAgcnVsZS5jb21wdXRlUGF5b2ZmKHJvb3QpO1xuICAgICAgICAgICAgcnVsZS5jb21wdXRlT3B0aW1hbChyb290KTtcbiAgICAgICAgICAgIHJ1bGUuY2xlYXJEZWNpc2lvblBvbGljeSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdGltZSAgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUpLzEwMDA7XG4gICAgICAgIGxvZy50cmFjZSgncmVjb21wdXRhdGlvbiB0b29rICcrdGltZSsncycpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG4gICAgZ2V0Tm9kZURpc3BsYXlWYWx1ZShub2RlLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiBub2RlLmNvbXB1dGVkVmFsdWUodGhpcy5jdXJyZW50UnVsZS5uYW1lLCBuYW1lKVxuXG4gICAgfVxuXG4gICAgZ2V0RWRnZURpc3BsYXlWYWx1ZShlLCBuYW1lKXtcbiAgICAgICAgaWYobmFtZT09PSdwcm9iYWJpbGl0eScpe1xuICAgICAgICAgICAgaWYoZS5wYXJlbnROb2RlIGluc3RhbmNlb2YgbW9kZWwuZG9tYWluLkRlY2lzaW9uTm9kZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuY29tcHV0ZWRWYWx1ZSh0aGlzLmN1cnJlbnRSdWxlLm5hbWUsICdwcm9iYWJpbGl0eScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZS5wYXJlbnROb2RlIGluc3RhbmNlb2YgbW9kZWwuZG9tYWluLkNoYW5jZU5vZGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmNvbXB1dGVkQmFzZVByb2JhYmlsaXR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZihuYW1lPT09J3BheW9mZicpe1xuICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50UnVsZS5tdWx0aUNyaXRlcmlhKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5jb21wdXRlZFZhbHVlKG51bGwsICdwYXlvZmYnKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmNvbXB1dGVkVmFsdWUobnVsbCwgJ3BheW9mZlsnICt0aGlzLnBheW9mZkluZGV4ICsgJ10nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmKG5hbWU9PT0nb3B0aW1hbCcpe1xuICAgICAgICAgICAgcmV0dXJuIGUuY29tcHV0ZWRWYWx1ZSh0aGlzLmN1cnJlbnRSdWxlLm5hbWUsICdvcHRpbWFsJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZEZsaXBQYWlyKHJ1bGUxLCBydWxlMikge1xuICAgICAgICB0aGlzLmZsaXBQYWlyW3J1bGUxLm5hbWVdID0gcnVsZTI7XG4gICAgICAgIHRoaXMuZmxpcFBhaXJbcnVsZTIubmFtZV0gPSBydWxlMTtcbiAgICB9XG5cblxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtPYmplY3RpdmVSdWxlfSBmcm9tICcuL29iamVjdGl2ZS1ydWxlJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSAnc2QtdXRpbHMnXG5cbi8qZXhwZWN0ZWQgdmFsdWUgbWF4aW1pemF0aW9uIHJ1bGUqL1xuZXhwb3J0IGNsYXNzIEV4cGVjdGVkVmFsdWVNYXhpbWl6YXRpb25SdWxlIGV4dGVuZHMgT2JqZWN0aXZlUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ2V4cGVjdGVkLXZhbHVlLW1heGltaXphdGlvbic7XG5cbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKXtcbiAgICAgICAgc3VwZXIoRXhwZWN0ZWRWYWx1ZU1heGltaXphdGlvblJ1bGUuTkFNRSwgdHJ1ZSwgZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxuXG4gICAgLy8gIHBheW9mZiAtIHBhcmVudCBlZGdlIHBheW9mZlxuICAgIGNvbXB1dGVPcHRpbWFsKG5vZGUsIHBheW9mZj0wLCBwcm9iYWJpbGl0eVRvRW50ZXI9MSl7XG4gICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgIGlmKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5UZXJtaW5hbE5vZGUpe1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ3Byb2JhYmlsaXR5VG9FbnRlcicsIHByb2JhYmlsaXR5VG9FbnRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICBpZiAoIHRoaXMuc3VidHJhY3QodGhpcy5jb21wdXRlZFBheW9mZihub2RlKSxwYXlvZmYpLmVxdWFscyh0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSkgfHwgIShub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKSApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU9wdGltYWwoZS5jaGlsZE5vZGUsIHRoaXMuYmFzZVBheW9mZihlKSwgdGhpcy5tdWx0aXBseShwcm9iYWJpbGl0eVRvRW50ZXIsIHRoaXMuY1ZhbHVlKGUsJ3Byb2JhYmlsaXR5JykpKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtPYmplY3RpdmVSdWxlfSBmcm9tICcuL29iamVjdGl2ZS1ydWxlJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5cbi8qZXhwZWN0ZWQgdmFsdWUgbWluaW1pemF0aW9uIHJ1bGUqL1xuZXhwb3J0IGNsYXNzIEV4cGVjdGVkVmFsdWVNaW5pbWl6YXRpb25SdWxlIGV4dGVuZHMgT2JqZWN0aXZlUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ2V4cGVjdGVkLXZhbHVlLW1pbmltaXphdGlvbic7XG5cbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKXtcbiAgICAgICAgc3VwZXIoRXhwZWN0ZWRWYWx1ZU1pbmltaXphdGlvblJ1bGUuTkFNRSwgZmFsc2UsIGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cblxuICAgIC8vICBwYXlvZmYgLSBwYXJlbnQgZWRnZSBwYXlvZmZcbiAgICBjb21wdXRlT3B0aW1hbChub2RlLCBwYXlvZmY9MCwgcHJvYmFiaWxpdHlUb0VudGVyPTEpe1xuICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICBpZihub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKXtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdwcm9iYWJpbGl0eVRvRW50ZXInLCBwcm9iYWJpbGl0eVRvRW50ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+e1xuICAgICAgICAgICAgaWYgKCB0aGlzLnN1YnRyYWN0KHRoaXMuY29tcHV0ZWRQYXlvZmYobm9kZSkscGF5b2ZmKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpIHx8ICEobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZSkgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVPcHRpbWFsKGUuY2hpbGROb2RlLCB0aGlzLmJhc2VQYXlvZmYoZSksIHRoaXMubXVsdGlwbHkocHJvYmFiaWxpdHlUb0VudGVyLCB0aGlzLmNWYWx1ZShlLCdwcm9iYWJpbGl0eScpKSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbn1cbiIsImV4cG9ydCAqIGZyb20gJy4vb2JqZWN0aXZlLXJ1bGUnXG5leHBvcnQgKiBmcm9tICcuL2V4cGVjdGVkLXZhbHVlLW1heGltaXphdGlvbi1ydWxlJ1xuZXhwb3J0ICogZnJvbSAnLi9leHBlY3RlZC12YWx1ZS1taW5pbWl6YXRpb24tcnVsZSdcbmV4cG9ydCAqIGZyb20gJy4vbWF4aS1tYXgtcnVsZSdcbmV4cG9ydCAqIGZyb20gJy4vbWF4aS1taW4tcnVsZSdcbmV4cG9ydCAqIGZyb20gJy4vbWluaS1tYXgtcnVsZSdcbmV4cG9ydCAqIGZyb20gJy4vbWluaS1taW4tcnVsZSdcblxuXG4iLCJpbXBvcnQge011bHRpQ3JpdGVyaWFSdWxlfSBmcm9tIFwiLi9tdWx0aS1jcml0ZXJpYS1ydWxlXCI7XG5cblxuZXhwb3J0IGNsYXNzIE1heE1heFJ1bGUgZXh0ZW5kcyBNdWx0aUNyaXRlcmlhUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ21heC1tYXgnO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKE1heE1heFJ1bGUuTkFNRSwgWzEsIDFdLCBleHByZXNzaW9uRW5naW5lKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge011bHRpQ3JpdGVyaWFSdWxlfSBmcm9tIFwiLi9tdWx0aS1jcml0ZXJpYS1ydWxlXCI7XG5cblxuZXhwb3J0IGNsYXNzIE1heE1pblJ1bGUgZXh0ZW5kcyBNdWx0aUNyaXRlcmlhUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ21heC1taW4nO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKE1heE1pblJ1bGUuTkFNRSwgWzEsIC0xXSwgZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtPYmplY3RpdmVSdWxlfSBmcm9tICcuL29iamVjdGl2ZS1ydWxlJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5cbi8qbWF4aS1tYXggcnVsZSovXG5leHBvcnQgY2xhc3MgTWF4aU1heFJ1bGUgZXh0ZW5kcyBPYmplY3RpdmVSdWxle1xuXG4gICAgc3RhdGljIE5BTUUgPSAnbWF4aS1tYXgnO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKE1heGlNYXhSdWxlLk5BTUUsIHRydWUsIGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cblxuXG4gICAgbW9kaWZ5Q2hhbmNlUHJvYmFiaWxpdHkoZWRnZXMsIGJlc3RDaGlsZFBheW9mZiwgYmVzdENvdW50LCB3b3JzdENoaWxkUGF5b2ZmLCB3b3JzdENvdW50KXtcbiAgICAgICAgZWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoZSk7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknLCB0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKTxiZXN0Q2hpbGRQYXlvZmYgPyAwLjAgOiAoMS4wL2Jlc3RDb3VudCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAgcGF5b2ZmIC0gcGFyZW50IGVkZ2UgcGF5b2ZmXG4gICAgY29tcHV0ZU9wdGltYWwobm9kZSwgcGF5b2ZmID0gMCwgcHJvYmFiaWxpdHlUb0VudGVyID0gMSkge1xuICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLlRlcm1pbmFsTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ3Byb2JhYmlsaXR5VG9FbnRlcicsIHByb2JhYmlsaXR5VG9FbnRlcik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3B0aW1hbEVkZ2UgPSBudWxsO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkNoYW5jZU5vZGUpIHtcbiAgICAgICAgICAgIG9wdGltYWxFZGdlID0gVXRpbHMubWF4Qnkobm9kZS5jaGlsZEVkZ2VzLCBlPT50aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgdmFyIGlzT3B0aW1hbCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG9wdGltYWxFZGdlKSB7XG4gICAgICAgICAgICAgICAgaXNPcHRpbWFsID0gdGhpcy5jb21wdXRlZFBheW9mZihvcHRpbWFsRWRnZS5jaGlsZE5vZGUpLmVxdWFscyh0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSk7XG4gICAgICAgICAgICB9IGVsc2UgaXNPcHRpbWFsID0gISEodGhpcy5zdWJ0cmFjdCh0aGlzLmNvbXB1dGVkUGF5b2ZmKG5vZGUpLCBwYXlvZmYpLmVxdWFscyh0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSkgfHwgIShub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKSk7XG5cbiAgICAgICAgICAgIGlmIChpc09wdGltYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU9wdGltYWwoZS5jaGlsZE5vZGUsIHRoaXMuYmFzZVBheW9mZihlKSwgdGhpcy5tdWx0aXBseShwcm9iYWJpbGl0eVRvRW50ZXIsIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScpKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtPYmplY3RpdmVSdWxlfSBmcm9tICcuL29iamVjdGl2ZS1ydWxlJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5cbi8qbWF4aS1taW4gcnVsZSovXG5leHBvcnQgY2xhc3MgTWF4aU1pblJ1bGUgZXh0ZW5kcyBPYmplY3RpdmVSdWxle1xuXG4gICAgc3RhdGljIE5BTUUgPSAnbWF4aS1taW4nO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKE1heGlNaW5SdWxlLk5BTUUsIHRydWUsIGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cblxuICAgIG1vZGlmeUNoYW5jZVByb2JhYmlsaXR5KGVkZ2VzLCBiZXN0Q2hpbGRQYXlvZmYsIGJlc3RDb3VudCwgd29yc3RDaGlsZFBheW9mZiwgd29yc3RDb3VudCl7XG4gICAgICAgIGVkZ2VzLmZvckVhY2goZT0+e1xuICAgICAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKGUpO1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JywgdGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSk+d29yc3RDaGlsZFBheW9mZiA/IDAuMCA6ICgxLjAvd29yc3RDb3VudCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAgcGF5b2ZmIC0gcGFyZW50IGVkZ2UgcGF5b2ZmXG4gICAgY29tcHV0ZU9wdGltYWwobm9kZSwgcGF5b2ZmID0gMCwgcHJvYmFiaWxpdHlUb0VudGVyID0gMSkge1xuICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLlRlcm1pbmFsTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ3Byb2JhYmlsaXR5VG9FbnRlcicsIHByb2JhYmlsaXR5VG9FbnRlcik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3B0aW1hbEVkZ2UgPSBudWxsO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkNoYW5jZU5vZGUpIHtcbiAgICAgICAgICAgIG9wdGltYWxFZGdlID0gVXRpbHMubWluQnkobm9kZS5jaGlsZEVkZ2VzLCBlPT50aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgdmFyIGlzT3B0aW1hbCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG9wdGltYWxFZGdlKSB7XG4gICAgICAgICAgICAgICAgaXNPcHRpbWFsID0gdGhpcy5jb21wdXRlZFBheW9mZihvcHRpbWFsRWRnZS5jaGlsZE5vZGUpLmVxdWFscyh0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSk7XG4gICAgICAgICAgICB9IGVsc2UgaXNPcHRpbWFsID0gISEodGhpcy5zdWJ0cmFjdCh0aGlzLmNvbXB1dGVkUGF5b2ZmKG5vZGUpLCBwYXlvZmYpLmVxdWFscyh0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSkgfHwgIShub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKSk7XG5cbiAgICAgICAgICAgIGlmIChpc09wdGltYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU9wdGltYWwoZS5jaGlsZE5vZGUsIHRoaXMuYmFzZVBheW9mZihlKSwgdGhpcy5tdWx0aXBseShwcm9iYWJpbGl0eVRvRW50ZXIsIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScpKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxufVxuIiwiaW1wb3J0IHtNdWx0aUNyaXRlcmlhUnVsZX0gZnJvbSBcIi4vbXVsdGktY3JpdGVyaWEtcnVsZVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBNaW5NYXhSdWxlIGV4dGVuZHMgTXVsdGlDcml0ZXJpYVJ1bGV7XG5cbiAgICBzdGF0aWMgTkFNRSA9ICdtaW4tbWF4JztcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICBzdXBlcihNaW5NYXhSdWxlLk5BTUUsIFstMSwgMV0sIGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7TXVsdGlDcml0ZXJpYVJ1bGV9IGZyb20gXCIuL211bHRpLWNyaXRlcmlhLXJ1bGVcIjtcblxuXG5leHBvcnQgY2xhc3MgTWluTWluUnVsZSBleHRlbmRzIE11bHRpQ3JpdGVyaWFSdWxle1xuXG4gICAgc3RhdGljIE5BTUUgPSAnbWluLW1pbic7XG5cbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKXtcbiAgICAgICAgc3VwZXIoTWluTWluUnVsZS5OQU1FLCBbLTEsIC0xXSwgZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtPYmplY3RpdmVSdWxlfSBmcm9tICcuL29iamVjdGl2ZS1ydWxlJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5cbi8qbWluaS1tYXggcnVsZSovXG5leHBvcnQgY2xhc3MgTWluaU1heFJ1bGUgZXh0ZW5kcyBPYmplY3RpdmVSdWxle1xuXG4gICAgc3RhdGljIE5BTUUgPSAnbWluaS1tYXgnO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKE1pbmlNYXhSdWxlLk5BTUUsIGZhbHNlLCBleHByZXNzaW9uRW5naW5lKTtcbiAgICB9XG5cbiAgICBtb2RpZnlDaGFuY2VQcm9iYWJpbGl0eShlZGdlcywgYmVzdENoaWxkUGF5b2ZmLCBiZXN0Q291bnQsIHdvcnN0Q2hpbGRQYXlvZmYsIHdvcnN0Q291bnQpe1xuICAgICAgICBlZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDb21wdXRlZFZhbHVlcyhlKTtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScsIHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpPGJlc3RDaGlsZFBheW9mZiA/IDAuMCA6ICgxLjAvYmVzdENvdW50KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICBwYXlvZmYgLSBwYXJlbnQgZWRnZSBwYXlvZmZcbiAgICBjb21wdXRlT3B0aW1hbChub2RlLCBwYXlvZmYgPSAwLCBwcm9iYWJpbGl0eVRvRW50ZXIgPSAxKSB7XG4gICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAncHJvYmFiaWxpdHlUb0VudGVyJywgcHJvYmFiaWxpdHlUb0VudGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvcHRpbWFsRWRnZSA9IG51bGw7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuQ2hhbmNlTm9kZSkge1xuICAgICAgICAgICAgb3B0aW1hbEVkZ2UgPSBVdGlscy5tYXhCeShub2RlLmNoaWxkRWRnZXMsIGU9PnRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICB2YXIgaXNPcHRpbWFsID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAob3B0aW1hbEVkZ2UpIHtcbiAgICAgICAgICAgICAgICBpc09wdGltYWwgPSB0aGlzLmNvbXB1dGVkUGF5b2ZmKG9wdGltYWxFZGdlLmNoaWxkTm9kZSkuZXF1YWxzKHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpc09wdGltYWwgPSAhISh0aGlzLnN1YnRyYWN0KHRoaXMuY29tcHV0ZWRQYXlvZmYobm9kZSksIHBheW9mZikuZXF1YWxzKHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpKSB8fCAhKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5EZWNpc2lvbk5vZGUpKTtcblxuICAgICAgICAgICAgaWYgKGlzT3B0aW1hbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlT3B0aW1hbChlLmNoaWxkTm9kZSwgdGhpcy5iYXNlUGF5b2ZmKGUpLCB0aGlzLm11bHRpcGx5KHByb2JhYmlsaXR5VG9FbnRlciwgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JykpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtPYmplY3RpdmVSdWxlfSBmcm9tICcuL29iamVjdGl2ZS1ydWxlJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5cbi8qbWluaS1taW4gcnVsZSovXG5leHBvcnQgY2xhc3MgTWluaU1pblJ1bGUgZXh0ZW5kcyBPYmplY3RpdmVSdWxle1xuXG4gICAgc3RhdGljIE5BTUUgPSAnbWluaS1taW4nO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKE1pbmlNaW5SdWxlLk5BTUUsIGZhbHNlLCBleHByZXNzaW9uRW5naW5lKTtcbiAgICB9XG5cbiAgICBtb2RpZnlDaGFuY2VQcm9iYWJpbGl0eShlZGdlcywgYmVzdENoaWxkUGF5b2ZmLCBiZXN0Q291bnQsIHdvcnN0Q2hpbGRQYXlvZmYsIHdvcnN0Q291bnQpe1xuICAgICAgICBlZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDb21wdXRlZFZhbHVlcyhlKTtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScsIHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpPndvcnN0Q2hpbGRQYXlvZmYgPyAwLjAgOiAoMS4wL3dvcnN0Q291bnQpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gIHBheW9mZiAtIHBhcmVudCBlZGdlIHBheW9mZlxuICAgIGNvbXB1dGVPcHRpbWFsKG5vZGUsIHBheW9mZiA9IDAsIHByb2JhYmlsaXR5VG9FbnRlciA9IDEpIHtcbiAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5UZXJtaW5hbE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdwcm9iYWJpbGl0eVRvRW50ZXInLCBwcm9iYWJpbGl0eVRvRW50ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wdGltYWxFZGdlID0gbnVsbDtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlKSB7XG4gICAgICAgICAgICBvcHRpbWFsRWRnZSA9IFV0aWxzLm1pbkJ5KG5vZGUuY2hpbGRFZGdlcywgZT0+dGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgIHZhciBpc09wdGltYWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChvcHRpbWFsRWRnZSkge1xuICAgICAgICAgICAgICAgIGlzT3B0aW1hbCA9IHRoaXMuY29tcHV0ZWRQYXlvZmYob3B0aW1hbEVkZ2UuY2hpbGROb2RlKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlzT3B0aW1hbCA9ICEhKHRoaXMuc3VidHJhY3QodGhpcy5jb21wdXRlZFBheW9mZihub2RlKSwgcGF5b2ZmKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpIHx8ICEobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZSkpO1xuXG4gICAgICAgICAgICBpZiAoaXNPcHRpbWFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVPcHRpbWFsKGUuY2hpbGROb2RlLCB0aGlzLmJhc2VQYXlvZmYoZSksIHRoaXMubXVsdGlwbHkocHJvYmFiaWxpdHlUb0VudGVyLCB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tIFwic2QtbW9kZWxcIjtcbmltcG9ydCB7T2JqZWN0aXZlUnVsZX0gZnJvbSBcIi4vb2JqZWN0aXZlLXJ1bGVcIjtcbmltcG9ydCB7UG9saWN5fSBmcm9tIFwiLi4vLi4vcG9saWNpZXMvcG9saWN5XCI7XG5cblxuZXhwb3J0IGNsYXNzIE11bHRpQ3JpdGVyaWFSdWxlIGV4dGVuZHMgT2JqZWN0aXZlUnVsZSB7XG5cbiAgICBjcml0ZXJpb24xV2VpZ2h0ID0gMTtcbiAgICBwYXlvZmZDb2VmZnMgPSBbMSwgLTFdO1xuXG4gICAgY29uc3RydWN0b3IobmFtZSwgcGF5b2ZmQ29lZmZzLCBleHByZXNzaW9uRW5naW5lKSB7XG4gICAgICAgIHN1cGVyKG5hbWUsIHRydWUsIGV4cHJlc3Npb25FbmdpbmUsIHRydWUpO1xuICAgICAgICB0aGlzLnBheW9mZkNvZWZmcyA9IHBheW9mZkNvZWZmcztcblxuICAgIH1cblxuICAgIHNldERlZmF1bHRDcml0ZXJpb24xV2VpZ2h0KGNyaXRlcmlvbjFXZWlnaHQpIHtcbiAgICAgICAgdGhpcy5jcml0ZXJpb24xV2VpZ2h0ID0gY3JpdGVyaW9uMVdlaWdodDtcbiAgICB9XG5cbiAgICAvLyBwYXlvZmYgLSBwYXJlbnQgZWRnZSBwYXlvZmYsIGFnZ3JlZ2F0ZWRQYXlvZmYgLSBhZ2dyZWdhdGVkIHBheW9mZiBhbG9uZyBwYXRoXG4gICAgY29tcHV0ZVBheW9mZihub2RlLCBwYXlvZmYgPSBbMCwgMF0sIGFnZ3JlZ2F0ZWRQYXlvZmYgPSBbMCwgMF0pIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuUGF5b2ZmID0gWzAsIDBdO1xuICAgICAgICBpZiAobm9kZS5jaGlsZEVkZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5EZWNpc2lvbk5vZGUpIHtcblxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYmVzdENoaWxkID0gLUluZmluaXR5O1xuXG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goKGUsIGkpPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZVBheW9mZnMgPSBbdGhpcy5iYXNlUGF5b2ZmKGUsIDApLCB0aGlzLmJhc2VQYXlvZmYoZSwgMSldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRQYXlvZmYgPSB0aGlzLmNvbXB1dGVQYXlvZmYoZS5jaGlsZE5vZGUsIGJhc2VQYXlvZmZzLCBbdGhpcy5hZGQoYmFzZVBheW9mZnNbMF0sIGFnZ3JlZ2F0ZWRQYXlvZmZbMF0pLCB0aGlzLmFkZChiYXNlUGF5b2Zmc1sxXSwgYWdncmVnYXRlZFBheW9mZlsxXSldKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQ29tYmluZWRQYXlvZmYgPSB0aGlzLmNWYWx1ZShlLmNoaWxkTm9kZSwgJ2NvbWJpbmVkUGF5b2ZmJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZENvbWJpbmVkUGF5b2ZmID4gYmVzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q2hpbGQgPSBjaGlsZENvbWJpbmVkUGF5b2ZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleGVzID0gW2ldO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJlc3RDaGlsZC5lcXVhbHMoY2hpbGRDb21iaW5lZFBheW9mZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWNpc2lvblBvbGljeSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlY2lzaW9uID0gUG9saWN5LmdldERlY2lzaW9uKHRoaXMuZGVjaXNpb25Qb2xpY3ksIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhlcyA9IFtkZWNpc2lvbi5kZWNpc2lvblZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goKGUsIGkpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScsIHNlbGVjdGVkSW5kZXhlcy5pbmRleE9mKGkpIDwgMCA/IDAuMCA6IDEuMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiYXNlUGF5b2ZmcyA9IFt0aGlzLmJhc2VQYXlvZmYoZSwgMCksIHRoaXMuYmFzZVBheW9mZihlLCAxKV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZVBheW9mZihlLmNoaWxkTm9kZSwgYmFzZVBheW9mZnMsIFt0aGlzLmFkZChiYXNlUGF5b2Zmc1swXSwgYWdncmVnYXRlZFBheW9mZlswXSksIHRoaXMuYWRkKGJhc2VQYXlvZmZzWzFdLCBhZ2dyZWdhdGVkUGF5b2ZmWzFdKV0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScsIHRoaXMuYmFzZVByb2JhYmlsaXR5KGUpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHN1bXdlaWdodCA9IDA7XG4gICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgIHN1bXdlaWdodCA9IHRoaXMuYWRkKHN1bXdlaWdodCwgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzdW13ZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5QYXlvZmYuZm9yRWFjaCgocCwgaSk9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXAgPSB0aGlzLmNWYWx1ZShlLmNoaWxkTm9kZSwgJ3BheW9mZlsnICsgaSArICddJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlblBheW9mZltpXSA9IHRoaXMuYWRkKHAsIHRoaXMubXVsdGlwbHkodGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JyksIGVwKS5kaXYoc3Vtd2VpZ2h0KSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgICAgIHBheW9mZi5mb3JFYWNoKChwLCBpKT0+IHtcbiAgICAgICAgICAgIHBheW9mZltpXSA9IHRoaXMuYWRkKHAsIGNoaWxkcmVuUGF5b2ZmW2ldKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKG5vZGUpO1xuXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnYWdncmVnYXRlZFBheW9mZicsIGFnZ3JlZ2F0ZWRQYXlvZmYpO1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ3Byb2JhYmlsaXR5VG9FbnRlcicsIDApOyAvL2luaXRpYWwgdmFsdWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdjaGlsZHJlblBheW9mZicsIGNoaWxkcmVuUGF5b2ZmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdjb21iaW5lZFBheW9mZicsIHRoaXMuY29tcHV0ZUNvbWJpbmVkUGF5b2ZmKHBheW9mZikpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNWYWx1ZShub2RlLCAncGF5b2ZmJywgcGF5b2ZmKTtcbiAgICB9XG5cbiAgICBjb21wdXRlQ29tYmluZWRQYXlvZmYocGF5b2ZmKXtcbiAgICAgICAgLy8gW2NyaXRlcmlvbiAxIGNvZWZmXSpbY3JpdGVyaW9uIDFdKlt3ZWlnaHRdK1tjcml0ZXJpb24gMiBjb2VmZl0qW2NyaXRlcmlvbiAyXVxuICAgICAgICBpZiAodGhpcy5jcml0ZXJpb24xV2VpZ2h0ID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbHkodGhpcy5wYXlvZmZDb2VmZnNbMF0sIHBheW9mZlswXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKHRoaXMubXVsdGlwbHkodGhpcy5wYXlvZmZDb2VmZnNbMF0sIHRoaXMubXVsdGlwbHkodGhpcy5jcml0ZXJpb24xV2VpZ2h0LCBwYXlvZmZbMF0pKSwgdGhpcy5tdWx0aXBseSh0aGlzLnBheW9mZkNvZWZmc1sxXSwgcGF5b2ZmWzFdKSk7XG4gICAgfVxuXG4gICAgLy8gIGNvbWJpbmVkUGF5b2ZmIC0gcGFyZW50IGVkZ2UgY29tYmluZWRQYXlvZmZcbiAgICBjb21wdXRlT3B0aW1hbChub2RlLCBjb21iaW5lZFBheW9mZiA9IDAsIHByb2JhYmlsaXR5VG9FbnRlciA9IDEpIHtcbiAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5UZXJtaW5hbE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdwcm9iYWJpbGl0eVRvRW50ZXInLCBwcm9iYWJpbGl0eVRvRW50ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN1YnRyYWN0KHRoaXMuY1ZhbHVlKG5vZGUsICdjb21iaW5lZFBheW9mZicpLCBjb21iaW5lZFBheW9mZikuZXF1YWxzKHRoaXMuY1ZhbHVlKGUuY2hpbGROb2RlLCAnY29tYmluZWRQYXlvZmYnKSkgfHwgIShub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlT3B0aW1hbChlLmNoaWxkTm9kZSwgdGhpcy5jb21wdXRlQ29tYmluZWRQYXlvZmYoW3RoaXMuYmFzZVBheW9mZihlLCAwKSwgdGhpcy5iYXNlUGF5b2ZmKGUsIDEpXSksIHRoaXMubXVsdGlwbHkocHJvYmFiaWxpdHlUb0VudGVyLCB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJpbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gXCJzZC1tb2RlbFwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuLi8uLi9wb2xpY2llcy9wb2xpY3lcIjtcblxuLypCYXNlIGNsYXNzIGZvciBvYmplY3RpdmUgcnVsZXMqL1xuZXhwb3J0IGNsYXNzIE9iamVjdGl2ZVJ1bGUge1xuICAgIG5hbWU7XG4gICAgZXhwcmVzc2lvbkVuZ2luZTtcblxuICAgIGRlY2lzaW9uUG9saWN5O1xuICAgIG1heGltaXphdGlvbjtcblxuICAgIHBheW9mZkluZGV4ID0gMDtcbiAgICBtdWx0aUNyaXRlcmlhID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBtYXhpbWl6YXRpb24sIGV4cHJlc3Npb25FbmdpbmUsIG11bHRpQ3JpdGVyaWE9ZmFsc2UpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5tYXhpbWl6YXRpb24gPSBtYXhpbWl6YXRpb247XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZSA9IGV4cHJlc3Npb25FbmdpbmU7XG4gICAgICAgIHRoaXMubXVsdGlDcml0ZXJpYSA9IG11bHRpQ3JpdGVyaWE7XG4gICAgfVxuXG4gICAgc2V0RGVjaXNpb25Qb2xpY3koZGVjaXNpb25Qb2xpY3kpIHtcbiAgICAgICAgdGhpcy5kZWNpc2lvblBvbGljeSA9IGRlY2lzaW9uUG9saWN5O1xuICAgIH1cblxuICAgIHNldFBheW9mZkluZGV4KHBheW9mZkluZGV4KSB7XG4gICAgICAgIHRoaXMucGF5b2ZmSW5kZXggPSBwYXlvZmZJbmRleDtcbiAgICB9XG5cbiAgICBjbGVhckRlY2lzaW9uUG9saWN5KCkge1xuICAgICAgICB0aGlzLmRlY2lzaW9uUG9saWN5ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBzaG91bGQgcmV0dXJuIGFycmF5IG9mIHNlbGVjdGVkIGNoaWxkcmVuIGluZGV4ZXNcbiAgICBtYWtlRGVjaXNpb24oZGVjaXNpb25Ob2RlLCBjaGlsZHJlblBheW9mZnMpIHtcbiAgICAgICAgdmFyIGJlc3Q7XG4gICAgICAgIGlmICh0aGlzLm1heGltaXphdGlvbikge1xuICAgICAgICAgICAgYmVzdCA9IHRoaXMubWF4KC4uLmNoaWxkcmVuUGF5b2Zmcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiZXN0ID0gdGhpcy5taW4oLi4uY2hpbGRyZW5QYXlvZmZzKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleGVzID0gW107XG4gICAgICAgIGNoaWxkcmVuUGF5b2Zmcy5mb3JFYWNoKChwLCBpKT0+IHtcbiAgICAgICAgICAgIGlmIChFeHByZXNzaW9uRW5naW5lLmNvbXBhcmUoYmVzdCwgcCkgPT0gMCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkSW5kZXhlcztcbiAgICB9XG5cbiAgICBfbWFrZURlY2lzaW9uKGRlY2lzaW9uTm9kZSwgY2hpbGRyZW5QYXlvZmZzKSB7XG4gICAgICAgIGlmICh0aGlzLmRlY2lzaW9uUG9saWN5KSB7XG4gICAgICAgICAgICB2YXIgZGVjaXNpb24gPSBQb2xpY3kuZ2V0RGVjaXNpb24odGhpcy5kZWNpc2lvblBvbGljeSwgZGVjaXNpb25Ob2RlKTtcbiAgICAgICAgICAgIGlmIChkZWNpc2lvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBbZGVjaXNpb24uZGVjaXNpb25WYWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubWFrZURlY2lzaW9uKGRlY2lzaW9uTm9kZSwgY2hpbGRyZW5QYXlvZmZzKTtcbiAgICB9XG5cbiAgICAvLyBleHRlbnNpb24gcG9pbnQgZm9yIGNoYW5naW5nIGNvbXB1dGVkIHByb2JhYmlsaXR5IG9mIGVkZ2VzIGluIGEgY2hhbmNlIG5vZGVcbiAgICBtb2RpZnlDaGFuY2VQcm9iYWJpbGl0eShlZGdlcywgYmVzdENoaWxkUGF5b2ZmLCBiZXN0Q291bnQsIHdvcnN0Q2hpbGRQYXlvZmYsIHdvcnN0Q291bnQpIHtcblxuICAgIH1cblxuICAgIC8vIHBheW9mZiAtIHBhcmVudCBlZGdlIHBheW9mZiwgYWdncmVnYXRlZFBheW9mZiAtIGFnZ3JlZ2F0ZWQgcGF5b2ZmIGFsb25nIHBhdGhcbiAgICBjb21wdXRlUGF5b2ZmKG5vZGUsIHBheW9mZiA9IDAsIGFnZ3JlZ2F0ZWRQYXlvZmYgPSAwKSB7XG4gICAgICAgIHZhciBjaGlsZHJlblBheW9mZiA9IDA7XG4gICAgICAgIGlmIChub2RlLmNoaWxkRWRnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXhlcyA9IHRoaXMuX21ha2VEZWNpc2lvbihub2RlLCBub2RlLmNoaWxkRWRnZXMubWFwKGU9PnRoaXMuY29tcHV0ZVBheW9mZihlLmNoaWxkTm9kZSwgdGhpcy5iYXNlUGF5b2ZmKGUpLCB0aGlzLmFkZCh0aGlzLmJhc2VQYXlvZmYoZSksIGFnZ3JlZ2F0ZWRQYXlvZmYpKSkpO1xuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKChlLCBpKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknLCBzZWxlY3RlZEluZGV4ZXMuaW5kZXhPZihpKSA8IDAgPyAwLjAgOiAxLjApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBiZXN0Q2hpbGQgPSAtSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgdmFyIGJlc3RDb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgdmFyIHdvcnN0Q2hpbGQgPSBJbmZpbml0eTtcbiAgICAgICAgICAgICAgICB2YXIgd29yc3RDb3VudCA9IDE7XG5cbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRQYXlvZmYgPSB0aGlzLmNvbXB1dGVQYXlvZmYoZS5jaGlsZE5vZGUsIHRoaXMuYmFzZVBheW9mZihlKSwgdGhpcy5hZGQodGhpcy5iYXNlUGF5b2ZmKGUpLCBhZ2dyZWdhdGVkUGF5b2ZmKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZFBheW9mZiA8IHdvcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcnN0Q2hpbGQgPSBjaGlsZFBheW9mZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcnN0Q291bnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkUGF5b2ZmLmVxdWFscyh3b3JzdENoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd29yc3RDb3VudCsrXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkUGF5b2ZmID4gYmVzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q2hpbGQgPSBjaGlsZFBheW9mZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RDb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGRQYXlvZmYuZXF1YWxzKGJlc3RDaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RDb3VudCsrXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScsIHRoaXMuYmFzZVByb2JhYmlsaXR5KGUpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGlmeUNoYW5jZVByb2JhYmlsaXR5KG5vZGUuY2hpbGRFZGdlcywgYmVzdENoaWxkLCBiZXN0Q291bnQsIHdvcnN0Q2hpbGQsIHdvcnN0Q291bnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc3Vtd2VpZ2h0ID0gMDtcbiAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICAgICAgc3Vtd2VpZ2h0ID0gdGhpcy5hZGQoc3Vtd2VpZ2h0LCB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGF5b2ZmLG5vZGUuY2hpbGRFZGdlcywnc3Vtd2VpZ2h0JyxzdW13ZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHN1bXdlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlblBheW9mZiA9IHRoaXMuYWRkKGNoaWxkcmVuUGF5b2ZmLCB0aGlzLm11bHRpcGx5KHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScpLCB0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSkuZGl2KHN1bXdlaWdodCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIHBheW9mZiA9IHRoaXMuYWRkKHBheW9mZiwgY2hpbGRyZW5QYXlvZmYpO1xuICAgICAgICB0aGlzLmNsZWFyQ29tcHV0ZWRWYWx1ZXMobm9kZSk7XG5cbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5UZXJtaW5hbE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdhZ2dyZWdhdGVkUGF5b2ZmJysgJ1snICsgdGhpcy5wYXlvZmZJbmRleCArICddJywgYWdncmVnYXRlZFBheW9mZik7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAncHJvYmFiaWxpdHlUb0VudGVyJywgMCk7IC8vaW5pdGlhbCB2YWx1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ2NoaWxkcmVuUGF5b2ZmJyArICdbJyArIHRoaXMucGF5b2ZmSW5kZXggKyAnXScsIGNoaWxkcmVuUGF5b2ZmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVkUGF5b2ZmKG5vZGUsIHBheW9mZik7XG4gICAgfVxuXG4gICAgLy8ga29sb3J1amUgb3B0eW1hbG5lIMWbY2llxbxraVxuICAgIGNvbXB1dGVPcHRpbWFsKG5vZGUpIHtcbiAgICAgICAgdGhyb3cgJ2NvbXB1dGVPcHRpbWFsIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3IgcnVsZTogJyArIHRoaXMubmFtZVxuICAgIH1cblxuICAgIC8qIGdldCBvciBzZXQgY29tcHV0ZWQgcGF5b2ZmKi9cbiAgICBjb21wdXRlZFBheW9mZihub2RlLCB2YWx1ZSl7XG4gICAgICAgIHJldHVybiB0aGlzLmNWYWx1ZShub2RlLCAncGF5b2ZmWycgKyB0aGlzLnBheW9mZkluZGV4ICsgJ10nLCB2YWx1ZSlcbiAgICB9XG5cbiAgICAvKkdldCBvciBzZXQgb2JqZWN0J3MgY29tcHV0ZWQgdmFsdWUgZm9yIGN1cnJlbnQgcnVsZSovXG4gICAgY1ZhbHVlKG9iamVjdCwgZmllbGRQYXRoLCB2YWx1ZSkge1xuICAgICAgICAvLyBpZihmaWVsZFBhdGgudHJpbSgpID09PSAncGF5b2ZmJyl7XG4gICAgICAgIC8vICAgICBmaWVsZFBhdGggKz0gJ1snICsgdGhpcy5wYXlvZmZJbmRleCArICddJztcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIHJldHVybiBvYmplY3QuY29tcHV0ZWRWYWx1ZSh0aGlzLm5hbWUsIGZpZWxkUGF0aCwgdmFsdWUpO1xuICAgIH1cblxuICAgIGJhc2VQcm9iYWJpbGl0eShlZGdlKSB7XG4gICAgICAgIHJldHVybiBlZGdlLmNvbXB1dGVkQmFzZVByb2JhYmlsaXR5KCk7XG4gICAgfVxuXG4gICAgYmFzZVBheW9mZihlZGdlLCBwYXlvZmZJbmRleCkge1xuICAgICAgICByZXR1cm4gZWRnZS5jb21wdXRlZEJhc2VQYXlvZmYodW5kZWZpbmVkLCBwYXlvZmZJbmRleCB8fCB0aGlzLnBheW9mZkluZGV4KTtcbiAgICB9XG5cbiAgICBjbGVhckNvbXB1dGVkVmFsdWVzKG9iamVjdCkge1xuICAgICAgICBvYmplY3QuY2xlYXJDb21wdXRlZFZhbHVlcyh0aGlzLm5hbWUpO1xuICAgIH1cblxuICAgIGFkZChhLCBiKSB7XG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLmFkZChhLCBiKVxuICAgIH1cblxuICAgIHN1YnRyYWN0KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUuc3VidHJhY3QoYSwgYilcbiAgICB9XG5cbiAgICBkaXZpZGUoYSwgYikge1xuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUoYSwgYilcbiAgICB9XG5cbiAgICBtdWx0aXBseShhLCBiKSB7XG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLm11bHRpcGx5KGEsIGIpXG4gICAgfVxuXG4gICAgbWF4KCkge1xuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS5tYXgoLi4uYXJndW1lbnRzKVxuICAgIH1cblxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUubWluKC4uLmFyZ3VtZW50cylcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSAnc2QtZXhwcmVzc2lvbi1lbmdpbmUnXG5pbXBvcnQge2xvZ30gZnJvbSAnc2QtdXRpbHMnXG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSBcIi4vb3BlcmF0aW9uXCI7XG5pbXBvcnQge1RyZWVWYWxpZGF0b3J9IGZyb20gXCIuLi92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yXCI7XG5cbi8qU3VidHJlZSBmbGlwcGluZyBvcGVyYXRpb24qL1xuZXhwb3J0IGNsYXNzIEZsaXBTdWJ0cmVlIGV4dGVuZHMgT3BlcmF0aW9ue1xuXG4gICAgc3RhdGljICROQU1FID0gJ2ZsaXBTdWJ0cmVlJztcbiAgICBkYXRhO1xuICAgIGV4cHJlc3Npb25FbmdpbmU7XG5cbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBleHByZXNzaW9uRW5naW5lKSB7XG4gICAgICAgIHN1cGVyKEZsaXBTdWJ0cmVlLiROQU1FKTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbkVuZ2luZTtcbiAgICAgICAgdGhpcy50cmVlVmFsaWRhdG9yID0gbmV3IFRyZWVWYWxpZGF0b3IoZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxuXG4gICAgaXNBcHBsaWNhYmxlKG9iamVjdCl7XG4gICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlXG4gICAgfVxuXG4gICAgY2FuUGVyZm9ybShub2RlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0FwcGxpY2FibGUobm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy50cmVlVmFsaWRhdG9yLnZhbGlkYXRlKHRoaXMuZGF0YS5nZXRBbGxOb2Rlc0luU3VidHJlZShub2RlKSkuaXNWYWxpZCgpKSB7IC8vY2hlY2sgaWYgdGhlIHdob2xlIHN1YnRyZWUgaXMgcHJvcGVyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobm9kZS5jaGlsZEVkZ2VzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdmFyIGdyYW5kY2hpbGRyZW5OdW1iZXIgPSBudWxsO1xuICAgICAgICB2YXIgZ3JhbmRjaGlsZHJlbkVkZ2VMYWJlbHMgPSBbXTtcbiAgICAgICAgdmFyIGNoaWxkcmVuRWRnZUxhYmVsc1NldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgdmFyIGdyYW5kY2hpbGRyZW5FZGdlTGFiZWxzU2V0O1xuICAgICAgICBpZiAoIW5vZGUuY2hpbGRFZGdlcy5ldmVyeShlPT4ge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gZS5jaGlsZE5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKCEoY2hpbGQgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuRWRnZUxhYmVsc1NldC5oYXMoZS5uYW1lLnRyaW0oKSkpIHsgLy8gZWRnZSBsYWJlbHMgc2hvdWxkIGJlIHVuaXF1ZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoaWxkcmVuRWRnZUxhYmVsc1NldC5hZGQoZS5uYW1lLnRyaW0oKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ3JhbmRjaGlsZHJlbk51bWJlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBncmFuZGNoaWxkcmVuTnVtYmVyID0gY2hpbGQuY2hpbGRFZGdlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChncmFuZGNoaWxkcmVuTnVtYmVyIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmNoaWxkRWRnZXMuZm9yRWFjaChnZT0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyYW5kY2hpbGRyZW5FZGdlTGFiZWxzLnB1c2goZ2UubmFtZS50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBncmFuZGNoaWxkcmVuRWRnZUxhYmVsc1NldCA9IG5ldyBTZXQoZ3JhbmRjaGlsZHJlbkVkZ2VMYWJlbHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChncmFuZGNoaWxkcmVuRWRnZUxhYmVsc1NldC5zaXplICE9PSBncmFuZGNoaWxkcmVuRWRnZUxhYmVscy5sZW5ndGgpIHsgLy9ncmFuZGNoaWxkcmVuIGVkZ2UgbGFiZWxzIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZEVkZ2VzLmxlbmd0aCAhPSBncmFuZGNoaWxkcmVuTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNoaWxkLmNoaWxkRWRnZXMuZXZlcnkoKGdlLCBpKT0+Z3JhbmRjaGlsZHJlbkVkZ2VMYWJlbHNbaV0gPT09IGdlLm5hbWUudHJpbSgpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgIH0pKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHBlcmZvcm0ocm9vdCkge1xuXG4gICAgICAgIHZhciByb290Q2xvbmUgPSB0aGlzLmRhdGEuY2xvbmVTdWJ0cmVlKHJvb3QsIHRydWUpO1xuICAgICAgICB2YXIgb2xkQ2hpbGRyZW5OdW1iZXIgPSByb290LmNoaWxkRWRnZXMubGVuZ3RoO1xuICAgICAgICB2YXIgb2xkR3JhbmRDaGlsZHJlbk51bWJlciA9IHJvb3QuY2hpbGRFZGdlc1swXS5jaGlsZE5vZGUuY2hpbGRFZGdlcy5sZW5ndGg7XG5cbiAgICAgICAgdmFyIGNoaWxkcmVuTnVtYmVyID0gb2xkR3JhbmRDaGlsZHJlbk51bWJlcjtcbiAgICAgICAgdmFyIGdyYW5kQ2hpbGRyZW5OdW1iZXIgPSBvbGRDaGlsZHJlbk51bWJlcjtcblxuICAgICAgICB2YXIgY2FsbGJhY2tzRGlzYWJsZWQgPSB0aGlzLmRhdGEuY2FsbGJhY2tzRGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuZGF0YS5jYWxsYmFja3NEaXNhYmxlZCA9IHRydWU7XG5cblxuICAgICAgICB2YXIgY2hpbGRYID0gcm9vdC5jaGlsZEVkZ2VzWzBdLmNoaWxkTm9kZS5sb2NhdGlvbi54O1xuICAgICAgICB2YXIgdG9wWSA9IHJvb3QuY2hpbGRFZGdlc1swXS5jaGlsZE5vZGUuY2hpbGRFZGdlc1swXS5jaGlsZE5vZGUubG9jYXRpb24ueTtcbiAgICAgICAgdmFyIGJvdHRvbVkgPSByb290LmNoaWxkRWRnZXNbb2xkQ2hpbGRyZW5OdW1iZXIgLSAxXS5jaGlsZE5vZGUuY2hpbGRFZGdlc1tvbGRHcmFuZENoaWxkcmVuTnVtYmVyIC0gMV0uY2hpbGROb2RlLmxvY2F0aW9uLnk7XG5cbiAgICAgICAgdmFyIGV4dGVudFkgPSBib3R0b21ZIC0gdG9wWTtcbiAgICAgICAgdmFyIHN0ZXBZID0gZXh0ZW50WSAvIChjaGlsZHJlbk51bWJlciArIDEpO1xuXG4gICAgICAgIHJvb3QuY2hpbGRFZGdlcy5zbGljZSgpLmZvckVhY2goZT0+IHRoaXMuZGF0YS5yZW1vdmVOb2RlKGUuY2hpbGROb2RlKSk7XG5cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTnVtYmVyOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IG5ldyBtb2RlbC5DaGFuY2VOb2RlKG5ldyBtb2RlbC5Qb2ludChjaGlsZFgsIHRvcFkgKyAoaSArIDEpICogc3RlcFkpKTtcbiAgICAgICAgICAgIHZhciBlZGdlID0gdGhpcy5kYXRhLmFkZE5vZGUoY2hpbGQsIHJvb3QpO1xuICAgICAgICAgICAgZWRnZS5uYW1lID0gcm9vdENsb25lLmNoaWxkRWRnZXNbMF0uY2hpbGROb2RlLmNoaWxkRWRnZXNbaV0ubmFtZTtcblxuICAgICAgICAgICAgZWRnZS5wcm9iYWJpbGl0eSA9IDA7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ3JhbmRDaGlsZHJlbk51bWJlcjsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdyYW5kQ2hpbGQgPSByb290Q2xvbmUuY2hpbGRFZGdlc1tqXS5jaGlsZE5vZGUuY2hpbGRFZGdlc1tpXS5jaGlsZE5vZGU7XG5cblxuICAgICAgICAgICAgICAgIHZhciBncmFuZENoaWxkRWRnZSA9IHRoaXMuZGF0YS5hdHRhY2hTdWJ0cmVlKGdyYW5kQ2hpbGQsIGNoaWxkKTtcbiAgICAgICAgICAgICAgICBncmFuZENoaWxkRWRnZS5uYW1lID0gcm9vdENsb25lLmNoaWxkRWRnZXNbal0ubmFtZTtcbiAgICAgICAgICAgICAgICBncmFuZENoaWxkRWRnZS5wYXlvZmYgPSBbXG4gICAgICAgICAgICAgICAgICAgIEV4cHJlc3Npb25FbmdpbmUuYWRkKHJvb3RDbG9uZS5jaGlsZEVkZ2VzW2pdLmNvbXB1dGVkQmFzZVBheW9mZih1bmRlZmluZWQsIDApLCByb290Q2xvbmUuY2hpbGRFZGdlc1tqXS5jaGlsZE5vZGUuY2hpbGRFZGdlc1tpXS5jb21wdXRlZEJhc2VQYXlvZmYodW5kZWZpbmVkLCAwKSksXG4gICAgICAgICAgICAgICAgICAgIEV4cHJlc3Npb25FbmdpbmUuYWRkKHJvb3RDbG9uZS5jaGlsZEVkZ2VzW2pdLmNvbXB1dGVkQmFzZVBheW9mZih1bmRlZmluZWQsIDEpLCByb290Q2xvbmUuY2hpbGRFZGdlc1tqXS5jaGlsZE5vZGUuY2hpbGRFZGdlc1tpXS5jb21wdXRlZEJhc2VQYXlvZmYodW5kZWZpbmVkLCAxKSksXG4gICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgICAgIGdyYW5kQ2hpbGRFZGdlLnByb2JhYmlsaXR5ID0gRXhwcmVzc2lvbkVuZ2luZS5tdWx0aXBseShyb290Q2xvbmUuY2hpbGRFZGdlc1tqXS5jb21wdXRlZEJhc2VQcm9iYWJpbGl0eSgpLCByb290Q2xvbmUuY2hpbGRFZGdlc1tqXS5jaGlsZE5vZGUuY2hpbGRFZGdlc1tpXS5jb21wdXRlZEJhc2VQcm9iYWJpbGl0eSgpKTtcbiAgICAgICAgICAgICAgICBlZGdlLnByb2JhYmlsaXR5ID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQoZWRnZS5wcm9iYWJpbGl0eSwgZ3JhbmRDaGlsZEVkZ2UucHJvYmFiaWxpdHkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGl2aWRlR3JhbmRDaGlsZEVkZ2VQcm9iYWJpbGl0eSA9IHAgPT4gRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUocCwgZWRnZS5wcm9iYWJpbGl0eSk7XG4gICAgICAgICAgICBpZiAoZWRnZS5wcm9iYWJpbGl0eS5lcXVhbHMoMCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvYiA9IEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKDEsIGdyYW5kQ2hpbGRyZW5OdW1iZXIpO1xuICAgICAgICAgICAgICAgIGRpdmlkZUdyYW5kQ2hpbGRFZGdlUHJvYmFiaWxpdHkgPSBwID0+IHByb2I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcm9iYWJpbGl0eVN1bSA9IDAuMDtcbiAgICAgICAgICAgIGNoaWxkLmNoaWxkRWRnZXMuZm9yRWFjaChncmFuZENoaWxkRWRnZT0+IHtcbiAgICAgICAgICAgICAgICBncmFuZENoaWxkRWRnZS5wcm9iYWJpbGl0eSA9IGRpdmlkZUdyYW5kQ2hpbGRFZGdlUHJvYmFiaWxpdHkoZ3JhbmRDaGlsZEVkZ2UucHJvYmFiaWxpdHkpO1xuICAgICAgICAgICAgICAgIHByb2JhYmlsaXR5U3VtID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQocHJvYmFiaWxpdHlTdW0sIGdyYW5kQ2hpbGRFZGdlLnByb2JhYmlsaXR5KTtcbiAgICAgICAgICAgICAgICBncmFuZENoaWxkRWRnZS5wcm9iYWJpbGl0eSA9IHRoaXMuZXhwcmVzc2lvbkVuZ2luZS5zZXJpYWxpemUoZ3JhbmRDaGlsZEVkZ2UucHJvYmFiaWxpdHkpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5fbm9ybWFsaXplUHJvYmFiaWxpdGllc0FmdGVyRmxpcChjaGlsZC5jaGlsZEVkZ2VzLCBwcm9iYWJpbGl0eVN1bSk7XG4gICAgICAgICAgICBlZGdlLnByb2JhYmlsaXR5ID0gdGhpcy5leHByZXNzaW9uRW5naW5lLnNlcmlhbGl6ZShlZGdlLnByb2JhYmlsaXR5KVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX25vcm1hbGl6ZVByb2JhYmlsaXRpZXNBZnRlckZsaXAocm9vdC5jaGlsZEVkZ2VzKTtcblxuXG4gICAgICAgIHRoaXMuZGF0YS5jYWxsYmFja3NEaXNhYmxlZCA9IGNhbGxiYWNrc0Rpc2FibGVkO1xuICAgICAgICB0aGlzLmRhdGEuX2ZpcmVOb2RlQWRkZWRDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIF9ub3JtYWxpemVQcm9iYWJpbGl0aWVzQWZ0ZXJGbGlwKGNoaWxkRWRnZXMsIHByb2JhYmlsaXR5U3VtKXtcbiAgICAgICAgaWYoIXByb2JhYmlsaXR5U3VtKXtcbiAgICAgICAgICAgIHByb2JhYmlsaXR5U3VtID0gMC4wO1xuICAgICAgICAgICAgY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICAgICAgcHJvYmFiaWxpdHlTdW0gPSBFeHByZXNzaW9uRW5naW5lLmFkZChwcm9iYWJpbGl0eVN1bSwgZS5wcm9iYWJpbGl0eSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByb2JhYmlsaXR5U3VtLmVxdWFscygxKSkge1xuICAgICAgICAgICAgbG9nLmluZm8oJ1N1bSBvZiB0aGUgcHJvYmFiaWxpdGllcyBpbiBjaGlsZCBub2RlcyBpcyBub3QgZXF1YWwgdG8gMSA6ICcsIHByb2JhYmlsaXR5U3VtKTtcbiAgICAgICAgICAgIHZhciBuZXdQcm9iYWJpbGl0eVN1bSA9IDAuMDtcbiAgICAgICAgICAgIHZhciBjZiA9IDEwMDAwMDAwMDAwMDA7IC8vMTBeMTJcbiAgICAgICAgICAgIHZhciBwcmVjID0gMTI7XG4gICAgICAgICAgICBjaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgICAgICBlLnByb2JhYmlsaXR5ID0gcGFyc2VJbnQoRXhwcmVzc2lvbkVuZ2luZS5yb3VuZChlLnByb2JhYmlsaXR5LCBwcmVjKSAqIGNmKTtcbiAgICAgICAgICAgICAgICBuZXdQcm9iYWJpbGl0eVN1bSA9IG5ld1Byb2JhYmlsaXR5U3VtICsgZS5wcm9iYWJpbGl0eTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHJlc3QgPSBjZiAtIG5ld1Byb2JhYmlsaXR5U3VtO1xuICAgICAgICAgICAgbG9nLmluZm8oJ05vcm1hbGl6aW5nIHdpdGggcm91bmRpbmcgdG8gcHJlY2lzaW9uOiAnICsgcHJlYywgcmVzdCk7XG4gICAgICAgICAgICBjaGlsZEVkZ2VzWzBdLnByb2JhYmlsaXR5ID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQocmVzdCwgY2hpbGRFZGdlc1swXS5wcm9iYWJpbGl0eSk7XG4gICAgICAgICAgICBuZXdQcm9iYWJpbGl0eVN1bSA9IDAuMDtcbiAgICAgICAgICAgIGNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgIGUucHJvYmFiaWxpdHkgPSB0aGlzLmV4cHJlc3Npb25FbmdpbmUuc2VyaWFsaXplKEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKHBhcnNlSW50KGUucHJvYmFiaWxpdHkpLCBjZikpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiXG4vKkJhc2UgY2xhc3MgZm9yIGNvbXBsZXggb3BlcmF0aW9ucyBvbiB0cmVlIHN0cnVjdHVyZSovXG5leHBvcnQgY2xhc3MgT3BlcmF0aW9ue1xuXG4gICAgbmFtZTtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWUpe1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cblxuICAgIC8vY2hlY2sgaWYgb3BlcmF0aW9uIGlzIHBvdGVudGlhbGx5IGFwcGxpY2FibGUgZm9yIG9iamVjdFxuICAgIGlzQXBwbGljYWJsZSgpe1xuICAgICAgICB0aHJvdyAnaXNBcHBsaWNhYmxlIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igb3BlcmF0aW9uOiAnK3RoaXMubmFtZVxuICAgIH1cblxuICAgIC8vY2hlY2sgaWYgY2FuIHBlcmZvcm0gb3BlcmF0aW9uIGZvciBhcHBsaWNhYmxlIG9iamVjdFxuICAgIGNhblBlcmZvcm0ob2JqZWN0KXtcbiAgICAgICAgdGhyb3cgJ2NhblBlcmZvcm0gZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIGZvciBvcGVyYXRpb246ICcrdGhpcy5uYW1lXG4gICAgfVxuXG4gICAgcGVyZm9ybShvYmplY3Qpe1xuICAgICAgICB0aHJvdyAncGVyZm9ybSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIG9wZXJhdGlvbjogJyt0aGlzLm5hbWVcbiAgICB9XG5cblxufVxuIiwiaW1wb3J0IHtGbGlwU3VidHJlZX0gZnJvbSBcIi4vZmxpcC1zdWJ0cmVlXCI7XG5cblxuZXhwb3J0IGNsYXNzIE9wZXJhdGlvbnNNYW5hZ2VyIHtcblxuICAgIG9wZXJhdGlvbnMgPSBbXTtcbiAgICBvcGVyYXRpb25CeU5hbWUgPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmUgPSBleHByZXNzaW9uRW5naW5lO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyT3BlcmF0aW9uKG5ldyBGbGlwU3VidHJlZShkYXRhLCBleHByZXNzaW9uRW5naW5lKSk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJPcGVyYXRpb24ob3BlcmF0aW9uKXtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zLnB1c2gob3BlcmF0aW9uKTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25CeU5hbWVbb3BlcmF0aW9uLm5hbWVdID0gb3BlcmF0aW9uO1xuICAgIH1cblxuXG4gICAgZ2V0T3BlcmF0aW9uQnlOYW1lKG5hbWUpe1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25CeU5hbWVbbmFtZV07XG4gICAgfVxuXG4gICAgb3BlcmF0aW9uc0Zvck9iamVjdChvYmplY3Qpe1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zLmZpbHRlcihvcD0+b3AuaXNBcHBsaWNhYmxlKG9iamVjdCkpXG4gICAgfVxuXG4gICAgc2V0RGF0YShkYXRhKXtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zLmZvckVhY2gobyA9PiBvLmRhdGEgPSBkYXRhKVxuICAgIH1cbn1cbiIsIlxuZXhwb3J0IGNsYXNzIERlY2lzaW9ue1xuICAgIG5vZGU7XG4gICAgZGVjaXNpb25WYWx1ZTsgLy9pbmRleCBvZiAgc2VsZWN0ZWQgZWRnZVxuICAgIGNoaWxkcmVuID0gW107XG4gICAga2V5O1xuXG4gICAgY29uc3RydWN0b3Iobm9kZSwgZGVjaXNpb25WYWx1ZSkge1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLmRlY2lzaW9uVmFsdWUgPSBkZWNpc2lvblZhbHVlO1xuICAgICAgICB0aGlzLmtleSA9IERlY2lzaW9uLmdlbmVyYXRlS2V5KHRoaXMpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZW5lcmF0ZUtleShkZWNpc2lvbiwga2V5UHJvcGVydHk9J2lkJyl7XG4gICAgICAgIHZhciBlID0gZGVjaXNpb24ubm9kZS5jaGlsZEVkZ2VzW2RlY2lzaW9uLmRlY2lzaW9uVmFsdWVdO1xuICAgICAgICB2YXIga2V5ID0gZGVjaXNpb24ubm9kZVtrZXlQcm9wZXJ0eV0rXCI6XCIrKGVba2V5UHJvcGVydHldPyBlW2tleVByb3BlcnR5XSA6IGRlY2lzaW9uLmRlY2lzaW9uVmFsdWUrMSk7XG4gICAgICAgIHJldHVybiBrZXkucmVwbGFjZSgvXFxuL2csICcgJyk7XG4gICAgfVxuXG4gICAgYWRkRGVjaXNpb24obm9kZSwgZGVjaXNpb25WYWx1ZSl7XG4gICAgICAgIHZhciBkZWNpc2lvbiA9IG5ldyBEZWNpc2lvbihub2RlLCBkZWNpc2lvblZhbHVlKTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGRlY2lzaW9uKTtcbiAgICAgICAgdGhpcy5rZXkgPSBEZWNpc2lvbi5nZW5lcmF0ZUtleSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGRlY2lzaW9uO1xuICAgIH1cblxuICAgIGdldERlY2lzaW9uKGRlY2lzaW9uTm9kZSl7XG4gICAgICAgIHJldHVybiBEZWNpc2lvbi5nZXREZWNpc2lvbih0aGlzLCBkZWNpc2lvbk5vZGUpXG4gICAgfVxuXG4gICAgc3RhdGljIGdldERlY2lzaW9uKGRlY2lzaW9uLCBkZWNpc2lvbk5vZGUpe1xuICAgICAgICBpZihkZWNpc2lvbi5ub2RlPT09ZGVjaXNpb25Ob2RlIHx8IGRlY2lzaW9uLm5vZGUuaWQgPT09IGRlY2lzaW9uTm9kZS5pZCl7XG4gICAgICAgICAgICByZXR1cm4gZGVjaXNpb247XG4gICAgICAgIH1cbiAgICAgICAgZm9yKHZhciBpPTA7IGk8ZGVjaXNpb24uY2hpbGRyZW4ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdmFyIGQgPSBEZWNpc2lvbi5nZXREZWNpc2lvbihkZWNpc2lvbi5jaGlsZHJlbltpXSwgZGVjaXNpb25Ob2RlKTtcbiAgICAgICAgICAgIGlmKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHRvRGVjaXNpb25TdHJpbmcoZGVjaXNpb24sIGV4dGVuZGVkPWZhbHNlLCBrZXlQcm9wZXJ0eT0nbmFtZScsIGluZGVudCA9ICcnKXtcblxuICAgICAgICB2YXIgcmVzID0gRGVjaXNpb24uZ2VuZXJhdGVLZXkoZGVjaXNpb24sIGtleVByb3BlcnR5KTtcbiAgICAgICAgdmFyIGNoaWxkcmVuUmVzID0gXCJcIjtcblxuICAgICAgICBkZWNpc2lvbi5jaGlsZHJlbi5mb3JFYWNoKGQ9PntcbiAgICAgICAgICAgIGlmKGNoaWxkcmVuUmVzKXtcbiAgICAgICAgICAgICAgICBpZihleHRlbmRlZCl7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVzICs9ICdcXG4nK2luZGVudDtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5SZXMgKz0gXCIsIFwiXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZHJlblJlcyArPSBEZWNpc2lvbi50b0RlY2lzaW9uU3RyaW5nKGQsZXh0ZW5kZWQsa2V5UHJvcGVydHksIGluZGVudCsnXFx0JylcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKGRlY2lzaW9uLmNoaWxkcmVuLmxlbmd0aCl7XG4gICAgICAgICAgICBpZihleHRlbmRlZCl7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5SZXMgPSAgJ1xcbicraW5kZW50ICtjaGlsZHJlblJlcztcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVzID0gXCIgLSAoXCIgKyBjaGlsZHJlblJlcyArIFwiKVwiO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcytjaGlsZHJlblJlcztcbiAgICB9XG5cbiAgICB0b0RlY2lzaW9uU3RyaW5nKGluZGVudD1mYWxzZSl7XG4gICAgICAgIHJldHVybiBEZWNpc2lvbi50b0RlY2lzaW9uU3RyaW5nKHRoaXMsIGluZGVudClcbiAgICB9XG59XG4iLCJpbXBvcnQge1BvbGljeX0gZnJvbSBcIi4vcG9saWN5XCI7XG5pbXBvcnQge2RvbWFpbiBhcyBtb2RlbH0gZnJvbSAnc2QtbW9kZWwnXG5pbXBvcnQge1V0aWxzfSBmcm9tICdzZC11dGlscydcbmltcG9ydCB7RGVjaXNpb259IGZyb20gXCIuL2RlY2lzaW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2xpY2llc0NvbGxlY3RvcntcbiAgICBwb2xpY2llcyA9IFtdO1xuICAgIHJ1bGVOYW1lPWZhbHNlO1xuXG4gICAgY29uc3RydWN0b3Iocm9vdCwgb3B0aW1hbEZvclJ1bGVOYW1lKXtcbiAgICAgICAgdGhpcy5ydWxlTmFtZSA9IG9wdGltYWxGb3JSdWxlTmFtZTtcbiAgICAgICAgdGhpcy5jb2xsZWN0KHJvb3QpLmZvckVhY2goKGRlY2lzaW9ucyxpKT0+e1xuICAgICAgICAgICAgdGhpcy5wb2xpY2llcy5wdXNoKG5ldyBQb2xpY3koXCIjXCIrKGkrMSksIGRlY2lzaW9ucykpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYodGhpcy5wb2xpY2llcy5sZW5ndGg9PT0xKXtcbiAgICAgICAgICAgIHRoaXMucG9saWNpZXNbMF0uaWQgPSBcImRlZmF1bHRcIlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29sbGVjdChyb290KXtcbiAgICAgICAgdmFyIG5vZGVRdWV1ZSA9IFtyb290XTtcbiAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgIHZhciBkZWNpc2lvbk5vZGVzID0gW107XG4gICAgICAgIHdoaWxlKG5vZGVRdWV1ZS5sZW5ndGgpe1xuICAgICAgICAgICAgbm9kZSA9IG5vZGVRdWV1ZS5zaGlmdCgpO1xuXG4gICAgICAgICAgICBpZih0aGlzLnJ1bGVOYW1lICYmICFub2RlLmNvbXB1dGVkVmFsdWUodGhpcy5ydWxlTmFtZSwgJ29wdGltYWwnKSl7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5EZWNpc2lvbk5vZGUpe1xuICAgICAgICAgICAgICAgIGRlY2lzaW9uTm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goKGVkZ2UsIGkpPT57XG4gICAgICAgICAgICAgICAgbm9kZVF1ZXVlLnB1c2goZWRnZS5jaGlsZE5vZGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFV0aWxzLmNhcnRlc2lhblByb2R1Y3RPZihkZWNpc2lvbk5vZGVzLm1hcCgoZGVjaXNpb25Ob2RlKT0+e1xuICAgICAgICAgICAgdmFyIGRlY2lzaW9ucz0gW107XG4gICAgICAgICAgICBkZWNpc2lvbk5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKChlZGdlLCBpKT0+e1xuXG4gICAgICAgICAgICAgICAgaWYodGhpcy5ydWxlTmFtZSAmJiAhZWRnZS5jb21wdXRlZFZhbHVlKHRoaXMucnVsZU5hbWUsICdvcHRpbWFsJykpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkRGVjaXNpb25zID0gdGhpcy5jb2xsZWN0KGVkZ2UuY2hpbGROb2RlKTsgLy9hbGwgcG9zc2libGUgY2hpbGQgZGVjaXNpb25zIChjYXJ0ZXNpYW4pXG4gICAgICAgICAgICAgICAgY2hpbGREZWNpc2lvbnMuZm9yRWFjaChjZD0+e1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVjaXNpb24gPSBuZXcgRGVjaXNpb24oZGVjaXNpb25Ob2RlLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgZGVjaXNpb25zLnB1c2goZGVjaXNpb24pO1xuICAgICAgICAgICAgICAgICAgICBkZWNpc2lvbi5jaGlsZHJlbiA9IGNkO1xuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlY2lzaW9ucztcbiAgICAgICAgfSkpO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHtEZWNpc2lvbn0gZnJvbSBcIi4vZGVjaXNpb25cIjtcblxuZXhwb3J0IGNsYXNzIFBvbGljeXtcbiAgICBpZDtcbiAgICBkZWNpc2lvbnMgPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKGlkLCBkZWNpc2lvbnMpe1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuZGVjaXNpb25zID0gZGVjaXNpb25zIHx8IFtdO1xuICAgICAgICB0aGlzLmtleSA9IFBvbGljeS5nZW5lcmF0ZUtleSh0aGlzKTtcbiAgICB9XG5cbiAgICBhZGREZWNpc2lvbihub2RlLCBkZWNpc2lvblZhbHVlKXtcbiAgICAgICAgdmFyIGRlY2lzaW9uID0gbmV3IERlY2lzaW9uKG5vZGUsIGRlY2lzaW9uVmFsdWUpO1xuICAgICAgICB0aGlzLmRlY2lzaW9ucyAucHVzaChkZWNpc2lvbik7XG4gICAgICAgIHRoaXMua2V5ID0gUG9saWN5LmdlbmVyYXRlS2V5KHRoaXMpO1xuICAgICAgICByZXR1cm4gZGVjaXNpb247XG4gICAgfVxuXG4gICAgc3RhdGljIGdlbmVyYXRlS2V5KHBvbGljeSl7XG4gICAgICAgIHZhciBrZXkgPSBcIlwiO1xuICAgICAgICBwb2xpY3kuZGVjaXNpb25zLmZvckVhY2goZD0+a2V5Kz0oa2V5PyBcIiZcIjogXCJcIikrZC5rZXkpO1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgIH1cblxuICAgIGVxdWFscyhwb2xpY3ksIGlnbm9yZUlkPXRydWUpe1xuICAgICAgICBpZih0aGlzLmtleSAhPSBwb2xpY3kua2V5KXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpZ25vcmVJZCB8fCB0aGlzLmlkID09PSBwb2xpY3kuaWQ7XG4gICAgfVxuXG4gICAgZ2V0RGVjaXNpb24oZGVjaXNpb25Ob2RlKXtcbiAgICAgICAgcmV0dXJuIFBvbGljeS5nZXREZWNpc2lvbih0aGlzLCBkZWNpc2lvbk5vZGUpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXREZWNpc2lvbihwb2xpY3ksIGRlY2lzaW9uTm9kZSl7XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPHBvbGljeS5kZWNpc2lvbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdmFyIGRlY2lzaW9uID0gRGVjaXNpb24uZ2V0RGVjaXNpb24ocG9saWN5LmRlY2lzaW9uc1tpXSwgZGVjaXNpb25Ob2RlKTtcbiAgICAgICAgICAgIGlmKGRlY2lzaW9uKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVjaXNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3RhdGljIHRvUG9saWN5U3RyaW5nKHBvbGljeSwgZXh0ZW5kZWQ9ZmFsc2UsIHByZXBlbmRJZD1mYWxzZSl7XG5cbiAgICAgICAgdmFyIHJlcyA9IFwiXCI7XG4gICAgICAgIHBvbGljeS5kZWNpc2lvbnMuZm9yRWFjaChkPT57XG4gICAgICAgICAgICBpZihyZXMpe1xuICAgICAgICAgICAgICAgIGlmKGV4dGVuZGVkKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IFwiXFxuXCJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IFwiLCBcIlxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMgKz0gRGVjaXNpb24udG9EZWNpc2lvblN0cmluZyhkLCBleHRlbmRlZCwgJ25hbWUnLCAnXFx0Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZihwcmVwZW5kSWQgJiYgcG9saWN5LmlkIT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHJldHVybiBwb2xpY3kuaWQrXCIgXCIrcmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG5cbiAgICB0b1BvbGljeVN0cmluZyhpbmRlbnQ9ZmFsc2Upe1xuICAgICAgICByZXR1cm4gUG9saWN5LnRvUG9saWN5U3RyaW5nKHRoaXMsIGluZGVudClcbiAgICB9XG5cblxufVxuIiwiaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tICdzZC1leHByZXNzaW9uLWVuZ2luZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG5cbmV4cG9ydCBjbGFzcyBNY2RtV2VpZ2h0VmFsdWVWYWxpZGF0b3J7XG5cbiAgICBhZGRpdGlvbmFsVmFsaWRhdG9yID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKGFkZGl0aW9uYWxWYWxpZGF0b3Ipe1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxWYWxpZGF0b3IgPSBhZGRpdGlvbmFsVmFsaWRhdG9yO1xuICAgIH1cblxuICAgIHZhbGlkYXRlKHZhbHVlKXtcbiAgICAgICAgaWYodmFsdWU9PT1udWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICBpZihwYXJzZWQgIT09IEluZmluaXR5ICYmICFFeHByZXNzaW9uRW5naW5lLnZhbGlkYXRlKHZhbHVlLCB7fSwgZmFsc2UpKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSBFeHByZXNzaW9uRW5naW5lLnRvTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgdmFyIG1heFNhZmVJbnRlZ2VyID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgfHwgOTAwNzE5OTI1NDc0MDk5MTsgLy8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgaXMgdW5kZWZpbmVkIGluIElFXG4gICAgICAgIGlmKEV4cHJlc3Npb25FbmdpbmUuY29tcGFyZSh2YWx1ZSwgMCkgPCAwIHx8ICh2YWx1ZSAhPT0gSW5maW5pdHkgJiYgRXhwcmVzc2lvbkVuZ2luZS5jb21wYXJlKHZhbHVlLCBtYXhTYWZlSW50ZWdlcik+IDApKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuYWRkaXRpb25hbFZhbGlkYXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkaXRpb25hbFZhbGlkYXRvcihFeHByZXNzaW9uRW5naW5lLnRvTnVtYmVyKHZhbHVlKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tICdzZC1leHByZXNzaW9uLWVuZ2luZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG4vKkNvbXB1dGVkIGJhc2UgdmFsdWUgdmFsaWRhdG9yKi9cbmV4cG9ydCBjbGFzcyBQYXlvZmZWYWx1ZVZhbGlkYXRvcntcbiAgICBleHByZXNzaW9uRW5naW5lO1xuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmU9ZXhwcmVzc2lvbkVuZ2luZTtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZSh2YWx1ZSl7XG5cblxuICAgICAgICBpZih2YWx1ZT09PW51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YWx1ZSA9IEV4cHJlc3Npb25FbmdpbmUudG9OdW1iZXIodmFsdWUpO1xuICAgICAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiB8fCA5MDA3MTk5MjU0NzQwOTkxOyAvLyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBpbiB1bmRlZmluZWQgaW4gSUVcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUuY29tcGFyZSh2YWx1ZSwgLW1heFNhZmVJbnRlZ2VyKSA+PSAwICYmIEV4cHJlc3Npb25FbmdpbmUuY29tcGFyZSh2YWx1ZSwgbWF4U2FmZUludGVnZXIpIDw9IDA7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gJ3NkLWV4cHJlc3Npb24tZW5naW5lJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5cbi8qQ29tcHV0ZWQgYmFzZSB2YWx1ZSB2YWxpZGF0b3IqL1xuZXhwb3J0IGNsYXNzIFByb2JhYmlsaXR5VmFsdWVWYWxpZGF0b3J7XG4gICAgZXhwcmVzc2lvbkVuZ2luZTtcbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKXtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lPWV4cHJlc3Npb25FbmdpbmU7XG4gICAgfVxuXG4gICAgdmFsaWRhdGUodmFsdWUsIGVkZ2Upe1xuICAgICAgICBpZih2YWx1ZT09PW51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmFsdWUgPSBFeHByZXNzaW9uRW5naW5lLnRvTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmNvbXBhcmUoMCkgPj0gMCAmJiB2YWx1ZS5jb21wYXJlKDEpIDw9IDA7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge2RvbWFpbiBhcyBtb2RlbCwgVmFsaWRhdGlvblJlc3VsdH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuaW1wb3J0IHtQcm9iYWJpbGl0eVZhbHVlVmFsaWRhdG9yfSBmcm9tIFwiLi9wcm9iYWJpbGl0eS12YWx1ZS12YWxpZGF0b3JcIjtcbmltcG9ydCB7UGF5b2ZmVmFsdWVWYWxpZGF0b3J9IGZyb20gXCIuL3BheW9mZi12YWx1ZS12YWxpZGF0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFRyZWVWYWxpZGF0b3Ige1xuXG4gICAgZXhwcmVzc2lvbkVuZ2luZTtcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbkVuZ2luZTtcbiAgICAgICAgdGhpcy5wcm9iYWJpbGl0eVZhbHVlVmFsaWRhdG9yID0gbmV3IFByb2JhYmlsaXR5VmFsdWVWYWxpZGF0b3IoZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgICAgIHRoaXMucGF5b2ZmVmFsdWVWYWxpZGF0b3IgPSBuZXcgUGF5b2ZmVmFsdWVWYWxpZGF0b3IoZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxuXG4gICAgdmFsaWRhdGUobm9kZXMpIHtcblxuICAgICAgICB2YXIgdmFsaWRhdGlvblJlc3VsdCA9IG5ldyBWYWxpZGF0aW9uUmVzdWx0KCk7XG5cbiAgICAgICAgbm9kZXMuZm9yRWFjaChuPT4ge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZU5vZGUobiwgdmFsaWRhdGlvblJlc3VsdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0O1xuICAgIH1cblxuICAgIHZhbGlkYXRlTm9kZShub2RlLCB2YWxpZGF0aW9uUmVzdWx0ID0gbmV3IFZhbGlkYXRpb25SZXN1bHQoKSkge1xuXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFub2RlLmNoaWxkRWRnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0LmFkZEVycm9yKCdpbmNvbXBsZXRlUGF0aCcsIG5vZGUpXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJvYmFiaWxpdHlTdW0gPSBFeHByZXNzaW9uRW5naW5lLnRvTnVtYmVyKDApO1xuICAgICAgICB2YXIgd2l0aEhhc2ggPSBmYWxzZTtcbiAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goKGUsIGkpPT4ge1xuICAgICAgICAgICAgZS5zZXRWYWx1ZVZhbGlkaXR5KCdwcm9iYWJpbGl0eScsIHRydWUpO1xuXG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkNoYW5jZU5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvYmFiaWxpdHkgPSBlLmNvbXB1dGVkQmFzZVByb2JhYmlsaXR5KCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByb2JhYmlsaXR5VmFsdWVWYWxpZGF0b3IudmFsaWRhdGUocHJvYmFiaWxpdHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghRXhwcmVzc2lvbkVuZ2luZS5pc0hhc2goZS5wcm9iYWJpbGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25SZXN1bHQuYWRkRXJyb3Ioe25hbWU6ICdpbnZhbGlkUHJvYmFiaWxpdHknLCBkYXRhOiB7J251bWJlcic6IGkgKyAxfX0sIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRWYWx1ZVZhbGlkaXR5KCdwcm9iYWJpbGl0eScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvYmFiaWxpdHlTdW0gPSBFeHByZXNzaW9uRW5naW5lLmFkZChwcm9iYWJpbGl0eVN1bSwgcHJvYmFiaWxpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZS5wYXlvZmYuZm9yRWFjaCgocmF3UGF5b2ZmLCBwYXlvZmZJbmRleCk9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSAncGF5b2ZmWycgKyBwYXlvZmZJbmRleCArICddJztcbiAgICAgICAgICAgICAgICBlLnNldFZhbHVlVmFsaWRpdHkocGF0aCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIHBheW9mZiA9IGUuY29tcHV0ZWRCYXNlUGF5b2ZmKHVuZGVmaW5lZCwgcGF5b2ZmSW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXlvZmZWYWx1ZVZhbGlkYXRvci52YWxpZGF0ZShwYXlvZmYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25SZXN1bHQuYWRkRXJyb3Ioe25hbWU6ICdpbnZhbGlkUGF5b2ZmJywgZGF0YTogeydudW1iZXInOiBpICsgMX19LCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgZS5zZXRWYWx1ZVZhbGlkaXR5KHBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuQ2hhbmNlTm9kZSkge1xuICAgICAgICAgICAgaWYgKGlzTmFOKHByb2JhYmlsaXR5U3VtKSB8fCAhcHJvYmFiaWxpdHlTdW0uZXF1YWxzKDEpKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvblJlc3VsdC5hZGRFcnJvcigncHJvYmFiaWxpdHlEb05vdFN1bVVwVG8xJywgbm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0O1xuICAgIH1cbn1cbiIsImV4cG9ydCAqIGZyb20gJy4vc3JjL2luZGV4J1xuIl19
