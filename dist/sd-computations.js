require=(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

Object.defineProperty(exports, '__esModule', {
  value: true
});

var wrapIdbValue = require('./wrap-idb-value.js');
/**
 * Open a database.
 *
 * @param name Name of the database.
 * @param version Schema version.
 * @param callbacks Additional callbacks.
 */


function openDB(name, version) {
  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
      blocked = _ref.blocked,
      upgrade = _ref.upgrade,
      blocking = _ref.blocking,
      terminated = _ref.terminated;

  var request = indexedDB.open(name, version);
  var openPromise = wrapIdbValue.wrap(request);

  if (upgrade) {
    request.addEventListener('upgradeneeded', function (event) {
      upgrade(wrapIdbValue.wrap(request.result), event.oldVersion, event.newVersion, wrapIdbValue.wrap(request.transaction));
    });
  }

  if (blocked) request.addEventListener('blocked', function () {
    return blocked();
  });
  openPromise.then(function (db) {
    if (terminated) db.addEventListener('close', function () {
      return terminated();
    });
    if (blocking) db.addEventListener('versionchange', function () {
      return blocking();
    });
  }).catch(function () {});
  return openPromise;
}
/**
 * Delete a database.
 *
 * @param name Name of the database.
 */


function deleteDB(name) {
  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      blocked = _ref2.blocked;

  var request = indexedDB.deleteDatabase(name);
  if (blocked) request.addEventListener('blocked', function () {
    return blocked();
  });
  return wrapIdbValue.wrap(request).then(function () {
    return undefined;
  });
}

var readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];
var writeMethods = ['put', 'add', 'delete', 'clear'];
var cachedMethods = new Map();

function getMethod(target, prop) {
  if (!(target instanceof IDBDatabase && !(prop in target) && typeof prop === 'string')) {
    return;
  }

  if (cachedMethods.get(prop)) return cachedMethods.get(prop);
  var targetFuncName = prop.replace(/FromIndex$/, '');
  var useIndex = prop !== targetFuncName;
  var isWrite = writeMethods.includes(targetFuncName);

  if ( // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.
  !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) || !(isWrite || readMethods.includes(targetFuncName))) {
    return;
  }

  var method = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(storeName) {
      var _target;

      var tx,
          target,
          _len,
          args,
          _key,
          _args = arguments;

      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(
              tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');
              target = tx.store;

              for (_len = _args.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                args[_key - 1] = _args[_key];
              }

              if (useIndex) target = target.index(args.shift()); // Must reject if op rejects.
              // If it's a write operation, must reject if tx.done rejects.
              // Must reject with op rejection first.
              // Must resolve with op value.
              // Must handle both promises (no unhandled rejections)

              _context.next = 6;
              return Promise.all([(_target = target)[targetFuncName].apply(_target, args), isWrite && tx.done]);

            case 6:
              return _context.abrupt("return", _context.sent[0]);

            case 7:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));

    return function method(_x) {
      return _ref3.apply(this, arguments);
    };
  }();

  cachedMethods.set(prop, method);
  return method;
}

wrapIdbValue.replaceTraps(function (oldTraps) {
  return _objectSpread(_objectSpread({}, oldTraps), {}, {
    get: function get(target, prop, receiver) {
      return getMethod(target, prop) || oldTraps.get(target, prop, receiver);
    },
    has: function has(target, prop) {
      return !!getMethod(target, prop) || oldTraps.has(target, prop);
    }
  });
});
exports.unwrap = wrapIdbValue.unwrap;
exports.wrap = wrapIdbValue.wrap;
exports.deleteDB = deleteDB;
exports.openDB = openDB;

},{"./wrap-idb-value.js":2}],2:[function(require,module,exports){
'use strict';

var instanceOfAny = function instanceOfAny(object, constructors) {
  return constructors.some(function (c) {
    return object instanceof c;
  });
};

var idbProxyableTypes;
var cursorAdvanceMethods; // This is a function to prevent it throwing up in node environments.

function getIdbProxyableTypes() {
  return idbProxyableTypes || (idbProxyableTypes = [IDBDatabase, IDBObjectStore, IDBIndex, IDBCursor, IDBTransaction]);
} // This is a function to prevent it throwing up in node environments.


function getCursorAdvanceMethods() {
  return cursorAdvanceMethods || (cursorAdvanceMethods = [IDBCursor.prototype.advance, IDBCursor.prototype.continue, IDBCursor.prototype.continuePrimaryKey]);
}

var cursorRequestMap = new WeakMap();
var transactionDoneMap = new WeakMap();
var transactionStoreNamesMap = new WeakMap();
var transformCache = new WeakMap();
var reverseTransformCache = new WeakMap();

function promisifyRequest(request) {
  var promise = new Promise(function (resolve, reject) {
    var unlisten = function unlisten() {
      request.removeEventListener('success', success);
      request.removeEventListener('error', error);
    };

    var success = function success() {
      resolve(wrap(request.result));
      unlisten();
    };

    var error = function error() {
      reject(request.error);
      unlisten();
    };

    request.addEventListener('success', success);
    request.addEventListener('error', error);
  });
  promise.then(function (value) {
    // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval
    // (see wrapFunction).
    if (value instanceof IDBCursor) {
      cursorRequestMap.set(value, request);
    } // Catching to avoid "Uncaught Promise exceptions"

  }).catch(function () {}); // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This
  // is because we create many promises from a single IDBRequest.

  reverseTransformCache.set(promise, request);
  return promise;
}

function cacheDonePromiseForTransaction(tx) {
  // Early bail if we've already created a done promise for this transaction.
  if (transactionDoneMap.has(tx)) return;
  var done = new Promise(function (resolve, reject) {
    var unlisten = function unlisten() {
      tx.removeEventListener('complete', complete);
      tx.removeEventListener('error', error);
      tx.removeEventListener('abort', error);
    };

    var complete = function complete() {
      resolve();
      unlisten();
    };

    var error = function error() {
      reject(tx.error || new DOMException('AbortError', 'AbortError'));
      unlisten();
    };

    tx.addEventListener('complete', complete);
    tx.addEventListener('error', error);
    tx.addEventListener('abort', error);
  }); // Cache it for later retrieval.

  transactionDoneMap.set(tx, done);
}

var idbProxyTraps = {
  get: function get(target, prop, receiver) {
    if (target instanceof IDBTransaction) {
      // Special handling for transaction.done.
      if (prop === 'done') return transactionDoneMap.get(target); // Polyfill for objectStoreNames because of Edge.

      if (prop === 'objectStoreNames') {
        return target.objectStoreNames || transactionStoreNamesMap.get(target);
      } // Make tx.store return the only store in the transaction, or undefined if there are many.


      if (prop === 'store') {
        return receiver.objectStoreNames[1] ? undefined : receiver.objectStore(receiver.objectStoreNames[0]);
      }
    } // Else transform whatever we get back.


    return wrap(target[prop]);
  },
  set: function set(target, prop, value) {
    target[prop] = value;
    return true;
  },
  has: function has(target, prop) {
    if (target instanceof IDBTransaction && (prop === 'done' || prop === 'store')) {
      return true;
    }

    return prop in target;
  }
};

function replaceTraps(callback) {
  idbProxyTraps = callback(idbProxyTraps);
}

function wrapFunction(func) {
  // Due to expected object equality (which is enforced by the caching in `wrap`), we
  // only create one new func per func.
  // Edge doesn't support objectStoreNames (booo), so we polyfill it here.
  if (func === IDBDatabase.prototype.transaction && !('objectStoreNames' in IDBTransaction.prototype)) {
    return function (storeNames) {
      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      var tx = func.call.apply(func, [unwrap(this), storeNames].concat(args));
      transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);
      return wrap(tx);
    };
  } // Cursor methods are special, as the behaviour is a little more different to standard IDB. In
  // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the
  // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense
  // with real promises, so each advance methods returns a new promise for the cursor object, or
  // undefined if the end of the cursor has been reached.


  if (getCursorAdvanceMethods().includes(func)) {
    return function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use
      // the original object.
      func.apply(unwrap(this), args);
      return wrap(cursorRequestMap.get(this));
    };
  }

  return function () {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }

    // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use
    // the original object.
    return wrap(func.apply(unwrap(this), args));
  };
}

function transformCachableValue(value) {
  if (typeof value === 'function') return wrapFunction(value); // This doesn't return, it just creates a 'done' promise for the transaction,
  // which is later returned for transaction.done (see idbObjectHandler).

  if (value instanceof IDBTransaction) cacheDonePromiseForTransaction(value);
  if (instanceOfAny(value, getIdbProxyableTypes())) return new Proxy(value, idbProxyTraps); // Return the same value back if we're not going to transform it.

  return value;
}

function wrap(value) {
  // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because
  // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.
  if (value instanceof IDBRequest) return promisifyRequest(value); // If we've already transformed this value before, reuse the transformed value.
  // This is faster, but it also provides object equality.

  if (transformCache.has(value)) return transformCache.get(value);
  var newValue = transformCachableValue(value); // Not all types are transformed.
  // These may be primitive types, so they can't be WeakMap keys.

  if (newValue !== value) {
    transformCache.set(value, newValue);
    reverseTransformCache.set(newValue, value);
  }

  return newValue;
}

var unwrap = function unwrap(value) {
  return reverseTransformCache.get(value);
};

exports.instanceOfAny = instanceOfAny;
exports.replaceTraps = replaceTraps;
exports.reverseTransformCache = reverseTransformCache;
exports.unwrap = unwrap;
exports.wrap = wrap;

},{}],3:[function(require,module,exports){
(function (global){(function (){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputationsEngine = exports.ComputationsEngineConfig = void 0;

var _sdUtils = require("sd-utils");

var _sdModel = require("sd-model");

var _computationsManager = require("./computations-manager");

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);

      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var ComputationsEngineConfig = /*#__PURE__*/function (_ComputationsManagerC) {
  _inherits(ComputationsEngineConfig, _ComputationsManagerC);

  var _super = _createSuper(ComputationsEngineConfig);

  function ComputationsEngineConfig(custom) {
    var _this;

    _classCallCheck(this, ComputationsEngineConfig);

    _this = _super.call(this);
    _this.logLevel = 'warn';

    if (custom) {
      _sdUtils.Utils.deepExtend(_assertThisInitialized(_this), custom);
    }

    return _this;
  }

  return ComputationsEngineConfig;
}(_computationsManager.ComputationsManagerConfig);
/**
 * Entry point class for standalone computation workers
 */


exports.ComputationsEngineConfig = ComputationsEngineConfig;

var ComputationsEngine = /*#__PURE__*/function (_ComputationsManager) {
  _inherits(ComputationsEngine, _ComputationsManager);

  var _super2 = _createSuper(ComputationsEngine);

  function ComputationsEngine(config, data) {
    var _this2;

    _classCallCheck(this, ComputationsEngine);

    _this2 = _super2.call(this, config, data);
    _this2.global = _sdUtils.Utils.getGlobalObject();
    _this2.isWorker = _sdUtils.Utils.isWorker();

    if (_this2.isWorker) {
      _this2.jobsManger.registerJobExecutionListener({
        beforeJob: function beforeJob(jobExecution) {
          _this2.reply('beforeJob', jobExecution.getDTO());
        },
        afterJob: function afterJob(jobExecution) {
          _this2.reply('afterJob', jobExecution.getDTO());
        }
      });

      var instance = _assertThisInitialized(_this2);

      _this2.queryableFunctions = {
        runJob: function runJob(jobName, jobParametersValues, dataDTO) {
          // console.log(jobName, jobParameters, serializedData);
          var data = new _sdModel.DataModel(dataDTO);
          instance.runJob(jobName, jobParametersValues, data);
        },
        executeJob: function executeJob(jobExecutionId) {
          instance.jobsManger.execute(jobExecutionId).catch(function (e) {
            instance.reply('jobFatalError', jobExecutionId, _sdUtils.Utils.getErrorDTO(e));
          });
        },
        recompute: function recompute(dataDTO, ruleName, evalCode, evalNumeric) {
          if (ruleName) {
            instance.objectiveRulesManager.setCurrentRuleByName(ruleName);
          }

          var allRules = !ruleName;
          var data = new _sdModel.DataModel(dataDTO);

          instance._checkValidityAndRecomputeObjective(data, allRules, evalCode, evalNumeric);

          this.reply('recomputed', data.getDTO());
        }
      };

      global.onmessage = function (oEvent) {
        if (oEvent.data instanceof Object && oEvent.data.hasOwnProperty('queryMethod') && oEvent.data.hasOwnProperty('queryArguments')) {
          instance.queryableFunctions[oEvent.data.queryMethod].apply(self, oEvent.data.queryArguments);
        } else {
          instance.defaultReply(oEvent.data);
        }
      };
    }

    return _this2;
  }

  _createClass(ComputationsEngine, [{
    key: "setConfig",
    value: function setConfig(config) {
      _get(_getPrototypeOf(ComputationsEngine.prototype), "setConfig", this).call(this, config);

      if (this.config.logLevel) {
        this.setLogLevel(this.config.logLevel);
      }

      return this;
    }
  }, {
    key: "setLogLevel",
    value: function setLogLevel(level) {
      _sdUtils.log.setLevel(level);
    }
  }, {
    key: "defaultReply",
    value: function defaultReply(message) {
      this.reply('test', message);
    }
  }, {
    key: "reply",
    value: function reply() {
      if (arguments.length < 1) {
        throw new TypeError('reply - not enough arguments');
      }

      this.global.postMessage({
        'queryMethodListener': arguments[0],
        'queryMethodArguments': Array.prototype.slice.call(arguments, 1)
      });
    }
  }]);

  return ComputationsEngine;
}(_computationsManager.ComputationsManager);

exports.ComputationsEngine = ComputationsEngine;

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./computations-manager":4,"sd-model":"sd-model","sd-utils":"sd-utils"}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputationsManager = exports.ComputationsManagerConfig = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

var _objectiveRulesManager = require("./objective/objective-rules-manager");

var _treeValidator = require("./validation/tree-validator");

var _operationsManager = require("./operations/operations-manager");

var _jobsManager = require("./jobs/jobs-manager");

var _expressionsEvaluator = require("./expressions-evaluator");

var _jobInstanceManager = require("./jobs/job-instance-manager");

var _sdModel = require("sd-model");

var _policy = require("./policies/policy");

var _mcdmWeightValueValidator = require("./validation/mcdm-weight-value-validator");

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
/** Computation manager configuration object
 * @param custom configuration object to extend
 */


var ComputationsManagerConfig =
/**
 * logging level
 * */

/**
 * default objective rule name
 * */

/**
 * worker configuration object
 * */

/**
 * job repository to use, available types: idb, timeout, simple
* */

/**
 * clear repository after init
 * */
function ComputationsManagerConfig(custom) {
  _classCallCheck(this, ComputationsManagerConfig);

  this.logLevel = null;
  this.ruleName = null;
  this.worker = {
    /**
     * delegate tree recomputation to worker
     * */
    delegateRecomputation: false,

    /**
     * worker url
     * */
    url: null
  };
  this.jobRepositoryType = 'idb';
  this.clearRepository = false;

  if (custom) {
    _sdUtils.Utils.deepExtend(this, custom);
  }
};
/** Computation manager
* @param {object} config
* @param {DataModel} data model object
* */


exports.ComputationsManagerConfig = ComputationsManagerConfig;

var ComputationsManager = /*#__PURE__*/function () {
  function ComputationsManager(config) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    _classCallCheck(this, ComputationsManager);

    this.data = data;
    this.setConfig(config);
    this.expressionEngine = new _sdExpressionEngine.ExpressionEngine();
    this.expressionsEvaluator = new _expressionsEvaluator.ExpressionsEvaluator(this.expressionEngine);
    this.objectiveRulesManager = new _objectiveRulesManager.ObjectiveRulesManager(this.expressionEngine, this.config.ruleName);
    this.jobsManger = new _jobsManager.JobsManager(this.expressionsEvaluator, this.objectiveRulesManager, {
      workerUrl: this.config.worker.url,
      repositoryType: this.config.jobRepositoryType,
      clearRepository: this.config.clearRepository
    });
    this.operationsManager = new _operationsManager.OperationsManager(this.data, this.expressionEngine, new _jobsManager.JobsManager(this.expressionsEvaluator, this.objectiveRulesManager, {
      repositoryType: 'timeout'
    }));
    this.treeValidator = new _treeValidator.TreeValidator(this.expressionEngine);
    this.mcdmWeightValueValidator = new _mcdmWeightValueValidator.McdmWeightValueValidator();
  }

  _createClass(ComputationsManager, [{
    key: "setConfig",
    value: function setConfig(config) {
      this.config = new ComputationsManagerConfig(config);
      return this;
    }
  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
      this.operationsManager.setData(data);
    }
    /** Alias function for checkValidityAndRecomputeObjective*/

  }, {
    key: "recompute",
    value: function recompute() {
      return this.checkValidityAndRecomputeObjective.apply(this, arguments);
    }
    /**
     * Checks validity of data model and recomputes objective rules
     * @returns promise
     * @param {boolean} allRules - recompute all objective rules
     * @param {boolean} evalCode - evaluate code
     * @param {boolean} evalNumeric - evaluate numeric expressions
     */

  }, {
    key: "checkValidityAndRecomputeObjective",
    value: function checkValidityAndRecomputeObjective(allRules) {
      var _this = this;

      var evalCode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var evalNumeric = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      return Promise.resolve().then(function () {
        if (_this.config.worker.delegateRecomputation) {
          var params = {
            evalCode: evalCode,
            evalNumeric: evalNumeric
          };

          if (!allRules) {
            params.ruleName = _this.getCurrentRule().name;
          }

          return _this.runJob("recompute", params, _this.data, false).then(function (jobExecution) {
            var d = jobExecution.getData();

            _this.data.updateFrom(d);
          });
        }

        return _this._checkValidityAndRecomputeObjective(_this.data, allRules, evalCode, evalNumeric);
      }).then(function () {
        _this.updateDisplayValues(_this.data);
      });
    }
  }, {
    key: "_checkValidityAndRecomputeObjective",
    value: function _checkValidityAndRecomputeObjective(data, allRules) {
      var _this2 = this;

      var evalCode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var evalNumeric = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      this.objectiveRulesManager.updateDefaultCriterion1Weight(data.defaultCriterion1Weight);
      data.validationResults = [];

      if (evalCode || evalNumeric) {
        this.expressionsEvaluator.evalExpressions(data, evalCode, evalNumeric);
      }

      var weightValid = this.mcdmWeightValueValidator.validate(data.defaultCriterion1Weight);
      var multiCriteria = this.getCurrentRule().multiCriteria;
      data.getRoots().forEach(function (root) {
        var vr = _this2.treeValidator.validate(data.getAllNodesInSubtree(root));

        data.validationResults.push(vr);

        if (vr.isValid() && (!multiCriteria || weightValid)) {
          _this2.objectiveRulesManager.recomputeTree(root, allRules);
        }
      });
    }
    /**
     * @returns {ObjectiveRule} current objective rule
     * */

  }, {
    key: "getCurrentRule",
    value: function getCurrentRule() {
      return this.objectiveRulesManager.currentRule;
    }
    /**
     * Sets current objective rule
     * @param {string} ruleName - name of objective rule
     * */

  }, {
    key: "setCurrentRuleByName",
    value: function setCurrentRuleByName(ruleName) {
      this.config.ruleName = ruleName;
      return this.objectiveRulesManager.setCurrentRuleByName(ruleName);
    }
    /**
     *
     *  @param {string} jobName
     *  @returns {Job}
     * */

  }, {
    key: "getJobByName",
    value: function getJobByName(jobName) {
      return this.jobsManger.getJobByName(jobName);
    }
    /**
     * @returns array of operations applicable to the given object (node or edge)
     * @param object
     */

  }, {
    key: "operationsForObject",
    value: function operationsForObject(object) {
      return this.operationsManager.operationsForObject(object);
    }
    /**
     * Checks validity of data model without recomputation and revalidation
     * @param {DataModel} data to check
     */

  }, {
    key: "isValid",
    value: function isValid(data) {
      data = data || this.data;
      return data.validationResults.every(function (vr) {
        return vr.isValid();
      });
    }
    /**
     * Run job
     * @param {string} name - job name
     * @param {object} jobParamsValues - job parameter values object
     * @param {DataModel} data model
     * @param {boolean} resolvePromiseAfterJobIsLaunched - immediately resolve promise with still running JobExecution
     * @returns {Promise} resolving to JobExecution
     */

  }, {
    key: "runJob",
    value: function runJob(name, jobParamsValues, data) {
      var resolvePromiseAfterJobIsLaunched = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      return this.jobsManger.run(name, jobParamsValues, data || this.data, resolvePromiseAfterJobIsLaunched);
    }
    /**
     * Run job using JobInstanceManager
     * @param {string} name - job name
     * @param {object} jobParamsValues - job parameter values object
     * @param {JobInstanceManagerConfig} jobInstanceManagerConfig - JobInstanceManager configuration
     * @returns {Promise} resolving to JobInstanceManager
     */

  }, {
    key: "runJobWithInstanceManager",
    value: function runJobWithInstanceManager(name, jobParamsValues, jobInstanceManagerConfig) {
      var _this3 = this;

      return this.runJob(name, jobParamsValues).then(function (je) {
        return new _jobInstanceManager.JobInstanceManager(_this3.jobsManger, je, jobInstanceManagerConfig);
      });
    }
  }, {
    key: "performOperation",
    value: function performOperation(object, operationName, jobParamsValues) {
      return this.operationsManager.performOperation(object, operationName, jobParamsValues);
    }
  }, {
    key: "getObjectiveRules",
    value: function getObjectiveRules() {
      return this.objectiveRulesManager.rules;
    }
  }, {
    key: "getObjectiveRuleByName",
    value: function getObjectiveRuleByName(ruleName) {
      return this.objectiveRulesManager.getObjectiveRuleByName(ruleName);
    }
  }, {
    key: "isRuleName",
    value: function isRuleName(ruleName) {
      return this.objectiveRulesManager.isRuleName(ruleName);
    }
  }, {
    key: "flipCriteria",
    value: function flipCriteria(data) {
      data = data || this.data;
      data.reversePayoffs();
      var tmp = data.weightLowerBound;
      data.weightLowerBound = this.flip(data.weightUpperBound);
      data.weightUpperBound = this.flip(tmp);
      data.defaultCriterion1Weight = this.flip(data.defaultCriterion1Weight);
      this.objectiveRulesManager.flipRule();
      return this.checkValidityAndRecomputeObjective(false);
    }
  }, {
    key: "flip",
    value: function flip(a) {
      if (a == Infinity) {
        return 0;
      }

      if (a == 0) {
        return Infinity;
      }

      return this.expressionEngine.serialize(_sdExpressionEngine.ExpressionEngine.divide(1, a));
    }
  }, {
    key: "updateDisplayValues",
    value: function updateDisplayValues(data) {
      var _this4 = this;

      var policyToDisplay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      data = data || this.data;

      if (policyToDisplay) {
        return this.displayPolicy(data, policyToDisplay);
      }

      data.nodes.forEach(function (n) {
        _this4.updateNodeDisplayValues(n);
      });
      data.edges.forEach(function (e) {
        _this4.updateEdgeDisplayValues(e);
      });
    }
  }, {
    key: "updateNodeDisplayValues",
    value: function updateNodeDisplayValues(node) {
      var _this5 = this;

      node.$DISPLAY_VALUE_NAMES.forEach(function (n) {
        return node.displayValue(n, _this5.objectiveRulesManager.getNodeDisplayValue(node, n));
      });
    }
  }, {
    key: "updateEdgeDisplayValues",
    value: function updateEdgeDisplayValues(e) {
      var _this6 = this;

      e.$DISPLAY_VALUE_NAMES.forEach(function (n) {
        return e.displayValue(n, _this6.objectiveRulesManager.getEdgeDisplayValue(e, n));
      });
    }
  }, {
    key: "displayPolicy",
    value: function displayPolicy(policyToDisplay, data) {
      var _this7 = this;

      data = data || this.data;
      data.nodes.forEach(function (n) {
        n.clearDisplayValues();
      });
      data.edges.forEach(function (e) {
        e.clearDisplayValues();
      });
      data.getRoots().forEach(function (root) {
        return _this7.displayPolicyForNode(root, policyToDisplay);
      });
    }
  }, {
    key: "displayPolicyForNode",
    value: function displayPolicyForNode(node, policy) {
      var _this8 = this;

      if (node instanceof _sdModel.domain.DecisionNode) {
        var decision = _policy.Policy.getDecision(policy, node); //console.log(decision, node, policy);


        if (decision) {
          node.displayValue('optimal', true);
          var childEdge = node.childEdges[decision.decisionValue];
          childEdge.displayValue('optimal', true);
          return this.displayPolicyForNode(childEdge.childNode, policy);
        }

        return;
      } else if (node instanceof _sdModel.domain.ChanceNode) {
        node.displayValue('optimal', true);
        node.childEdges.forEach(function (e) {
          e.displayValue('optimal', true);

          _this8.displayPolicyForNode(e.childNode, policy);
        });
      } else if (node instanceof _sdModel.domain.TerminalNode) {
        node.displayValue('optimal', true);
      }
    }
  }]);

  return ComputationsManager;
}();

exports.ComputationsManager = ComputationsManager;

},{"./expressions-evaluator":6,"./jobs/job-instance-manager":63,"./jobs/jobs-manager":65,"./objective/objective-rules-manager":66,"./operations/operations-manager":83,"./policies/policy":87,"./validation/mcdm-weight-value-validator":88,"./validation/tree-validator":91,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model","sd-utils":"sd-utils"}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputationsUtils = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ComputationsUtils = /*#__PURE__*/function () {
  function ComputationsUtils() {
    _classCallCheck(this, ComputationsUtils);
  }

  _createClass(ComputationsUtils, null, [{
    key: "sequence",
    value: function sequence(min, max, length) {
      var extent = _sdExpressionEngine.ExpressionEngine.subtract(max, min);

      var result = [min];
      var steps = length - 1;

      if (!steps) {
        return result;
      }

      var step = _sdExpressionEngine.ExpressionEngine.divide(extent, length - 1);

      var curr = min;

      for (var i = 0; i < length - 2; i++) {
        curr = _sdExpressionEngine.ExpressionEngine.add(curr, step);
        result.push(_sdExpressionEngine.ExpressionEngine.toFloat(curr));
      }

      result.push(max);
      return result;
    }
  }]);

  return ComputationsUtils;
}();

exports.ComputationsUtils = ComputationsUtils;

},{"sd-expression-engine":"sd-expression-engine"}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExpressionsEvaluator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdModel = require("sd-model");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Evaluates code and expressions in trees*/


var ExpressionsEvaluator = /*#__PURE__*/function () {
  function ExpressionsEvaluator(expressionEngine) {
    _classCallCheck(this, ExpressionsEvaluator);

    this.expressionEngine = expressionEngine;
  }

  _createClass(ExpressionsEvaluator, [{
    key: "clear",
    value: function clear(data) {
      data.nodes.forEach(function (n) {
        n.clearComputedValues();
      });
      data.edges.forEach(function (e) {
        e.clearComputedValues();
      });
    }
  }, {
    key: "clearTree",
    value: function clearTree(data, root) {
      data.getAllNodesInSubtree(root).forEach(function (n) {
        n.clearComputedValues();
        n.childEdges.forEach(function (e) {
          e.clearComputedValues();
        });
      });
    }
  }, {
    key: "evalExpressions",
    value: function evalExpressions(data) {
      var _this = this;

      var evalCode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var evalNumeric = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var initScopes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

      _sdUtils.log.debug('evalExpressions evalCode:' + evalCode + ' evalNumeric:' + evalNumeric);

      if (evalCode) {
        this.evalGlobalCode(data);
      }

      data.getRoots().forEach(function (n) {
        _this.clearTree(data, n);

        _this.evalExpressionsForNode(data, n, evalCode, evalNumeric, initScopes);
      });
    }
  }, {
    key: "evalGlobalCode",
    value: function evalGlobalCode(data) {
      data.clearExpressionScope();
      data.$codeDirty = false;

      try {
        data.$codeError = null;
        this.expressionEngine.eval(data.code, false, data.expressionScope);
      } catch (e) {
        data.$codeError = e;
      }
    }
  }, {
    key: "evalPayoff",
    value: function evalPayoff(edge) {
      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      if (_sdExpressionEngine.ExpressionEngine.hasAssignmentExpression(edge.payoff[index])) {
        return null;
      }

      return this.expressionEngine.eval(edge.payoff[index], true, edge.parentNode.expressionScope);
    }
  }, {
    key: "evalExpressionsForNode",
    value: function evalExpressionsForNode(data, node) {
      var _this2 = this;

      var evalCode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var evalNumeric = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var initScope = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;

      if (!node.expressionScope || initScope || evalCode) {
        this.initScopeForNode(data, node);
      }

      if (evalCode) {
        node.$codeDirty = false;

        if (node.code) {
          try {
            node.$codeError = null;
            this.expressionEngine.eval(node.code, false, node.expressionScope);
          } catch (e) {
            node.$codeError = e;

            _sdUtils.log.debug(e);
          }
        }
      }

      if (evalNumeric) {
        var scope = node.expressionScope;

        var probabilitySum = _sdExpressionEngine.ExpressionEngine.toNumber(0);

        var hashEdges = [];
        var invalidProb = false;
        node.childEdges.forEach(function (e) {
          e.payoff.forEach(function (rawPayoff, payoffIndex) {
            var path = 'payoff[' + payoffIndex + ']';

            if (e.isFieldValid(path, true, false)) {
              try {
                e.computedValue(null, path, _this2.evalPayoff(e, payoffIndex));
              } catch (err) {//   Left empty intentionally
              }
            }
          });

          if (node instanceof _sdModel.domain.ChanceNode) {
            if (_sdExpressionEngine.ExpressionEngine.isHash(e.probability)) {
              hashEdges.push(e);
              return;
            }

            if (_sdExpressionEngine.ExpressionEngine.hasAssignmentExpression(e.probability)) {
              //It should not occur here!
              _sdUtils.log.warn("evalExpressionsForNode hasAssignmentExpression!", e);

              return null;
            }

            if (e.isFieldValid('probability', true, false)) {
              try {
                var prob = _this2.expressionEngine.eval(e.probability, true, scope);

                e.computedValue(null, 'probability', prob);
                probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, prob);
              } catch (err) {
                invalidProb = true;
              }
            } else {
              invalidProb = true;
            }
          }
        });

        if (node instanceof _sdModel.domain.ChanceNode) {
          var computeHash = hashEdges.length && !invalidProb && probabilitySum.compare(0) >= 0 && probabilitySum.compare(1) <= 0;

          if (computeHash) {
            var hash = _sdExpressionEngine.ExpressionEngine.divide(_sdExpressionEngine.ExpressionEngine.subtract(1, probabilitySum), hashEdges.length);

            hashEdges.forEach(function (e) {
              e.computedValue(null, 'probability', hash);
            });
          }
        }

        node.childEdges.forEach(function (e) {
          _this2.evalExpressionsForNode(data, e.childNode, evalCode, evalNumeric, initScope);
        });
      }
    }
  }, {
    key: "initScopeForNode",
    value: function initScopeForNode(data, node) {
      var parent = node.$parent;
      var parentScope = parent ? parent.expressionScope : data.expressionScope;
      node.expressionScope = _sdUtils.Utils.cloneDeep(parentScope);
    }
  }]);

  return ExpressionsEvaluator;
}();

exports.ExpressionsEvaluator = ExpressionsEvaluator;

},{"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model","sd-utils":"sd-utils"}],7:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _computationsEngine = require("./computations-engine");

Object.keys(_computationsEngine).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _computationsEngine[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _computationsEngine[key];
    }
  });
});

var _computationsManager = require("./computations-manager");

Object.keys(_computationsManager).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _computationsManager[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _computationsManager[key];
    }
  });
});

var _expressionsEvaluator = require("./expressions-evaluator");

Object.keys(_expressionsEvaluator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _expressionsEvaluator[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _expressionsEvaluator[key];
    }
  });
});

var _index = require("./jobs/index");

Object.keys(_index).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _index[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _index[key];
    }
  });
});

},{"./computations-engine":3,"./computations-manager":4,"./expressions-evaluator":6,"./jobs/index":62}],8:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LeagueTableJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../engine/job-parameters");

var _jobParameterDefinition = require("../../engine/job-parameter-definition");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var LeagueTableJobParameters = /*#__PURE__*/function (_JobParameters) {
  _inherits(LeagueTableJobParameters, _JobParameters);

  var _super = _createSuper(LeagueTableJobParameters);

  function LeagueTableJobParameters() {
    _classCallCheck(this, LeagueTableJobParameters);

    return _super.apply(this, arguments);
  }

  _createClass(LeagueTableJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("extendedPolicyDescription", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("weightLowerBound", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION).set("singleValueValidator", function (v, allVals) {
        return v >= 0 && v <= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightUpperBound']);
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("defaultWeight", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION).set("singleValueValidator", function (v, allVals) {
        return v >= 0 && v >= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightLowerBound']) && v <= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightUpperBound']);
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("weightUpperBound", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION).set("singleValueValidator", function (v, allVals) {
        return v >= 0 && v >= _jobParameterDefinition.JobParameterDefinition.computeNumberExpression(allVals['weightLowerBound']);
      }));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        nameOfCriterion1: 'Cost',
        nameOfCriterion2: 'Effect',
        extendedPolicyDescription: true,
        weightLowerBound: 0,
        defaultWeight: 0,
        weightUpperBound: Infinity
      };
    }
  }]);

  return LeagueTableJobParameters;
}(_jobParameters.JobParameters);

exports.LeagueTableJobParameters = LeagueTableJobParameters;

},{"../../engine/job-parameter-definition":49,"../../engine/job-parameters":50,"sd-utils":"sd-utils"}],9:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LeagueTableJob = void 0;

var _simpleJob = require("../../engine/simple-job");

var _policy = require("../../../policies/policy");

var _sdExpressionEngine = require("sd-expression-engine");

var _calculateStep = require("./steps/calculate-step");

var _leagueTableJobParameters = require("./league-table-job-parameters");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var LeagueTableJob = /*#__PURE__*/function (_SimpleJob) {
  _inherits(LeagueTableJob, _SimpleJob);

  var _super = _createSuper(LeagueTableJob);

  function LeagueTableJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, LeagueTableJob);

    _this = _super.call(this, "league-table", jobRepository, expressionsEvaluator, objectiveRulesManager);

    _this.initSteps();

    return _this;
  }

  _createClass(LeagueTableJob, [{
    key: "initSteps",
    value: function initSteps() {
      this.calculateStep = new _calculateStep.CalculateStep(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager);
      this.addStep(this.calculateStep);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _leagueTableJobParameters.LeagueTableJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        var headers = ['policy_id', 'policy', jobResult.payoffNames[0], jobResult.payoffNames[1], 'dominated_by', 'extended-dominated_by', 'incratio', 'optimal', 'optimal_for_default_weight'];
        result.push(headers);
      }

      jobResult.rows.forEach(function (row) {
        row.policies.forEach(function (policy) {
          var rowCells = [row.id, _policy.Policy.toPolicyString(policy, jobParameters.values.extendedPolicyDescription), row.payoffs[1], row.payoffs[0], row.dominatedBy, row.extendedDominatedBy === null ? null : row.extendedDominatedBy[0] + ', ' + row.extendedDominatedBy[1], row.incratio, row.optimal, row.optimalForDefaultWeight];
          result.push(rowCells);
        });
      });
      return result;
    }
  }]);

  return LeagueTableJob;
}(_simpleJob.SimpleJob);

exports.LeagueTableJob = LeagueTableJob;

},{"../../../policies/policy":87,"../../engine/simple-job":58,"./league-table-job-parameters":8,"./steps/calculate-step":10,"sd-expression-engine":"sd-expression-engine"}],10:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _step = require("../../../engine/step");

var _jobStatus = require("../../../engine/job-status");

var _policiesCollector = require("../../../../policies/policies-collector");

var _sdExpressionEngine = require("sd-expression-engine");

var _treeValidator = require("../../../../validation/tree-validator");

var _policy = require("../../../../policies/policy");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var CalculateStep = /*#__PURE__*/function (_Step) {
  _inherits(CalculateStep, _Step);

  var _super = _createSuper(CalculateStep);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _super.call(this, "calculate_step", jobRepository);
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var _this2 = this;

      var data = stepExecution.getData();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var rule = this.objectiveRulesManager.currentRule;
      var treeRoot = data.getRoots()[0];
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot);
      var policies = policiesCollector.policies;
      var payoffCoeffs = this.payoffCoeffs = rule.payoffCoeffs;
      this.expressionsEvaluator.evalExpressions(data);
      var vr = this.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));

      if (!vr.isValid()) {
        return stepExecution;
      }

      var compare = function compare(a, b) {
        return -payoffCoeffs[0] * (b.payoffs[0] - a.payoffs[0]) || -payoffCoeffs[1] * (a.payoffs[1] - b.payoffs[1]);
      };

      var rows = policies.map(function (policy) {
        _this2.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

        return {
          policies: [policy],
          payoffs: treeRoot.computedValue(ruleName, 'payoff').slice(),
          dominatedBy: null,
          extendedDominatedBy: null,
          incratio: null,
          optimal: false,
          optimalForDefaultWeight: false
        };
      }).sort(compare);
      rows = rows.reduce(function (previousValue, currentValue, index, array) {
        if (!previousValue.length) {
          return [currentValue];
        }

        var prev = previousValue[previousValue.length - 1];

        if (compare(prev, currentValue) == 0) {
          var _prev$policies;

          (_prev$policies = prev.policies).push.apply(_prev$policies, _toConsumableArray(currentValue.policies));

          return previousValue;
        }

        return previousValue.concat(currentValue);
      }, []);
      rows.sort(function (a, b) {
        return payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]) || -payoffCoeffs[1] * (a.payoffs[1] - b.payoffs[1]);
      });
      rows.forEach(function (r, i) {
        r.id = i + 1;
      }); // rows.sort(compare);

      rows.sort(function (a, b) {
        return -payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]) || -payoffCoeffs[1] * (a.payoffs[1] - b.payoffs[1]);
      });
      var bestCost = -payoffCoeffs[1] * Infinity,
          bestCostRow = null;

      var cmp = function cmp(a, b) {
        return a > b;
      };

      if (payoffCoeffs[1] < 0) {
        cmp = function cmp(a, b) {
          return a < b;
        };
      }

      rows.forEach(function (r, i) {
        if (cmp(r.payoffs[1], bestCost)) {
          bestCost = r.payoffs[1];
          bestCostRow = r;
        } else if (bestCostRow) {
          r.dominatedBy = bestCostRow.id;
        }
      });

      cmp = function cmp(a, b) {
        return a < b;
      };

      if (payoffCoeffs[0] > 0 && payoffCoeffs[1] < 0) {
        cmp = function cmp(a, b) {
          return a < b;
        };
      } else if (payoffCoeffs[0] < 0 && payoffCoeffs[1] > 0) {
        cmp = function cmp(a, b) {
          return a < b;
        };
      } else if (payoffCoeffs[1] < 0) {
        cmp = function cmp(a, b) {
          return a > b;
        };
      }

      var prev2NotDominated = null;
      rows.filter(function (r) {
        return !r.dominatedBy;
      }).sort(function (a, b) {
        return payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]);
      }).forEach(function (r, i, arr) {
        if (!i) {
          r.incratio = 0;
          return;
        }

        var prev = arr[i - 1];
        r.incratio = _this2.computeICER(r, prev);

        if (i < 2) {
          return;
        }

        if (!prev2NotDominated) {
          prev2NotDominated = arr[i - 2];
        }

        if (cmp(r.incratio, prev.incratio)) {
          prev.incratio = null;
          prev.extendedDominatedBy = [prev2NotDominated.id, r.id];
          r.incratio = _this2.computeICER(r, prev2NotDominated);
        } else {
          prev2NotDominated = prev;
        }
      });
      var weightLowerBound = params.value("weightLowerBound");
      var defaultWeight = params.value("defaultWeight");
      var weightUpperBound = params.value("weightUpperBound"); //mark optimal for weight in [weightLowerBound, weightUpperBound] and optimal for default Weight

      var lastLELower = null;
      var lastLELowerDef = null;
      rows.slice().filter(function (r) {
        return !r.dominatedBy && !r.extendedDominatedBy;
      }).sort(function (a, b) {
        var sub = a.incratio - b.incratio;
        return sub ? sub : payoffCoeffs[0] * (a.payoffs[0] - b.payoffs[0]);
      }).forEach(function (row, i, arr) {
        if (row.incratio < weightLowerBound) {
          lastLELower = row;
        }

        if (row.incratio < defaultWeight) {
          lastLELowerDef = row;
        }

        row.optimal = row.incratio >= weightLowerBound && row.incratio <= weightUpperBound;
        row.optimalForDefaultWeight = row.incratio == defaultWeight;
      });

      if (lastLELower) {
        lastLELower.optimal = true;
      }

      if (lastLELowerDef) {
        lastLELowerDef.optimalForDefaultWeight = true;
      }

      rows.forEach(function (row) {
        row.payoffs[0] = _sdExpressionEngine.ExpressionEngine.toFloat(row.payoffs[0]);
        row.payoffs[1] = _sdExpressionEngine.ExpressionEngine.toFloat(row.payoffs[1]);
        row.incratio = row.incratio === null ? null : _sdExpressionEngine.ExpressionEngine.toFloat(row.incratio);
      });
      jobResult.data = {
        payoffNames: data.payoffNames.slice(),
        payoffCoeffs: payoffCoeffs,
        rows: rows.sort(function (a, b) {
          return a.id - b.id;
        }),
        weightLowerBound: _sdExpressionEngine.ExpressionEngine.toFloat(weightLowerBound),
        defaultWeight: _sdExpressionEngine.ExpressionEngine.toFloat(defaultWeight),
        weightUpperBound: _sdExpressionEngine.ExpressionEngine.toFloat(weightUpperBound)
      };
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }, {
    key: "computeICER",
    value: function computeICER(r, prev) {
      var d = _sdExpressionEngine.ExpressionEngine.subtract(r.payoffs[0], prev.payoffs[0]);

      var n = _sdExpressionEngine.ExpressionEngine.subtract(r.payoffs[1], prev.payoffs[1]);

      if (d == 0) {
        if (n < 0) {
          return -Infinity;
        }

        return Infinity;
      }

      return Math.abs(_sdExpressionEngine.ExpressionEngine.divide(n, d));
    }
  }]);

  return CalculateStep;
}(_step.Step);

exports.CalculateStep = CalculateStep;

},{"../../../../policies/policies-collector":86,"../../../../policies/policy":87,"../../../../validation/tree-validator":91,"../../../engine/job-status":56,"../../../engine/step":61,"sd-expression-engine":"sd-expression-engine"}],11:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PayoffsTransformationJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../engine/job-parameters");

var _jobParameterDefinition = require("../../engine/job-parameter-definition");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var PayoffsTransformationJobParameters = /*#__PURE__*/function (_JobParameters) {
  _inherits(PayoffsTransformationJobParameters, _JobParameters);

  var _super = _createSuper(PayoffsTransformationJobParameters);

  function PayoffsTransformationJobParameters() {
    _classCallCheck(this, PayoffsTransformationJobParameters);

    return _super.apply(this, arguments);
  }

  _createClass(PayoffsTransformationJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("objectId", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("functionName", _jobParameterDefinition.PARAMETER_TYPE.STRING).set('required', true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("functionBody", _jobParameterDefinition.PARAMETER_TYPE.STRING).set('required', true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("functionArgumentName", _jobParameterDefinition.PARAMETER_TYPE.STRING).set('required', true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("makeClone", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        functionName: 'transformPayoff',
        functionBody: 'log(p)',
        functionArgumentName: 'p',
        makeClone: true
      };
    }
  }]);

  return PayoffsTransformationJobParameters;
}(_jobParameters.JobParameters);

exports.PayoffsTransformationJobParameters = PayoffsTransformationJobParameters;

},{"../../engine/job-parameter-definition":49,"../../engine/job-parameters":50,"sd-utils":"sd-utils"}],12:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PayoffsTransformationJob = void 0;

var _simpleJob = require("../../engine/simple-job");

var _step = require("../../engine/step");

var _jobStatus = require("../../engine/job-status");

var _treeValidator = require("../../../validation/tree-validator");

var _payoffsTransformationJobParameters = require("./payoffs-transformation-job-parameters");

var _job = require("../../engine/job");

var _sdModel = require("sd-model");

var _sdExpressionEngine = require("sd-expression-engine");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var PayoffsTransformationJob = /*#__PURE__*/function (_Job) {
  _inherits(PayoffsTransformationJob, _Job);

  var _super = _createSuper(PayoffsTransformationJob);

  function PayoffsTransformationJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, PayoffsTransformationJob);

    _this = _super.call(this, PayoffsTransformationJob.$NAME, jobRepository);
    _this.isRestartable = false;
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(PayoffsTransformationJob, [{
    key: "doExecute",
    value: function doExecute(execution) {
      var data = execution.getData();
      var params = execution.jobParameters;
      var functionName = params.value("functionName");
      var root = data.findNodeById(params.value("objectId"));
      var makeClone = params.value("makeClone");
      var rootTarget = makeClone ? data.cloneSubtree(root, true) : root;
      rootTarget.code += '\n' + functionName + '(' + params.value('functionArgumentName') + ') = ' + params.value('functionBody');
      var allNodes = data.getAllNodesInSubtree(rootTarget);
      this.processNodePayoff(rootTarget, params);

      if (makeClone) {
        var minY = Number.MAX_VALUE;
        var maxY = Number.MIN_VALUE;
        allNodes.forEach(function (n) {
          if (n.location.y < minY) {
            minY = n.location.y;
          }

          if (n.location.y > maxY) {
            maxY = n.location.y;
          }
        });
        var extentY = maxY - minY;
        var margin = 30;
        var offset = extentY + margin;
        rootTarget.move(0, offset);
        data.attachSubtree(rootTarget);
      }

      return execution;
    }
  }, {
    key: "processNodePayoff",
    value: function processNodePayoff(node, params) {
      var _this2 = this;

      var parentEdge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var aggregatedPayoff = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [0, 0];

      if (node.type === _sdModel.domain.TerminalNode.$TYPE) {
        parentEdge.payoff = aggregatedPayoff.map(function (p) {
          return params.value("functionName") + '(' + _sdExpressionEngine.ExpressionEngine.toNumber(p).toFraction(false) + ')';
        });
        return;
      }

      if (parentEdge) {
        parentEdge.payoff.fill(0);
      }

      node.childEdges.forEach(function (e) {
        _this2.processNodePayoff(e.childNode, params, e, aggregatedPayoff.map(function (p, i) {
          return _sdExpressionEngine.ExpressionEngine.add(p, e.computedBasePayoff(undefined, i));
        }));
      });
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _payoffsTransformationJobParameters.PayoffsTransformationJobParameters(values);
    }
  }]);

  return PayoffsTransformationJob;
}(_job.Job);

exports.PayoffsTransformationJob = PayoffsTransformationJob;
PayoffsTransformationJob.$NAME = 'payoffs-transformation';

},{"../../../validation/tree-validator":91,"../../engine/job":57,"../../engine/job-status":56,"../../engine/simple-job":58,"../../engine/step":61,"./payoffs-transformation-job-parameters":11,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model"}],13:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RecomputeJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../engine/job-parameters");

var _jobParameterDefinition = require("../../engine/job-parameter-definition");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var RecomputeJobParameters = /*#__PURE__*/function (_JobParameters) {
  _inherits(RecomputeJobParameters, _JobParameters);

  var _super = _createSuper(RecomputeJobParameters);

  function RecomputeJobParameters() {
    _classCallCheck(this, RecomputeJobParameters);

    return _super.apply(this, arguments);
  }

  _createClass(RecomputeJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING).set('required', false));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("evalCode", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("evalNumeric", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        ruleName: null,
        //recompute all rules
        evalCode: true,
        evalNumeric: true
      };
    }
  }]);

  return RecomputeJobParameters;
}(_jobParameters.JobParameters);

exports.RecomputeJobParameters = RecomputeJobParameters;

},{"../../engine/job-parameter-definition":49,"../../engine/job-parameters":50,"sd-utils":"sd-utils"}],14:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RecomputeJob = void 0;

var _simpleJob = require("../../engine/simple-job");

var _step = require("../../engine/step");

var _jobStatus = require("../../engine/job-status");

var _treeValidator = require("../../../validation/tree-validator");

var _batchStep = require("../../engine/batch/batch-step");

var _recomputeJobParameters = require("./recompute-job-parameters");

var _job = require("../../engine/job");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var RecomputeJob = /*#__PURE__*/function (_Job) {
  _inherits(RecomputeJob, _Job);

  var _super = _createSuper(RecomputeJob);

  function RecomputeJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, RecomputeJob);

    _this = _super.call(this, "recompute", jobRepository);
    _this.isRestartable = false;
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(RecomputeJob, [{
    key: "doExecute",
    value: function doExecute(execution) {
      var data = execution.getData();
      var params = execution.jobParameters;
      var ruleName = params.value("ruleName");
      var allRules = !ruleName;

      if (ruleName) {
        this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      }

      this.checkValidityAndRecomputeObjective(data, allRules, params.value("evalCode"), params.value("evalNumeric"));
      return execution;
    }
  }, {
    key: "checkValidityAndRecomputeObjective",
    value: function checkValidityAndRecomputeObjective(data, allRules, evalCode, evalNumeric) {
      var _this2 = this;

      data.validationResults = [];

      if (evalCode || evalNumeric) {
        this.expressionsEvaluator.evalExpressions(data, evalCode, evalNumeric);
      }

      data.getRoots().forEach(function (root) {
        var vr = _this2.treeValidator.validate(data.getAllNodesInSubtree(root));

        data.validationResults.push(vr);

        if (vr.isValid()) {
          _this2.objectiveRulesManager.recomputeTree(root, allRules);
        }
      });
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _recomputeJobParameters.RecomputeJobParameters(values);
    }
  }]);

  return RecomputeJob;
}(_job.Job);

exports.RecomputeJob = RecomputeJob;

},{"../../../validation/tree-validator":91,"../../engine/batch/batch-step":31,"../../engine/job":57,"../../engine/job-status":56,"../../engine/simple-job":58,"../../engine/step":61,"./recompute-job-parameters":13}],15:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SensitivityAnalysisJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var SensitivityAnalysisJobParameters = /*#__PURE__*/function (_JobParameters) {
  _inherits(SensitivityAnalysisJobParameters, _JobParameters);

  var _super = _createSuper(SensitivityAnalysisJobParameters);

  function SensitivityAnalysisJobParameters() {
    _classCallCheck(this, SensitivityAnalysisJobParameters);

    return _super.apply(this, arguments);
  }

  _createClass(SensitivityAnalysisJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("extendedPolicyDescription", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING), new _jobParameterDefinition.JobParameterDefinition("min", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("max", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("length", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v >= 2;
      })], 1, Infinity, false, function (v) {
        return v["min"] < v["max"];
      }, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        extendedPolicyDescription: true,
        failOnInvalidTree: true
      };
    }
  }]);

  return SensitivityAnalysisJobParameters;
}(_jobParameters.JobParameters);

exports.SensitivityAnalysisJobParameters = SensitivityAnalysisJobParameters;

},{"../../../engine/job-parameter-definition":49,"../../../engine/job-parameters":50,"sd-utils":"sd-utils"}],16:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SensitivityAnalysisJob = void 0;

var _simpleJob = require("../../../engine/simple-job");

var _sensitivityAnalysisJobParameters = require("./sensitivity-analysis-job-parameters");

var _prepareVariablesStep = require("./steps/prepare-variables-step");

var _initPoliciesStep = require("./steps/init-policies-step");

var _calculateStep = require("./steps/calculate-step");

var _policy = require("../../../../policies/policy");

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var SensitivityAnalysisJob = /*#__PURE__*/function (_SimpleJob) {
  _inherits(SensitivityAnalysisJob, _SimpleJob);

  var _super = _createSuper(SensitivityAnalysisJob);

  function SensitivityAnalysisJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    var batchSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;

    _classCallCheck(this, SensitivityAnalysisJob);

    _this = _super.call(this, "sensitivity-analysis", jobRepository, expressionsEvaluator, objectiveRulesManager);
    _this.batchSize = 5;

    _this.initSteps();

    return _this;
  }

  _createClass(SensitivityAnalysisJob, [{
    key: "initSteps",
    value: function initSteps() {
      this.addStep(new _prepareVariablesStep.PrepareVariablesStep(this.jobRepository, this.expressionsEvaluator.expressionEngine));
      this.addStep(new _initPoliciesStep.InitPoliciesStep(this.jobRepository));
      this.calculateStep = new _calculateStep.CalculateStep(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager, this.batchSize);
      this.addStep(this.calculateStep);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _sensitivityAnalysisJobParameters.SensitivityAnalysisJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
  }, {
    key: "setBatchSize",
    value: function setBatchSize(batchSize) {
      this.batchSize = batchSize;
      this.calculateStep.chunkSize = batchSize;
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        var headers = ['policy_number', 'policy'];
        jobResult.variableNames.forEach(function (n) {
          return headers.push(n);
        });
        headers.push('payoff');
        result.push(headers);
      }

      var roundVariables = !!jobParameters.values.roundVariables;

      if (roundVariables) {
        this.roundVariables(jobResult);
      }

      jobResult.rows.forEach(function (row) {
        var policy = jobResult.policies[row.policyIndex];
        var rowCells = [row.policyIndex + 1, _policy.Policy.toPolicyString(policy, jobParameters.values.extendedPolicyDescription)];
        row.variables.forEach(function (v) {
          return rowCells.push(v);
        });
        rowCells.push(row.payoff);
        result.push(rowCells);

        if (row._variables) {
          //revert original variables
          row.variables = row._variables;
          delete row._variables;
        }
      });
      return result;
    }
  }, {
    key: "roundVariables",
    value: function roundVariables(jobResult) {
      var uniqueValues = jobResult.variableNames.map(function () {
        return new Set();
      });
      jobResult.rows.forEach(function (row) {
        row._variables = row.variables.slice(); // save original row variables

        row.variables.forEach(function (v, i) {
          uniqueValues[i].add(v);
        });
      });
      var uniqueValuesNo = uniqueValues.map(function (s) {
        return s.size;
      });
      var maxPrecision = 14;
      var precision = 2;
      var notReadyVariablesIndexes = jobResult.variableNames.map(function (v, i) {
        return i;
      });

      while (precision <= maxPrecision && notReadyVariablesIndexes.length) {
        uniqueValues = notReadyVariablesIndexes.map(function () {
          return new Set();
        });
        jobResult.rows.forEach(function (row) {
          notReadyVariablesIndexes.forEach(function (variableIndex, notReadyIndex) {
            var val = row._variables[variableIndex];
            val = _sdUtils.Utils.round(val, precision);
            uniqueValues[notReadyIndex].add(val);
            row.variables[variableIndex] = val;
          });
        });
        var newReadyIndexes = [];
        uniqueValues.forEach(function (uniqueVals, notReadyIndex) {
          var origUniqueCount = uniqueValuesNo[notReadyVariablesIndexes[notReadyIndex]];

          if (origUniqueCount == uniqueVals.size) {
            //ready in previous iteration
            newReadyIndexes.push(notReadyIndex);
          }
        });

        if (newReadyIndexes.length) {
          //revert values to prev iteration
          newReadyIndexes.reverse();
          newReadyIndexes.forEach(function (notReadyIndex) {
            notReadyVariablesIndexes.splice(notReadyIndex, 1);
          });
        }

        precision++;
      }
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length <= 2) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[2].getProgress(execution.stepExecutions[2]);
    }
  }]);

  return SensitivityAnalysisJob;
}(_simpleJob.SimpleJob);

exports.SensitivityAnalysisJob = SensitivityAnalysisJob;

},{"../../../../policies/policy":87,"../../../engine/simple-job":58,"./sensitivity-analysis-job-parameters":15,"./steps/calculate-step":17,"./steps/init-policies-step":18,"./steps/prepare-variables-step":19,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],17:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _batchStep = require("../../../../engine/batch/batch-step");

var _treeValidator = require("../../../../../validation/tree-validator");

var _policy = require("../../../../../policies/policy");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var CalculateStep = /*#__PURE__*/function (_BatchStep) {
  _inherits(CalculateStep, _BatchStep);

  var _super = _createSuper(CalculateStep);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager, batchSize) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _super.call(this, "calculate_step", jobRepository, batchSize);
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableValues = jobResult.data.variableValues;
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);

      if (!jobResult.data.rows) {
        jobResult.data.rows = [];
        jobResult.data.variableNames = variableNames;
      }

      return variableValues.length;
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize, jobResult) {
      var variableValues = jobResult.data.variableValues;
      return variableValues.slice(startIndex, startIndex + chunkSize);
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item) {
      var _this2 = this;

      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var failOnInvalidTree = params.value("failOnInvalidTree");
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var variableNames = stepExecution.executionContext.get("variableNames");
      var policies = stepExecution.getJobExecutionContext().get("policies");
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalGlobalCode(data);
      variableNames.forEach(function (variableName, i) {
        data.expressionScope[variableName] = item[i];
      });
      this.expressionsEvaluator.evalExpressionsForNode(data, treeRoot);
      var vr = this.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));
      var valid = vr.isValid();

      if (!valid && failOnInvalidTree) {
        var errorData = {
          variables: {}
        };
        variableNames.forEach(function (variableName, i) {
          errorData.variables[variableName] = item[i];
        });
        throw new _jobComputationException.JobComputationException("computations", errorData);
      }

      var payoffs = [];
      policies.forEach(function (policy) {
        var payoff = 'n/a';

        if (valid) {
          _this2.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

          payoff = treeRoot.computedValue(ruleName, 'payoff')[0];
        }

        payoffs.push(payoff);
      });
      return {
        policies: policies,
        variables: item,
        payoffs: payoffs
      };
    }
  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {
      var _this3 = this;

      var params = stepExecution.getJobParameters();
      var extendedPolicyDescription = params.value("extendedPolicyDescription");
      items.forEach(function (item) {
        if (!item) {
          return;
        }

        item.policies.forEach(function (policy, i) {
          var variables = item.variables.map(function (v) {
            return _this3.toFloat(v);
          });
          var payoff = item.payoffs[i];
          var row = {
            policyIndex: i,
            variables: variables,
            payoff: _sdUtils.Utils.isString(payoff) ? payoff : _this3.toFloat(payoff)
          };
          jobResult.data.rows.push(row);
        });
      });
    }
  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {
      delete jobResult.data.variableValues;
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return CalculateStep;
}(_batchStep.BatchStep);

exports.CalculateStep = CalculateStep;

},{"../../../../../policies/policy":87,"../../../../../validation/tree-validator":91,"../../../../engine/batch/batch-step":31,"../../../../engine/exceptions/job-computation-exception":34,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],18:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.InitPoliciesStep = void 0;

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _policiesCollector = require("../../../../../policies/policies-collector");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var InitPoliciesStep = /*#__PURE__*/function (_Step) {
  _inherits(InitPoliciesStep, _Step);

  var _super = _createSuper(InitPoliciesStep);

  function InitPoliciesStep(jobRepository) {
    _classCallCheck(this, InitPoliciesStep);

    return _super.call(this, "init_policies", jobRepository);
  }

  _createClass(InitPoliciesStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot);
      var policies = policiesCollector.policies;
      stepExecution.getJobExecutionContext().put("policies", policies);

      if (!jobResult.data) {
        jobResult.data = {};
      }

      jobResult.data.policies = policies;
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return InitPoliciesStep;
}(_step.Step);

exports.InitPoliciesStep = InitPoliciesStep;

},{"../../../../../policies/policies-collector":86,"../../../../engine/job-status":56,"../../../../engine/step":61}],19:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PrepareVariablesStep = void 0;

var _sdUtils = require("sd-utils");

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _computationsUtils = require("../../../../../computations-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var PrepareVariablesStep = /*#__PURE__*/function (_Step) {
  _inherits(PrepareVariablesStep, _Step);

  var _super = _createSuper(PrepareVariablesStep);

  function PrepareVariablesStep(jobRepository, expressionEngine) {
    var _this;

    _classCallCheck(this, PrepareVariablesStep);

    _this = _super.call(this, "prepare_variables", jobRepository);
    _this.expressionEngine = expressionEngine;
    return _this;
  }

  _createClass(PrepareVariablesStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var params = stepExecution.getJobParameters();
      var variables = params.value("variables");
      var variableValues = [];
      variables.forEach(function (v) {
        variableValues.push(_computationsUtils.ComputationsUtils.sequence(v.min, v.max, v.length));
      });
      variableValues = _sdUtils.Utils.cartesianProductOf(variableValues);
      jobResult.data = {
        variableValues: variableValues
      };
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return PrepareVariablesStep;
}(_step.Step);

exports.PrepareVariablesStep = PrepareVariablesStep;

},{"../../../../../computations-utils":5,"../../../../engine/job-status":56,"../../../../engine/step":61,"sd-utils":"sd-utils"}],20:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbabilisticSensitivityAnalysisJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var ProbabilisticSensitivityAnalysisJobParameters = /*#__PURE__*/function (_JobParameters) {
  _inherits(ProbabilisticSensitivityAnalysisJobParameters, _JobParameters);

  var _super = _createSuper(ProbabilisticSensitivityAnalysisJobParameters);

  function ProbabilisticSensitivityAnalysisJobParameters() {
    _classCallCheck(this, ProbabilisticSensitivityAnalysisJobParameters);

    return _super.apply(this, arguments);
  }

  _createClass(ProbabilisticSensitivityAnalysisJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("extendedPolicyDescription", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("numberOfRuns", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v > 0;
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING), new _jobParameterDefinition.JobParameterDefinition("formula", _jobParameterDefinition.PARAMETER_TYPE.NUMBER_EXPRESSION)], 1, Infinity, false, null, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        extendedPolicyDescription: true,
        failOnInvalidTree: true
      };
    }
  }]);

  return ProbabilisticSensitivityAnalysisJobParameters;
}(_jobParameters.JobParameters);

exports.ProbabilisticSensitivityAnalysisJobParameters = ProbabilisticSensitivityAnalysisJobParameters;

},{"../../../engine/job-parameter-definition":49,"../../../engine/job-parameters":50,"sd-utils":"sd-utils"}],21:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbabilisticSensitivityAnalysisJob = void 0;

var _probabilisticSensitivityAnalysisJobParameters = require("./probabilistic-sensitivity-analysis-job-parameters");

var _initPoliciesStep = require("../n-way/steps/init-policies-step");

var _sensitivityAnalysisJob = require("../n-way/sensitivity-analysis-job");

var _probCalculateStep = require("./steps/prob-calculate-step");

var _computePolicyStatsStep = require("./steps/compute-policy-stats-step");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var ProbabilisticSensitivityAnalysisJob = /*#__PURE__*/function (_SensitivityAnalysisJ) {
  _inherits(ProbabilisticSensitivityAnalysisJob, _SensitivityAnalysisJ);

  var _super = _createSuper(ProbabilisticSensitivityAnalysisJob);

  function ProbabilisticSensitivityAnalysisJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    var batchSize = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;

    _classCallCheck(this, ProbabilisticSensitivityAnalysisJob);

    _this = _super.call(this, jobRepository, expressionsEvaluator, objectiveRulesManager, batchSize);
    _this.name = "probabilistic-sensitivity-analysis";
    return _this;
  }

  _createClass(ProbabilisticSensitivityAnalysisJob, [{
    key: "initSteps",
    value: function initSteps() {
      this.addStep(new _initPoliciesStep.InitPoliciesStep(this.jobRepository));
      this.calculateStep = new _probCalculateStep.ProbCalculateStep(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager, this.batchSize);
      this.addStep(this.calculateStep);
      this.addStep(new _computePolicyStatsStep.ComputePolicyStatsStep(this.expressionsEvaluator.expressionEngine, this.objectiveRulesManager, this.jobRepository));
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _probabilisticSensitivityAnalysisJobParameters.ProbabilisticSensitivityAnalysisJobParameters(values);
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length <= 1) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[1].getProgress(execution.stepExecutions[1]);
    }
  }]);

  return ProbabilisticSensitivityAnalysisJob;
}(_sensitivityAnalysisJob.SensitivityAnalysisJob);

exports.ProbabilisticSensitivityAnalysisJob = ProbabilisticSensitivityAnalysisJob;

},{"../n-way/sensitivity-analysis-job":16,"../n-way/steps/init-policies-step":18,"./probabilistic-sensitivity-analysis-job-parameters":20,"./steps/compute-policy-stats-step":22,"./steps/prob-calculate-step":23}],22:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComputePolicyStatsStep = void 0;

var _sdUtils = require("sd-utils");

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _sdExpressionEngine = require("sd-expression-engine");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var ComputePolicyStatsStep = /*#__PURE__*/function (_Step) {
  _inherits(ComputePolicyStatsStep, _Step);

  var _super = _createSuper(ComputePolicyStatsStep);

  function ComputePolicyStatsStep(expressionEngine, objectiveRulesManager, jobRepository) {
    var _this;

    _classCallCheck(this, ComputePolicyStatsStep);

    _this = _super.call(this, "compute_policy_stats", jobRepository);
    _this.expressionEngine = expressionEngine;
    _this.objectiveRulesManager = objectiveRulesManager;
    return _this;
  }

  _createClass(ComputePolicyStatsStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var params = stepExecution.getJobParameters();
      var numberOfRuns = params.value("numberOfRuns");
      var ruleName = params.value("ruleName");
      var rule = this.objectiveRulesManager.ruleByName[ruleName];
      var payoffsPerPolicy = jobResult.data.policies.map(function () {
        return [];
      });
      jobResult.data.rows.forEach(function (row) {
        payoffsPerPolicy[row.policyIndex].push(_sdUtils.Utils.isString(row.payoff) ? 0 : row.payoff);
      });

      _sdUtils.log.debug('payoffsPerPolicy', payoffsPerPolicy, jobResult.data.rows.length, rule.maximization);

      jobResult.data.medians = payoffsPerPolicy.map(function (payoffs) {
        return _sdExpressionEngine.ExpressionEngine.median(payoffs);
      });
      jobResult.data.standardDeviations = payoffsPerPolicy.map(function (payoffs) {
        return _sdExpressionEngine.ExpressionEngine.std(payoffs);
      });

      if (rule.maximization) {
        jobResult.data.policyIsBestProbabilities = jobResult.data.policyToHighestPayoffCount.map(function (v) {
          return _sdExpressionEngine.ExpressionEngine.toFloat(_sdExpressionEngine.ExpressionEngine.divide(v, numberOfRuns));
        });
      } else {
        jobResult.data.policyIsBestProbabilities = jobResult.data.policyToLowestPayoffCount.map(function (v) {
          return _sdExpressionEngine.ExpressionEngine.toFloat(_sdExpressionEngine.ExpressionEngine.divide(v, numberOfRuns));
        });
      }

      jobResult.data.policyToHighestPayoffCount = jobResult.data.policyToHighestPayoffCount.map(function (v) {
        return _sdExpressionEngine.ExpressionEngine.toFloat(v);
      });
      jobResult.data.policyToLowestPayoffCount = jobResult.data.policyToLowestPayoffCount.map(function (v) {
        return _sdExpressionEngine.ExpressionEngine.toFloat(v);
      });
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return ComputePolicyStatsStep;
}(_step.Step);

exports.ComputePolicyStatsStep = ComputePolicyStatsStep;

},{"../../../../engine/job-status":56,"../../../../engine/step":61,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],23:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbCalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _calculateStep = require("../../n-way/steps/calculate-step");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);

      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var ProbCalculateStep = /*#__PURE__*/function (_CalculateStep) {
  _inherits(ProbCalculateStep, _CalculateStep);

  var _super = _createSuper(ProbCalculateStep);

  function ProbCalculateStep() {
    _classCallCheck(this, ProbCalculateStep);

    return _super.apply(this, arguments);
  }

  _createClass(ProbCalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);

      if (!jobResult.data.rows) {
        jobResult.data.rows = [];
        jobResult.data.variableNames = variableNames;
        jobResult.data.expectedValues = _sdUtils.Utils.fill(new Array(jobResult.data.policies.length), 0);
        jobResult.data.policyToHighestPayoffCount = _sdUtils.Utils.fill(new Array(jobResult.data.policies.length), 0);
        jobResult.data.policyToLowestPayoffCount = _sdUtils.Utils.fill(new Array(jobResult.data.policies.length), 0);
      }

      return params.value("numberOfRuns");
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize, jobResult) {
      var _this = this;

      var params = stepExecution.getJobParameters();
      var variables = params.value("variables");
      var data = stepExecution.getData();
      var variableValues = [];

      for (var runIndex = 0; runIndex < chunkSize; runIndex++) {
        var singleRunVariableValues = [];
        var errors = [];
        variables.forEach(function (v) {
          try {
            var evaluated = _this.expressionsEvaluator.expressionEngine.eval(v.formula, true, _sdUtils.Utils.cloneDeep(data.expressionScope));

            singleRunVariableValues.push(_sdExpressionEngine.ExpressionEngine.toFloat(evaluated));
          } catch (e) {
            errors.push({
              variable: v,
              error: e
            });
          }
        });

        if (errors.length) {
          var errorData = {
            variables: []
          };
          errors.forEach(function (e) {
            errorData.variables[e.variable.name] = e.error.message;
          });
          throw new _jobComputationException.JobComputationException("param-computation", errorData);
        }

        variableValues.push(singleRunVariableValues);
      }

      return variableValues;
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, currentItemCount, jobResult) {
      var r = _get(_getPrototypeOf(ProbCalculateStep.prototype), "processItem", this).call(this, stepExecution, item, jobResult);

      var params = stepExecution.getJobParameters();
      var numberOfRuns = params.value("numberOfRuns");
      var policies = stepExecution.getJobExecutionContext().get("policies");
      this.updatePolicyStats(r, policies, numberOfRuns, jobResult);
      return r;
    }
  }, {
    key: "updatePolicyStats",
    value: function updatePolicyStats(r, policies, numberOfRuns, jobResult) {
      var highestPayoff = -Infinity;
      var lowestPayoff = Infinity;
      var bestPolicyIndexes = [];
      var worstPolicyIndexes = [];

      var zeroNum = _sdExpressionEngine.ExpressionEngine.toNumber(0);

      policies.forEach(function (policy, i) {
        var payoff = r.payoffs[i];

        if (_sdUtils.Utils.isString(payoff)) {
          payoff = zeroNum;
        }

        if (payoff < lowestPayoff) {
          lowestPayoff = payoff;
          worstPolicyIndexes = [i];
        } else if (payoff.equals(lowestPayoff)) {
          worstPolicyIndexes.push(i);
        }

        if (payoff > highestPayoff) {
          highestPayoff = payoff;
          bestPolicyIndexes = [i];
        } else if (payoff.equals(highestPayoff)) {
          bestPolicyIndexes.push(i);
        }

        jobResult.data.expectedValues[i] = _sdExpressionEngine.ExpressionEngine.add(jobResult.data.expectedValues[i], _sdExpressionEngine.ExpressionEngine.divide(payoff, numberOfRuns));
      });
      bestPolicyIndexes.forEach(function (policyIndex) {
        jobResult.data.policyToHighestPayoffCount[policyIndex] = _sdExpressionEngine.ExpressionEngine.add(jobResult.data.policyToHighestPayoffCount[policyIndex], _sdExpressionEngine.ExpressionEngine.divide(1, bestPolicyIndexes.length));
      });
      worstPolicyIndexes.forEach(function (policyIndex) {
        jobResult.data.policyToLowestPayoffCount[policyIndex] = _sdExpressionEngine.ExpressionEngine.add(jobResult.data.policyToLowestPayoffCount[policyIndex], _sdExpressionEngine.ExpressionEngine.divide(1, worstPolicyIndexes.length));
      });
    }
  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {
      var _this2 = this;

      jobResult.data.expectedValues = jobResult.data.expectedValues.map(function (v) {
        return _this2.toFloat(v);
      });
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return ProbCalculateStep;
}(_calculateStep.CalculateStep);

exports.ProbCalculateStep = ProbCalculateStep;

},{"../../../../engine/exceptions/job-computation-exception":34,"../../n-way/steps/calculate-step":17,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],24:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SpiderPlotJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var SpiderPlotJobParameters = /*#__PURE__*/function (_JobParameters) {
  _inherits(SpiderPlotJobParameters, _JobParameters);

  var _super = _createSuper(SpiderPlotJobParameters);

  function SpiderPlotJobParameters() {
    _classCallCheck(this, SpiderPlotJobParameters);

    return _super.apply(this, arguments);
  }

  _createClass(SpiderPlotJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("percentageChangeRange", _jobParameterDefinition.PARAMETER_TYPE.NUMBER).set("singleValueValidator", function (v) {
        return v > 0 && v <= 100;
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("length", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v >= 0;
      }));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING)], 1, Infinity, false, null, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        failOnInvalidTree: true
      };
    }
  }]);

  return SpiderPlotJobParameters;
}(_jobParameters.JobParameters);

exports.SpiderPlotJobParameters = SpiderPlotJobParameters;

},{"../../../engine/job-parameter-definition":49,"../../../engine/job-parameters":50,"sd-utils":"sd-utils"}],25:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SpiderPlotJob = void 0;

var _simpleJob = require("../../../engine/simple-job");

var _calculateStep = require("./steps/calculate-step");

var _spiderPlotJobParameters = require("./spider-plot-job-parameters");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var SpiderPlotJob = /*#__PURE__*/function (_SimpleJob) {
  _inherits(SpiderPlotJob, _SimpleJob);

  var _super = _createSuper(SpiderPlotJob);

  function SpiderPlotJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, SpiderPlotJob);

    _this = _super.call(this, "spider-plot", jobRepository);

    _this.addStep(new _calculateStep.CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager));

    return _this;
  }

  _createClass(SpiderPlotJob, [{
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _spiderPlotJobParameters.SpiderPlotJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length < 1) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[0].getProgress(execution.stepExecutions[0]);
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        result.push(['variable_name', 'policy_no'].concat(jobResult.percentageRangeValues));
      }

      jobResult.rows.forEach(function (row, index) {
        result.push.apply(result, _toConsumableArray(row.payoffs.map(function (payoffs, policyIndex) {
          return [row.variableName, policyIndex + 1].concat(_toConsumableArray(payoffs));
        })));
      });
      return result;
    }
  }]);

  return SpiderPlotJob;
}(_simpleJob.SimpleJob);

exports.SpiderPlotJob = SpiderPlotJob;

},{"../../../engine/simple-job":58,"./spider-plot-job-parameters":24,"./steps/calculate-step":26}],26:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

var _batchStep = require("../../../../engine/batch/batch-step");

var _treeValidator = require("../../../../../validation/tree-validator");

var _policy = require("../../../../../policies/policy");

var _policiesCollector = require("../../../../../policies/policies-collector");

var _computationsUtils = require("../../../../../computations-utils");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var CalculateStep = /*#__PURE__*/function (_BatchStep) {
  _inherits(CalculateStep, _BatchStep);

  var _super = _createSuper(CalculateStep);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _super.call(this, "calculate_step", jobRepository, 1);
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var _this2 = this;

      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var percentageChangeRange = params.value("percentageChangeRange");
      var length = params.value("length");
      var variables = params.value("variables");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var payoff = treeRoot.computedValue(ruleName, 'payoff');
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalExpressions(data);
      this.objectiveRulesManager.recomputeTree(treeRoot, false);
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot, ruleName);
      var defaultValues = {};
      data.getGlobalVariableNames().forEach(function (name) {
        var v = data.expressionScope[name];

        try {
          defaultValues[name] = _this2.toFloat(v);
        } catch (e) {
          throw new _jobComputationException.JobComputationException("error computing float value of a variable", {
            name: name,
            value: v
          });
        }
      });

      var percentageRangeValues = _computationsUtils.ComputationsUtils.sequence(-percentageChangeRange, percentageChangeRange, 2 * length + 1);

      var variableValues = [];
      variables.forEach(function (v) {
        var defVal = defaultValues[v.name];
        variableValues.push(percentageRangeValues.map(function (p) {
          return _this2.toFloat(_sdExpressionEngine.ExpressionEngine.add(defVal, _sdExpressionEngine.ExpressionEngine.multiply(_sdExpressionEngine.ExpressionEngine.divide(p, 100), defVal)));
        }));
      });

      if (!jobResult.data) {
        jobResult.data = {
          variableNames: variableNames,
          defaultValues: defaultValues,
          percentageRangeValues: percentageRangeValues,
          defaultPayoff: this.toFloat(payoff)[0],
          policies: policiesCollector.policies,
          rows: []
        };
      }

      stepExecution.getJobExecutionContext().put("variableValues", variableValues);
      return variableValues.length;
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize) {
      var variableValues = stepExecution.getJobExecutionContext().get("variableValues");
      return variableValues.slice(startIndex, startIndex + chunkSize);
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, itemIndex, jobResult) {
      var _this3 = this;

      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var failOnInvalidTree = params.value("failOnInvalidTree");
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var variableNames = stepExecution.executionContext.get("variableNames");
      var variableName = variableNames[itemIndex];
      var payoffs = jobResult.data.policies.map(function (policy) {
        return [];
      });
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalGlobalCode(data);
      item.forEach(function (variableValue) {
        data.expressionScope[variableName] = variableValue;

        _this3.expressionsEvaluator.evalExpressionsForNode(data, treeRoot);

        var vr = _this3.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));

        var valid = vr.isValid();

        if (!valid && failOnInvalidTree) {
          var errorData = {
            variables: {}
          };
          errorData.variables[variableName] = variableValue;
          throw new _jobComputationException.JobComputationException("computations", errorData);
        }

        jobResult.data.policies.forEach(function (policy, policyIndex) {
          _this3.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

          var payoff = treeRoot.computedValue(ruleName, 'payoff')[0];
          payoffs[policyIndex].push(_this3.toFloat(payoff));
        });
      });
      return {
        variableName: variableName,
        variableIndex: itemIndex,
        variableValues: item,
        payoffs: payoffs
      };
    }
  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {
      var _jobResult$data$rows;

      (_jobResult$data$rows = jobResult.data.rows).push.apply(_jobResult$data$rows, _toConsumableArray(items));
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return CalculateStep;
}(_batchStep.BatchStep);

exports.CalculateStep = CalculateStep;

},{"../../../../../computations-utils":5,"../../../../../policies/policies-collector":86,"../../../../../policies/policy":87,"../../../../../validation/tree-validator":91,"../../../../engine/batch/batch-step":31,"../../../../engine/exceptions/job-computation-exception":34,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],27:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CalculateStep = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

var _jobComputationException = require("../../../../engine/exceptions/job-computation-exception");

var _batchStep = require("../../../../engine/batch/batch-step");

var _treeValidator = require("../../../../../validation/tree-validator");

var _policy = require("../../../../../policies/policy");

var _policiesCollector = require("../../../../../policies/policies-collector");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var CalculateStep = /*#__PURE__*/function (_BatchStep) {
  _inherits(CalculateStep, _BatchStep);

  var _super = _createSuper(CalculateStep);

  function CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, CalculateStep);

    _this = _super.call(this, "calculate_step", jobRepository, 1);
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.treeValidator = new _treeValidator.TreeValidator();
    return _this;
  }

  _createClass(CalculateStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      var _this2 = this;

      var jobExecutionContext = stepExecution.getJobExecutionContext();
      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      this.objectiveRulesManager.setCurrentRuleByName(ruleName);
      var variableValues = jobExecutionContext.get("variableValues");
      var variableNames = params.value("variables").map(function (v) {
        return v.name;
      });
      stepExecution.executionContext.put("variableNames", variableNames);
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var payoff = treeRoot.computedValue(ruleName, 'payoff');
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalExpressions(data);
      this.objectiveRulesManager.recomputeTree(treeRoot, false);
      var policiesCollector = new _policiesCollector.PoliciesCollector(treeRoot, ruleName);
      var defaultValues = {};
      data.getGlobalVariableNames().forEach(function (name) {
        var v = data.expressionScope[name];

        try {
          defaultValues[name] = _this2.toFloat(v);
        } catch (e) {
          throw new _jobComputationException.JobComputationException("error computing float value of a variable", {
            name: name,
            value: v
          });
        }
      });

      if (!jobResult.data) {
        jobResult.data = {
          variableNames: variableNames,
          defaultValues: defaultValues,
          variableExtents: variableValues.map(function (v) {
            return [v[0], v[v.length - 1]];
          }),
          defaultPayoff: this.toFloat(payoff)[0],
          policies: policiesCollector.policies,
          rows: []
        };
      }

      return variableValues.length;
    }
  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize) {
      var variableValues = stepExecution.getJobExecutionContext().get("variableValues");
      return variableValues.slice(startIndex, startIndex + chunkSize);
    }
  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, itemIndex, jobResult) {
      var _this3 = this;

      var params = stepExecution.getJobParameters();
      var ruleName = params.value("ruleName");
      var failOnInvalidTree = params.value("failOnInvalidTree");
      var data = stepExecution.getData();
      var treeRoot = data.getRoots()[0];
      var variableNames = stepExecution.executionContext.get("variableNames");
      var variableName = variableNames[itemIndex];
      var extents = jobResult.data.policies.map(function (policy) {
        return {
          min: Infinity,
          max: -Infinity
        };
      });
      var values = jobResult.data.policies.map(function (policy) {
        return {
          min: null,
          max: null
        };
      });
      this.expressionsEvaluator.clear(data);
      this.expressionsEvaluator.evalGlobalCode(data);
      item.forEach(function (variableValue) {
        data.expressionScope[variableName] = variableValue;

        _this3.expressionsEvaluator.evalExpressionsForNode(data, treeRoot);

        var vr = _this3.treeValidator.validate(data.getAllNodesInSubtree(treeRoot));

        var valid = vr.isValid();

        if (!valid && failOnInvalidTree) {
          var errorData = {
            variables: {}
          };
          errorData.variables[variableName] = variableValue;
          throw new _jobComputationException.JobComputationException("computations", errorData);
        }

        jobResult.data.policies.forEach(function (policy, policyIndex) {
          _this3.objectiveRulesManager.recomputeTree(treeRoot, false, policy);

          var payoff = treeRoot.computedValue(ruleName, 'payoff')[0];

          if (payoff < extents[policyIndex].min) {
            extents[policyIndex].min = payoff;
            values[policyIndex].min = variableValue;
          }

          if (payoff > extents[policyIndex].max) {
            extents[policyIndex].max = payoff;
            values[policyIndex].max = variableValue;
          }
        });
      });
      return {
        variableName: variableName,
        variableIndex: itemIndex,
        extents: extents.map(function (e) {
          return [_this3.toFloat(e.min), _this3.toFloat(e.max)];
        }),
        extentVariableValues: values.map(function (v) {
          return [_this3.toFloat(v.min), _this3.toFloat(v.max)];
        })
      };
    }
  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {
      var _jobResult$data$rows;

      (_jobResult$data$rows = jobResult.data.rows).push.apply(_jobResult$data$rows, _toConsumableArray(items));
    }
  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {
      jobResult.data.rows.sort(function (a, b) {
        return b.extents[0][1] - b.extents[0][0] - (a.extents[0][1] - a.extents[0][0]);
      });
    }
  }, {
    key: "toFloat",
    value: function toFloat(v) {
      return _sdExpressionEngine.ExpressionEngine.toFloat(v);
    }
  }]);

  return CalculateStep;
}(_batchStep.BatchStep);

exports.CalculateStep = CalculateStep;

},{"../../../../../policies/policies-collector":86,"../../../../../policies/policy":87,"../../../../../validation/tree-validator":91,"../../../../engine/batch/batch-step":31,"../../../../engine/exceptions/job-computation-exception":34,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],28:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PrepareVariablesStep = void 0;

var _sdUtils = require("sd-utils");

var _step = require("../../../../engine/step");

var _jobStatus = require("../../../../engine/job-status");

var _sdExpressionEngine = require("sd-expression-engine");

var _computationsUtils = require("../../../../../computations-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var PrepareVariablesStep = /*#__PURE__*/function (_Step) {
  _inherits(PrepareVariablesStep, _Step);

  var _super = _createSuper(PrepareVariablesStep);

  function PrepareVariablesStep(jobRepository) {
    _classCallCheck(this, PrepareVariablesStep);

    return _super.call(this, "prepare_variables", jobRepository);
  }

  _createClass(PrepareVariablesStep, [{
    key: "doExecute",
    value: function doExecute(stepExecution) {
      var params = stepExecution.getJobParameters();
      var variables = params.value("variables");
      var variableValues = [];
      variables.forEach(function (v) {
        variableValues.push(_computationsUtils.ComputationsUtils.sequence(v.min, v.max, v.length));
      });
      stepExecution.getJobExecutionContext().put("variableValues", variableValues);
      stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
      return stepExecution;
    }
  }]);

  return PrepareVariablesStep;
}(_step.Step);

exports.PrepareVariablesStep = PrepareVariablesStep;

},{"../../../../../computations-utils":5,"../../../../engine/job-status":56,"../../../../engine/step":61,"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],29:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TornadoDiagramJobParameters = void 0;

var _sdUtils = require("sd-utils");

var _jobParameters = require("../../../engine/job-parameters");

var _jobParameterDefinition = require("../../../engine/job-parameter-definition");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var TornadoDiagramJobParameters = /*#__PURE__*/function (_JobParameters) {
  _inherits(TornadoDiagramJobParameters, _JobParameters);

  var _super = _createSuper(TornadoDiagramJobParameters);

  function TornadoDiagramJobParameters() {
    _classCallCheck(this, TornadoDiagramJobParameters);

    return _super.apply(this, arguments);
  }

  _createClass(TornadoDiagramJobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("id", _jobParameterDefinition.PARAMETER_TYPE.STRING, 1, 1, true));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("ruleName", _jobParameterDefinition.PARAMETER_TYPE.STRING));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("variables", [new _jobParameterDefinition.JobParameterDefinition("name", _jobParameterDefinition.PARAMETER_TYPE.STRING), new _jobParameterDefinition.JobParameterDefinition("min", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("max", _jobParameterDefinition.PARAMETER_TYPE.NUMBER), new _jobParameterDefinition.JobParameterDefinition("length", _jobParameterDefinition.PARAMETER_TYPE.INTEGER).set("singleValueValidator", function (v) {
        return v >= 0;
      })], 1, Infinity, false, function (v) {
        return v["min"] <= v["max"];
      }, function (values) {
        return _sdUtils.Utils.isUnique(values, function (v) {
          return v["name"];
        });
      } //Variable names should be unique
      ));
      this.definitions.push(new _jobParameterDefinition.JobParameterDefinition("failOnInvalidTree", _jobParameterDefinition.PARAMETER_TYPE.BOOLEAN));
    }
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {
      this.values = {
        id: _sdUtils.Utils.guid(),
        failOnInvalidTree: true
      };
    }
  }]);

  return TornadoDiagramJobParameters;
}(_jobParameters.JobParameters);

exports.TornadoDiagramJobParameters = TornadoDiagramJobParameters;

},{"../../../engine/job-parameter-definition":49,"../../../engine/job-parameters":50,"sd-utils":"sd-utils"}],30:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TornadoDiagramJob = void 0;

var _simpleJob = require("../../../engine/simple-job");

var _prepareVariablesStep = require("./steps/prepare-variables-step");

var _calculateStep = require("./steps/calculate-step");

var _tornadoDiagramJobParameters = require("./tornado-diagram-job-parameters");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var TornadoDiagramJob = /*#__PURE__*/function (_SimpleJob) {
  _inherits(TornadoDiagramJob, _SimpleJob);

  var _super = _createSuper(TornadoDiagramJob);

  function TornadoDiagramJob(jobRepository, expressionsEvaluator, objectiveRulesManager) {
    var _this;

    _classCallCheck(this, TornadoDiagramJob);

    _this = _super.call(this, "tornado-diagram", jobRepository);

    _this.addStep(new _prepareVariablesStep.PrepareVariablesStep(jobRepository));

    _this.addStep(new _calculateStep.CalculateStep(jobRepository, expressionsEvaluator, objectiveRulesManager));

    return _this;
  }

  _createClass(TornadoDiagramJob, [{
    key: "createJobParameters",
    value: function createJobParameters(values) {
      return new _tornadoDiagramJobParameters.TornadoDiagramJobParameters(values);
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return data.getRoots().length === 1;
        }
      };
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      if (execution.stepExecutions.length <= 1) {
        return {
          total: 1,
          current: 0
        };
      }

      return this.steps[1].getProgress(execution.stepExecutions[1]);
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      var withHeaders = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var result = [];

      if (withHeaders) {
        result.push(['variable_name', 'default_var_value', "min_var_value", "max_var_value", 'default_payoff', "min_payoff", "max_payoff", "policy_no"]);
      }

      jobResult.rows.forEach(function (row, index) {
        result.push.apply(result, _toConsumableArray(row.extents.map(function (extent, policyIndex) {
          return [row.variableName, jobResult.defaultValues[row.variableName], row.extentVariableValues[policyIndex][0], row.extentVariableValues[policyIndex][1], jobResult.defaultPayoff, extent[0], extent[1], policyIndex + 1];
        })));
      });
      return result;
    }
  }]);

  return TornadoDiagramJob;
}(_simpleJob.SimpleJob);

exports.TornadoDiagramJob = TornadoDiagramJob;

},{"../../../engine/simple-job":58,"./steps/calculate-step":27,"./steps/prepare-variables-step":28,"./tornado-diagram-job-parameters":29}],31:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BatchStep = void 0;

var _jobStatus = require("../job-status");

var _sdUtils = require("sd-utils");

var _step = require("../step");

var _jobInterruptedException = require("../exceptions/job-interrupted-exception");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*job step that process batch of items*/


var BatchStep = /*#__PURE__*/function (_Step) {
  _inherits(BatchStep, _Step);

  var _super = _createSuper(BatchStep);

  function BatchStep(name, jobRepository, chunkSize) {
    var _this;

    _classCallCheck(this, BatchStep);

    _this = _super.call(this, name, jobRepository);
    _this.chunkSize = chunkSize;
    return _this;
  }
  /**
   * Extension point for subclasses to perform step initialization. Should return total item count
   */


  _createClass(BatchStep, [{
    key: "init",
    value: function init(stepExecution, jobResult) {
      throw "BatchStep.init function not implemented for step: " + this.name;
    }
    /**
     * Extension point for subclasses to read and return chunk of items to process
     */

  }, {
    key: "readNextChunk",
    value: function readNextChunk(stepExecution, startIndex, chunkSize, jobResult) {
      throw "BatchStep.readNextChunk function not implemented for step: " + this.name;
    }
    /**
     * Extension point for subclasses to process single item
     * Must return processed item which will be passed in a chunk to writeChunk function
     */

  }, {
    key: "processItem",
    value: function processItem(stepExecution, item, currentItemCount, jobResult) {
      throw "BatchStep.processItem function not implemented for step: " + this.name;
    }
    /**
     * Extension point for subclasses to write chunk of items. Not required
     */

  }, {
    key: "writeChunk",
    value: function writeChunk(stepExecution, items, jobResult) {}
    /**
     * Extension point for subclasses to perform postprocessing after all items have been processed. Not required
     */

  }, {
    key: "postProcess",
    value: function postProcess(stepExecution, jobResult) {}
  }, {
    key: "setTotalItemCount",
    value: function setTotalItemCount(stepExecution, count) {
      stepExecution.executionContext.put(BatchStep.TOTAL_ITEM_COUNT_PROP, count);
    }
  }, {
    key: "getTotalItemCount",
    value: function getTotalItemCount(stepExecution) {
      return stepExecution.executionContext.get(BatchStep.TOTAL_ITEM_COUNT_PROP);
    }
  }, {
    key: "setCurrentItemCount",
    value: function setCurrentItemCount(stepExecution, count) {
      stepExecution.executionContext.put(BatchStep.CURRENT_ITEM_COUNT_PROP, count);
    }
  }, {
    key: "getCurrentItemCount",
    value: function getCurrentItemCount(stepExecution) {
      return stepExecution.executionContext.get(BatchStep.CURRENT_ITEM_COUNT_PROP) || 0;
    }
  }, {
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {
      var _this2 = this;

      return Promise.resolve().then(function () {
        return _this2.init(stepExecution, jobResult);
      }).catch(function (e) {
        _sdUtils.log.error("Failed to initialize batch step: " + _this2.name, e);

        throw e;
      }).then(function (totalItemCount) {
        return Promise.resolve().then(function () {
          _this2.setCurrentItemCount(stepExecution, _this2.getCurrentItemCount(stepExecution));

          _this2.setTotalItemCount(stepExecution, totalItemCount);

          return _this2.handleNextChunk(stepExecution, jobResult);
        }).catch(function (e) {
          if (!(e instanceof _jobInterruptedException.JobInterruptedException)) {
            _sdUtils.log.error("Failed to handle batch step: " + _this2.name, e);
          }

          throw e;
        });
      }).then(function () {
        return Promise.resolve().then(function () {
          return _this2.postProcess(stepExecution, jobResult);
        }).catch(function (e) {
          _sdUtils.log.error("Failed to postProcess batch step: " + _this2.name, e);

          throw e;
        });
      }).then(function () {
        stepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
        return stepExecution;
      });
    }
  }, {
    key: "handleNextChunk",
    value: function handleNextChunk(stepExecution, jobResult) {
      var _this3 = this;

      var currentItemCount = this.getCurrentItemCount(stepExecution);
      var totalItemCount = this.getTotalItemCount(stepExecution);
      var chunkSize = Math.min(this.chunkSize, totalItemCount - currentItemCount);

      if (currentItemCount >= totalItemCount) {
        return stepExecution;
      }

      return this.checkJobExecutionFlags(stepExecution).then(function () {
        // Check if someone is trying to stop us
        if (stepExecution.terminateOnly) {
          throw new _jobInterruptedException.JobInterruptedException("JobExecution interrupted.");
        }

        return stepExecution;
      }).then(function () {
        return Promise.resolve().then(function () {
          return _this3.readNextChunk(stepExecution, currentItemCount, chunkSize, jobResult);
        }).catch(function (e) {
          _sdUtils.log.error("Failed to read chunk (" + currentItemCount + "," + chunkSize + ") in batch step: " + _this3.name, e);

          throw e;
        });
      }).then(function (chunk) {
        return Promise.resolve().then(function () {
          return _this3.processChunk(stepExecution, chunk, currentItemCount, jobResult);
        }).catch(function (e) {
          _sdUtils.log.error("Failed to process chunk (" + currentItemCount + "," + chunkSize + ") in batch step: " + _this3.name, e);

          throw e;
        });
      }).then(function (processedChunk) {
        return Promise.resolve().then(function () {
          return _this3.writeChunk(stepExecution, processedChunk, jobResult);
        }).catch(function (e) {
          _sdUtils.log.error("Failed to write chunk (" + currentItemCount + "," + chunkSize + ") in batch step: " + _this3.name, e);

          throw e;
        });
      }).then(function (res) {
        currentItemCount += chunkSize;

        _this3.setCurrentItemCount(stepExecution, currentItemCount);

        return _this3.updateJobProgress(stepExecution).then(function () {
          return _this3.handleNextChunk(stepExecution, jobResult);
        });
      });
    }
  }, {
    key: "processChunk",
    value: function processChunk(stepExecution, chunk, currentItemCount, jobResult) {
      var _this4 = this; //TODO promisify


      return chunk.map(function (item, i) {
        return _this4.processItem(stepExecution, item, currentItemCount + i, jobResult);
      });
    }
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(stepExecution) {
      return {
        total: this.getTotalItemCount(stepExecution),
        current: this.getCurrentItemCount(stepExecution)
      };
    }
  }, {
    key: "updateJobProgress",
    value: function updateJobProgress(stepExecution) {
      var progress = this.jobRepository.getJobByName(stepExecution.jobExecution.jobInstance.jobName).getProgress(stepExecution.jobExecution);
      return this.jobRepository.updateJobExecutionProgress(stepExecution.jobExecution.id, progress);
    }
  }, {
    key: "checkJobExecutionFlags",
    value: function checkJobExecutionFlags(stepExecution) {
      return this.jobRepository.getJobByName(stepExecution.jobExecution.jobInstance.jobName).checkExecutionFlags(stepExecution.jobExecution);
    }
  }]);

  return BatchStep;
}(_step.Step);

exports.BatchStep = BatchStep;
BatchStep.CURRENT_ITEM_COUNT_PROP = 'batch_step_current_item_count';
BatchStep.TOTAL_ITEM_COUNT_PROP = 'batch_step_total_item_count';

},{"../exceptions/job-interrupted-exception":38,"../job-status":56,"../step":61,"sd-utils":"sd-utils"}],32:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExtendableError = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var ExtendableError = function ExtendableError(message, data) {
  _classCallCheck(this, ExtendableError);

  this.message = message;
  this.data = data;
  this.name = this.constructor.name;
};

exports.ExtendableError = ExtendableError;

},{}],33:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extendableError = require("./extendable-error");

Object.keys(_extendableError).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _extendableError[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _extendableError[key];
    }
  });
});

var _jobDataInvalidException = require("./job-data-invalid-exception");

Object.keys(_jobDataInvalidException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _jobDataInvalidException[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobDataInvalidException[key];
    }
  });
});

var _jobExecutionAlreadyRunningException = require("./job-execution-already-running-exception");

Object.keys(_jobExecutionAlreadyRunningException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _jobExecutionAlreadyRunningException[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecutionAlreadyRunningException[key];
    }
  });
});

var _jobInstanceAlreadyCompleteException = require("./job-instance-already-complete-exception");

Object.keys(_jobInstanceAlreadyCompleteException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _jobInstanceAlreadyCompleteException[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobInstanceAlreadyCompleteException[key];
    }
  });
});

var _jobInterruptedException = require("./job-interrupted-exception");

Object.keys(_jobInterruptedException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _jobInterruptedException[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobInterruptedException[key];
    }
  });
});

var _jobParametersInvalidException = require("./job-parameters-invalid-exception");

Object.keys(_jobParametersInvalidException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _jobParametersInvalidException[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobParametersInvalidException[key];
    }
  });
});

var _jobRestartException = require("./job-restart-exception");

Object.keys(_jobRestartException).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _jobRestartException[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobRestartException[key];
    }
  });
});

},{"./extendable-error":32,"./job-data-invalid-exception":35,"./job-execution-already-running-exception":36,"./job-instance-already-complete-exception":37,"./job-interrupted-exception":38,"./job-parameters-invalid-exception":39,"./job-restart-exception":40}],34:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobComputationException = void 0;

var _extendableError = require("./extendable-error");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobComputationException = /*#__PURE__*/function (_ExtendableError) {
  _inherits(JobComputationException, _ExtendableError);

  var _super = _createSuper(JobComputationException);

  function JobComputationException() {
    _classCallCheck(this, JobComputationException);

    return _super.apply(this, arguments);
  }

  return JobComputationException;
}(_extendableError.ExtendableError);

exports.JobComputationException = JobComputationException;

},{"./extendable-error":32}],35:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobDataInvalidException = void 0;

var _extendableError = require("./extendable-error");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobDataInvalidException = /*#__PURE__*/function (_ExtendableError) {
  _inherits(JobDataInvalidException, _ExtendableError);

  var _super = _createSuper(JobDataInvalidException);

  function JobDataInvalidException() {
    _classCallCheck(this, JobDataInvalidException);

    return _super.apply(this, arguments);
  }

  return JobDataInvalidException;
}(_extendableError.ExtendableError);

exports.JobDataInvalidException = JobDataInvalidException;

},{"./extendable-error":32}],36:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobExecutionAlreadyRunningException = void 0;

var _extendableError = require("./extendable-error");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobExecutionAlreadyRunningException = /*#__PURE__*/function (_ExtendableError) {
  _inherits(JobExecutionAlreadyRunningException, _ExtendableError);

  var _super = _createSuper(JobExecutionAlreadyRunningException);

  function JobExecutionAlreadyRunningException() {
    _classCallCheck(this, JobExecutionAlreadyRunningException);

    return _super.apply(this, arguments);
  }

  return JobExecutionAlreadyRunningException;
}(_extendableError.ExtendableError);

exports.JobExecutionAlreadyRunningException = JobExecutionAlreadyRunningException;

},{"./extendable-error":32}],37:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInstanceAlreadyCompleteException = void 0;

var _extendableError = require("./extendable-error");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobInstanceAlreadyCompleteException = /*#__PURE__*/function (_ExtendableError) {
  _inherits(JobInstanceAlreadyCompleteException, _ExtendableError);

  var _super = _createSuper(JobInstanceAlreadyCompleteException);

  function JobInstanceAlreadyCompleteException() {
    _classCallCheck(this, JobInstanceAlreadyCompleteException);

    return _super.apply(this, arguments);
  }

  return JobInstanceAlreadyCompleteException;
}(_extendableError.ExtendableError);

exports.JobInstanceAlreadyCompleteException = JobInstanceAlreadyCompleteException;

},{"./extendable-error":32}],38:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInterruptedException = void 0;

var _extendableError = require("./extendable-error");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobInterruptedException = /*#__PURE__*/function (_ExtendableError) {
  _inherits(JobInterruptedException, _ExtendableError);

  var _super = _createSuper(JobInterruptedException);

  function JobInterruptedException() {
    _classCallCheck(this, JobInterruptedException);

    return _super.apply(this, arguments);
  }

  return JobInterruptedException;
}(_extendableError.ExtendableError);

exports.JobInterruptedException = JobInterruptedException;

},{"./extendable-error":32}],39:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobParametersInvalidException = void 0;

var _extendableError = require("./extendable-error");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobParametersInvalidException = /*#__PURE__*/function (_ExtendableError) {
  _inherits(JobParametersInvalidException, _ExtendableError);

  var _super = _createSuper(JobParametersInvalidException);

  function JobParametersInvalidException() {
    _classCallCheck(this, JobParametersInvalidException);

    return _super.apply(this, arguments);
  }

  return JobParametersInvalidException;
}(_extendableError.ExtendableError);

exports.JobParametersInvalidException = JobParametersInvalidException;

},{"./extendable-error":32}],40:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobRestartException = void 0;

var _extendableError = require("./extendable-error");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobRestartException = /*#__PURE__*/function (_ExtendableError) {
  _inherits(JobRestartException, _ExtendableError);

  var _super = _createSuper(JobRestartException);

  function JobRestartException() {
    _classCallCheck(this, JobRestartException);

    return _super.apply(this, arguments);
  }

  return JobRestartException;
}(_extendableError.ExtendableError);

exports.JobRestartException = JobRestartException;

},{"./extendable-error":32}],41:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExecutionContext = void 0;

var _sdUtils = require("sd-utils");

var _sdModel = require("sd-model");

var _stepExecution = require("./step-execution");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ExecutionContext = /*#__PURE__*/function () {
  function ExecutionContext(context) {
    _classCallCheck(this, ExecutionContext);

    this.dirty = false;
    this.context = {};

    if (context) {
      this.context = _sdUtils.Utils.clone(context);
    }
  }

  _createClass(ExecutionContext, [{
    key: "put",
    value: function put(key, value) {
      var prevValue = this.context[key];

      if (value != null) {
        var result = this.context[key] = value;
        this.dirty = prevValue == null || prevValue != null && prevValue != value;
      } else {
        delete this.context[key];
        this.dirty = prevValue != null;
      }
    }
  }, {
    key: "get",
    value: function get(key) {
      return this.context[key];
    }
  }, {
    key: "containsKey",
    value: function containsKey(key) {
      return this.context.hasOwnProperty(key);
    }
  }, {
    key: "remove",
    value: function remove(key) {
      delete this.context[key];
    }
  }, {
    key: "setData",
    value: function setData(data) {
      //set data model
      return this.put("data", data);
    }
  }, {
    key: "getData",
    value: function getData() {
      // get data model
      return this.get("data");
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      var _this = this;

      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      var dto = _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (value instanceof _sdModel.DataModel) {
          return value.getDTO();
        }

        if (value && value.$ObjectWithIdAndEditableFields && value.id && _this.getData().findById(value.id)) {
          return {
            '$ObjectWithIdAndEditableFields': true,
            id: value.id
          };
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }
      }));

      return dto;
    }
  }]);

  return ExecutionContext;
}();

exports.ExecutionContext = ExecutionContext;

},{"./step-execution":60,"sd-model":"sd-model","sd-utils":"sd-utils"}],42:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _exportNames = {
  exceptions: true
};
exports.exceptions = void 0;

var exceptions = _interopRequireWildcard(require("./exceptions"));

exports.exceptions = exceptions;

var _executionContext = require("./execution-context");

Object.keys(_executionContext).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _executionContext[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _executionContext[key];
    }
  });
});

var _job = require("./job");

Object.keys(_job).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _job[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _job[key];
    }
  });
});

var _jobExecution = require("./job-execution");

Object.keys(_jobExecution).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobExecution[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecution[key];
    }
  });
});

var _jobExecutionFlag = require("./job-execution-flag");

Object.keys(_jobExecutionFlag).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobExecutionFlag[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecutionFlag[key];
    }
  });
});

var _jobExecutionListener = require("./job-execution-listener");

Object.keys(_jobExecutionListener).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobExecutionListener[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobExecutionListener[key];
    }
  });
});

var _jobInstance = require("./job-instance");

Object.keys(_jobInstance).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobInstance[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobInstance[key];
    }
  });
});

var _jobKeyGenerator = require("./job-key-generator");

Object.keys(_jobKeyGenerator).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobKeyGenerator[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobKeyGenerator[key];
    }
  });
});

var _jobLauncher = require("./job-launcher");

Object.keys(_jobLauncher).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobLauncher[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobLauncher[key];
    }
  });
});

var _jobParameterDefinition = require("./job-parameter-definition");

Object.keys(_jobParameterDefinition).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobParameterDefinition[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobParameterDefinition[key];
    }
  });
});

var _jobParameters = require("./job-parameters");

Object.keys(_jobParameters).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobParameters[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobParameters[key];
    }
  });
});

var _jobStatus = require("./job-status");

Object.keys(_jobStatus).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobStatus[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobStatus[key];
    }
  });
});

var _simpleJob = require("./simple-job");

Object.keys(_simpleJob).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _simpleJob[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _simpleJob[key];
    }
  });
});

var _step = require("./step");

Object.keys(_step).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _step[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _step[key];
    }
  });
});

var _stepExecution = require("./step-execution");

Object.keys(_stepExecution).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _stepExecution[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _stepExecution[key];
    }
  });
});

var _stepExecutionListener = require("./step-execution-listener");

Object.keys(_stepExecutionListener).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _stepExecutionListener[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _stepExecutionListener[key];
    }
  });
});

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

},{"./exceptions":33,"./execution-context":41,"./job":57,"./job-execution":45,"./job-execution-flag":43,"./job-execution-listener":44,"./job-instance":46,"./job-key-generator":47,"./job-launcher":48,"./job-parameter-definition":49,"./job-parameters":50,"./job-status":56,"./simple-job":58,"./step":61,"./step-execution":60,"./step-execution-listener":59}],43:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JOB_EXECUTION_FLAG = void 0;
var JOB_EXECUTION_FLAG = {
  STOP: 'STOP'
};
exports.JOB_EXECUTION_FLAG = JOB_EXECUTION_FLAG;

},{}],44:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobExecutionListener = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobExecutionListener = /*#__PURE__*/function () {
  function JobExecutionListener() {
    _classCallCheck(this, JobExecutionListener);
  }

  _createClass(JobExecutionListener, [{
    key: "beforeJob",
    value:
    /*Called before a job executes*/
    function beforeJob(jobExecution) {}
    /*Called after completion of a job. Called after both successful and failed executions*/

  }, {
    key: "afterJob",
    value: function afterJob(jobExecution) {}
  }]);

  return JobExecutionListener;
}();

exports.JobExecutionListener = JobExecutionListener;

},{}],45:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobExecution = void 0;

var _jobStatus = require("./job-status");

var _stepExecution = require("./step-execution");

var _sdUtils = require("sd-utils");

var _executionContext = require("./execution-context");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*domain object representing the execution of a job.*/


var JobExecution = /*#__PURE__*/function () {
  function JobExecution(jobInstance, jobParameters, id) {
    _classCallCheck(this, JobExecution);

    this.stepExecutions = [];
    this.status = _jobStatus.JOB_STATUS.STARTING;
    this.exitStatus = _jobStatus.JOB_STATUS.UNKNOWN;
    this.executionContext = new _executionContext.ExecutionContext();
    this.startTime = null;
    this.createTime = new Date();
    this.endTime = null;
    this.lastUpdated = null;
    this.failureExceptions = [];

    if (id === null || id === undefined) {
      this.id = _sdUtils.Utils.guid();
    } else {
      this.id = id;
    }

    this.jobInstance = jobInstance;
    this.jobParameters = jobParameters;
  }
  /**
   * Register a step execution with the current job execution.
   * @param stepName the name of the step the new execution is associated with
   */


  _createClass(JobExecution, [{
    key: "createStepExecution",
    value: function createStepExecution(stepName) {
      var stepExecution = new _stepExecution.StepExecution(stepName, this);
      this.stepExecutions.push(stepExecution);
      return stepExecution;
    }
  }, {
    key: "isRunning",
    value: function isRunning() {
      return !this.endTime;
    }
    /**
     * Test if this JobExecution has been signalled to
     * stop.
     */

  }, {
    key: "isStopping",
    value: function isStopping() {
      return this.status === _jobStatus.JOB_STATUS.STOPPING;
    }
    /**
     * Signal the JobExecution to stop.
     */

  }, {
    key: "stop",
    value: function stop() {
      this.stepExecutions.forEach(function (se) {
        se.terminateOnly = true;
      });
      this.status = _jobStatus.JOB_STATUS.STOPPING;
    }
  }, {
    key: "getData",
    value: function getData() {
      return this.executionContext.getData();
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      return _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (["jobParameters", "executionContext"].indexOf(key) > -1) {
          return value.getDTO();
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }

        if (value instanceof _stepExecution.StepExecution) {
          return value.getDTO(["jobExecution"], deepClone);
        }
      }));
    }
  }]);

  return JobExecution;
}();

exports.JobExecution = JobExecution;

},{"./execution-context":41,"./job-status":56,"./step-execution":60,"sd-utils":"sd-utils"}],46:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInstance = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
/* object representing a uniquely identifiable job run. JobInstance can be restarted multiple times in case of execution failure and it's lifecycle ends with first successful execution*/


var JobInstance = function JobInstance(id, jobName) {
  _classCallCheck(this, JobInstance);

  this.id = id;
  this.jobName = jobName;
};

exports.JobInstance = JobInstance;

},{}],47:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobKeyGenerator = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobKeyGenerator = /*#__PURE__*/function () {
  function JobKeyGenerator() {
    _classCallCheck(this, JobKeyGenerator);
  }

  _createClass(JobKeyGenerator, null, [{
    key: "generateKey",
    value:
    /*Method to generate the unique key used to identify a job instance.*/
    function generateKey(jobParameters) {
      var result = "";
      jobParameters.definitions.forEach(function (d, i) {
        if (d.identifying) {
          result += d.name + "=" + jobParameters.values[d.name] + ";";
        }
      });
      return result;
    }
  }]);

  return JobKeyGenerator;
}();

exports.JobKeyGenerator = JobKeyGenerator;

},{}],48:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobLauncher = void 0;

var _jobRestartException = require("./exceptions/job-restart-exception");

var _jobStatus = require("./job-status");

var _sdUtils = require("sd-utils");

var _jobParametersInvalidException = require("./exceptions/job-parameters-invalid-exception");

var _jobDataInvalidException = require("./exceptions/job-data-invalid-exception");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobLauncher = /*#__PURE__*/function () {
  function JobLauncher(jobRepository, jobWorker, dataModelSerializer) {
    _classCallCheck(this, JobLauncher);

    this.jobRepository = jobRepository;
    this.jobWorker = jobWorker;
    this.dataModelSerializer = dataModelSerializer;
  }

  _createClass(JobLauncher, [{
    key: "run",
    value: function run(jobOrName, jobParametersValues, data) {
      var _this = this;

      var resolvePromiseAfterJobIsLaunched = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var job;
      var jobParameters;
      return Promise.resolve().then(function () {
        if (_sdUtils.Utils.isString(jobOrName)) {
          job = _this.jobRepository.getJobByName(jobOrName);
        } else {
          job = jobOrName;
        }

        if (!job) {
          throw new _jobRestartException.JobRestartException("No such job: " + jobOrName);
        }

        jobParameters = job.createJobParameters(jobParametersValues);
        return _this.validate(job, jobParameters, data);
      }).then(function (valid) {
        return _this.jobRepository.createJobExecution(job.name, jobParameters, data).then(function (jobExecution) {
          if (_this.jobWorker) {
            _sdUtils.log.debug("Job: [" + job.name + "] execution [" + jobExecution.id + "] delegated to worker");

            _this.jobWorker.executeJob(jobExecution.id);

            return jobExecution;
          }

          var executionPromise = _this._execute(job, jobExecution);

          if (resolvePromiseAfterJobIsLaunched) {
            return jobExecution;
          }

          return executionPromise;
        });
      });
    }
  }, {
    key: "validate",
    value: function validate(job, jobParameters, data) {
      return this.jobRepository.getLastJobExecution(job.name, jobParameters).then(function (lastExecution) {
        if (lastExecution != null) {
          if (!job.isRestartable) {
            throw new _jobRestartException.JobRestartException("JobInstance already exists and is not restartable");
          }

          lastExecution.stepExecutions.forEach(function (execution) {
            if (execution.status == _jobStatus.JOB_STATUS.UNKNOWN) {
              throw new _jobRestartException.JobRestartException("Step [" + execution.stepName + "] is of status UNKNOWN");
            }
          });
        }

        if (job.jobParametersValidator && !job.jobParametersValidator.validate(jobParameters)) {
          throw new _jobParametersInvalidException.JobParametersInvalidException("Invalid job parameters in jobLauncher.run for job: " + job.name);
        }

        if (job.jobDataValidator && !job.jobDataValidator.validate(data)) {
          throw new _jobDataInvalidException.JobDataInvalidException("Invalid job data in jobLauncher.run for job: " + job.name);
        }

        return true;
      });
    }
    /**Execute previously created job execution*/

  }, {
    key: "execute",
    value: function execute(jobExecutionOrId) {
      var _this2 = this;

      return Promise.resolve().then(function () {
        if (_sdUtils.Utils.isString(jobExecutionOrId)) {
          return _this2.jobRepository.getJobExecutionById(jobExecutionOrId);
        }

        return jobExecutionOrId;
      }).then(function (jobExecution) {
        if (!jobExecution) {
          throw new _jobRestartException.JobRestartException("JobExecution [" + jobExecutionOrId + "] is not found");
        }

        if (jobExecution.status !== _jobStatus.JOB_STATUS.STARTING) {
          throw new _jobRestartException.JobRestartException("JobExecution [" + jobExecution.id + "] already started");
        }

        var jobName = jobExecution.jobInstance.jobName;

        var job = _this2.jobRepository.getJobByName(jobName);

        if (!job) {
          throw new _jobRestartException.JobRestartException("No such job: " + jobName);
        }

        return _this2._execute(job, jobExecution);
      });
    }
  }, {
    key: "_execute",
    value: function _execute(job, jobExecution) {
      var jobName = job.name;

      _sdUtils.log.info("Job: [" + jobName + "] launched with the following parameters: [" + jobExecution.jobParameters + "]", jobExecution.getData());

      return job.execute(jobExecution).then(function (jobExecution) {
        _sdUtils.log.info("Job: [" + jobName + "] completed with the following parameters: [" + jobExecution.jobParameters + "] and the following status: [" + jobExecution.status + "]");

        return jobExecution;
      }).catch(function (e) {
        _sdUtils.log.error("Job: [" + jobName + "] failed unexpectedly and fatally with the following parameters: [" + jobExecution.jobParameters + "]", e);

        throw e;
      });
    }
  }]);

  return JobLauncher;
}();

exports.JobLauncher = JobLauncher;

},{"./exceptions/job-data-invalid-exception":35,"./exceptions/job-parameters-invalid-exception":39,"./exceptions/job-restart-exception":40,"./job-status":56,"sd-utils":"sd-utils"}],49:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobParameterDefinition = exports.PARAMETER_TYPE = void 0;

var _sdUtils = require("sd-utils");

var _sdExpressionEngine = require("sd-expression-engine");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var PARAMETER_TYPE = {
  STRING: 'STRING',
  DATE: 'DATE',
  INTEGER: 'INTEGER',
  NUMBER: 'FLOAT',
  BOOLEAN: 'BOOLEAN',
  NUMBER_EXPRESSION: 'NUMBER_EXPRESSION',
  COMPOSITE: 'COMPOSITE' //composite parameter with nested subparameters

};
exports.PARAMETER_TYPE = PARAMETER_TYPE;

var JobParameterDefinition = /*#__PURE__*/function () {
  function JobParameterDefinition(name, typeOrNestedParametersDefinitions) {
    var minOccurs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
    var maxOccurs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
    var identifying = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
    var singleValueValidator = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;
    var validator = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;

    _classCallCheck(this, JobParameterDefinition);

    this.nestedParameters = [];
    this.required = true;
    this.name = name;

    if (_sdUtils.Utils.isArray(typeOrNestedParametersDefinitions)) {
      this.type = PARAMETER_TYPE.COMPOSITE;
      this.nestedParameters = typeOrNestedParametersDefinitions;
    } else {
      this.type = typeOrNestedParametersDefinitions;
    }

    this.validator = validator;
    this.singleValueValidator = singleValueValidator;
    this.identifying = identifying;
    this.minOccurs = minOccurs;
    this.maxOccurs = maxOccurs;
  }

  _createClass(JobParameterDefinition, [{
    key: "set",
    value: function set(key, val) {
      this[key] = val;
      return this;
    }
  }, {
    key: "validate",
    value: function validate(value, allValues) {
      var _this = this;

      var isArray = _sdUtils.Utils.isArray(value);

      if (this.maxOccurs > 1 && !isArray) {
        return false;
      }

      if (!isArray) {
        return this.validateSingleValue(value, allValues);
      }

      if (value.length < this.minOccurs || value.length > this.maxOccurs) {
        return false;
      }

      if (!value.every(function (v) {
        return _this.validateSingleValue(v, value);
      })) {
        return false;
      }

      if (this.validator) {
        return this.validator(value, allValues);
      }

      return true;
    }
  }, {
    key: "validateSingleValue",
    value: // allValues - all values on the same level
    function validateSingleValue(value, allValues) {
      if (!value && value !== 0 && value !== false && this.minOccurs > 0) {
        return !this.required;
      }

      if (PARAMETER_TYPE.STRING === this.type && !_sdUtils.Utils.isString(value)) {
        return false;
      }

      if (PARAMETER_TYPE.DATE === this.type && !_sdUtils.Utils.isDate(value)) {
        return false;
      }

      if (PARAMETER_TYPE.INTEGER === this.type && !_sdUtils.Utils.isInt(value)) {
        return false;
      }

      if (PARAMETER_TYPE.NUMBER === this.type && !_sdUtils.Utils.isNumber(value)) {
        return false;
      }

      if (PARAMETER_TYPE.BOOLEAN === this.type && !_sdUtils.Utils.isBoolean(value)) {
        return false;
      }

      if (PARAMETER_TYPE.NUMBER_EXPRESSION === this.type) {
        value = JobParameterDefinition.computeNumberExpression(value);

        if (value === null) {
          return false;
        }
      }

      if (PARAMETER_TYPE.COMPOSITE === this.type) {
        if (!_sdUtils.Utils.isObject(value)) {
          return false;
        }

        if (!this.nestedParameters.every(function (nestedDef, i) {
          return nestedDef.validate(value[nestedDef.name]);
        })) {
          return false;
        }
      }

      if (this.singleValueValidator) {
        return this.singleValueValidator(value, allValues);
      }

      return true;
    }
  }, {
    key: "value",
    value: function value(_value) {
      if (PARAMETER_TYPE.NUMBER_EXPRESSION === this.type) {
        return JobParameterDefinition.computeNumberExpression(_value);
      }

      return _value;
    }
  }], [{
    key: "computeNumberExpression",
    value: function computeNumberExpression(val) {
      var parsed = parseFloat(val);

      if (parsed === Infinity || parsed === -Infinity) {
        return parsed;
      }

      if (!_sdExpressionEngine.ExpressionEngine.validate(val, {}, false)) {
        return null;
      }

      return _sdExpressionEngine.ExpressionEngine.eval(val, true);
    }
  }]);

  return JobParameterDefinition;
}();

exports.JobParameterDefinition = JobParameterDefinition;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],50:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobParameters = void 0;

var _jobParameterDefinition = require("./job-parameter-definition");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobParameters = /*#__PURE__*/function () {
  function JobParameters(values) {
    _classCallCheck(this, JobParameters);

    this.definitions = [];
    this.values = {};
    this.initDefinitions();
    this.initDefaultValues();

    if (values) {
      _sdUtils.Utils.deepExtend(this.values, values);
    }
  }

  _createClass(JobParameters, [{
    key: "initDefinitions",
    value: function initDefinitions() {}
  }, {
    key: "initDefaultValues",
    value: function initDefaultValues() {}
  }, {
    key: "validate",
    value: function validate() {
      var _this = this;

      return this.definitions.every(function (def, i) {
        return def.validate(_this.values[def.name], _this.values);
      });
    }
  }, {
    key: "getDefinition",
    value: function getDefinition(path) {
      var defs = this.definitions;
      var def = null;

      if (!path.split().every(function (name) {
        def = _sdUtils.Utils.find(defs, function (d) {
          return d.name == name;
        });

        if (!def) {
          return false;
        }

        defs = def.nestedParameters;
        return true;
      })) {
        return null;
      }

      return def;
    }
    /*get or set value by path*/

  }, {
    key: "value",
    value: function value(path, _value) {
      if (arguments.length === 1) {
        var def = this.getDefinition(path);

        var val = _sdUtils.Utils.get(this.values, path, null);

        if (def) {
          return def.value(val);
        }

        return val;
      }

      _sdUtils.Utils.set(this.values, path, _value);

      return _value;
    }
  }, {
    key: "toString",
    value: function toString() {
      var _this2 = this;

      var result = "JobParameters[";
      this.definitions.forEach(function (d, i) {
        var val = _this2.values[d.name]; // if(Utils.isArray(val)){
        //     var values = val;
        //
        //
        // }
        // if(PARAMETER_TYPE.COMPOSITE == d.type){
        //
        // }

        result += d.name + "=" + val + ";";
      });
      result += "]";
      return result;
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      return {
        values: this.values
      };
    }
  }]);

  return JobParameters;
}();

exports.JobParameters = JobParameters;

},{"./job-parameter-definition":49,"sd-utils":"sd-utils"}],51:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.IdbJobRepository = void 0;

var _jobRepository = require("./job-repository");

var _idb = require("idb");

var _sdUtils = require("sd-utils");

var _jobExecution = require("../job-execution");

var _jobInstance = require("../job-instance");

var _stepExecution = require("../step-execution");

var _executionContext = require("../execution-context");

var _sdModel = require("sd-model");

var _jobResult = require("../job-result");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/* IndexedDB job repository*/


var IdbJobRepository = /*#__PURE__*/function (_JobRepository) {
  _inherits(IdbJobRepository, _JobRepository);

  var _super = _createSuper(IdbJobRepository);

  function IdbJobRepository(expressionsReviver) {
    var _this;

    var dbName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'sd-job-repository';
    var deleteDB = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    _classCallCheck(this, IdbJobRepository);

    _this = _super.call(this);
    _this.dbName = dbName;
    _this.expressionsReviver = expressionsReviver;

    if (deleteDB) {
      _this.deleteDB().then(function () {
        _this.initDB();
      }).catch(function (e) {
        _sdUtils.log.error(e);

        _this.initDB();
      });
    } else {
      _this.initDB();
    }

    return _this;
  }

  _createClass(IdbJobRepository, [{
    key: "initDB",
    value: function initDB() {
      this.dbPromise = (0, _idb.openDB)(this.dbName, 2, {
        upgrade: function upgrade(db, oldVersion, newVersion, transaction) {
          // Note: we don't use 'break' in this switch statement,
          // the fall-through behaviour is what we want.
          switch (oldVersion) {
            case 0:
              db.createObjectStore('job-instances');
              var jobExecutionsOS = db.createObjectStore('job-executions');
              jobExecutionsOS.createIndex("jobInstanceId", "jobInstance.id", {
                unique: false
              });
              jobExecutionsOS.createIndex("createTime", "createTime", {
                unique: false
              });
              jobExecutionsOS.createIndex("status", "status", {
                unique: false
              });
              db.createObjectStore('job-execution-progress');
              db.createObjectStore('job-execution-flags');
              var stepExecutionsOS = db.createObjectStore('step-executions');
              stepExecutionsOS.createIndex("jobExecutionId", "jobExecutionId", {
                unique: false
              });
              var jobResultOS = db.createObjectStore('job-results');
              jobResultOS.createIndex("jobInstanceId", "jobInstance.id", {
                unique: true
              });

            case 1:
              transaction.objectStore('job-instances').createIndex("id", "id", {
                unique: true
              });
          }
        }
      });
      this.jobInstanceDao = new ObjectStoreDao('job-instances', this.dbPromise);
      this.jobExecutionDao = new ObjectStoreDao('job-executions', this.dbPromise);
      this.jobExecutionProgressDao = new ObjectStoreDao('job-execution-progress', this.dbPromise);
      this.jobExecutionFlagDao = new ObjectStoreDao('job-execution-flags', this.dbPromise);
      this.stepExecutionDao = new ObjectStoreDao('step-executions', this.dbPromise);
      this.jobResultDao = new ObjectStoreDao('job-results', this.dbPromise);
    }
  }, {
    key: "deleteDB",
    value: function deleteDB() {
      var _this2 = this;

      return Promise.resolve().then(function (_) {
        return (0, _idb.deleteDB)(_this2.dbName);
      });
    }
  }, {
    key: "removeJobInstance",
    value: function removeJobInstance(jobInstance, jobParameters) {
      var _this3 = this;

      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      return this.jobInstanceDao.remove(key).then(function () {
        _this3.findJobExecutions(jobInstance, false).then(function (jobExecutions) {
          //  Not waiting for promise resolves
          jobExecutions.forEach(_this3.removeJobExecution, _this3);
        });

        _this3.getJobResultByInstance(jobInstance).then(function (jobResult) {
          return _this3.removeJobResult(jobResult);
        });
      });
    }
  }, {
    key: "removeJobExecution",
    value: function removeJobExecution(jobExecution) {
      var _this4 = this;

      return this.jobExecutionDao.remove(jobExecution.id).then(function () {
        return _this4.findStepExecutions(jobExecution.id, false).then(function (stepExecutions) {
          // Not waiting for promise resolves
          stepExecutions.forEach(_this4.removeStepExecution, _this4);
        });
      });
    }
  }, {
    key: "removeStepExecution",
    value: function removeStepExecution(stepExecution) {
      return this.stepExecutionDao.remove(stepExecution.id);
    }
  }, {
    key: "removeJobResult",
    value: function removeJobResult(jobResult) {
      return this.jobResultDao.remove(jobResult.id);
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      var _this5 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.jobResultDao.get(jobResultId).then(function (dto) {
        return dto && revive ? _this5.reviveJobResult(dto) : dto;
      });
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      var _this6 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.jobResultDao.getByIndex("jobInstanceId", jobInstance.id).then(function (dto) {
        return dto && revive ? _this6.reviveJobResult(dto) : dto;
      });
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobExecution) {
      var _this7 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.getJobResultByInstance(jobExecution.jobInstance, false).then(function (dto) {
        return dto && revive ? _this7.reviveJobResult(dto, jobExecution) : dto;
      });
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      var dto = jobResult.getDTO();
      return this.jobResultDao.set(jobResult.id, dto).then(function (r) {
        return jobResult;
      });
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      var _this8 = this;

      var key = this.generateJobInstanceKey(jobName, jobParameters);
      return this.jobInstanceDao.get(key).then(function (dto) {
        return dto ? _this8.reviveJobInstance(dto) : dto;
      });
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(jobInstance, jobParameters) {
      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      return this.jobInstanceDao.set(key, jobInstance).then(function (r) {
        return jobInstance;
      });
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      var _this9 = this;

      var dto = jobExecution.getDTO();
      var stepExecutionsDTOs = dto.stepExecutions;
      dto.stepExecutions = null;
      return this.jobExecutionDao.set(jobExecution.id, dto).then(function (r) {
        return _this9.saveStepExecutionsDTOS(stepExecutionsDTOs);
      }).then(function (r) {
        return jobExecution;
      });
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      return this.jobExecutionProgressDao.set(jobExecutionId, progress);
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      return this.jobExecutionProgressDao.get(jobExecutionId);
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      return this.jobExecutionFlagDao.set(jobExecutionId, flag);
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      return this.jobExecutionFlagDao.get(jobExecutionId);
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      var dto = stepExecution.getDTO(["jobExecution"]);
      return this.stepExecutionDao.set(stepExecution.id, dto).then(function (r) {
        return stepExecution;
      });
    }
  }, {
    key: "saveStepExecutionsDTOS",
    value: function saveStepExecutionsDTOS(stepExecutions) {
      var _this10 = this;

      var savedExecutions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

      if (stepExecutions.length <= savedExecutions.length) {
        return Promise.resolve(savedExecutions);
      }

      var stepExecutionDTO = stepExecutions[savedExecutions.length];
      return this.stepExecutionDao.set(stepExecutionDTO.id, stepExecutionDTO).then(function () {
        savedExecutions.push(stepExecutionDTO);
        return _this10.saveStepExecutionsDTOS(stepExecutions, savedExecutions);
      });
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      var _this11 = this;

      return this.jobExecutionDao.get(id).then(function (dto) {
        return _this11.fetchJobExecutionRelations(dto);
      });
    }
  }, {
    key: "fetchJobExecutionRelations",
    value: function fetchJobExecutionRelations(jobExecutionDTO) {
      var _this12 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (!jobExecutionDTO) {
        return Promise.resolve(null);
      }

      return this.findStepExecutions(jobExecutionDTO.id, false).then(function (steps) {
        jobExecutionDTO.stepExecutions = steps;

        if (!revive) {
          return jobExecutionDTO;
        }

        return _this12.reviveJobExecution(jobExecutionDTO);
      });
    }
  }, {
    key: "fetchJobExecutionsRelations",
    value: function fetchJobExecutionsRelations(jobExecutionDtoList) {
      var _this13 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var fetched = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

      if (jobExecutionDtoList.length <= fetched.length) {
        return Promise.resolve(fetched);
      }

      return this.fetchJobExecutionRelations(jobExecutionDtoList[fetched.length], revive).then(function (jobExecution) {
        fetched.push(jobExecution);
        return _this13.fetchJobExecutionsRelations(jobExecutionDtoList, revive, fetched);
      });
    }
  }, {
    key: "findStepExecutions",
    value: function findStepExecutions(jobExecutionId) {
      var _this14 = this;

      var revive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.stepExecutionDao.getAllByIndex("jobExecutionId", jobExecutionId).then(function (dtos) {
        if (!revive) {
          return dtos;
        }

        return dtos.map(function (dto) {
          return _this14.reviveStepExecution(dto);
        });
      });
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      var _this15 = this;

      var fetchRelationsAndRevive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.jobExecutionDao.getAllByIndex("jobInstanceId", jobInstance.id).then(function (values) {
        var sorted = values.sort(function (a, b) {
          return a.createTime.getTime() - b.createTime.getTime();
        });

        if (!fetchRelationsAndRevive) {
          return sorted;
        }

        return _this15.fetchJobExecutionsRelations(sorted, true);
      });
    }
  }, {
    key: "getLastJobExecutionByInstance",
    value: function getLastJobExecutionByInstance(jobInstance) {
      var _this16 = this;

      var fetchRelationsAndRevive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      return this.findJobExecutions(jobInstance, false).then(function (executions) {
        var execution = executions[executions.length - 1];

        if (!fetchRelationsAndRevive) {
          return execution;
        }

        _this16.fetchJobExecutionRelations(execution);
      });
    }
  }, {
    key: "getLastStepExecution",
    value: function getLastStepExecution(jobInstance, stepName) {
      return this.findJobExecutions(jobInstance).then(function (jobExecutions) {
        var stepExecutions = [];
        jobExecutions.forEach(function (jobExecution) {
          return jobExecution.stepExecutions.filter(function (s) {
            return s.stepName === stepName;
          }).forEach(function (s) {
            return stepExecutions.push(s);
          });
        });
        var latest = null;
        stepExecutions.forEach(function (s) {
          if (latest == null || latest.startTime.getTime() < s.startTime.getTime()) {
            latest = s;
          }
        });
        return latest;
      });
    }
  }, {
    key: "reviveJobInstance",
    value: function reviveJobInstance(dto) {
      return new _jobInstance.JobInstance(dto.id, dto.jobName);
    }
  }, {
    key: "reviveExecutionContext",
    value: function reviveExecutionContext(dto) {
      var executionContext = new _executionContext.ExecutionContext();
      executionContext.context = dto.context;
      var data = executionContext.getData();

      if (data) {
        var dataModel = new _sdModel.DataModel();
        dataModel.loadFromDTO(data, this.expressionsReviver);
        executionContext.setData(null);
        this.reviveFromDTO(executionContext.context, dto.context, dataModel);
        executionContext.setData(dataModel);
      }

      return executionContext;
    }
  }, {
    key: "reviveFromDTO",
    value: function reviveFromDTO(target, dto, dataModel) {
      return _sdUtils.Utils.mergeWith(target, dto, function (value, dtoValue, key) {
        if (dtoValue && dtoValue.$ObjectWithIdAndEditableFields && dtoValue.id) {
          return dataModel.findById(dtoValue.id) || value;
        }
      });
    }
  }, {
    key: "reviveJobExecution",
    value: function reviveJobExecution(dto) {
      var _this17 = this;

      var job = this.getJobByName(dto.jobInstance.jobName);
      var jobInstance = this.reviveJobInstance(dto.jobInstance);
      var jobParameters = job.createJobParameters(dto.jobParameters.values);
      var jobExecution = new _jobExecution.JobExecution(jobInstance, jobParameters, dto.id);
      var executionContext = this.reviveExecutionContext(dto.executionContext);
      return _sdUtils.Utils.mergeWith(jobExecution, dto, function (objValue, srcValue, key, object, source, stack) {
        if (key === "jobInstance") {
          return jobInstance;
        }

        if (key === "executionContext") {
          return executionContext;
        }

        if (key === "jobParameters") {
          return jobParameters;
        }

        if (key === "jobExecution") {
          return jobExecution;
        }

        if (key === "stepExecutions") {
          return srcValue.map(function (stepDTO) {
            return _this17.reviveStepExecution(stepDTO, jobExecution);
          });
        }
      });
    }
  }, {
    key: "reviveStepExecution",
    value: function reviveStepExecution(dto, jobExecution) {
      var stepExecution = new _stepExecution.StepExecution(dto.stepName, jobExecution, dto.id);
      var executionContext = this.reviveExecutionContext(dto.executionContext);
      return _sdUtils.Utils.mergeWith(stepExecution, dto, function (objValue, srcValue, key, object, source, stack) {
        if (key === "jobExecution") {
          return jobExecution;
        }

        if (key === "executionContext") {
          return executionContext;
        }
      });
    }
  }, {
    key: "reviveJobResult",
    value: function reviveJobResult(dto) {
      var _this18 = this;

      var jobExecution = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var job = this.getJobByName(dto.jobInstance.jobName);
      var jobInstance = this.reviveJobInstance(dto.jobInstance);
      var contextPromise;

      if (jobExecution != null) {
        contextPromise = Promise.resolve(jobExecution.executionContext);
      } else {
        contextPromise = this.getLastJobExecutionByInstance(jobInstance, false).then(function (jobExecutionDto) {
          return _this18.reviveExecutionContext(jobExecutionDto.executionContext);
        });
      }

      return contextPromise.then(function (executionContext) {
        return job.reviveResultData(_this18.reviveFromDTO({}, dto.data, executionContext.getData()), executionContext);
      }).then(function (d) {
        return new _jobResult.JobResult(jobInstance, dto.id, d);
      });
    }
  }]);

  return IdbJobRepository;
}(_jobRepository.JobRepository);

exports.IdbJobRepository = IdbJobRepository;

var ObjectStoreDao = /*#__PURE__*/function () {
  function ObjectStoreDao(name, dbPromise) {
    _classCallCheck(this, ObjectStoreDao);

    this.name = name;
    this.dbPromise = dbPromise;
  }

  _createClass(ObjectStoreDao, [{
    key: "get",
    value: function get(key) {
      var _this19 = this;

      return this.dbPromise.then(function (db) {
        return db.transaction(_this19.name).objectStore(_this19.name).get(key);
      });
    }
  }, {
    key: "getAllByIndex",
    value: function getAllByIndex(indexName, key) {
      var _this20 = this;

      return this.dbPromise.then(function (db) {
        return db.transaction(_this20.name).objectStore(_this20.name).index(indexName).getAll(key);
      });
    }
  }, {
    key: "getByIndex",
    value: function getByIndex(indexName, key) {
      var _this21 = this;

      return this.dbPromise.then(function (db) {
        return db.transaction(_this21.name).objectStore(_this21.name).index(indexName).get(key);
      });
    }
  }, {
    key: "set",
    value: function set(key, val) {
      var _this22 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this22.name, 'readwrite');
        tx.objectStore(_this22.name).put(val, key);
        return tx.done;
      });
    }
  }, {
    key: "remove",
    value: function remove(key) {
      var _this23 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this23.name, 'readwrite');
        tx.objectStore(_this23.name).delete(key);
        return tx.done;
      });
    }
  }, {
    key: "clear",
    value: function clear() {
      var _this24 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this24.name, 'readwrite');
        tx.objectStore(_this24.name).clear();
        return tx.done;
      });
    }
  }, {
    key: "keys",
    value: function keys() {
      var _this25 = this;

      return this.dbPromise.then(function (db) {
        var tx = db.transaction(_this25.name);
        var store = tx.objectStore(_this25.name);
        return store.getAllKeys();
      });
    }
  }]);

  return ObjectStoreDao;
}();

},{"../execution-context":41,"../job-execution":45,"../job-instance":46,"../job-result":55,"../step-execution":60,"./job-repository":52,"idb":1,"sd-model":"sd-model","sd-utils":"sd-utils"}],52:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobRepository = void 0;

var _jobKeyGenerator = require("../job-key-generator");

var _jobInstance = require("../job-instance");

var _sdUtils = require("sd-utils");

var _jobExecution = require("../job-execution");

var _jobExecutionAlreadyRunningException = require("../exceptions/job-execution-already-running-exception");

var _jobStatus = require("../job-status");

var _jobInstanceAlreadyCompleteException = require("../exceptions/job-instance-already-complete-exception");

var _executionContext = require("../execution-context");

var _stepExecution = require("../step-execution");

var _sdModel = require("sd-model");

var _jobResult = require("../job-result");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobRepository = /*#__PURE__*/function () {
  function JobRepository() {
    _classCallCheck(this, JobRepository);

    this.jobByName = {};
  }

  _createClass(JobRepository, [{
    key: "registerJob",
    value: function registerJob(job) {
      this.jobByName[job.name] = job;
    }
  }, {
    key: "getJobByName",
    value: function getJobByName(name) {
      return this.jobByName[name];
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      throw "JobRepository getJobInstance function not implemented!";
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(key, jobInstance) {
      throw "JobRepository.saveJobInstance function not implemented!";
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      throw "JobRepository.getJobExecutionById function not implemented!";
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      throw "JobRepository.saveJobInstance function not implemented!";
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      throw "JobRepository.saveJobInstance function not implemented!";
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      throw "JobRepository.getJobExecutionProgress function not implemented!";
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      throw "JobRepository.saveJobExecutionFlag function not implemented!";
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      throw "JobRepository.getJobExecutionFlag function not implemented!";
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      throw "JobRepository.saveStepExecution function not implemented!";
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      throw "JobRepository.findJobExecutions function not implemented!";
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      throw "JobRepository.getJobResult function not implemented!";
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      throw "JobRepository.getJobResultByInstance function not implemented!";
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobInstance) {
      throw "JobRepository.getJobResultByExecution function not implemented!";
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      throw "JobRepository.setJobResult function not implemented!";
    }
  }, {
    key: "removeJobInstance",
    value: function removeJobInstance(jobInstance, jobParameters) {
      throw "JobRepository.removeJobInstance function not implemented!";
    }
  }, {
    key: "removeJobExecution",
    value: function removeJobExecution(jobExecution) {
      throw "JobRepository.removeJobExecution function not implemented!";
    }
  }, {
    key: "removeStepExecution",
    value: function removeStepExecution(stepExecution) {
      throw "JobRepository.removeStepExecution function not implemented!";
    }
  }, {
    key: "removeJobResult",
    value: function removeJobResult(jobResult) {
      throw "JobRepository.removeJobResult function not implemented!";
    }
    /*Create a new JobInstance with the name and job parameters provided. return promise*/

  }, {
    key: "createJobInstance",
    value: function createJobInstance(jobName, jobParameters) {
      var jobInstance = new _jobInstance.JobInstance(_sdUtils.Utils.guid(), jobName);
      return this.saveJobInstance(jobInstance, jobParameters);
    }
    /*Check if an instance of this job already exists with the parameters provided.*/

  }, {
    key: "isJobInstanceExists",
    value: function isJobInstanceExists(jobName, jobParameters) {
      return this.getJobInstance(jobName, jobParameters).then(function (result) {
        return !!result;
      }).catch(function (error) {
        return false;
      });
    }
  }, {
    key: "generateJobInstanceKey",
    value: function generateJobInstanceKey(jobName, jobParameters) {
      return jobName + "|" + _jobKeyGenerator.JobKeyGenerator.generateKey(jobParameters);
    }
    /*Create a JobExecution for a given  Job and JobParameters. If matching JobInstance already exists,
     * the job must be restartable and it's last JobExecution must *not* be
     * completed. If matching JobInstance does not exist yet it will be  created.*/

  }, {
    key: "createJobExecution",
    value: function createJobExecution(jobName, jobParameters, data) {
      var _this = this;

      return this.getJobInstance(jobName, jobParameters).then(function (jobInstance) {
        if (jobInstance != null) {
          return _this.findJobExecutions(jobInstance).then(function (executions) {
            executions.forEach(function (execution) {
              if (execution.isRunning()) {
                throw new _jobExecutionAlreadyRunningException.JobExecutionAlreadyRunningException("A job execution for this job is already running: " + jobInstance.jobName);
              }

              if (execution.status == _jobStatus.JOB_STATUS.COMPLETED || execution.status == _jobStatus.JOB_STATUS.ABANDONED) {
                throw new _jobInstanceAlreadyCompleteException.JobInstanceAlreadyCompleteException("A job instance already exists and is complete for parameters=" + jobParameters + ".  If you want to run this job again, change the parameters.");
              }
            });
            var executionContext = executions[executions.length - 1].executionContext;
            return [jobInstance, executionContext];
          });
        } // no job found, create one


        jobInstance = _this.createJobInstance(jobName, jobParameters);
        var executionContext = new _executionContext.ExecutionContext();
        var dataModel = new _sdModel.DataModel();

        dataModel._setNewState(data.createStateSnapshot());

        executionContext.setData(dataModel);
        return Promise.all([jobInstance, executionContext]);
      }).then(function (instanceAndExecutionContext) {
        var jobExecution = new _jobExecution.JobExecution(instanceAndExecutionContext[0], jobParameters);
        jobExecution.executionContext = instanceAndExecutionContext[1];
        jobExecution.lastUpdated = new Date();
        return _this.saveJobExecution(jobExecution);
      }).catch(function (e) {
        throw e;
      });
    }
  }, {
    key: "getLastJobExecution",
    value: function getLastJobExecution(jobName, jobParameters) {
      var _this2 = this;

      return this.getJobInstance(jobName, jobParameters).then(function (jobInstance) {
        if (!jobInstance) {
          return null;
        }

        return _this2.getLastJobExecutionByInstance(jobInstance);
      });
    }
  }, {
    key: "getLastJobExecutionByInstance",
    value: function getLastJobExecutionByInstance(jobInstance) {
      return this.findJobExecutions(jobInstance).then(function (executions) {
        return executions[executions.length - 1];
      });
    }
  }, {
    key: "getLastStepExecution",
    value: function getLastStepExecution(jobInstance, stepName) {
      return this.findJobExecutions(jobInstance).then(function (jobExecutions) {
        var stepExecutions = [];
        jobExecutions.forEach(function (jobExecution) {
          return jobExecution.stepExecutions.filter(function (s) {
            return s.stepName === stepName;
          }).forEach(function (s) {
            return stepExecutions.push(s);
          });
        });
        var latest = null;
        stepExecutions.forEach(function (s) {
          if (latest == null || latest.startTime.getTime() < s.startTime.getTime()) {
            latest = s;
          }
        });
        return latest;
      });
    }
  }, {
    key: "addStepExecution",
    value: function addStepExecution(stepExecution) {
      stepExecution.lastUpdated = new Date();
      return this.saveStepExecution(stepExecution);
    }
  }, {
    key: "update",
    value: function update(o) {
      o.lastUpdated = new Date();

      if (o instanceof _jobExecution.JobExecution) {
        return this.saveJobExecution(o);
      }

      if (o instanceof _stepExecution.StepExecution) {
        return this.saveStepExecution(o);
      }

      throw "Object not updatable: " + o;
    }
  }, {
    key: "remove",
    value: function remove(o) {
      if (o instanceof _jobExecution.JobExecution) {
        return this.removeJobExecution(o);
      }

      if (o instanceof _stepExecution.StepExecution) {
        return this.removeStepExecution(o);
      }

      if (o instanceof _jobResult.JobResult) {
        return this.removeJobResult();
      }

      return Promise.reject("Object not removable: " + o);
    }
  }, {
    key: "reviveJobInstance",
    value: function reviveJobInstance(dto) {
      return dto;
    }
  }, {
    key: "reviveExecutionContext",
    value: function reviveExecutionContext(dto) {
      return dto;
    }
  }, {
    key: "reviveJobExecution",
    value: function reviveJobExecution(dto) {
      return dto;
    }
  }, {
    key: "reviveStepExecution",
    value: function reviveStepExecution(dto, jobExecution) {
      return dto;
    }
  }]);

  return JobRepository;
}();

exports.JobRepository = JobRepository;

},{"../exceptions/job-execution-already-running-exception":36,"../exceptions/job-instance-already-complete-exception":37,"../execution-context":41,"../job-execution":45,"../job-instance":46,"../job-key-generator":47,"../job-result":55,"../job-status":56,"../step-execution":60,"sd-model":"sd-model","sd-utils":"sd-utils"}],53:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SimpleJobRepository = void 0;

var _jobRepository = require("./job-repository");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var SimpleJobRepository = /*#__PURE__*/function (_JobRepository) {
  _inherits(SimpleJobRepository, _JobRepository);

  var _super = _createSuper(SimpleJobRepository);

  function SimpleJobRepository() {
    var _temp, _this;

    _classCallCheck(this, SimpleJobRepository);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _possibleConstructorReturn(_this, (_temp = _this = _super.call.apply(_super, [this].concat(args)), _this.jobInstancesByKey = {}, _this.jobExecutions = [], _this.stepExecutions = [], _this.executionProgress = {}, _this.executionFlags = {}, _this.jobResults = [], _temp));
  }

  _createClass(SimpleJobRepository, [{
    key: "removeJobInstance",
    value: function removeJobInstance(jobInstance) {
      var _this2 = this;

      _sdUtils.Utils.forOwn(this.jobInstancesByKey, function (ji, key) {
        if (ji === jobInstance) {
          delete _this2.jobInstancesByKey[key];
        }
      });

      this.jobExecutions.filter(function (jobExecution) {
        return jobExecution.jobInstance.id == jobInstance.id;
      }).reverse().forEach(this.removeJobExecution, this);
      this.jobResults.filter(function (jobResult) {
        return jobResult.jobInstance.id == jobInstance.id;
      }).reverse().forEach(this.removeJobResult, this);
      return Promise.resolve();
    }
  }, {
    key: "removeJobExecution",
    value: function removeJobExecution(jobExecution) {
      var index = this.jobExecutions.indexOf(jobExecution);

      if (index > -1) {
        this.jobExecutions.splice(index, 1);
      }

      this.stepExecutions.filter(function (stepExecution) {
        return stepExecution.jobExecution.id === jobExecution.id;
      }).reverse().forEach(this.removeStepExecution, this);
      return Promise.resolve();
    }
  }, {
    key: "removeStepExecution",
    value: function removeStepExecution(stepExecution) {
      var index = this.stepExecutions.indexOf(stepExecution);

      if (index > -1) {
        this.stepExecutions.splice(index, 1);
      }

      return Promise.resolve();
    }
  }, {
    key: "removeJobResult",
    value: function removeJobResult(jobResult) {
      var index = this.jobResults.indexOf(jobResult);

      if (index > -1) {
        this.jobResults.splice(index, 1);
      }

      return Promise.resolve();
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      var key = this.generateJobInstanceKey(jobName, jobParameters);
      return Promise.resolve(this.jobInstancesByKey[key]);
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(jobInstance, jobParameters) {
      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      this.jobInstancesByKey[key] = jobInstance;
      return Promise.resolve(jobInstance);
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      return Promise.resolve(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.id === jobResultId;
      }));
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      return Promise.resolve(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.jobInstance.id === jobInstance.id;
      }));
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobExecution) {
      return this.getJobResultByInstance(jobExecution.jobInstance);
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      this.jobResults.push(jobResult);
      return Promise.resolve(jobResult);
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      return Promise.resolve(_sdUtils.Utils.find(this.jobExecutions, function (ex) {
        return ex.id === id;
      }));
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      this.jobExecutions.push(jobExecution);
      return Promise.resolve(jobExecution);
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      this.executionProgress[jobExecutionId] = progress;
      return Promise.resolve(progress);
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      return Promise.resolve(this.executionProgress[jobExecutionId]);
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      this.executionFlags[jobExecutionId] = flag;
      return Promise.resolve(flag);
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      return Promise.resolve(this.executionFlags[jobExecutionId]);
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      this.stepExecutions.push(stepExecution);
      return Promise.resolve(stepExecution);
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      return Promise.resolve(this.jobExecutions.filter(function (e) {
        return e.jobInstance.id == jobInstance.id;
      }).sort(function (a, b) {
        return a.createTime.getTime() - b.createTime.getTime();
      }));
    }
  }]);

  return SimpleJobRepository;
}(_jobRepository.JobRepository);

exports.SimpleJobRepository = SimpleJobRepository;

},{"./job-repository":52,"sd-utils":"sd-utils"}],54:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimeoutJobRepository = void 0;

var _jobRepository = require("./job-repository");

var _sdUtils = require("sd-utils");

var _simpleJobRepository = require("./simple-job-repository");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var TimeoutJobRepository = /*#__PURE__*/function (_SimpleJobRepository) {
  _inherits(TimeoutJobRepository, _SimpleJobRepository);

  var _super = _createSuper(TimeoutJobRepository);

  function TimeoutJobRepository() {
    _classCallCheck(this, TimeoutJobRepository);

    return _super.apply(this, arguments);
  }

  _createClass(TimeoutJobRepository, [{
    key: "createTimeoutPromise",
    value: function createTimeoutPromise(valueToResolve) {
      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      return new Promise(function (resolve) {
        setTimeout(function () {
          resolve(valueToResolve);
        }, delay);
      });
    }
    /*returns promise*/

  }, {
    key: "getJobInstance",
    value: function getJobInstance(jobName, jobParameters) {
      var key = this.generateJobInstanceKey(jobName, jobParameters);
      return this.createTimeoutPromise(this.jobInstancesByKey[key]);
    }
    /*should return promise that resolves to saved instance*/

  }, {
    key: "saveJobInstance",
    value: function saveJobInstance(jobInstance, jobParameters) {
      var key = this.generateJobInstanceKey(jobInstance.jobName, jobParameters);
      this.jobInstancesByKey[key] = jobInstance;
      return this.createTimeoutPromise(jobInstance);
    }
  }, {
    key: "getJobResult",
    value: function getJobResult(jobResultId) {
      return this.createTimeoutPromise(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.id === jobResultId;
      }));
    }
  }, {
    key: "getJobResultByInstance",
    value: function getJobResultByInstance(jobInstance) {
      return this.createTimeoutPromise(_sdUtils.Utils.find(this.jobResults, function (r) {
        return r.jobInstance.id === jobInstance.id;
      }));
    }
  }, {
    key: "getJobResultByExecution",
    value: function getJobResultByExecution(jobExecution) {
      return this.getJobResultByInstance(jobExecution.jobInstance);
    }
  }, {
    key: "saveJobResult",
    value: function saveJobResult(jobResult) {
      this.jobResults.push(jobResult);
      return this.createTimeoutPromise(jobResult);
    }
  }, {
    key: "getJobExecutionById",
    value: function getJobExecutionById(id) {
      return this.createTimeoutPromise(_sdUtils.Utils.find(this.jobExecutions, function (ex) {
        return ex.id === id;
      }));
    }
    /*should return promise that resolves to saved jobExecution*/

  }, {
    key: "saveJobExecution",
    value: function saveJobExecution(jobExecution) {
      this.jobExecutions.push(jobExecution);
      return this.createTimeoutPromise(jobExecution);
    }
  }, {
    key: "updateJobExecutionProgress",
    value: function updateJobExecutionProgress(jobExecutionId, progress) {
      this.executionProgress[jobExecutionId] = progress;
      return this.createTimeoutPromise(progress);
    }
  }, {
    key: "getJobExecutionProgress",
    value: function getJobExecutionProgress(jobExecutionId) {
      return this.createTimeoutPromise(this.executionProgress[jobExecutionId]);
    }
  }, {
    key: "saveJobExecutionFlag",
    value: function saveJobExecutionFlag(jobExecutionId, flag) {
      this.executionFlags[jobExecutionId] = flag;
      return this.createTimeoutPromise(flag);
    }
  }, {
    key: "getJobExecutionFlag",
    value: function getJobExecutionFlag(jobExecutionId) {
      return this.createTimeoutPromise(this.executionFlags[jobExecutionId]);
    }
    /*should return promise which resolves to saved stepExecution*/

  }, {
    key: "saveStepExecution",
    value: function saveStepExecution(stepExecution) {
      this.stepExecutions.push(stepExecution);
      return this.createTimeoutPromise(stepExecution);
    }
    /*find job executions sorted by createTime, returns promise*/

  }, {
    key: "findJobExecutions",
    value: function findJobExecutions(jobInstance) {
      return this.createTimeoutPromise(this.jobExecutions.filter(function (e) {
        return e.jobInstance.id == jobInstance.id;
      }).sort(function (a, b) {
        return a.createTime.getTime() - b.createTime.getTime();
      }));
    }
  }, {
    key: "remove",
    value: function remove(object) {//TODO
    }
  }]);

  return TimeoutJobRepository;
}(_simpleJobRepository.SimpleJobRepository);

exports.TimeoutJobRepository = TimeoutJobRepository;

},{"./job-repository":52,"./simple-job-repository":53,"sd-utils":"sd-utils"}],55:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobResult = void 0;

var _jobStatus = require("./job-status");

var _stepExecution = require("./step-execution");

var _sdUtils = require("sd-utils");

var _executionContext = require("./execution-context");

var _jobExecution = require("./job-execution");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*domain object representing the result of a job instance.*/


var JobResult = /*#__PURE__*/function () {
  // job result data - this is not a data model!
  function JobResult(jobInstance, id, data) {
    _classCallCheck(this, JobResult);

    this.lastUpdated = null;

    if (id === null || id === undefined) {
      this.id = _sdUtils.Utils.guid();
    } else {
      this.id = id;
    }

    this.jobInstance = jobInstance;
    this.data = data;
  }

  _createClass(JobResult, [{
    key: "getDTO",
    value: function getDTO() {
      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      var dto = _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (value && value.$ObjectWithIdAndEditableFields && value.id) {
          return {
            '$ObjectWithIdAndEditableFields': true,
            id: value.id
          };
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }
      }));

      return dto;
    }
  }]);

  return JobResult;
}();

exports.JobResult = JobResult;

},{"./execution-context":41,"./job-execution":45,"./job-status":56,"./step-execution":60,"sd-utils":"sd-utils"}],56:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JOB_STATUS = void 0;
var JOB_STATUS = {
  COMPLETED: 'COMPLETED',
  STARTING: 'STARTING',
  STARTED: 'STARTED',
  STOPPING: 'STOPPING',
  STOPPED: 'STOPPED',
  FAILED: 'FAILED',
  UNKNOWN: 'UNKNOWN',
  ABANDONED: 'ABANDONED',
  EXECUTING: 'EXECUTING' //for exit status only

};
exports.JOB_STATUS = JOB_STATUS;

},{}],57:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Job = void 0;

var _sdUtils = require("sd-utils");

var _jobStatus = require("./job-status");

var _jobInterruptedException = require("./exceptions/job-interrupted-exception");

var _jobParametersInvalidException = require("./exceptions/job-parameters-invalid-exception");

var _jobDataInvalidException = require("./exceptions/job-data-invalid-exception");

var _jobExecutionFlag = require("./job-execution-flag");

var _jobResult = require("./job-result");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/**
 * Base class for jobs
 * A Job is an entity that encapsulates an entire job process ( an abstraction representing the configuration of a job)
 * */


var Job = /*#__PURE__*/function () {
  function Job(name, jobRepository, expressionsEvaluator, objectiveRulesManager) {
    _classCallCheck(this, Job);

    this.steps = [];
    this.isRestartable = true;
    this.executionListeners = [];
    this.name = name;
    this.jobParametersValidator = this.getJobParametersValidator();
    this.jobDataValidator = this.getJobDataValidator();
    this.jobRepository = jobRepository;
    this.expressionsEvaluator = expressionsEvaluator;
    this.objectiveRulesManager = objectiveRulesManager;
  }

  _createClass(Job, [{
    key: "setJobRepository",
    value: function setJobRepository(jobRepository) {
      this.jobRepository = jobRepository;
    }
  }, {
    key: "execute",
    value: function execute(execution) {
      var _this = this;

      _sdUtils.log.debug("Job execution starting: ", execution);

      var jobResult;
      return this.checkExecutionFlags(execution).then(function (execution) {
        if (execution.status === _jobStatus.JOB_STATUS.STOPPING) {
          // The job was already stopped
          execution.status = _jobStatus.JOB_STATUS.STOPPED;
          execution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;

          _sdUtils.log.debug("Job execution was stopped: " + execution);

          return execution;
        }

        if (_this.jobParametersValidator && !_this.jobParametersValidator.validate(execution.jobParameters)) {
          throw new _jobParametersInvalidException.JobParametersInvalidException("Invalid job parameters in job execute");
        }

        if (_this.jobDataValidator && !_this.jobDataValidator.validate(execution.getData())) {
          throw new _jobDataInvalidException.JobDataInvalidException("Invalid job data in job execute");
        }

        execution.startTime = new Date();
        return Promise.all([_this.updateStatus(execution, _jobStatus.JOB_STATUS.STARTED), _this.getResult(execution), _this.updateProgress(execution)]).then(function (res) {
          execution = res[0];
          jobResult = res[1];

          if (!jobResult) {
            jobResult = new _jobResult.JobResult(execution.jobInstance);
          }

          _this.executionListeners.forEach(function (listener) {
            return listener.beforeJob(execution);
          });

          return _this.doExecute(execution, jobResult);
        });
      }).then(function (execution) {
        _sdUtils.log.debug("Job execution complete: ", execution);

        return execution;
      }).catch(function (e) {
        if (e instanceof _jobInterruptedException.JobInterruptedException) {
          _sdUtils.log.info("Encountered interruption executing job", e);

          execution.status = _jobStatus.JOB_STATUS.STOPPED;
          execution.exitStatus = _jobStatus.JOB_STATUS.STOPPED;
        } else {
          _sdUtils.log.error("Encountered fatal error executing job", e);

          execution.status = _jobStatus.JOB_STATUS.FAILED;
          execution.exitStatus = _jobStatus.JOB_STATUS.FAILED;
        }

        execution.failureExceptions.push(e);
        return execution;
      }).then(function (execution) {
        if (jobResult) {
          return _this.jobRepository.saveJobResult(jobResult).then(function () {
            return execution;
          });
        }

        return execution;
      }).catch(function (e) {
        _sdUtils.log.error("Encountered fatal error saving job results", e);

        if (e) {
          execution.failureExceptions.push(e);
        }

        execution.status = _jobStatus.JOB_STATUS.FAILED;
        execution.exitStatus = _jobStatus.JOB_STATUS.FAILED;
        return execution;
      }).then(function (execution) {
        execution.endTime = new Date();
        return Promise.all([_this.jobRepository.update(execution), _this.updateProgress(execution)]).then(function (res) {
          return res[0];
        });
      }).then(function (execution) {
        try {
          _this.executionListeners.forEach(function (listener) {
            return listener.afterJob(execution);
          });
        } catch (e) {
          _sdUtils.log.error("Exception encountered in afterStep callback", e);
        }

        return execution;
      });
    }
  }, {
    key: "updateStatus",
    value: function updateStatus(jobExecution, status) {
      jobExecution.status = status;
      return this.jobRepository.update(jobExecution);
    }
  }, {
    key: "updateProgress",
    value: function updateProgress(jobExecution) {
      return this.jobRepository.updateJobExecutionProgress(jobExecution.id, this.getProgress(jobExecution));
    }
    /* Extension point for subclasses allowing them to concentrate on processing logic and ignore listeners, returns promise*/

  }, {
    key: "doExecute",
    value: function doExecute(execution, jobResult) {
      throw 'doExecute function not implemented for job: ' + this.name;
    }
  }, {
    key: "getJobParametersValidator",
    value: function getJobParametersValidator() {
      return {
        validate: function validate(params) {
          return params.validate();
        }
      };
    }
  }, {
    key: "getJobDataValidator",
    value: function getJobDataValidator() {
      return {
        validate: function validate(data) {
          return true;
        }
      };
    }
  }, {
    key: "addStep",
    value: function addStep(step) {
      this.steps.push(step);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(values) {
      throw 'createJobParameters function not implemented for job: ' + this.name;
    }
    /*Should return progress object with fields:
    * current
    * total */

  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      return {
        total: 1,
        current: execution.status === _jobStatus.JOB_STATUS.COMPLETED ? 1 : 0
      };
    }
  }, {
    key: "registerExecutionListener",
    value: function registerExecutionListener(listener) {
      this.executionListeners.push(listener);
    }
  }, {
    key: "checkExecutionFlags",
    value: function checkExecutionFlags(execution) {
      return this.jobRepository.getJobExecutionFlag(execution.id).then(function (flag) {
        if (_jobExecutionFlag.JOB_EXECUTION_FLAG.STOP === flag) {
          execution.stop();
        }

        return execution;
      });
    }
  }, {
    key: "getResult",
    value: function getResult(execution) {
      return this.jobRepository.getJobResultByExecution(execution);
    }
    /* revive job result data (after conversion to dto) if needed*/

  }, {
    key: "reviveResultData",
    value: function reviveResultData(data, executionContext) {
      return data;
    }
  }, {
    key: "jobResultToCsvRows",
    value: function jobResultToCsvRows(jobResult, jobParameters) {
      throw 'jobResultToCsvRows function not implemented for job: ' + this.name;
    }
  }]);

  return Job;
}();

exports.Job = Job;

},{"./exceptions/job-data-invalid-exception":35,"./exceptions/job-interrupted-exception":38,"./exceptions/job-parameters-invalid-exception":39,"./job-execution-flag":43,"./job-result":55,"./job-status":56,"sd-utils":"sd-utils"}],58:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SimpleJob = void 0;

var _sdUtils = require("sd-utils");

var _jobStatus = require("./job-status");

var _job = require("./job");

var _executionContext = require("./execution-context");

var _step = require("./step");

var _jobInterruptedException = require("./exceptions/job-interrupted-exception");

var _jobRestartException = require("./exceptions/job-restart-exception");

var _jobExecutionFlag = require("./job-execution-flag");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    _get = Reflect.get;
  } else {
    _get = function _get(target, property, receiver) {
      var base = _superPropBase(target, property);

      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = _getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/* Simple Job that sequentially executes a job by iterating through its list of steps.  Any Step that fails will fail the job.  The job is
 considered complete when all steps have been executed.*/


var SimpleJob = /*#__PURE__*/function (_Job) {
  _inherits(SimpleJob, _Job);

  var _super = _createSuper(SimpleJob);

  function SimpleJob(name, jobRepository, expressionsEvaluator, objectiveRulesManager) {
    _classCallCheck(this, SimpleJob);

    return _super.call(this, name, jobRepository, expressionsEvaluator, objectiveRulesManager);
  }

  _createClass(SimpleJob, [{
    key: "getStep",
    value: function getStep(stepName) {
      return _sdUtils.Utils.find(this.steps, function (s) {
        return s.name == stepName;
      });
    }
  }, {
    key: "doExecute",
    value: function doExecute(execution, jobResult) {
      return this.handleNextStep(execution, jobResult).then(function (lastExecutedStepExecution) {
        if (lastExecutedStepExecution != null) {
          var _execution$failureExc;

          _sdUtils.log.debug("Updating JobExecution status: ", lastExecutedStepExecution);

          execution.status = lastExecutedStepExecution.status;
          execution.exitStatus = lastExecutedStepExecution.exitStatus;

          (_execution$failureExc = execution.failureExceptions).push.apply(_execution$failureExc, _toConsumableArray(lastExecutedStepExecution.failureExceptions));
        }

        return execution;
      });
    }
  }, {
    key: "handleNextStep",
    value: function handleNextStep(jobExecution, jobResult) {
      var _this = this;

      var prevStep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var prevStepExecution = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      var stepIndex = 0;

      if (prevStep) {
        stepIndex = this.steps.indexOf(prevStep) + 1;
      }

      if (stepIndex >= this.steps.length) {
        return Promise.resolve(prevStepExecution);
      }

      var step = this.steps[stepIndex];
      return this.handleStep(step, jobExecution, jobResult).then(function (stepExecution) {
        if (stepExecution.status !== _jobStatus.JOB_STATUS.COMPLETED) {
          // Terminate the job if a step fails
          return stepExecution;
        }

        return _this.handleNextStep(jobExecution, jobResult, step, stepExecution);
      });
    }
  }, {
    key: "handleStep",
    value: function handleStep(step, jobExecution, jobResult) {
      var _this2 = this;

      var jobInstance = jobExecution.jobInstance;
      return this.checkExecutionFlags(jobExecution).then(function (jobExecution) {
        if (jobExecution.isStopping()) {
          throw new _jobInterruptedException.JobInterruptedException("JobExecution interrupted.");
        }

        return _this2.jobRepository.getLastStepExecution(jobInstance, step.name);
      }).then(function (lastStepExecution) {
        if (_this2.stepExecutionPartOfExistingJobExecution(jobExecution, lastStepExecution)) {
          // If the last execution of this step was in the same job, it's probably intentional so we want to run it again.
          _sdUtils.log.info("Duplicate step detected in execution of job. step: " + step.name + " jobName: ", jobInstance.jobName);

          lastStepExecution = null;
        }

        var currentStepExecution = lastStepExecution;

        if (!_this2.shouldStart(currentStepExecution, jobExecution, step)) {
          return currentStepExecution;
        }

        currentStepExecution = jobExecution.createStepExecution(step.name);
        var isCompleted = lastStepExecution != null && lastStepExecution.status === _jobStatus.JOB_STATUS.COMPLETED;
        var isRestart = lastStepExecution != null && !isCompleted;
        var skipExecution = isCompleted && step.skipOnRestartIfCompleted;

        if (isRestart) {
          currentStepExecution.executionContext = lastStepExecution.executionContext;

          if (lastStepExecution.executionContext.containsKey("executed")) {
            currentStepExecution.executionContext.remove("executed");
          }
        } else {
          currentStepExecution.executionContext = new _executionContext.ExecutionContext();
        }

        if (skipExecution) {
          currentStepExecution.exitStatus = _jobStatus.JOB_STATUS.COMPLETED;
          currentStepExecution.status = _jobStatus.JOB_STATUS.COMPLETED;
          currentStepExecution.executionContext.put("skipped", true);
        }

        return _this2.jobRepository.addStepExecution(currentStepExecution).then(function (_currentStepExecution) {
          currentStepExecution = _currentStepExecution;

          if (skipExecution) {
            _sdUtils.log.info("Skipping completed step execution: [" + step.name + "]");

            return currentStepExecution;
          }

          _sdUtils.log.info("Executing step: [" + step.name + "]");

          return step.execute(currentStepExecution, jobResult);
        }).then(function () {
          currentStepExecution.executionContext.put("executed", true);
          return currentStepExecution;
        }).catch(function (e) {
          jobExecution.status = _jobStatus.JOB_STATUS.FAILED;
          return _this2.jobRepository.update(jobExecution).then(function (jobExecution) {
            throw e;
          });
        });
      }).then(function (currentStepExecution) {
        if (currentStepExecution.status == _jobStatus.JOB_STATUS.STOPPING || currentStepExecution.status == _jobStatus.JOB_STATUS.STOPPED) {
          // Ensure that the job gets the message that it is stopping
          jobExecution.status = _jobStatus.JOB_STATUS.STOPPING; // throw new Error("Job interrupted by step execution");
        }

        return _this2.updateProgress(jobExecution).then(function () {
          return currentStepExecution;
        });
      });
    }
  }, {
    key: "stepExecutionPartOfExistingJobExecution",
    value: function stepExecutionPartOfExistingJobExecution(jobExecution, stepExecution) {
      return stepExecution != null && stepExecution.jobExecution.id == jobExecution.id;
    }
  }, {
    key: "shouldStart",
    value: function shouldStart(lastStepExecution, execution, step) {
      var stepStatus;

      if (lastStepExecution == null) {
        stepStatus = _jobStatus.JOB_STATUS.STARTING;
      } else {
        stepStatus = lastStepExecution.status;
      }

      if (stepStatus == _jobStatus.JOB_STATUS.UNKNOWN) {
        throw new _jobRestartException.JobRestartException("Cannot restart step from UNKNOWN status");
      }

      return stepStatus != _jobStatus.JOB_STATUS.COMPLETED || step.isRestartable;
    }
  }, {
    key: "getProgress",
    value: function getProgress(execution) {
      var completedSteps = execution.stepExecutions.length;
      var progress = {
        total: this.steps.length,
        current: completedSteps
      };

      if (!completedSteps) {
        return progress;
      }

      if (_jobStatus.JOB_STATUS.COMPLETED !== execution.stepExecutions[execution.stepExecutions.length - 1].status) {
        progress.current--;
      }

      return progress;
    }
  }, {
    key: "addStep",
    value: function addStep() {
      if (arguments.length === 1) {
        return _get(_getPrototypeOf(SimpleJob.prototype), "addStep", this).call(this, arguments[0]);
      }

      var step = new _step.Step(arguments[0], this.jobRepository);
      step.doExecute = arguments[1];
      return _get(_getPrototypeOf(SimpleJob.prototype), "addStep", this).call(this, step);
    }
  }]);

  return SimpleJob;
}(_job.Job);

exports.SimpleJob = SimpleJob;

},{"./exceptions/job-interrupted-exception":38,"./exceptions/job-restart-exception":40,"./execution-context":41,"./job":57,"./job-execution-flag":43,"./job-status":56,"./step":61,"sd-utils":"sd-utils"}],59:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StepExecutionListener = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var StepExecutionListener = /*#__PURE__*/function () {
  function StepExecutionListener() {
    _classCallCheck(this, StepExecutionListener);
  }

  _createClass(StepExecutionListener, [{
    key: "beforeStep",
    value:
    /*Called before a step executes*/
    function beforeStep(jobExecution) {}
    /*Called after completion of a step. Called after both successful and failed executions*/

  }, {
    key: "afterStep",
    value: function afterStep(jobExecution) {}
  }]);

  return StepExecutionListener;
}();

exports.StepExecutionListener = StepExecutionListener;

},{}],60:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StepExecution = void 0;

var _sdUtils = require("sd-utils");

var _executionContext = require("./execution-context");

var _jobStatus = require("./job-status");

var _jobExecution = require("./job-execution");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*
 representation of the execution of a step
 */


var StepExecution = /*#__PURE__*/function () {
  //execution context for single step level,
  //flag to indicate that an execution should halt
  function StepExecution(stepName, jobExecution, id) {
    _classCallCheck(this, StepExecution);

    this.status = _jobStatus.JOB_STATUS.STARTING;
    this.exitStatus = _jobStatus.JOB_STATUS.EXECUTING;
    this.executionContext = new _executionContext.ExecutionContext();
    this.startTime = new Date();
    this.endTime = null;
    this.lastUpdated = null;
    this.terminateOnly = false;
    this.failureExceptions = [];

    if (id === null || id === undefined) {
      this.id = _sdUtils.Utils.guid();
    } else {
      this.id = id;
    }

    this.stepName = stepName;
    this.jobExecution = jobExecution;
    this.jobExecutionId = jobExecution.id;
  }

  _createClass(StepExecution, [{
    key: "getJobParameters",
    value: function getJobParameters() {
      return this.jobExecution.jobParameters;
    }
  }, {
    key: "getJobExecutionContext",
    value: function getJobExecutionContext() {
      return this.jobExecution.executionContext;
    }
  }, {
    key: "getData",
    value: function getData() {
      return this.jobExecution.getData();
    }
  }, {
    key: "getDTO",
    value: function getDTO() {
      var filteredProperties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var deepClone = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var cloneMethod = _sdUtils.Utils.cloneDeepWith;

      if (!deepClone) {
        cloneMethod = _sdUtils.Utils.cloneWith;
      }

      return _sdUtils.Utils.assign({}, cloneMethod(this, function (value, key, object, stack) {
        if (filteredProperties.indexOf(key) > -1) {
          return null;
        }

        if (["executionContext"].indexOf(key) > -1) {
          return value.getDTO();
        }

        if (value instanceof Error) {
          return _sdUtils.Utils.getErrorDTO(value);
        }

        if (value instanceof _jobExecution.JobExecution) {
          return value.getDTO(["stepExecutions"], deepClone);
        }
      }));
    }
  }]);

  return StepExecution;
}();

exports.StepExecution = StepExecution;

},{"./execution-context":41,"./job-execution":45,"./job-status":56,"sd-utils":"sd-utils"}],61:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Step = void 0;

var _jobStatus = require("./job-status");

var _sdUtils = require("sd-utils");

var _jobInterruptedException = require("./exceptions/job-interrupted-exception");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*domain object representing the configuration of a job step*/


var Step = /*#__PURE__*/function () {
  function Step(name, jobRepository) {
    _classCallCheck(this, Step);

    this.isRestartable = true;
    this.skipOnRestartIfCompleted = true;
    this.steps = [];
    this.executionListeners = [];
    this.name = name;
    this.jobRepository = jobRepository;
  }

  _createClass(Step, [{
    key: "setJobRepository",
    value: function setJobRepository(jobRepository) {
      this.jobRepository = jobRepository;
    }
    /*Process the step and assign progress and status meta information to the StepExecution provided*/

  }, {
    key: "execute",
    value: function execute(stepExecution, jobResult) {
      var _this = this;

      _sdUtils.log.debug("Executing step: name=" + this.name);

      stepExecution.startTime = new Date();
      stepExecution.status = _jobStatus.JOB_STATUS.STARTED;
      var exitStatus;
      return this.jobRepository.update(stepExecution).then(function (stepExecution) {
        exitStatus = _jobStatus.JOB_STATUS.EXECUTING;

        _this.executionListeners.forEach(function (listener) {
          return listener.beforeStep(stepExecution);
        });

        _this.open(stepExecution.executionContext);

        return _this.doExecute(stepExecution, jobResult);
      }).then(function (_stepExecution) {
        stepExecution = _stepExecution;
        exitStatus = stepExecution.exitStatus; // Check if someone is trying to stop us

        if (stepExecution.terminateOnly) {
          throw new _jobInterruptedException.JobInterruptedException("JobExecution interrupted.");
        } // Need to upgrade here not set, in case the execution was stopped


        stepExecution.status = _jobStatus.JOB_STATUS.COMPLETED;

        _sdUtils.log.debug("Step execution success: name=" + _this.name);

        return stepExecution;
      }).catch(function (e) {
        stepExecution.status = _this.determineJobStatus(e);
        exitStatus = stepExecution.status;
        stepExecution.failureExceptions.push(e);

        if (stepExecution.status == _jobStatus.JOB_STATUS.STOPPED) {
          _sdUtils.log.info("Encountered interruption executing step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);
        } else {
          _sdUtils.log.error("Encountered an error executing step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);
        }

        return stepExecution;
      }).then(function (stepExecution) {
        try {
          stepExecution.exitStatus = exitStatus;

          _this.executionListeners.forEach(function (listener) {
            return listener.afterStep(stepExecution);
          });
        } catch (e) {
          _sdUtils.log.error("Exception in afterStep callback in step " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);
        }

        stepExecution.endTime = new Date();
        stepExecution.exitStatus = exitStatus;
        return _this.jobRepository.update(stepExecution);
      }).then(function (stepExecution) {
        try {
          _this.close(stepExecution.executionContext);
        } catch (e) {
          _sdUtils.log.error("Exception while closing step execution resources in step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);

          stepExecution.failureExceptions.push(e);
        }

        try {
          _this.close(stepExecution.executionContext);
        } catch (e) {
          _sdUtils.log.error("Exception while closing step execution resources in step: " + _this.name + " in job: " + stepExecution.jobExecution.jobInstance.jobName, e);

          stepExecution.failureExceptions.push(e);
        } // doExecutionRelease();


        _sdUtils.log.debug("Step execution complete: " + stepExecution.id);

        return stepExecution;
      });
    }
  }, {
    key: "determineJobStatus",
    value: function determineJobStatus(e) {
      if (e instanceof _jobInterruptedException.JobInterruptedException) {
        return _jobStatus.JOB_STATUS.STOPPED;
      } else {
        return _jobStatus.JOB_STATUS.FAILED;
      }
    }
    /**
     * Extension point for subclasses to execute business logic. Subclasses should set the exitStatus on the
     * StepExecution before returning. Must return stepExecution
     */

  }, {
    key: "doExecute",
    value: function doExecute(stepExecution, jobResult) {}
    /**
     * Extension point for subclasses to provide callbacks to their collaborators at the beginning of a step, to open or
     * acquire resources. Does nothing by default.
     */

  }, {
    key: "open",
    value: function open(executionContext) {}
    /**
     * Extension point for subclasses to provide callbacks to their collaborators at the end of a step (right at the end
     * of the finally block), to close or release resources. Does nothing by default.
     */

  }, {
    key: "close",
    value: function close(executionContext) {}
    /*Should return progress object with fields:
     * current
     * total */

  }, {
    key: "getProgress",
    value: function getProgress(stepExecution) {
      return {
        total: 1,
        current: stepExecution.status === _jobStatus.JOB_STATUS.COMPLETED ? 1 : 0
      };
    }
  }]);

  return Step;
}();

exports.Step = Step;

},{"./exceptions/job-interrupted-exception":38,"./job-status":56,"sd-utils":"sd-utils"}],62:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _exportNames = {
  engine: true
};
exports.engine = void 0;

var engine = _interopRequireWildcard(require("./engine/index"));

exports.engine = engine;

var _jobsManager = require("./jobs-manager");

Object.keys(_jobsManager).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobsManager[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobsManager[key];
    }
  });
});

var _jobWorker = require("./job-worker");

Object.keys(_jobWorker).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _jobWorker[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _jobWorker[key];
    }
  });
});

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

},{"./engine/index":42,"./job-worker":64,"./jobs-manager":65}],63:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobInstanceManager = exports.JobInstanceManagerConfig = void 0;

var _jobExecutionListener = require("./engine/job-execution-listener");

var _jobStatus = require("./engine/job-status");

var _jobInstance = require("./engine/job-instance");

var _sdUtils = require("sd-utils");

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var JobInstanceManagerConfig = function JobInstanceManagerConfig(custom) {
  _classCallCheck(this, JobInstanceManagerConfig);

  this.onJobStarted = function () {};

  this.onJobCompleted = function (result) {};

  this.onJobFailed = function (errors) {};

  this.onJobStopped = function () {};

  this.onJobTerminated = function () {};

  this.onProgress = function (progress) {};

  this.updateInterval = 100;

  if (custom) {
    _sdUtils.Utils.deepExtend(this, custom);
  }
};
/*convenience class for managing and tracking job instance progress*/


exports.JobInstanceManagerConfig = JobInstanceManagerConfig;

var JobInstanceManager = /*#__PURE__*/function (_JobExecutionListener) {
  _inherits(JobInstanceManager, _JobExecutionListener);

  var _super = _createSuper(JobInstanceManager);

  function JobInstanceManager(jobsManger, jobInstanceOrExecution, config) {
    var _this;

    _classCallCheck(this, JobInstanceManager);

    _this = _super.call(this);
    _this.progress = null;
    _this.config = new JobInstanceManagerConfig(config);
    _this.jobsManger = jobsManger;

    if (jobInstanceOrExecution instanceof _jobInstance.JobInstance) {
      _this.jobInstance = jobInstanceOrExecution;

      _this.getLastJobExecution().then(function (je) {
        _this.checkProgress();
      });
    } else {
      _this.lastJobExecution = jobInstanceOrExecution;
      _this.jobInstance = _this.lastJobExecution.jobInstance;

      _this.checkProgress();
    }

    if (_this.lastJobExecution && !_this.lastJobExecution.isRunning()) {
      _this.afterJob(_this.lastJobExecution);

      return _possibleConstructorReturn(_this);
    }

    jobsManger.registerJobExecutionListener(_assertThisInitialized(_this));
    return _this;
  }

  _createClass(JobInstanceManager, [{
    key: "checkProgress",
    value: function checkProgress() {
      var _this2 = this;

      var self = this;

      if (this.terminated || !this.lastJobExecution.isRunning() || this.getProgressPercents(this.progress) === 100) {
        return;
      }

      this.jobsManger.getProgress(this.lastJobExecution).then(function (progress) {
        _this2.lastUpdateTime = new Date();

        if (progress) {
          _this2.progress = progress;

          _this2.config.onProgress.call(_this2.config.callbacksThisArg || _this2, progress);
        }

        setTimeout(function () {
          self.checkProgress();
        }, _this2.config.updateInterval);
      });
    }
  }, {
    key: "beforeJob",
    value: function beforeJob(jobExecution) {
      if (jobExecution.jobInstance.id !== this.jobInstance.id) {
        return;
      }

      this.lastJobExecution = jobExecution;
      this.config.onJobStarted.call(this.config.callbacksThisArg || this);
    }
  }, {
    key: "getProgressPercents",
    value: function getProgressPercents(progress) {
      if (!progress) {
        return 0;
      }

      return progress.current * 100 / progress.total;
    }
  }, {
    key: "getProgressFromExecution",
    value: function getProgressFromExecution(jobExecution) {
      var job = this.jobsManger.getJobByName(jobExecution.jobInstance.jobName);
      return job.getProgress(jobExecution);
    }
  }, {
    key: "afterJob",
    value: function afterJob(jobExecution) {
      var _this3 = this;

      if (jobExecution.jobInstance.id !== this.jobInstance.id) {
        return;
      }

      this.lastJobExecution = jobExecution;

      if (_jobStatus.JOB_STATUS.COMPLETED === jobExecution.status) {
        this.jobsManger.deregisterJobExecutionListener(this);
        this.progress = this.getProgressFromExecution(jobExecution);
        this.config.onProgress.call(this.config.callbacksThisArg || this, this.progress);
        this.jobsManger.getResult(jobExecution).then(function (result) {
          _this3.config.onJobCompleted.call(_this3.config.callbacksThisArg || _this3, result.data);
        }).catch(function (e) {
          _sdUtils.log.error(e);
        });
      } else if (_jobStatus.JOB_STATUS.FAILED === jobExecution.status) {
        this.config.onJobFailed.call(this.config.callbacksThisArg || this, jobExecution.failureExceptions);
      } else if (_jobStatus.JOB_STATUS.STOPPED === jobExecution.status) {
        this.config.onJobStopped.call(this.config.callbacksThisArg || this);
      }
    }
  }, {
    key: "getLastJobExecution",
    value: function getLastJobExecution() {
      var _this4 = this;

      var forceUpdate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      if (!this.lastJobExecution || forceUpdate) {
        return this.jobsManger.jobRepository.getLastJobExecutionByInstance(this.jobInstance).then(function (je) {
          _this4.lastJobExecution = je;
          return je;
        });
      }

      return Promise.resolve(this.lastJobExecution);
    }
  }, {
    key: "stop",
    value: function stop() {
      var _this5 = this;

      return this.getLastJobExecution().then(function () {
        return _this5.jobsManger.stop(_this5.lastJobExecution);
      });
    }
  }, {
    key: "resume",
    value: function resume() {
      var _this6 = this;

      return this.getLastJobExecution().then(function () {
        return _this6.jobsManger.run(_this6.jobInstance.jobName, _this6.lastJobExecution.jobParameters.values, _this6.lastJobExecution.getData()).then(function (je) {
          _this6.lastJobExecution = je;

          _this6.checkProgress();

          return true;
        }).catch(function (e) {
          _sdUtils.log.error(e);

          return false;
        });
      });
    }
  }, {
    key: "terminate",
    value: function terminate() {
      var _this7 = this;

      return this.getLastJobExecution().then(function () {
        return _this7.jobsManger.terminate(_this7.jobInstance).then(function () {
          _this7.terminated = true;

          _this7.config.onJobTerminated.call(_this7.config.callbacksThisArg || _this7, _this7.lastJobExecution);

          _this7.jobsManger.deregisterJobExecutionListener(_this7);

          return _this7.lastJobExecution;
        });
      }).catch(function (e) {
        _sdUtils.log.error(e);

        return false;
      });
    }
  }]);

  return JobInstanceManager;
}(_jobExecutionListener.JobExecutionListener);

exports.JobInstanceManager = JobInstanceManager;

},{"./engine/job-execution-listener":44,"./engine/job-instance":46,"./engine/job-status":56,"sd-utils":"sd-utils"}],64:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobWorker = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var JobWorker = /*#__PURE__*/function () {
  function JobWorker(url, defaultListener, onError) {
    _classCallCheck(this, JobWorker);

    this.listeners = {};
    var instance = this;
    this.worker = new Worker(url);

    this.defaultListener = defaultListener || function () {};

    if (onError) {
      this.worker.onerror = onError;
    }

    this.worker.onmessage = function (event) {
      if (event.data instanceof Object && event.data.hasOwnProperty('queryMethodListener') && event.data.hasOwnProperty('queryMethodArguments')) {
        var listener = instance.listeners[event.data.queryMethodListener];
        var args = event.data.queryMethodArguments;

        if (listener.deserializer) {
          args = listener.deserializer(args);
        }

        listener.fn.apply(listener.thisArg, args);
      } else {
        this.defaultListener.call(instance, event.data);
      }
    };
  }

  _createClass(JobWorker, [{
    key: "sendQuery",
    value: function sendQuery() {
      if (arguments.length < 1) {
        throw new TypeError('JobWorker.sendQuery takes at least one argument');
      }

      this.worker.postMessage({
        'queryMethod': arguments[0],
        'queryArguments': Array.prototype.slice.call(arguments, 1)
      });
    }
  }, {
    key: "runJob",
    value: function runJob(jobName, jobParametersValues, dataDTO) {
      this.sendQuery('runJob', jobName, jobParametersValues, dataDTO);
    }
  }, {
    key: "executeJob",
    value: function executeJob(jobExecutionId) {
      this.sendQuery('executeJob', jobExecutionId);
    }
  }, {
    key: "recompute",
    value: function recompute(dataDTO, ruleNames, evalCode, evalNumeric) {
      this.sendQuery('recompute', dataDTO, ruleNames, evalCode, evalNumeric);
    }
  }, {
    key: "postMessage",
    value: function postMessage(message) {
      this.worker.postMessage(message);
    }
  }, {
    key: "terminate",
    value: function terminate() {
      this.worker.terminate();
    }
  }, {
    key: "addListener",
    value: function addListener(name, listener, thisArg, deserializer) {
      this.listeners[name] = {
        fn: listener,
        thisArg: thisArg || this,
        deserializer: deserializer
      };
    }
  }, {
    key: "removeListener",
    value: function removeListener(name) {
      delete this.listeners[name];
    }
  }]);

  return JobWorker;
}();

exports.JobWorker = JobWorker;

},{}],65:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobsManager = exports.JobsManagerConfig = void 0;

var _sdUtils = require("sd-utils");

var _sensitivityAnalysisJob = require("./configurations/sensitivity-analysis/n-way/sensitivity-analysis-job");

var _jobLauncher = require("./engine/job-launcher");

var _jobWorker = require("./job-worker");

var _jobExecutionListener = require("./engine/job-execution-listener");

var _jobParameters = require("./engine/job-parameters");

var _idbJobRepository = require("./engine/job-repository/idb-job-repository");

var _jobExecutionFlag = require("./engine/job-execution-flag");

var _recomputeJob = require("./configurations/recompute/recompute-job");

var _probabilisticSensitivityAnalysisJob = require("./configurations/sensitivity-analysis/probabilistic/probabilistic-sensitivity-analysis-job");

var _timeoutJobRepository = require("./engine/job-repository/timeout-job-repository");

var _tornadoDiagramJob = require("./configurations/sensitivity-analysis/tornado-diagram/tornado-diagram-job");

var _jobStatus = require("./engine/job-status");

var _simpleJobRepository = require("./engine/job-repository/simple-job-repository");

var _leagueTableJob = require("./configurations/league-table/league-table-job");

var _spiderPlotJob = require("./configurations/sensitivity-analysis/spider-plot/spider-plot-job");

var _payoffsTransformationJob = require("./configurations/payoffs-transformation/payoffs-transformation-job");

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

var JobsManagerConfig = function JobsManagerConfig(custom) {
  _classCallCheck(this, JobsManagerConfig);

  this.workerUrl = null;
  this.repositoryType = 'idb';
  this.clearRepository = false;

  if (custom) {
    _sdUtils.Utils.deepExtend(this, custom);
  }
};

exports.JobsManagerConfig = JobsManagerConfig;

var JobsManager = /*#__PURE__*/function (_JobExecutionListener) {
  _inherits(JobsManager, _JobExecutionListener);

  var _super = _createSuper(JobsManager);

  function JobsManager(expressionsEvaluator, objectiveRulesManager, config) {
    var _this;

    _classCallCheck(this, JobsManager);

    _this = _super.call(this);
    _this.jobExecutionListeners = [];
    _this.afterJobExecutionPromiseResolves = {};
    _this.jobInstancesToTerminate = {};

    _this.setConfig(config);

    _this.expressionEngine = expressionsEvaluator.expressionEngine;
    _this.expressionsEvaluator = expressionsEvaluator;
    _this.objectiveRulesManager = objectiveRulesManager;
    _this.useWorker = !!_this.config.workerUrl;

    if (_this.useWorker) {
      _this.initWorker(_this.config.workerUrl);
    }

    _this.initRepository();

    _this.registerJobs();

    _this.jobLauncher = new _jobLauncher.JobLauncher(_this.jobRepository, _this.jobWorker, function (data) {
      return _this.serializeData(data);
    });
    return _this;
  }

  _createClass(JobsManager, [{
    key: "setConfig",
    value: function setConfig(config) {
      this.config = new JobsManagerConfig(config);
      return this;
    }
  }, {
    key: "initRepository",
    value: function initRepository() {
      switch (this.config.repositoryType) {
        case 'idb':
          this.jobRepository = new _idbJobRepository.IdbJobRepository(this.expressionEngine.getJsonReviver(), 'sd-job-repository', this.config.clearRepository);
          break;

        case 'timeout':
          this.jobRepository = new _timeoutJobRepository.TimeoutJobRepository(this.expressionEngine.getJsonReviver());
          break;

        case 'simple':
          this.jobRepository = new _simpleJobRepository.SimpleJobRepository(this.expressionEngine.getJsonReviver());
          break;

        default:
          _sdUtils.log.error('JobsManager configuration error! Unknown repository type: ' + this.config.repositoryType + '. Using default: idb');

          this.config.repositoryType = 'idb';
          this.initRepository();
      }
    }
  }, {
    key: "serializeData",
    value: function serializeData(data) {
      return data.serialize(true, false, false, this.expressionEngine.getJsonReplacer());
    }
  }, {
    key: "getProgress",
    value: function getProgress(jobExecutionOrId) {
      var id = jobExecutionOrId;

      if (!_sdUtils.Utils.isString(jobExecutionOrId)) {
        id = jobExecutionOrId.id;
      }

      return this.jobRepository.getJobExecutionProgress(id);
    }
  }, {
    key: "getResult",
    value: function getResult(jobInstanceOrExecution) {
      var jobInstance = jobInstanceOrExecution;
      var jobExecution = null;

      if (jobInstanceOrExecution.jobInstance) {
        jobExecution = jobInstanceOrExecution;
        jobInstance = jobExecution.jobInstance;
      }

      return this.jobRepository.getJobResultByInstance(jobInstance);
    }
  }, {
    key: "run",
    value: function run(jobName, jobParametersValues, data) {
      var _this2 = this;

      var resolvePromiseAfterJobIsLaunched = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      return this.jobLauncher.run(jobName, jobParametersValues, data, resolvePromiseAfterJobIsLaunched).then(function (jobExecution) {
        if (resolvePromiseAfterJobIsLaunched || !jobExecution.isRunning()) {
          return jobExecution;
        } //job was delegated to worker and is still running


        return new Promise(function (resolve, reject) {
          _this2.afterJobExecutionPromiseResolves[jobExecution.id] = resolve;
        });
      });
    }
  }, {
    key: "execute",
    value: function execute(jobExecutionOrId) {
      return this.jobLauncher.execute(jobExecutionOrId);
    }
  }, {
    key: "stop",
    value: function stop(jobExecutionOrId) {
      var _this3 = this;

      var id = jobExecutionOrId;

      if (!_sdUtils.Utils.isString(jobExecutionOrId)) {
        id = jobExecutionOrId.id;
      }

      return this.jobRepository.getJobExecutionById(id).then(function (jobExecution) {
        if (!jobExecution) {
          _sdUtils.log.error("Job Execution not found: " + jobExecutionOrId);

          return null;
        }

        if (!jobExecution.isRunning()) {
          _sdUtils.log.warn("Job Execution not running, status: " + jobExecution.status + ", endTime: " + jobExecution.endTime);

          return jobExecution;
        }

        return _this3.jobRepository.saveJobExecutionFlag(jobExecution.id, _jobExecutionFlag.JOB_EXECUTION_FLAG.STOP).then(function () {
          return jobExecution;
        });
      });
    }
    /*stop job execution if running and delete job instance from repository*/

  }, {
    key: "terminate",
    value: function terminate(jobInstance) {
      var _this4 = this;

      return this.jobRepository.getLastJobExecutionByInstance(jobInstance).then(function (jobExecution) {
        if (jobExecution) {
          if (jobExecution.isRunning()) {
            return _this4.jobRepository.saveJobExecutionFlag(jobExecution.id, _jobExecutionFlag.JOB_EXECUTION_FLAG.STOP).then(function () {
              return jobExecution;
            });
          } else {
            return _this4.jobRepository.removeJobInstance(jobInstance, jobExecution.jobParameters);
          }
        }
      }).then(function () {
        _this4.jobInstancesToTerminate[jobInstance.id] = jobInstance;
      });
    }
  }, {
    key: "getJobByName",
    value: function getJobByName(jobName) {
      return this.jobRepository.getJobByName(jobName);
    }
  }, {
    key: "createJobParameters",
    value: function createJobParameters(jobName, jobParametersValues) {
      var job = this.jobRepository.getJobByName(jobName);
      return job.createJobParameters(jobParametersValues);
    }
    /*Returns a promise*/

  }, {
    key: "getLastJobExecution",
    value: function getLastJobExecution(jobName, jobParameters) {
      if (this.useWorker) {
        return this.jobWorker;
      }

      if (!(jobParameters instanceof _jobParameters.JobParameters)) {
        jobParameters = this.createJobParameters(jobParameters);
      }

      return this.jobRepository.getLastJobExecution(jobName, jobParameters);
    }
  }, {
    key: "initWorker",
    value: function initWorker(workerUrl) {
      var _arguments = arguments,
          _this5 = this;

      this.jobWorker = new _jobWorker.JobWorker(workerUrl, function () {
        _sdUtils.log.error('error in worker', _arguments);
      });

      var argsDeserializer = function argsDeserializer(args) {
        return [_this5.jobRepository.reviveJobExecution(args[0])];
      };

      this.jobWorker.addListener("beforeJob", this.beforeJob, this, argsDeserializer);
      this.jobWorker.addListener("afterJob", this.afterJob, this, argsDeserializer);
      this.jobWorker.addListener("jobFatalError", this.onJobFatalError, this);
    }
  }, {
    key: "registerJobs",
    value: function registerJobs() {
      var sensitivityAnalysisJob = new _sensitivityAnalysisJob.SensitivityAnalysisJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager);
      var probabilisticSensitivityAnalysisJob = new _probabilisticSensitivityAnalysisJob.ProbabilisticSensitivityAnalysisJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager);

      if (!_sdUtils.Utils.isWorker()) {
        sensitivityAnalysisJob.setBatchSize(1);
        probabilisticSensitivityAnalysisJob.setBatchSize(1);
      }

      this.registerJob(sensitivityAnalysisJob);
      this.registerJob(new _tornadoDiagramJob.TornadoDiagramJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
      this.registerJob(probabilisticSensitivityAnalysisJob);
      this.registerJob(new _recomputeJob.RecomputeJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
      this.registerJob(new _leagueTableJob.LeagueTableJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
      this.registerJob(new _spiderPlotJob.SpiderPlotJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
      this.registerJob(new _payoffsTransformationJob.PayoffsTransformationJob(this.jobRepository, this.expressionsEvaluator, this.objectiveRulesManager));
    }
  }, {
    key: "registerJob",
    value: function registerJob(job) {
      this.jobRepository.registerJob(job);
      job.registerExecutionListener(this);
    }
  }, {
    key: "registerJobExecutionListener",
    value: function registerJobExecutionListener(listener) {
      this.jobExecutionListeners.push(listener);
    }
  }, {
    key: "deregisterJobExecutionListener",
    value: function deregisterJobExecutionListener(listener) {
      var index = this.jobExecutionListeners.indexOf(listener);

      if (index > -1) {
        this.jobExecutionListeners.splice(index, 1);
      }
    }
  }, {
    key: "beforeJob",
    value: function beforeJob(jobExecution) {
      _sdUtils.log.debug("beforeJob", this.useWorker, jobExecution);

      this.jobExecutionListeners.forEach(function (l) {
        return l.beforeJob(jobExecution);
      });
    }
  }, {
    key: "afterJob",
    value: function afterJob(jobExecution) {
      _sdUtils.log.debug("afterJob", this.useWorker, jobExecution);

      this.jobExecutionListeners.forEach(function (l) {
        return l.afterJob(jobExecution);
      });
      var promiseResolve = this.afterJobExecutionPromiseResolves[jobExecution.id];

      if (promiseResolve) {
        promiseResolve(jobExecution);
      }

      if (this.jobInstancesToTerminate[jobExecution.jobInstance.id]) {
        this.jobRepository.removeJobInstance(jobExecution.jobInstance, jobExecution.jobParameters);
      }
    }
  }, {
    key: "onJobFatalError",
    value: function onJobFatalError(jobExecutionId, error) {
      var _this6 = this;

      var promiseResolve = this.afterJobExecutionPromiseResolves[jobExecutionId];

      if (promiseResolve) {
        this.jobRepository.getJobExecutionById(jobExecutionId).then(function (jobExecution) {
          jobExecution.status = _jobStatus.JOB_STATUS.FAILED;

          if (error) {
            jobExecution.failureExceptions.push(error);
          }

          return _this6.jobRepository.saveJobExecution(jobExecution).then(function () {
            promiseResolve(jobExecution);
          });
        }).catch(function (e) {
          _sdUtils.log.error(e);
        });
      }

      _sdUtils.log.debug('onJobFatalError', jobExecutionId, error);
    }
  }]);

  return JobsManager;
}(_jobExecutionListener.JobExecutionListener);

exports.JobsManager = JobsManager;

},{"./configurations/league-table/league-table-job":9,"./configurations/payoffs-transformation/payoffs-transformation-job":12,"./configurations/recompute/recompute-job":14,"./configurations/sensitivity-analysis/n-way/sensitivity-analysis-job":16,"./configurations/sensitivity-analysis/probabilistic/probabilistic-sensitivity-analysis-job":21,"./configurations/sensitivity-analysis/spider-plot/spider-plot-job":25,"./configurations/sensitivity-analysis/tornado-diagram/tornado-diagram-job":30,"./engine/job-execution-flag":43,"./engine/job-execution-listener":44,"./engine/job-launcher":48,"./engine/job-parameters":50,"./engine/job-repository/idb-job-repository":51,"./engine/job-repository/simple-job-repository":53,"./engine/job-repository/timeout-job-repository":54,"./engine/job-status":56,"./job-worker":64,"sd-utils":"sd-utils"}],66:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ObjectiveRulesManager = void 0;

var _rules = require("./rules");

var _sdUtils = require("sd-utils");

var model = _interopRequireWildcard(require("sd-model"));

var _minMaxRule = require("./rules/min-max-rule");

var _maxMinRule = require("./rules/max-min-rule");

var _minMinRule = require("./rules/min-min-rule");

var _maxMaxRule = require("./rules/max-max-rule");

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var ObjectiveRulesManager = /*#__PURE__*/function () {
  function ObjectiveRulesManager(expressionEngine, currentRuleName) {
    _classCallCheck(this, ObjectiveRulesManager);

    this.ruleByName = {};
    this.rules = [];
    this.flipPair = {};
    this.payoffIndex = 0;
    this.expressionEngine = expressionEngine;
    this.addRule(new _rules.ExpectedValueMaximizationRule(expressionEngine));
    this.addRule(new _rules.ExpectedValueMinimizationRule(expressionEngine));
    this.addRule(new _rules.MaxiMinRule(expressionEngine));
    this.addRule(new _rules.MaxiMaxRule(expressionEngine));
    this.addRule(new _rules.MiniMinRule(expressionEngine));
    this.addRule(new _rules.MiniMaxRule(expressionEngine));
    var minMax = new _minMaxRule.MinMaxRule(expressionEngine);
    this.addRule(minMax);
    var maxMin = new _maxMinRule.MaxMinRule(expressionEngine);
    this.addRule(maxMin);
    this.addFlipPair(minMax, maxMin);
    var minMin = new _minMinRule.MinMinRule(expressionEngine);
    this.addRule(minMin);
    var maxMax = new _maxMaxRule.MaxMaxRule(expressionEngine);
    this.addRule(maxMax);

    if (currentRuleName) {
      this.currentRule = this.ruleByName[currentRuleName];
    } else {
      this.currentRule = this.rules[0];
    }
  }

  _createClass(ObjectiveRulesManager, [{
    key: "setPayoffIndex",
    value: function setPayoffIndex(payoffIndex) {
      this.payoffIndex = payoffIndex || 0;
    }
  }, {
    key: "addRule",
    value: function addRule(rule) {
      this.ruleByName[rule.name] = rule;
      this.rules.push(rule);
    }
  }, {
    key: "isRuleName",
    value: function isRuleName(ruleName) {
      return !!this.ruleByName[ruleName];
    }
  }, {
    key: "setCurrentRuleByName",
    value: function setCurrentRuleByName(ruleName) {
      this.currentRule = this.ruleByName[ruleName];
    }
  }, {
    key: "getObjectiveRuleByName",
    value: function getObjectiveRuleByName(ruleName) {
      return this.ruleByName[ruleName];
    }
  }, {
    key: "flipRule",
    value: function flipRule() {
      var flipped = this.flipPair[this.currentRule.name];

      if (flipped) {
        this.currentRule = flipped;
      }
    }
  }, {
    key: "updateDefaultCriterion1Weight",
    value: function updateDefaultCriterion1Weight(defaultCriterion1Weight) {
      this.rules.filter(function (r) {
        return r.multiCriteria;
      }).forEach(function (r) {
        return r.setDefaultCriterion1Weight(defaultCriterion1Weight);
      });
    }
  }, {
    key: "recompute",
    value: function recompute(dataModel, allRules) {
      var _this = this;

      var decisionPolicy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var startTime = new Date().getTime();

      _sdUtils.log.trace('recomputing rules, all: ' + allRules);

      dataModel.getRoots().forEach(function (n) {
        _this.recomputeTree(n, allRules, decisionPolicy);
      });
      var time = new Date().getTime() - startTime / 1000;

      _sdUtils.log.trace('recomputation took ' + time + 's');

      return this;
    }
  }, {
    key: "recomputeTree",
    value: function recomputeTree(root, allRules) {
      var _this2 = this;

      var decisionPolicy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

      _sdUtils.log.trace('recomputing rules for tree ...', root);

      var startTime = new Date().getTime();
      var rules = [this.currentRule];

      if (allRules) {
        rules = this.rules;
      }

      rules.forEach(function (rule) {
        rule.setPayoffIndex(_this2.payoffIndex);
        rule.setDecisionPolicy(decisionPolicy);
        rule.computePayoff(root);
        rule.computeOptimal(root);
        rule.clearDecisionPolicy();
      });
      var time = (new Date().getTime() - startTime) / 1000;

      _sdUtils.log.trace('recomputation took ' + time + 's');

      return this;
    }
  }, {
    key: "getNodeDisplayValue",
    value: function getNodeDisplayValue(node, name) {
      return node.computedValue(this.currentRule.name, name);
    }
  }, {
    key: "getEdgeDisplayValue",
    value: function getEdgeDisplayValue(e, name) {
      if (name === 'probability') {
        if (e.parentNode instanceof model.domain.DecisionNode) {
          return e.computedValue(this.currentRule.name, 'probability');
        }

        if (e.parentNode instanceof model.domain.ChanceNode) {
          return e.computedBaseProbability();
        }

        return null;
      }

      if (name === 'payoff') {
        if (this.currentRule.multiCriteria) {
          return e.computedValue(null, 'payoff');
        } else {
          return e.computedValue(null, 'payoff[' + this.payoffIndex + ']');
        }
      }

      if (name === 'optimal') {
        return e.computedValue(this.currentRule.name, 'optimal');
      }
    }
  }, {
    key: "addFlipPair",
    value: function addFlipPair(rule1, rule2) {
      this.flipPair[rule1.name] = rule2;
      this.flipPair[rule2.name] = rule1;
    }
  }]);

  return ObjectiveRulesManager;
}();

exports.ObjectiveRulesManager = ObjectiveRulesManager;

},{"./rules":69,"./rules/max-max-rule":70,"./rules/max-min-rule":71,"./rules/min-max-rule":74,"./rules/min-min-rule":75,"sd-model":"sd-model","sd-utils":"sd-utils"}],67:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExpectedValueMaximizationRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*expected value maximization rule*/


var ExpectedValueMaximizationRule = /*#__PURE__*/function (_ObjectiveRule) {
  _inherits(ExpectedValueMaximizationRule, _ObjectiveRule);

  var _super = _createSuper(ExpectedValueMaximizationRule);

  function ExpectedValueMaximizationRule(expressionEngine) {
    _classCallCheck(this, ExpectedValueMaximizationRule);

    return _super.call(this, ExpectedValueMaximizationRule.NAME, true, expressionEngine);
  } //  payoff - parent edge payoff


  _createClass(ExpectedValueMaximizationRule, [{
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      node.childEdges.forEach(function (e) {
        if (_this.subtract(_this.computedPayoff(node), payoff).equals(_this.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode)) {
          _this.cValue(e, 'optimal', true);

          _this.computeOptimal(e.childNode, _this.basePayoff(e), _this.multiply(probabilityToEnter, _this.cValue(e, 'probability')));
        } else {
          _this.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return ExpectedValueMaximizationRule;
}(_objectiveRule.ObjectiveRule);

exports.ExpectedValueMaximizationRule = ExpectedValueMaximizationRule;
ExpectedValueMaximizationRule.NAME = 'expected-value-maximization';

},{"./objective-rule":79,"sd-model":"sd-model","sd-utils":"sd-utils"}],68:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ExpectedValueMinimizationRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*expected value minimization rule*/


var ExpectedValueMinimizationRule = /*#__PURE__*/function (_ObjectiveRule) {
  _inherits(ExpectedValueMinimizationRule, _ObjectiveRule);

  var _super = _createSuper(ExpectedValueMinimizationRule);

  function ExpectedValueMinimizationRule(expressionEngine) {
    _classCallCheck(this, ExpectedValueMinimizationRule);

    return _super.call(this, ExpectedValueMinimizationRule.NAME, false, expressionEngine);
  } //  payoff - parent edge payoff


  _createClass(ExpectedValueMinimizationRule, [{
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      node.childEdges.forEach(function (e) {
        if (_this.subtract(_this.computedPayoff(node), payoff).equals(_this.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode)) {
          _this.cValue(e, 'optimal', true);

          _this.computeOptimal(e.childNode, _this.basePayoff(e), _this.multiply(probabilityToEnter, _this.cValue(e, 'probability')));
        } else {
          _this.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return ExpectedValueMinimizationRule;
}(_objectiveRule.ObjectiveRule);

exports.ExpectedValueMinimizationRule = ExpectedValueMinimizationRule;
ExpectedValueMinimizationRule.NAME = 'expected-value-minimization';

},{"./objective-rule":79,"sd-model":"sd-model","sd-utils":"sd-utils"}],69:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _objectiveRule = require("./objective-rule");

Object.keys(_objectiveRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _objectiveRule[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _objectiveRule[key];
    }
  });
});

var _expectedValueMaximizationRule = require("./expected-value-maximization-rule");

Object.keys(_expectedValueMaximizationRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _expectedValueMaximizationRule[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _expectedValueMaximizationRule[key];
    }
  });
});

var _expectedValueMinimizationRule = require("./expected-value-minimization-rule");

Object.keys(_expectedValueMinimizationRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _expectedValueMinimizationRule[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _expectedValueMinimizationRule[key];
    }
  });
});

var _maxiMaxRule = require("./maxi-max-rule");

Object.keys(_maxiMaxRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _maxiMaxRule[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _maxiMaxRule[key];
    }
  });
});

var _maxiMinRule = require("./maxi-min-rule");

Object.keys(_maxiMinRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _maxiMinRule[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _maxiMinRule[key];
    }
  });
});

var _miniMaxRule = require("./mini-max-rule");

Object.keys(_miniMaxRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _miniMaxRule[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _miniMaxRule[key];
    }
  });
});

var _miniMinRule = require("./mini-min-rule");

Object.keys(_miniMinRule).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _miniMinRule[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _miniMinRule[key];
    }
  });
});

},{"./expected-value-maximization-rule":67,"./expected-value-minimization-rule":68,"./maxi-max-rule":72,"./maxi-min-rule":73,"./mini-max-rule":76,"./mini-min-rule":77,"./objective-rule":79}],70:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxMaxRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var MaxMaxRule = /*#__PURE__*/function (_MultiCriteriaRule) {
  _inherits(MaxMaxRule, _MultiCriteriaRule);

  var _super = _createSuper(MaxMaxRule);

  function MaxMaxRule(expressionEngine) {
    _classCallCheck(this, MaxMaxRule);

    return _super.call(this, MaxMaxRule.NAME, [1, 1], expressionEngine);
  }

  return MaxMaxRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MaxMaxRule = MaxMaxRule;
MaxMaxRule.NAME = 'max-max';

},{"./multi-criteria-rule":78}],71:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxMinRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var MaxMinRule = /*#__PURE__*/function (_MultiCriteriaRule) {
  _inherits(MaxMinRule, _MultiCriteriaRule);

  var _super = _createSuper(MaxMinRule);

  function MaxMinRule(expressionEngine) {
    _classCallCheck(this, MaxMinRule);

    return _super.call(this, MaxMinRule.NAME, [1, -1], expressionEngine);
  }

  return MaxMinRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MaxMinRule = MaxMinRule;
MaxMinRule.NAME = 'max-min';

},{"./multi-criteria-rule":78}],72:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxiMaxRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*maxi-max rule*/


var MaxiMaxRule = /*#__PURE__*/function (_ObjectiveRule) {
  _inherits(MaxiMaxRule, _ObjectiveRule);

  var _super = _createSuper(MaxiMaxRule);

  function MaxiMaxRule(expressionEngine) {
    _classCallCheck(this, MaxiMaxRule);

    return _super.call(this, MaxiMaxRule.NAME, true, expressionEngine);
  }

  _createClass(MaxiMaxRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) < bestChildPayoff ? 0.0 : 1.0 / bestCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.maxBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MaxiMaxRule;
}(_objectiveRule.ObjectiveRule);

exports.MaxiMaxRule = MaxiMaxRule;
MaxiMaxRule.NAME = 'maxi-max';

},{"./objective-rule":79,"sd-model":"sd-model","sd-utils":"sd-utils"}],73:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaxiMinRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*maxi-min rule*/


var MaxiMinRule = /*#__PURE__*/function (_ObjectiveRule) {
  _inherits(MaxiMinRule, _ObjectiveRule);

  var _super = _createSuper(MaxiMinRule);

  function MaxiMinRule(expressionEngine) {
    _classCallCheck(this, MaxiMinRule);

    return _super.call(this, MaxiMinRule.NAME, true, expressionEngine);
  }

  _createClass(MaxiMinRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) > worstChildPayoff ? 0.0 : 1.0 / worstCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.minBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MaxiMinRule;
}(_objectiveRule.ObjectiveRule);

exports.MaxiMinRule = MaxiMinRule;
MaxiMinRule.NAME = 'maxi-min';

},{"./objective-rule":79,"sd-model":"sd-model","sd-utils":"sd-utils"}],74:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MinMaxRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var MinMaxRule = /*#__PURE__*/function (_MultiCriteriaRule) {
  _inherits(MinMaxRule, _MultiCriteriaRule);

  var _super = _createSuper(MinMaxRule);

  function MinMaxRule(expressionEngine) {
    _classCallCheck(this, MinMaxRule);

    return _super.call(this, MinMaxRule.NAME, [-1, 1], expressionEngine);
  }

  return MinMaxRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MinMaxRule = MinMaxRule;
MinMaxRule.NAME = 'min-max';

},{"./multi-criteria-rule":78}],75:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MinMinRule = void 0;

var _multiCriteriaRule = require("./multi-criteria-rule");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var MinMinRule = /*#__PURE__*/function (_MultiCriteriaRule) {
  _inherits(MinMinRule, _MultiCriteriaRule);

  var _super = _createSuper(MinMinRule);

  function MinMinRule(expressionEngine) {
    _classCallCheck(this, MinMinRule);

    return _super.call(this, MinMinRule.NAME, [-1, -1], expressionEngine);
  }

  return MinMinRule;
}(_multiCriteriaRule.MultiCriteriaRule);

exports.MinMinRule = MinMinRule;
MinMinRule.NAME = 'min-min';

},{"./multi-criteria-rule":78}],76:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MiniMaxRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*mini-max rule*/


var MiniMaxRule = /*#__PURE__*/function (_ObjectiveRule) {
  _inherits(MiniMaxRule, _ObjectiveRule);

  var _super = _createSuper(MiniMaxRule);

  function MiniMaxRule(expressionEngine) {
    _classCallCheck(this, MiniMaxRule);

    return _super.call(this, MiniMaxRule.NAME, false, expressionEngine);
  }

  _createClass(MiniMaxRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) < bestChildPayoff ? 0.0 : 1.0 / bestCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.maxBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MiniMaxRule;
}(_objectiveRule.ObjectiveRule);

exports.MiniMaxRule = MiniMaxRule;
MiniMaxRule.NAME = 'mini-max';

},{"./objective-rule":79,"sd-model":"sd-model","sd-utils":"sd-utils"}],77:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MiniMinRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*mini-min rule*/


var MiniMinRule = /*#__PURE__*/function (_ObjectiveRule) {
  _inherits(MiniMinRule, _ObjectiveRule);

  var _super = _createSuper(MiniMinRule);

  function MiniMinRule(expressionEngine) {
    _classCallCheck(this, MiniMinRule);

    return _super.call(this, MiniMinRule.NAME, false, expressionEngine);
  }

  _createClass(MiniMinRule, [{
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {
      var _this = this;

      edges.forEach(function (e) {
        _this.clearComputedValues(e);

        _this.cValue(e, 'probability', _this.computedPayoff(e.childNode) > worstChildPayoff ? 0.0 : 1.0 / worstCount);
      });
    } //  payoff - parent edge payoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      var optimalEdge = null;

      if (node instanceof _sdModel.domain.ChanceNode) {
        optimalEdge = _sdUtils.Utils.minBy(node.childEdges, function (e) {
          return _this2.computedPayoff(e.childNode);
        });
      }

      node.childEdges.forEach(function (e) {
        var isOptimal = false;

        if (optimalEdge) {
          isOptimal = _this2.computedPayoff(optimalEdge.childNode).equals(_this2.computedPayoff(e.childNode));
        } else isOptimal = !!(_this2.subtract(_this2.computedPayoff(node), payoff).equals(_this2.computedPayoff(e.childNode)) || !(node instanceof _sdModel.domain.DecisionNode));

        if (isOptimal) {
          _this2.cValue(e, 'optimal', true);

          _this2.computeOptimal(e.childNode, _this2.basePayoff(e), _this2.multiply(probabilityToEnter, _this2.cValue(e, 'probability')));
        } else {
          _this2.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MiniMinRule;
}(_objectiveRule.ObjectiveRule);

exports.MiniMinRule = MiniMinRule;
MiniMinRule.NAME = 'mini-min';

},{"./objective-rule":79,"sd-model":"sd-model","sd-utils":"sd-utils"}],78:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MultiCriteriaRule = void 0;

var _sdModel = require("sd-model");

var _objectiveRule = require("./objective-rule");

var _policy = require("../../policies/policy");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var MultiCriteriaRule = /*#__PURE__*/function (_ObjectiveRule) {
  _inherits(MultiCriteriaRule, _ObjectiveRule);

  var _super = _createSuper(MultiCriteriaRule);

  function MultiCriteriaRule(name, payoffCoeffs, expressionEngine) {
    var _this;

    _classCallCheck(this, MultiCriteriaRule);

    _this = _super.call(this, name, true, expressionEngine, true);
    _this.criterion1Weight = 1;
    _this.payoffCoeffs = [1, -1];
    _this.payoffCoeffs = payoffCoeffs;
    return _this;
  }

  _createClass(MultiCriteriaRule, [{
    key: "setDefaultCriterion1Weight",
    value: function setDefaultCriterion1Weight(criterion1Weight) {
      this.criterion1Weight = criterion1Weight;
    } // payoff - parent edge payoff, aggregatedPayoff - aggregated payoff along path

  }, {
    key: "computePayoff",
    value: function computePayoff(node) {
      var _this2 = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];
      var aggregatedPayoff = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];
      var childrenPayoff = [0, 0];

      if (node.childEdges.length) {
        if (node instanceof _sdModel.domain.DecisionNode) {
          var selectedIndexes = [];
          var bestChild = -Infinity;
          node.childEdges.forEach(function (e, i) {
            var basePayoffs = [_this2.basePayoff(e, 0), _this2.basePayoff(e, 1)];

            var childPayoff = _this2.computePayoff(e.childNode, basePayoffs, [_this2.add(basePayoffs[0], aggregatedPayoff[0]), _this2.add(basePayoffs[1], aggregatedPayoff[1])]);

            var childCombinedPayoff = _this2.cValue(e.childNode, 'combinedPayoff');

            if (childCombinedPayoff > bestChild) {
              bestChild = childCombinedPayoff;
              selectedIndexes = [i];
            } else if (bestChild.equals(childCombinedPayoff)) {
              selectedIndexes.push(i);
            }
          });

          if (this.decisionPolicy) {
            selectedIndexes = [];

            var decision = _policy.Policy.getDecision(this.decisionPolicy, node);

            if (decision) {
              selectedIndexes = [decision.decisionValue];
            }
          }

          node.childEdges.forEach(function (e, i) {
            _this2.clearComputedValues(e);

            _this2.cValue(e, 'probability', selectedIndexes.indexOf(i) < 0 ? 0.0 : 1.0);
          });
        } else {
          node.childEdges.forEach(function (e) {
            var basePayoffs = [_this2.basePayoff(e, 0), _this2.basePayoff(e, 1)];

            _this2.computePayoff(e.childNode, basePayoffs, [_this2.add(basePayoffs[0], aggregatedPayoff[0]), _this2.add(basePayoffs[1], aggregatedPayoff[1])]);

            _this2.clearComputedValues(e);

            _this2.cValue(e, 'probability', _this2.baseProbability(e));
          });
        }

        var sumweight = 0;
        node.childEdges.forEach(function (e) {
          sumweight = _this2.add(sumweight, _this2.cValue(e, 'probability'));
        });

        if (sumweight > 0) {
          node.childEdges.forEach(function (e) {
            childrenPayoff.forEach(function (p, i) {
              var ep = _this2.cValue(e.childNode, 'payoff[' + i + ']');

              childrenPayoff[i] = _this2.add(p, _this2.multiply(_this2.cValue(e, 'probability'), ep).div(sumweight));
            });
          });
        }
      }

      payoff.forEach(function (p, i) {
        payoff[i] = _this2.add(p, childrenPayoff[i]);
      });
      this.clearComputedValues(node);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'aggregatedPayoff', aggregatedPayoff);
        this.cValue(node, 'probabilityToEnter', 0); //initial value
      } else {
        this.cValue(node, 'childrenPayoff', childrenPayoff);
      }

      this.cValue(node, 'combinedPayoff', this.computeCombinedPayoff(payoff));
      return this.cValue(node, 'payoff', payoff);
    }
  }, {
    key: "computeCombinedPayoff",
    value: function computeCombinedPayoff(payoff) {
      // [criterion 1 coeff]*[criterion 1]*[weight]+[criterion 2 coeff]*[criterion 2]
      if (this.criterion1Weight === Infinity) {
        return this.multiply(this.payoffCoeffs[0], payoff[0]);
      }

      return this.add(this.multiply(this.payoffCoeffs[0], this.multiply(this.criterion1Weight, payoff[0])), this.multiply(this.payoffCoeffs[1], payoff[1]));
    } //  combinedPayoff - parent edge combinedPayoff

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      var _this3 = this;

      var combinedPayoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var probabilityToEnter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      this.cValue(node, 'optimal', true);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'probabilityToEnter', probabilityToEnter);
      }

      node.childEdges.forEach(function (e) {
        if (_this3.subtract(_this3.cValue(node, 'combinedPayoff'), combinedPayoff).equals(_this3.cValue(e.childNode, 'combinedPayoff')) || !(node instanceof _sdModel.domain.DecisionNode)) {
          _this3.cValue(e, 'optimal', true);

          _this3.computeOptimal(e.childNode, _this3.computeCombinedPayoff([_this3.basePayoff(e, 0), _this3.basePayoff(e, 1)]), _this3.multiply(probabilityToEnter, _this3.cValue(e, 'probability')));
        } else {
          _this3.cValue(e, 'optimal', false);
        }
      });
    }
  }]);

  return MultiCriteriaRule;
}(_objectiveRule.ObjectiveRule);

exports.MultiCriteriaRule = MultiCriteriaRule;

},{"../../policies/policy":87,"./objective-rule":79,"sd-model":"sd-model"}],79:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ObjectiveRule = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdModel = require("sd-model");

var _policy = require("../../policies/policy");

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Base class for objective rules*/


var ObjectiveRule = /*#__PURE__*/function () {
  function ObjectiveRule(name, maximization, expressionEngine) {
    var multiCriteria = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

    _classCallCheck(this, ObjectiveRule);

    this.payoffIndex = 0;
    this.multiCriteria = false;
    this.name = name;
    this.maximization = maximization;
    this.expressionEngine = expressionEngine;
    this.multiCriteria = multiCriteria;
  }

  _createClass(ObjectiveRule, [{
    key: "setDecisionPolicy",
    value: function setDecisionPolicy(decisionPolicy) {
      this.decisionPolicy = decisionPolicy;
    }
  }, {
    key: "setPayoffIndex",
    value: function setPayoffIndex(payoffIndex) {
      this.payoffIndex = payoffIndex;
    }
  }, {
    key: "clearDecisionPolicy",
    value: function clearDecisionPolicy() {
      this.decisionPolicy = null;
    } // should return array of selected children indexes

  }, {
    key: "makeDecision",
    value: function makeDecision(decisionNode, childrenPayoffs) {
      var best;

      if (this.maximization) {
        best = this.max.apply(this, _toConsumableArray(childrenPayoffs));
      } else {
        best = this.min.apply(this, _toConsumableArray(childrenPayoffs));
      }

      var selectedIndexes = [];
      childrenPayoffs.forEach(function (p, i) {
        if (_sdExpressionEngine.ExpressionEngine.compare(best, p) == 0) {
          selectedIndexes.push(i);
        }
      });
      return selectedIndexes;
    }
  }, {
    key: "_makeDecision",
    value: function _makeDecision(decisionNode, childrenPayoffs) {
      if (this.decisionPolicy) {
        var decision = _policy.Policy.getDecision(this.decisionPolicy, decisionNode);

        if (decision) {
          return [decision.decisionValue];
        }

        return [];
      }

      return this.makeDecision(decisionNode, childrenPayoffs);
    } // extension point for changing computed probability of edges in a chance node

  }, {
    key: "modifyChanceProbability",
    value: function modifyChanceProbability(edges, bestChildPayoff, bestCount, worstChildPayoff, worstCount) {} // payoff - parent edge payoff, aggregatedPayoff - aggregated payoff along path

  }, {
    key: "computePayoff",
    value: function computePayoff(node) {
      var _this = this;

      var payoff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var aggregatedPayoff = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var childrenPayoff = 0;

      if (node.childEdges.length) {
        if (node instanceof _sdModel.domain.DecisionNode) {
          var selectedIndexes = this._makeDecision(node, node.childEdges.map(function (e) {
            return _this.computePayoff(e.childNode, _this.basePayoff(e), _this.add(_this.basePayoff(e), aggregatedPayoff));
          }));

          node.childEdges.forEach(function (e, i) {
            _this.clearComputedValues(e);

            _this.cValue(e, 'probability', selectedIndexes.indexOf(i) < 0 ? 0.0 : 1.0);
          });
        } else {
          var bestChild = -Infinity;
          var bestCount = 1;
          var worstChild = Infinity;
          var worstCount = 1;
          node.childEdges.forEach(function (e) {
            var childPayoff = _this.computePayoff(e.childNode, _this.basePayoff(e), _this.add(_this.basePayoff(e), aggregatedPayoff));

            if (childPayoff < worstChild) {
              worstChild = childPayoff;
              worstCount = 1;
            } else if (childPayoff.equals(worstChild)) {
              worstCount++;
            }

            if (childPayoff > bestChild) {
              bestChild = childPayoff;
              bestCount = 1;
            } else if (childPayoff.equals(bestChild)) {
              bestCount++;
            }

            _this.clearComputedValues(e);

            _this.cValue(e, 'probability', _this.baseProbability(e));
          });
          this.modifyChanceProbability(node.childEdges, bestChild, bestCount, worstChild, worstCount);
        }

        var sumweight = 0;
        node.childEdges.forEach(function (e) {
          sumweight = _this.add(sumweight, _this.cValue(e, 'probability'));
        }); // console.log(payoff,node.childEdges,'sumweight',sumweight);

        if (sumweight > 0) {
          node.childEdges.forEach(function (e) {
            childrenPayoff = _this.add(childrenPayoff, _this.multiply(_this.cValue(e, 'probability'), _this.computedPayoff(e.childNode)).div(sumweight));
          });
        }
      }

      payoff = this.add(payoff, childrenPayoff);
      this.clearComputedValues(node);

      if (node instanceof _sdModel.domain.TerminalNode) {
        this.cValue(node, 'aggregatedPayoff' + '[' + this.payoffIndex + ']', aggregatedPayoff);
        this.cValue(node, 'probabilityToEnter', 0); //initial value
      } else {
        this.cValue(node, 'childrenPayoff' + '[' + this.payoffIndex + ']', childrenPayoff);
      }

      return this.computedPayoff(node, payoff);
    } // koloruje optymalne cieki

  }, {
    key: "computeOptimal",
    value: function computeOptimal(node) {
      throw 'computeOptimal function not implemented for rule: ' + this.name;
    }
    /* get or set computed payoff*/

  }, {
    key: "computedPayoff",
    value: function computedPayoff(node, value) {
      return this.cValue(node, 'payoff[' + this.payoffIndex + ']', value);
    }
    /*Get or set object's computed value for current rule*/

  }, {
    key: "cValue",
    value: function cValue(object, fieldPath, value) {
      // if(fieldPath.trim() === 'payoff'){
      //     fieldPath += '[' + this.payoffIndex + ']';
      // }
      return object.computedValue(this.name, fieldPath, value);
    }
  }, {
    key: "baseProbability",
    value: function baseProbability(edge) {
      return edge.computedBaseProbability();
    }
  }, {
    key: "basePayoff",
    value: function basePayoff(edge, payoffIndex) {
      return edge.computedBasePayoff(undefined, payoffIndex || this.payoffIndex);
    }
  }, {
    key: "clearComputedValues",
    value: function clearComputedValues(object) {
      object.clearComputedValues(this.name);
    }
  }, {
    key: "add",
    value: function add(a, b) {
      return _sdExpressionEngine.ExpressionEngine.add(a, b);
    }
  }, {
    key: "subtract",
    value: function subtract(a, b) {
      return _sdExpressionEngine.ExpressionEngine.subtract(a, b);
    }
  }, {
    key: "divide",
    value: function divide(a, b) {
      return _sdExpressionEngine.ExpressionEngine.divide(a, b);
    }
  }, {
    key: "multiply",
    value: function multiply(a, b) {
      return _sdExpressionEngine.ExpressionEngine.multiply(a, b);
    }
  }, {
    key: "max",
    value: function max() {
      return _sdExpressionEngine.ExpressionEngine.max.apply(_sdExpressionEngine.ExpressionEngine, arguments);
    }
  }, {
    key: "min",
    value: function min() {
      return _sdExpressionEngine.ExpressionEngine.min.apply(_sdExpressionEngine.ExpressionEngine, arguments);
    }
  }]);

  return ObjectiveRule;
}();

exports.ObjectiveRule = ObjectiveRule;

},{"../../policies/policy":87,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model"}],80:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FlipSubtree = void 0;

var _sdModel = require("sd-model");

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

var _operation = require("./operation");

var _treeValidator = require("../validation/tree-validator");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}
/*Subtree flipping operation*/


var FlipSubtree = /*#__PURE__*/function (_Operation) {
  _inherits(FlipSubtree, _Operation);

  var _super = _createSuper(FlipSubtree);

  function FlipSubtree(data, expressionEngine) {
    var _this;

    _classCallCheck(this, FlipSubtree);

    _this = _super.call(this, FlipSubtree.$NAME);
    _this.data = data;
    _this.expressionEngine = expressionEngine;
    _this.treeValidator = new _treeValidator.TreeValidator(expressionEngine);
    return _this;
  }

  _createClass(FlipSubtree, [{
    key: "isApplicable",
    value: function isApplicable(object) {
      return object instanceof _sdModel.domain.ChanceNode;
    }
  }, {
    key: "canPerform",
    value: function canPerform(node) {
      if (!this.isApplicable(node)) {
        return false;
      }

      if (!this.treeValidator.validate(this.data.getAllNodesInSubtree(node)).isValid()) {
        //check if the whole subtree is proper
        return false;
      }

      if (node.childEdges.length < 1) {
        return false;
      }

      var grandchildrenNumber = null;
      var grandchildrenEdgeLabels = [];
      var childrenEdgeLabelsSet = new Set();
      var grandchildrenEdgeLabelsSet;

      if (!node.childEdges.every(function (e) {
        var child = e.childNode;

        if (!(child instanceof _sdModel.domain.ChanceNode)) {
          return false;
        }

        if (childrenEdgeLabelsSet.has(e.name.trim())) {
          // edge labels should be unique
          return false;
        }

        childrenEdgeLabelsSet.add(e.name.trim());

        if (grandchildrenNumber === null) {
          grandchildrenNumber = child.childEdges.length;

          if (grandchildrenNumber < 1) {
            return false;
          }

          child.childEdges.forEach(function (ge) {
            grandchildrenEdgeLabels.push(ge.name.trim());
          });
          grandchildrenEdgeLabelsSet = new Set(grandchildrenEdgeLabels);

          if (grandchildrenEdgeLabelsSet.size !== grandchildrenEdgeLabels.length) {
            //grandchildren edge labels should be unique
            return false;
          }

          return true;
        }

        if (child.childEdges.length != grandchildrenNumber) {
          return false;
        }

        if (!child.childEdges.every(function (ge, i) {
          return grandchildrenEdgeLabels[i] === ge.name.trim();
        })) {
          return false;
        }

        return true;
      })) {
        return false;
      }

      return true;
    }
  }, {
    key: "perform",
    value: function perform(root) {
      var _this2 = this;

      var rootClone = this.data.cloneSubtree(root, true);
      var oldChildrenNumber = root.childEdges.length;
      var oldGrandChildrenNumber = root.childEdges[0].childNode.childEdges.length;
      var childrenNumber = oldGrandChildrenNumber;
      var grandChildrenNumber = oldChildrenNumber;
      var callbacksDisabled = this.data.callbacksDisabled;
      this.data.callbacksDisabled = true;
      var childX = root.childEdges[0].childNode.location.x;
      var topY = root.childEdges[0].childNode.childEdges[0].childNode.location.y;
      var bottomY = root.childEdges[oldChildrenNumber - 1].childNode.childEdges[oldGrandChildrenNumber - 1].childNode.location.y;
      var extentY = bottomY - topY;
      var stepY = extentY / (childrenNumber + 1);
      root.childEdges.slice().forEach(function (e) {
        return _this2.data.removeNode(e.childNode);
      });

      for (var i = 0; i < childrenNumber; i++) {
        var child = new _sdModel.domain.ChanceNode(new _sdModel.domain.Point(childX, topY + (i + 1) * stepY));
        var edge = this.data.addNode(child, root);
        edge.name = rootClone.childEdges[0].childNode.childEdges[i].name;
        edge.probability = 0;

        for (var j = 0; j < grandChildrenNumber; j++) {
          var grandChild = rootClone.childEdges[j].childNode.childEdges[i].childNode;
          var grandChildEdge = this.data.attachSubtree(grandChild, child);
          grandChildEdge.name = rootClone.childEdges[j].name;
          grandChildEdge.payoff = [_sdExpressionEngine.ExpressionEngine.add(rootClone.childEdges[j].computedBasePayoff(undefined, 0), rootClone.childEdges[j].childNode.childEdges[i].computedBasePayoff(undefined, 0)), _sdExpressionEngine.ExpressionEngine.add(rootClone.childEdges[j].computedBasePayoff(undefined, 1), rootClone.childEdges[j].childNode.childEdges[i].computedBasePayoff(undefined, 1))];
          grandChildEdge.probability = _sdExpressionEngine.ExpressionEngine.multiply(rootClone.childEdges[j].computedBaseProbability(), rootClone.childEdges[j].childNode.childEdges[i].computedBaseProbability());
          edge.probability = _sdExpressionEngine.ExpressionEngine.add(edge.probability, grandChildEdge.probability);
        }

        var divideGrandChildEdgeProbability = function divideGrandChildEdgeProbability(p) {
          return _sdExpressionEngine.ExpressionEngine.divide(p, edge.probability);
        };

        if (edge.probability.equals(0)) {
          var prob = _sdExpressionEngine.ExpressionEngine.divide(1, grandChildrenNumber);

          divideGrandChildEdgeProbability = function divideGrandChildEdgeProbability(p) {
            return prob;
          };
        }

        var probabilitySum = 0.0;
        child.childEdges.forEach(function (grandChildEdge) {
          grandChildEdge.probability = divideGrandChildEdgeProbability(grandChildEdge.probability);
          probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, grandChildEdge.probability);
          grandChildEdge.probability = _this2.expressionEngine.serialize(grandChildEdge.probability);
        });

        this._normalizeProbabilitiesAfterFlip(child.childEdges, probabilitySum);

        edge.probability = this.expressionEngine.serialize(edge.probability);
      }

      this._normalizeProbabilitiesAfterFlip(root.childEdges);

      this.data.callbacksDisabled = callbacksDisabled;

      this.data._fireNodeAddedCallback();
    }
  }, {
    key: "_normalizeProbabilitiesAfterFlip",
    value: function _normalizeProbabilitiesAfterFlip(childEdges, probabilitySum) {
      var _this3 = this;

      if (!probabilitySum) {
        probabilitySum = 0.0;
        childEdges.forEach(function (e) {
          probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, e.probability);
        });
      }

      if (!probabilitySum.equals(1)) {
        _sdUtils.log.info('Sum of the probabilities in child nodes is not equal to 1 : ', probabilitySum);

        var newProbabilitySum = 0.0;
        var cf = 1000000000000; //10^12

        var prec = 12;
        childEdges.forEach(function (e) {
          e.probability = parseInt(_sdExpressionEngine.ExpressionEngine.round(e.probability, prec) * cf);
          newProbabilitySum = newProbabilitySum + e.probability;
        });
        var rest = cf - newProbabilitySum;

        _sdUtils.log.info('Normalizing with rounding to precision: ' + prec, rest);

        childEdges[0].probability = _sdExpressionEngine.ExpressionEngine.add(rest, childEdges[0].probability);
        newProbabilitySum = 0.0;
        childEdges.forEach(function (e) {
          e.probability = _this3.expressionEngine.serialize(_sdExpressionEngine.ExpressionEngine.divide(parseInt(e.probability), cf));
        });
      }
    }
  }]);

  return FlipSubtree;
}(_operation.Operation);

exports.FlipSubtree = FlipSubtree;
FlipSubtree.$NAME = 'flipSubtree';

},{"../validation/tree-validator":91,"./operation":82,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model","sd-utils":"sd-utils"}],81:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JobExecutingOperation = void 0;

var _operation = require("./operation");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var JobExecutingOperation = /*#__PURE__*/function (_Operation) {
  _inherits(JobExecutingOperation, _Operation);

  var _super = _createSuper(JobExecutingOperation); //Job name if this operation executes a job


  function JobExecutingOperation(name) {
    var _this;

    var jobName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    _classCallCheck(this, JobExecutingOperation);

    _this = _super.call(this, name);
    _this.name = name;
    _this.jobName = jobName;
    return _this;
  } //check if can perform operation for applicable object


  _createClass(JobExecutingOperation, [{
    key: "canPerform",
    value: function canPerform(object, params) {
      throw 'canPerform function not implemented for operation: ' + this.name;
    } //Performed in job by operations manager

  }, {
    key: "perform",
    value: function perform(object, params) {}
  }, {
    key: "postProcess",
    value: function postProcess(object, params) {}
  }]);

  return JobExecutingOperation;
}(_operation.Operation);

exports.JobExecutingOperation = JobExecutingOperation;

},{"./operation":82}],82:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Operation = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Base class for complex operations on tree structure*/


var Operation = /*#__PURE__*/function () {
  function Operation(name) {
    _classCallCheck(this, Operation);

    this.name = name;
  } //check if operation is potentially applicable for object


  _createClass(Operation, [{
    key: "isApplicable",
    value: function isApplicable(object) {
      throw 'isApplicable function not implemented for operation: ' + this.name;
    } //check if can perform operation for applicable object

  }, {
    key: "canPerform",
    value: function canPerform(object) {
      throw 'canPerform function not implemented for operation: ' + this.name;
    }
  }, {
    key: "perform",
    value: function perform(object, params) {
      throw 'perform function not implemented for operation: ' + this.name;
    }
  }]);

  return Operation;
}();

exports.Operation = Operation;

},{}],83:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.OperationsManager = void 0;

var _flipSubtree = require("./flip-subtree");

var _payoffsTransformation = require("./payoffs-transformation.js");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var OperationsManager = /*#__PURE__*/function () {
  function OperationsManager(data, expressionEngine, jobsManger) {
    _classCallCheck(this, OperationsManager);

    this.operations = [];
    this.operationByName = {};
    this.data = data;
    this.expressionEngine = expressionEngine;
    this.jobsManger = jobsManger;
    this.registerOperation(new _flipSubtree.FlipSubtree(data, expressionEngine));
    this.registerOperation(new _payoffsTransformation.PayoffsTransformation(data, expressionEngine));
  }

  _createClass(OperationsManager, [{
    key: "registerOperation",
    value: function registerOperation(operation) {
      this.operations.push(operation);
      this.operationByName[operation.name] = operation;
    }
  }, {
    key: "getOperationByName",
    value: function getOperationByName(name) {
      return this.operationByName[name];
    }
  }, {
    key: "operationsForObject",
    value: function operationsForObject(object) {
      return this.operations.filter(function (op) {
        return op.isApplicable(object);
      });
    }
  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
      this.operations.forEach(function (o) {
        return o.data = data;
      });
    }
  }, {
    key: "performOperation",
    value: function performOperation(object, operationName, jobParamsValues) {
      var _this = this;

      var operation = this.getOperationByName(operationName);

      if (!operation.jobName) {
        return Promise.resolve(operation.perform(object, jobParamsValues));
      }

      jobParamsValues['objectId'] = object.id;
      return this.jobsManger.run(operation.jobName, jobParamsValues, this.data, false).then(function (jobExecution) {
        var d = jobExecution.getData();
        _this.data.nodes = d.nodes;
        _this.data.edges = d.edges;
        _this.data.code = d.code;
        operation.postProcess(object, jobParamsValues);
        return true;
      });
    }
  }]);

  return OperationsManager;
}();

exports.OperationsManager = OperationsManager;

},{"./flip-subtree":80,"./payoffs-transformation.js":84}],84:[function(require,module,exports){
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PayoffsTransformation = void 0;

var _sdModel = require("sd-model");

var _treeValidator = require("../validation/tree-validator");

var _jobExecutingOperation = require("./job-executing-operation");

var _payoffsTransformationJob = require("../jobs/configurations/payoffs-transformation/payoffs-transformation-job");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();

  return function _createSuperInternal() {
    var Super = _getPrototypeOf(Derived),
        result;

    if (hasNativeReflectConstruct) {
      var NewTarget = _getPrototypeOf(this).constructor;

      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return _possibleConstructorReturn(this, result);
  };
}

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }

  return _assertThisInitialized(self);
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

var PayoffsTransformation = /*#__PURE__*/function (_JobExecutingOperatio) {
  _inherits(PayoffsTransformation, _JobExecutingOperatio);

  var _super = _createSuper(PayoffsTransformation);

  function PayoffsTransformation(data, expressionEngine) {
    var _this;

    _classCallCheck(this, PayoffsTransformation);

    _this = _super.call(this, PayoffsTransformation.$NAME, _payoffsTransformationJob.PayoffsTransformationJob.$NAME);
    _this.data = data;
    _this.expressionEngine = expressionEngine;
    _this.treeValidator = new _treeValidator.TreeValidator(expressionEngine);
    return _this;
  }

  _createClass(PayoffsTransformation, [{
    key: "isApplicable",
    value: function isApplicable(object) {
      return object instanceof _sdModel.domain.ChanceNode || object instanceof _sdModel.domain.DecisionNode;
    }
  }, {
    key: "canPerform",
    value: function canPerform(node) {
      if (!this.isApplicable(node)) {
        return false;
      }

      if (!this.treeValidator.validate(this.data.getAllNodesInSubtree(node)).isValid()) {
        //check if the whole subtree is proper
        return false;
      }

      return !node.$parent && node.childEdges.length > 0;
    }
  }]);

  return PayoffsTransformation;
}(_jobExecutingOperation.JobExecutingOperation);

exports.PayoffsTransformation = PayoffsTransformation;
PayoffsTransformation.$NAME = 'payoffsTransformation';

},{"../jobs/configurations/payoffs-transformation/payoffs-transformation-job":12,"../validation/tree-validator":91,"./job-executing-operation":81,"sd-model":"sd-model"}],85:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Decision = void 0;

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var Decision = /*#__PURE__*/function () {
  //index of  selected edge
  function Decision(node, decisionValue) {
    _classCallCheck(this, Decision);

    this.children = [];
    this.node = node;
    this.decisionValue = decisionValue;
    this.key = Decision.generateKey(this);
  }

  _createClass(Decision, [{
    key: "addDecision",
    value: function addDecision(node, decisionValue) {
      var decision = new Decision(node, decisionValue);
      this.children.push(decision);
      this.key = Decision.generateKey(this);
      return decision;
    }
  }, {
    key: "getDecision",
    value: function getDecision(decisionNode) {
      return Decision.getDecision(this, decisionNode);
    }
  }, {
    key: "toDecisionString",
    value: function toDecisionString() {
      var indent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      return Decision.toDecisionString(this, indent);
    }
  }], [{
    key: "generateKey",
    value: function generateKey(decision) {
      var keyProperty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'id';
      var e = decision.node.childEdges[decision.decisionValue];
      var key = decision.node[keyProperty] + ":" + (e[keyProperty] ? e[keyProperty] : decision.decisionValue + 1);
      return key.replace(/\n/g, ' ');
    }
  }, {
    key: "getDecision",
    value: function getDecision(decision, decisionNode) {
      if (decision.node === decisionNode || decision.node.id === decisionNode.id) {
        return decision;
      }

      for (var i = 0; i < decision.children.length; i++) {
        var d = Decision.getDecision(decision.children[i], decisionNode);

        if (d) {
          return d;
        }
      }
    }
  }, {
    key: "toDecisionString",
    value: function toDecisionString(decision) {
      var extended = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var keyProperty = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'name';
      var indent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
      var res = Decision.generateKey(decision, keyProperty);
      var childrenRes = "";
      decision.children.forEach(function (d) {
        if (childrenRes) {
          if (extended) {
            childrenRes += '\n' + indent;
          } else {
            childrenRes += ", ";
          }
        }

        childrenRes += Decision.toDecisionString(d, extended, keyProperty, indent + '\t');
      });

      if (decision.children.length) {
        if (extended) {
          childrenRes = '\n' + indent + childrenRes;
        } else {
          childrenRes = " - (" + childrenRes + ")";
        }
      }

      return res + childrenRes;
    }
  }]);

  return Decision;
}();

exports.Decision = Decision;

},{}],86:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PoliciesCollector = void 0;

var _policy = require("./policy");

var _sdModel = require("sd-model");

var _sdUtils = require("sd-utils");

var _decision = require("./decision");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var PoliciesCollector = /*#__PURE__*/function () {
  function PoliciesCollector(root, optimalForRuleName) {
    var _this = this;

    _classCallCheck(this, PoliciesCollector);

    this.policies = [];
    this.ruleName = false;
    this.ruleName = optimalForRuleName;
    this.collect(root).forEach(function (decisions, i) {
      _this.policies.push(new _policy.Policy("#" + (i + 1), decisions));
    });

    if (this.policies.length === 1) {
      this.policies[0].id = "default";
    }
  }

  _createClass(PoliciesCollector, [{
    key: "collect",
    value: function collect(root) {
      var _this2 = this;

      var nodeQueue = [root];
      var node;
      var decisionNodes = [];

      while (nodeQueue.length) {
        node = nodeQueue.shift();

        if (this.ruleName && !node.computedValue(this.ruleName, 'optimal')) {
          continue;
        }

        if (node instanceof _sdModel.domain.DecisionNode) {
          decisionNodes.push(node);
          continue;
        }

        node.childEdges.forEach(function (edge, i) {
          nodeQueue.push(edge.childNode);
        });
      }

      return _sdUtils.Utils.cartesianProductOf(decisionNodes.map(function (decisionNode) {
        var decisions = [];
        decisionNode.childEdges.forEach(function (edge, i) {
          if (_this2.ruleName && !edge.computedValue(_this2.ruleName, 'optimal')) {
            return;
          }

          var childDecisions = _this2.collect(edge.childNode); //all possible child decisions (cartesian)


          childDecisions.forEach(function (cd) {
            var decision = new _decision.Decision(decisionNode, i);
            decisions.push(decision);
            decision.children = cd;
          });
        });
        return decisions;
      }));
    }
  }]);

  return PoliciesCollector;
}();

exports.PoliciesCollector = PoliciesCollector;

},{"./decision":85,"./policy":87,"sd-model":"sd-model","sd-utils":"sd-utils"}],87:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Policy = void 0;

var _decision = require("./decision");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var Policy = /*#__PURE__*/function () {
  function Policy(id, decisions) {
    _classCallCheck(this, Policy);

    this.decisions = [];
    this.id = id;
    this.decisions = decisions || [];
    this.key = Policy.generateKey(this);
  }

  _createClass(Policy, [{
    key: "addDecision",
    value: function addDecision(node, decisionValue) {
      var decision = new _decision.Decision(node, decisionValue);
      this.decisions.push(decision);
      this.key = Policy.generateKey(this);
      return decision;
    }
  }, {
    key: "equals",
    value: function equals(policy) {
      var ignoreId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (this.key != policy.key) {
        return false;
      }

      return ignoreId || this.id === policy.id;
    }
  }, {
    key: "getDecision",
    value: function getDecision(decisionNode) {
      return Policy.getDecision(this, decisionNode);
    }
  }, {
    key: "toPolicyString",
    value: function toPolicyString() {
      var indent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      return Policy.toPolicyString(this, indent);
    }
  }], [{
    key: "generateKey",
    value: function generateKey(policy) {
      var key = "";
      policy.decisions.forEach(function (d) {
        return key += (key ? "&" : "") + d.key;
      });
      return key;
    }
  }, {
    key: "getDecision",
    value: function getDecision(policy, decisionNode) {
      for (var i = 0; i < policy.decisions.length; i++) {
        var decision = _decision.Decision.getDecision(policy.decisions[i], decisionNode);

        if (decision) {
          return decision;
        }
      }

      return null;
    }
  }, {
    key: "toPolicyString",
    value: function toPolicyString(policy) {
      var extended = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var prependId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var res = "";
      policy.decisions.forEach(function (d) {
        if (res) {
          if (extended) {
            res += "\n";
          } else {
            res += ", ";
          }
        }

        res += _decision.Decision.toDecisionString(d, extended, 'name', '\t');
      });

      if (prependId && policy.id !== undefined) {
        return policy.id + " " + res;
      }

      return res;
    }
  }]);

  return Policy;
}();

exports.Policy = Policy;

},{"./decision":85}],88:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.McdmWeightValueValidator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var McdmWeightValueValidator = /*#__PURE__*/function () {
  function McdmWeightValueValidator(additionalValidator) {
    _classCallCheck(this, McdmWeightValueValidator);

    this.additionalValidator = null;
    this.additionalValidator = additionalValidator;
  }

  _createClass(McdmWeightValueValidator, [{
    key: "validate",
    value: function validate(value) {
      if (value === null || value === undefined) {
        return false;
      }

      var parsed = parseFloat(value);

      if (parsed !== Infinity && !_sdExpressionEngine.ExpressionEngine.validate(value, {}, false)) {
        return false;
      }

      value = _sdExpressionEngine.ExpressionEngine.toNumber(value);
      var maxSafeInteger = Number.MAX_SAFE_INTEGER || 9007199254740991; // Number.MAX_SAFE_INTEGER is undefined in IE

      if (_sdExpressionEngine.ExpressionEngine.compare(value, 0) < 0 || value !== Infinity && _sdExpressionEngine.ExpressionEngine.compare(value, maxSafeInteger) > 0) {
        return false;
      }

      if (this.additionalValidator) {
        return this.additionalValidator(_sdExpressionEngine.ExpressionEngine.toNumber(value));
      }

      return true;
    }
  }]);

  return McdmWeightValueValidator;
}();

exports.McdmWeightValueValidator = McdmWeightValueValidator;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],89:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PayoffValueValidator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Computed base value validator*/


var PayoffValueValidator = /*#__PURE__*/function () {
  function PayoffValueValidator(expressionEngine) {
    _classCallCheck(this, PayoffValueValidator);

    this.expressionEngine = expressionEngine;
  }

  _createClass(PayoffValueValidator, [{
    key: "validate",
    value: function validate(value) {
      if (value === null || value === undefined) {
        return false;
      }

      value = _sdExpressionEngine.ExpressionEngine.toNumber(value);
      var maxSafeInteger = Number.MAX_SAFE_INTEGER || 9007199254740991; // Number.MAX_SAFE_INTEGER in undefined in IE

      return _sdExpressionEngine.ExpressionEngine.compare(value, -maxSafeInteger) >= 0 && _sdExpressionEngine.ExpressionEngine.compare(value, maxSafeInteger) <= 0;
    }
  }]);

  return PayoffValueValidator;
}();

exports.PayoffValueValidator = PayoffValueValidator;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],90:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ProbabilityValueValidator = void 0;

var _sdExpressionEngine = require("sd-expression-engine");

var _sdUtils = require("sd-utils");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}
/*Computed base value validator*/


var ProbabilityValueValidator = /*#__PURE__*/function () {
  function ProbabilityValueValidator(expressionEngine) {
    _classCallCheck(this, ProbabilityValueValidator);

    this.expressionEngine = expressionEngine;
  }

  _createClass(ProbabilityValueValidator, [{
    key: "validate",
    value: function validate(value, edge) {
      if (value === null || value === undefined) {
        return false;
      }

      var value = _sdExpressionEngine.ExpressionEngine.toNumber(value);

      return value.compare(0) >= 0 && value.compare(1) <= 0;
    }
  }]);

  return ProbabilityValueValidator;
}();

exports.ProbabilityValueValidator = ProbabilityValueValidator;

},{"sd-expression-engine":"sd-expression-engine","sd-utils":"sd-utils"}],91:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TreeValidator = void 0;

var _sdModel = require("sd-model");

var _sdExpressionEngine = require("sd-expression-engine");

var _probabilityValueValidator = require("./probability-value-validator");

var _payoffValueValidator = require("./payoff-value-validator");

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

var TreeValidator = /*#__PURE__*/function () {
  function TreeValidator(expressionEngine) {
    _classCallCheck(this, TreeValidator);

    this.expressionEngine = expressionEngine;
    this.probabilityValueValidator = new _probabilityValueValidator.ProbabilityValueValidator(expressionEngine);
    this.payoffValueValidator = new _payoffValueValidator.PayoffValueValidator(expressionEngine);
  }

  _createClass(TreeValidator, [{
    key: "validate",
    value: function validate(nodes) {
      var _this = this;

      var validationResult = new _sdModel.ValidationResult();
      nodes.forEach(function (n) {
        _this.validateNode(n, validationResult);
      });
      return validationResult;
    }
  }, {
    key: "validateNode",
    value: function validateNode(node) {
      var _this2 = this;

      var validationResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _sdModel.ValidationResult();

      if (node instanceof _sdModel.domain.TerminalNode) {
        return;
      }

      if (!node.childEdges.length) {
        validationResult.addError('incompletePath', node);
      }

      var probabilitySum = _sdExpressionEngine.ExpressionEngine.toNumber(0);

      var withHash = false;
      node.childEdges.forEach(function (e, i) {
        e.setValueValidity('probability', true);

        if (node instanceof _sdModel.domain.ChanceNode) {
          var probability = e.computedBaseProbability();

          if (!_this2.probabilityValueValidator.validate(probability)) {
            if (!_sdExpressionEngine.ExpressionEngine.isHash(e.probability)) {
              validationResult.addError({
                name: 'invalidProbability',
                data: {
                  'number': i + 1
                }
              }, node);
              e.setValueValidity('probability', false);
            }
          } else {
            probabilitySum = _sdExpressionEngine.ExpressionEngine.add(probabilitySum, probability);
          }
        }

        e.payoff.forEach(function (rawPayoff, payoffIndex) {
          var path = 'payoff[' + payoffIndex + ']';
          e.setValueValidity(path, true);
          var payoff = e.computedBasePayoff(undefined, payoffIndex);

          if (!_this2.payoffValueValidator.validate(payoff)) {
            validationResult.addError({
              name: 'invalidPayoff',
              data: {
                'number': i + 1
              }
            }, node);
            e.setValueValidity(path, false);
          }
        });
      });

      if (node instanceof _sdModel.domain.ChanceNode) {
        if (isNaN(probabilitySum) || !probabilitySum.equals(1)) {
          validationResult.addError('probabilityDoNotSumUpTo1', node);
        }
      }

      return validationResult;
    }
  }]);

  return TreeValidator;
}();

exports.TreeValidator = TreeValidator;

},{"./payoff-value-validator":89,"./probability-value-validator":90,"sd-expression-engine":"sd-expression-engine","sd-model":"sd-model"}],"sd-computations":[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require("./src/index");

Object.keys(_index).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (key in exports && exports[key] === _index[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _index[key];
    }
  });
});

},{"./src/index":7}]},{},[])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaWRiL2J1aWxkL2Nqcy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9pZGIvYnVpbGQvY2pzL3dyYXAtaWRiLXZhbHVlLmpzIiwic3JjL2NvbXB1dGF0aW9ucy1lbmdpbmUuanMiLCJzcmMvY29tcHV0YXRpb25zLW1hbmFnZXIuanMiLCJzcmMvY29tcHV0YXRpb25zLXV0aWxzLmpzIiwic3JjL2V4cHJlc3Npb25zLWV2YWx1YXRvci5qcyIsInNyYy9pbmRleC5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL2xlYWd1ZS10YWJsZS9sZWFndWUtdGFibGUtam9iLXBhcmFtZXRlcnMuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9sZWFndWUtdGFibGUvbGVhZ3VlLXRhYmxlLWpvYi5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL2xlYWd1ZS10YWJsZS9zdGVwcy9jYWxjdWxhdGUtc3RlcC5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3BheW9mZnMtdHJhbnNmb3JtYXRpb24vcGF5b2Zmcy10cmFuc2Zvcm1hdGlvbi1qb2ItcGFyYW1ldGVycy5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3BheW9mZnMtdHJhbnNmb3JtYXRpb24vcGF5b2Zmcy10cmFuc2Zvcm1hdGlvbi1qb2IuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9yZWNvbXB1dGUvcmVjb21wdXRlLWpvYi1wYXJhbWV0ZXJzLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvcmVjb21wdXRlL3JlY29tcHV0ZS1qb2IuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9uLXdheS9zZW5zaXRpdml0eS1hbmFseXNpcy1qb2ItcGFyYW1ldGVycy5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL24td2F5L3NlbnNpdGl2aXR5LWFuYWx5c2lzLWpvYi5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL24td2F5L3N0ZXBzL2NhbGN1bGF0ZS1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvbi13YXkvc3RlcHMvaW5pdC1wb2xpY2llcy1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvbi13YXkvc3RlcHMvcHJlcGFyZS12YXJpYWJsZXMtc3RlcC5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3Byb2JhYmlsaXN0aWMvcHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpcy1qb2ItcGFyYW1ldGVycy5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3Byb2JhYmlsaXN0aWMvcHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpcy1qb2IuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9wcm9iYWJpbGlzdGljL3N0ZXBzL2NvbXB1dGUtcG9saWN5LXN0YXRzLXN0ZXAuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9wcm9iYWJpbGlzdGljL3N0ZXBzL3Byb2ItY2FsY3VsYXRlLXN0ZXAuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9zcGlkZXItcGxvdC9zcGlkZXItcGxvdC1qb2ItcGFyYW1ldGVycy5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3NwaWRlci1wbG90L3NwaWRlci1wbG90LWpvYi5qcyIsInNyYy9qb2JzL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3NwaWRlci1wbG90L3N0ZXBzL2NhbGN1bGF0ZS1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvdG9ybmFkby1kaWFncmFtL3N0ZXBzL2NhbGN1bGF0ZS1zdGVwLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvdG9ybmFkby1kaWFncmFtL3N0ZXBzL3ByZXBhcmUtdmFyaWFibGVzLXN0ZXAuanMiLCJzcmMvam9icy9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy90b3JuYWRvLWRpYWdyYW0vdG9ybmFkby1kaWFncmFtLWpvYi1wYXJhbWV0ZXJzLmpzIiwic3JjL2pvYnMvY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvdG9ybmFkby1kaWFncmFtL3Rvcm5hZG8tZGlhZ3JhbS1qb2IuanMiLCJzcmMvam9icy9lbmdpbmUvYmF0Y2gvYmF0Y2gtc3RlcC5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2V4dGVuZGFibGUtZXJyb3IuanMiLCJzcmMvam9icy9lbmdpbmUvZXhjZXB0aW9ucy9pbmRleC5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1jb21wdXRhdGlvbi1leGNlcHRpb24uanMiLCJzcmMvam9icy9lbmdpbmUvZXhjZXB0aW9ucy9qb2ItZGF0YS1pbnZhbGlkLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1leGVjdXRpb24tYWxyZWFkeS1ydW5uaW5nLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1pbnN0YW5jZS1hbHJlYWR5LWNvbXBsZXRlLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1pbnRlcnJ1cHRlZC1leGNlcHRpb24uanMiLCJzcmMvam9icy9lbmdpbmUvZXhjZXB0aW9ucy9qb2ItcGFyYW1ldGVycy1pbnZhbGlkLWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGNlcHRpb25zL2pvYi1yZXN0YXJ0LWV4Y2VwdGlvbi5qcyIsInNyYy9qb2JzL2VuZ2luZS9leGVjdXRpb24tY29udGV4dC5qcyIsInNyYy9qb2JzL2VuZ2luZS9pbmRleC5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItZXhlY3V0aW9uLWZsYWcuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLWV4ZWN1dGlvbi1saXN0ZW5lci5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItZXhlY3V0aW9uLmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1pbnN0YW5jZS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2Ita2V5LWdlbmVyYXRvci5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItbGF1bmNoZXIuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLXBhcmFtZXRlci1kZWZpbml0aW9uLmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1wYXJhbWV0ZXJzLmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1yZXBvc2l0b3J5L2lkYi1qb2ItcmVwb3NpdG9yeS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS9qb2ItcmVwb3NpdG9yeS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS9zaW1wbGUtam9iLXJlcG9zaXRvcnkuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLXJlcG9zaXRvcnkvdGltZW91dC1qb2ItcmVwb3NpdG9yeS5qcyIsInNyYy9qb2JzL2VuZ2luZS9qb2ItcmVzdWx0LmpzIiwic3JjL2pvYnMvZW5naW5lL2pvYi1zdGF0dXMuanMiLCJzcmMvam9icy9lbmdpbmUvam9iLmpzIiwic3JjL2pvYnMvZW5naW5lL3NpbXBsZS1qb2IuanMiLCJzcmMvam9icy9lbmdpbmUvc3RlcC1leGVjdXRpb24tbGlzdGVuZXIuanMiLCJzcmMvam9icy9lbmdpbmUvc3RlcC1leGVjdXRpb24uanMiLCJzcmMvam9icy9lbmdpbmUvc3RlcC5qcyIsInNyYy9qb2JzL2luZGV4LmpzIiwic3JjL2pvYnMvam9iLWluc3RhbmNlLW1hbmFnZXIuanMiLCJzcmMvam9icy9qb2Itd29ya2VyLmpzIiwic3JjL2pvYnMvam9icy1tYW5hZ2VyLmpzIiwic3JjL29iamVjdGl2ZS9vYmplY3RpdmUtcnVsZXMtbWFuYWdlci5qcyIsInNyYy9vYmplY3RpdmUvcnVsZXMvZXhwZWN0ZWQtdmFsdWUtbWF4aW1pemF0aW9uLXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL2V4cGVjdGVkLXZhbHVlLW1pbmltaXphdGlvbi1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9pbmRleC5qcyIsInNyYy9vYmplY3RpdmUvcnVsZXMvbWF4LW1heC1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9tYXgtbWluLXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL21heGktbWF4LXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL21heGktbWluLXJ1bGUuanMiLCJzcmMvb2JqZWN0aXZlL3J1bGVzL21pbi1tYXgtcnVsZS5qcyIsInNyYy9vYmplY3RpdmUvcnVsZXMvbWluLW1pbi1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9taW5pLW1heC1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9taW5pLW1pbi1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9tdWx0aS1jcml0ZXJpYS1ydWxlLmpzIiwic3JjL29iamVjdGl2ZS9ydWxlcy9vYmplY3RpdmUtcnVsZS5qcyIsInNyYy9vcGVyYXRpb25zL2ZsaXAtc3VidHJlZS5qcyIsInNyYy9vcGVyYXRpb25zL2pvYi1leGVjdXRpbmctb3BlcmF0aW9uLmpzIiwic3JjL29wZXJhdGlvbnMvb3BlcmF0aW9uLmpzIiwic3JjL29wZXJhdGlvbnMvb3BlcmF0aW9ucy1tYW5hZ2VyLmpzIiwic3JjL29wZXJhdGlvbnMvcGF5b2Zmcy10cmFuc2Zvcm1hdGlvbi5qcyIsInNyYy9wb2xpY2llcy9kZWNpc2lvbi5qcyIsInNyYy9wb2xpY2llcy9wb2xpY2llcy1jb2xsZWN0b3IuanMiLCJzcmMvcG9saWNpZXMvcG9saWN5LmpzIiwic3JjL3ZhbGlkYXRpb24vbWNkbS13ZWlnaHQtdmFsdWUtdmFsaWRhdG9yLmpzIiwic3JjL3ZhbGlkYXRpb24vcGF5b2ZmLXZhbHVlLXZhbGlkYXRvci5qcyIsInNyYy92YWxpZGF0aW9uL3Byb2JhYmlsaXR5LXZhbHVlLXZhbGlkYXRvci5qcyIsInNyYy92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yLmpzIiwiaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7Ozs7Ozs7Ozs7O0FBRUEsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFBRSxFQUFBLEtBQUssRUFBRTtBQUFULENBQTdDOztBQUVBLElBQUksWUFBWSxHQUFHLE9BQU8sQ0FBQyxxQkFBRCxDQUExQjtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQSxTQUFTLE1BQVQsQ0FBZ0IsSUFBaEIsRUFBc0IsT0FBdEIsRUFBZ0Y7QUFBQSxpRkFBSixFQUFJO0FBQUEsTUFBL0MsT0FBK0MsUUFBL0MsT0FBK0M7QUFBQSxNQUF0QyxPQUFzQyxRQUF0QyxPQUFzQztBQUFBLE1BQTdCLFFBQTZCLFFBQTdCLFFBQTZCO0FBQUEsTUFBbkIsVUFBbUIsUUFBbkIsVUFBbUI7O0FBQzVFLE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxJQUFWLENBQWUsSUFBZixFQUFxQixPQUFyQixDQUFoQjtBQUNBLE1BQU0sV0FBVyxHQUFHLFlBQVksQ0FBQyxJQUFiLENBQWtCLE9BQWxCLENBQXBCOztBQUNBLE1BQUksT0FBSixFQUFhO0FBQ1QsSUFBQSxPQUFPLENBQUMsZ0JBQVIsQ0FBeUIsZUFBekIsRUFBMEMsVUFBQyxLQUFELEVBQVc7QUFDakQsTUFBQSxPQUFPLENBQUMsWUFBWSxDQUFDLElBQWIsQ0FBa0IsT0FBTyxDQUFDLE1BQTFCLENBQUQsRUFBb0MsS0FBSyxDQUFDLFVBQTFDLEVBQXNELEtBQUssQ0FBQyxVQUE1RCxFQUF3RSxZQUFZLENBQUMsSUFBYixDQUFrQixPQUFPLENBQUMsV0FBMUIsQ0FBeEUsQ0FBUDtBQUNILEtBRkQ7QUFHSDs7QUFDRCxNQUFJLE9BQUosRUFDSSxPQUFPLENBQUMsZ0JBQVIsQ0FBeUIsU0FBekIsRUFBb0M7QUFBQSxXQUFNLE9BQU8sRUFBYjtBQUFBLEdBQXBDO0FBQ0osRUFBQSxXQUFXLENBQ04sSUFETCxDQUNVLFVBQUMsRUFBRCxFQUFRO0FBQ2QsUUFBSSxVQUFKLEVBQ0ksRUFBRSxDQUFDLGdCQUFILENBQW9CLE9BQXBCLEVBQTZCO0FBQUEsYUFBTSxVQUFVLEVBQWhCO0FBQUEsS0FBN0I7QUFDSixRQUFJLFFBQUosRUFDSSxFQUFFLENBQUMsZ0JBQUgsQ0FBb0IsZUFBcEIsRUFBcUM7QUFBQSxhQUFNLFFBQVEsRUFBZDtBQUFBLEtBQXJDO0FBQ1AsR0FORCxFQU9LLEtBUEwsQ0FPVyxZQUFNLENBQUcsQ0FQcEI7QUFRQSxTQUFPLFdBQVA7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBLFNBQVMsUUFBVCxDQUFrQixJQUFsQixFQUEwQztBQUFBLGtGQUFKLEVBQUk7QUFBQSxNQUFoQixPQUFnQixTQUFoQixPQUFnQjs7QUFDdEMsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLGNBQVYsQ0FBeUIsSUFBekIsQ0FBaEI7QUFDQSxNQUFJLE9BQUosRUFDSSxPQUFPLENBQUMsZ0JBQVIsQ0FBeUIsU0FBekIsRUFBb0M7QUFBQSxXQUFNLE9BQU8sRUFBYjtBQUFBLEdBQXBDO0FBQ0osU0FBTyxZQUFZLENBQUMsSUFBYixDQUFrQixPQUFsQixFQUEyQixJQUEzQixDQUFnQztBQUFBLFdBQU0sU0FBTjtBQUFBLEdBQWhDLENBQVA7QUFDSDs7QUFFRCxJQUFNLFdBQVcsR0FBRyxDQUFDLEtBQUQsRUFBUSxRQUFSLEVBQWtCLFFBQWxCLEVBQTRCLFlBQTVCLEVBQTBDLE9BQTFDLENBQXBCO0FBQ0EsSUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFELEVBQVEsS0FBUixFQUFlLFFBQWYsRUFBeUIsT0FBekIsQ0FBckI7QUFDQSxJQUFNLGFBQWEsR0FBRyxJQUFJLEdBQUosRUFBdEI7O0FBQ0EsU0FBUyxTQUFULENBQW1CLE1BQW5CLEVBQTJCLElBQTNCLEVBQWlDO0FBQzdCLE1BQUksRUFBRSxNQUFNLFlBQVksV0FBbEIsSUFDRixFQUFFLElBQUksSUFBSSxNQUFWLENBREUsSUFFRixPQUFPLElBQVAsS0FBZ0IsUUFGaEIsQ0FBSixFQUUrQjtBQUMzQjtBQUNIOztBQUNELE1BQUksYUFBYSxDQUFDLEdBQWQsQ0FBa0IsSUFBbEIsQ0FBSixFQUNJLE9BQU8sYUFBYSxDQUFDLEdBQWQsQ0FBa0IsSUFBbEIsQ0FBUDtBQUNKLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFMLENBQWEsWUFBYixFQUEyQixFQUEzQixDQUF2QjtBQUNBLE1BQU0sUUFBUSxHQUFHLElBQUksS0FBSyxjQUExQjtBQUNBLE1BQU0sT0FBTyxHQUFHLFlBQVksQ0FBQyxRQUFiLENBQXNCLGNBQXRCLENBQWhCOztBQUNBLE9BQ0E7QUFDQSxJQUFFLGNBQWMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFILEdBQWMsY0FBdkIsRUFBdUMsU0FBM0QsS0FDSSxFQUFFLE9BQU8sSUFBSSxXQUFXLENBQUMsUUFBWixDQUFxQixjQUFyQixDQUFiLENBSEosRUFHd0Q7QUFDcEQ7QUFDSDs7QUFDRCxNQUFNLE1BQU07QUFBQSx3RUFBRyxpQkFBZ0IsU0FBaEI7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDWDtBQUNNLGNBQUEsRUFGSyxHQUVBLEtBQUssV0FBTCxDQUFpQixTQUFqQixFQUE0QixPQUFPLEdBQUcsV0FBSCxHQUFpQixVQUFwRCxDQUZBO0FBR1AsY0FBQSxNQUhPLEdBR0UsRUFBRSxDQUFDLEtBSEw7O0FBQUEsd0NBQThCLElBQTlCO0FBQThCLGdCQUFBLElBQTlCO0FBQUE7O0FBSVgsa0JBQUksUUFBSixFQUNJLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBUCxDQUFhLElBQUksQ0FBQyxLQUFMLEVBQWIsQ0FBVCxDQUxPLENBTVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFWVztBQUFBLHFCQVdHLE9BQU8sQ0FBQyxHQUFSLENBQVksQ0FDdEIsV0FBQSxNQUFNLEVBQUMsY0FBRCxDQUFOLGdCQUEwQixJQUExQixDQURzQixFQUV0QixPQUFPLElBQUksRUFBRSxDQUFDLElBRlEsQ0FBWixDQVhIOztBQUFBO0FBQUEsNkRBY1AsQ0FkTzs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQUFIOztBQUFBLG9CQUFOLE1BQU07QUFBQTtBQUFBO0FBQUEsS0FBWjs7QUFnQkEsRUFBQSxhQUFhLENBQUMsR0FBZCxDQUFrQixJQUFsQixFQUF3QixNQUF4QjtBQUNBLFNBQU8sTUFBUDtBQUNIOztBQUNELFlBQVksQ0FBQyxZQUFiLENBQTBCLFVBQUMsUUFBRDtBQUFBLHlDQUNuQixRQURtQjtBQUV0QixJQUFBLEdBQUcsRUFBRSxhQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsUUFBZjtBQUFBLGFBQTRCLFNBQVMsQ0FBQyxNQUFELEVBQVMsSUFBVCxDQUFULElBQTJCLFFBQVEsQ0FBQyxHQUFULENBQWEsTUFBYixFQUFxQixJQUFyQixFQUEyQixRQUEzQixDQUF2RDtBQUFBLEtBRmlCO0FBR3RCLElBQUEsR0FBRyxFQUFFLGFBQUMsTUFBRCxFQUFTLElBQVQ7QUFBQSxhQUFrQixDQUFDLENBQUMsU0FBUyxDQUFDLE1BQUQsRUFBUyxJQUFULENBQVgsSUFBNkIsUUFBUSxDQUFDLEdBQVQsQ0FBYSxNQUFiLEVBQXFCLElBQXJCLENBQS9DO0FBQUE7QUFIaUI7QUFBQSxDQUExQjtBQU1BLE9BQU8sQ0FBQyxNQUFSLEdBQWlCLFlBQVksQ0FBQyxNQUE5QjtBQUNBLE9BQU8sQ0FBQyxJQUFSLEdBQWUsWUFBWSxDQUFDLElBQTVCO0FBQ0EsT0FBTyxDQUFDLFFBQVIsR0FBbUIsUUFBbkI7QUFDQSxPQUFPLENBQUMsTUFBUixHQUFpQixNQUFqQjs7O0FDN0ZBOztBQUVBLElBQU0sYUFBYSxHQUFHLFNBQWhCLGFBQWdCLENBQUMsTUFBRCxFQUFTLFlBQVQ7QUFBQSxTQUEwQixZQUFZLENBQUMsSUFBYixDQUFrQixVQUFDLENBQUQ7QUFBQSxXQUFPLE1BQU0sWUFBWSxDQUF6QjtBQUFBLEdBQWxCLENBQTFCO0FBQUEsQ0FBdEI7O0FBRUEsSUFBSSxpQkFBSjtBQUNBLElBQUksb0JBQUosQyxDQUNBOztBQUNBLFNBQVMsb0JBQVQsR0FBZ0M7QUFDNUIsU0FBUSxpQkFBaUIsS0FDcEIsaUJBQWlCLEdBQUcsQ0FDakIsV0FEaUIsRUFFakIsY0FGaUIsRUFHakIsUUFIaUIsRUFJakIsU0FKaUIsRUFLakIsY0FMaUIsQ0FEQSxDQUF6QjtBQVFILEMsQ0FDRDs7O0FBQ0EsU0FBUyx1QkFBVCxHQUFtQztBQUMvQixTQUFRLG9CQUFvQixLQUN2QixvQkFBb0IsR0FBRyxDQUNwQixTQUFTLENBQUMsU0FBVixDQUFvQixPQURBLEVBRXBCLFNBQVMsQ0FBQyxTQUFWLENBQW9CLFFBRkEsRUFHcEIsU0FBUyxDQUFDLFNBQVYsQ0FBb0Isa0JBSEEsQ0FEQSxDQUE1QjtBQU1IOztBQUNELElBQU0sZ0JBQWdCLEdBQUcsSUFBSSxPQUFKLEVBQXpCO0FBQ0EsSUFBTSxrQkFBa0IsR0FBRyxJQUFJLE9BQUosRUFBM0I7QUFDQSxJQUFNLHdCQUF3QixHQUFHLElBQUksT0FBSixFQUFqQztBQUNBLElBQU0sY0FBYyxHQUFHLElBQUksT0FBSixFQUF2QjtBQUNBLElBQU0scUJBQXFCLEdBQUcsSUFBSSxPQUFKLEVBQTlCOztBQUNBLFNBQVMsZ0JBQVQsQ0FBMEIsT0FBMUIsRUFBbUM7QUFDL0IsTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUM3QyxRQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVcsR0FBTTtBQUNuQixNQUFBLE9BQU8sQ0FBQyxtQkFBUixDQUE0QixTQUE1QixFQUF1QyxPQUF2QztBQUNBLE1BQUEsT0FBTyxDQUFDLG1CQUFSLENBQTRCLE9BQTVCLEVBQXFDLEtBQXJDO0FBQ0gsS0FIRDs7QUFJQSxRQUFNLE9BQU8sR0FBRyxTQUFWLE9BQVUsR0FBTTtBQUNsQixNQUFBLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQVQsQ0FBTCxDQUFQO0FBQ0EsTUFBQSxRQUFRO0FBQ1gsS0FIRDs7QUFJQSxRQUFNLEtBQUssR0FBRyxTQUFSLEtBQVEsR0FBTTtBQUNoQixNQUFBLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBVCxDQUFOO0FBQ0EsTUFBQSxRQUFRO0FBQ1gsS0FIRDs7QUFJQSxJQUFBLE9BQU8sQ0FBQyxnQkFBUixDQUF5QixTQUF6QixFQUFvQyxPQUFwQztBQUNBLElBQUEsT0FBTyxDQUFDLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLEtBQWxDO0FBQ0gsR0FmZSxDQUFoQjtBQWdCQSxFQUFBLE9BQU8sQ0FDRixJQURMLENBQ1UsVUFBQyxLQUFELEVBQVc7QUFDakI7QUFDQTtBQUNBLFFBQUksS0FBSyxZQUFZLFNBQXJCLEVBQWdDO0FBQzVCLE1BQUEsZ0JBQWdCLENBQUMsR0FBakIsQ0FBcUIsS0FBckIsRUFBNEIsT0FBNUI7QUFDSCxLQUxnQixDQU1qQjs7QUFDSCxHQVJELEVBU0ssS0FUTCxDQVNXLFlBQU0sQ0FBRyxDQVRwQixFQWpCK0IsQ0EyQi9CO0FBQ0E7O0FBQ0EsRUFBQSxxQkFBcUIsQ0FBQyxHQUF0QixDQUEwQixPQUExQixFQUFtQyxPQUFuQztBQUNBLFNBQU8sT0FBUDtBQUNIOztBQUNELFNBQVMsOEJBQVQsQ0FBd0MsRUFBeEMsRUFBNEM7QUFDeEM7QUFDQSxNQUFJLGtCQUFrQixDQUFDLEdBQW5CLENBQXVCLEVBQXZCLENBQUosRUFDSTtBQUNKLE1BQU0sSUFBSSxHQUFHLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDMUMsUUFBTSxRQUFRLEdBQUcsU0FBWCxRQUFXLEdBQU07QUFDbkIsTUFBQSxFQUFFLENBQUMsbUJBQUgsQ0FBdUIsVUFBdkIsRUFBbUMsUUFBbkM7QUFDQSxNQUFBLEVBQUUsQ0FBQyxtQkFBSCxDQUF1QixPQUF2QixFQUFnQyxLQUFoQztBQUNBLE1BQUEsRUFBRSxDQUFDLG1CQUFILENBQXVCLE9BQXZCLEVBQWdDLEtBQWhDO0FBQ0gsS0FKRDs7QUFLQSxRQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVcsR0FBTTtBQUNuQixNQUFBLE9BQU87QUFDUCxNQUFBLFFBQVE7QUFDWCxLQUhEOztBQUlBLFFBQU0sS0FBSyxHQUFHLFNBQVIsS0FBUSxHQUFNO0FBQ2hCLE1BQUEsTUFBTSxDQUFDLEVBQUUsQ0FBQyxLQUFILElBQVksSUFBSSxZQUFKLENBQWlCLFlBQWpCLEVBQStCLFlBQS9CLENBQWIsQ0FBTjtBQUNBLE1BQUEsUUFBUTtBQUNYLEtBSEQ7O0FBSUEsSUFBQSxFQUFFLENBQUMsZ0JBQUgsQ0FBb0IsVUFBcEIsRUFBZ0MsUUFBaEM7QUFDQSxJQUFBLEVBQUUsQ0FBQyxnQkFBSCxDQUFvQixPQUFwQixFQUE2QixLQUE3QjtBQUNBLElBQUEsRUFBRSxDQUFDLGdCQUFILENBQW9CLE9BQXBCLEVBQTZCLEtBQTdCO0FBQ0gsR0FqQlksQ0FBYixDQUp3QyxDQXNCeEM7O0FBQ0EsRUFBQSxrQkFBa0IsQ0FBQyxHQUFuQixDQUF1QixFQUF2QixFQUEyQixJQUEzQjtBQUNIOztBQUNELElBQUksYUFBYSxHQUFHO0FBQ2hCLEVBQUEsR0FEZ0IsZUFDWixNQURZLEVBQ0osSUFESSxFQUNFLFFBREYsRUFDWTtBQUN4QixRQUFJLE1BQU0sWUFBWSxjQUF0QixFQUFzQztBQUNsQztBQUNBLFVBQUksSUFBSSxLQUFLLE1BQWIsRUFDSSxPQUFPLGtCQUFrQixDQUFDLEdBQW5CLENBQXVCLE1BQXZCLENBQVAsQ0FIOEIsQ0FJbEM7O0FBQ0EsVUFBSSxJQUFJLEtBQUssa0JBQWIsRUFBaUM7QUFDN0IsZUFBTyxNQUFNLENBQUMsZ0JBQVAsSUFBMkIsd0JBQXdCLENBQUMsR0FBekIsQ0FBNkIsTUFBN0IsQ0FBbEM7QUFDSCxPQVBpQyxDQVFsQzs7O0FBQ0EsVUFBSSxJQUFJLEtBQUssT0FBYixFQUFzQjtBQUNsQixlQUFPLFFBQVEsQ0FBQyxnQkFBVCxDQUEwQixDQUExQixJQUNELFNBREMsR0FFRCxRQUFRLENBQUMsV0FBVCxDQUFxQixRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsQ0FBMUIsQ0FBckIsQ0FGTjtBQUdIO0FBQ0osS0FmdUIsQ0FnQnhCOzs7QUFDQSxXQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBRCxDQUFQLENBQVg7QUFDSCxHQW5CZTtBQW9CaEIsRUFBQSxHQXBCZ0IsZUFvQlosTUFwQlksRUFvQkosSUFwQkksRUFvQkUsS0FwQkYsRUFvQlM7QUFDckIsSUFBQSxNQUFNLENBQUMsSUFBRCxDQUFOLEdBQWUsS0FBZjtBQUNBLFdBQU8sSUFBUDtBQUNILEdBdkJlO0FBd0JoQixFQUFBLEdBeEJnQixlQXdCWixNQXhCWSxFQXdCSixJQXhCSSxFQXdCRTtBQUNkLFFBQUksTUFBTSxZQUFZLGNBQWxCLEtBQ0MsSUFBSSxLQUFLLE1BQVQsSUFBbUIsSUFBSSxLQUFLLE9BRDdCLENBQUosRUFDMkM7QUFDdkMsYUFBTyxJQUFQO0FBQ0g7O0FBQ0QsV0FBTyxJQUFJLElBQUksTUFBZjtBQUNIO0FBOUJlLENBQXBCOztBQWdDQSxTQUFTLFlBQVQsQ0FBc0IsUUFBdEIsRUFBZ0M7QUFDNUIsRUFBQSxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQUQsQ0FBeEI7QUFDSDs7QUFDRCxTQUFTLFlBQVQsQ0FBc0IsSUFBdEIsRUFBNEI7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsTUFBSSxJQUFJLEtBQUssV0FBVyxDQUFDLFNBQVosQ0FBc0IsV0FBL0IsSUFDQSxFQUFFLHNCQUFzQixjQUFjLENBQUMsU0FBdkMsQ0FESixFQUN1RDtBQUNuRCxXQUFPLFVBQVUsVUFBVixFQUErQjtBQUFBLHdDQUFOLElBQU07QUFBTixRQUFBLElBQU07QUFBQTs7QUFDbEMsVUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLElBQUwsT0FBQSxJQUFJLEdBQU0sTUFBTSxDQUFDLElBQUQsQ0FBWixFQUFvQixVQUFwQixTQUFtQyxJQUFuQyxFQUFmO0FBQ0EsTUFBQSx3QkFBd0IsQ0FBQyxHQUF6QixDQUE2QixFQUE3QixFQUFpQyxVQUFVLENBQUMsSUFBWCxHQUFrQixVQUFVLENBQUMsSUFBWCxFQUFsQixHQUFzQyxDQUFDLFVBQUQsQ0FBdkU7QUFDQSxhQUFPLElBQUksQ0FBQyxFQUFELENBQVg7QUFDSCxLQUpEO0FBS0gsR0FYdUIsQ0FZeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0EsTUFBSSx1QkFBdUIsR0FBRyxRQUExQixDQUFtQyxJQUFuQyxDQUFKLEVBQThDO0FBQzFDLFdBQU8sWUFBbUI7QUFBQSx5Q0FBTixJQUFNO0FBQU4sUUFBQSxJQUFNO0FBQUE7O0FBQ3RCO0FBQ0E7QUFDQSxNQUFBLElBQUksQ0FBQyxLQUFMLENBQVcsTUFBTSxDQUFDLElBQUQsQ0FBakIsRUFBeUIsSUFBekI7QUFDQSxhQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFqQixDQUFxQixJQUFyQixDQUFELENBQVg7QUFDSCxLQUxEO0FBTUg7O0FBQ0QsU0FBTyxZQUFtQjtBQUFBLHVDQUFOLElBQU07QUFBTixNQUFBLElBQU07QUFBQTs7QUFDdEI7QUFDQTtBQUNBLFdBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFMLENBQVcsTUFBTSxDQUFDLElBQUQsQ0FBakIsRUFBeUIsSUFBekIsQ0FBRCxDQUFYO0FBQ0gsR0FKRDtBQUtIOztBQUNELFNBQVMsc0JBQVQsQ0FBZ0MsS0FBaEMsRUFBdUM7QUFDbkMsTUFBSSxPQUFPLEtBQVAsS0FBaUIsVUFBckIsRUFDSSxPQUFPLFlBQVksQ0FBQyxLQUFELENBQW5CLENBRitCLENBR25DO0FBQ0E7O0FBQ0EsTUFBSSxLQUFLLFlBQVksY0FBckIsRUFDSSw4QkFBOEIsQ0FBQyxLQUFELENBQTlCO0FBQ0osTUFBSSxhQUFhLENBQUMsS0FBRCxFQUFRLG9CQUFvQixFQUE1QixDQUFqQixFQUNJLE9BQU8sSUFBSSxLQUFKLENBQVUsS0FBVixFQUFpQixhQUFqQixDQUFQLENBUitCLENBU25DOztBQUNBLFNBQU8sS0FBUDtBQUNIOztBQUNELFNBQVMsSUFBVCxDQUFjLEtBQWQsRUFBcUI7QUFDakI7QUFDQTtBQUNBLE1BQUksS0FBSyxZQUFZLFVBQXJCLEVBQ0ksT0FBTyxnQkFBZ0IsQ0FBQyxLQUFELENBQXZCLENBSmEsQ0FLakI7QUFDQTs7QUFDQSxNQUFJLGNBQWMsQ0FBQyxHQUFmLENBQW1CLEtBQW5CLENBQUosRUFDSSxPQUFPLGNBQWMsQ0FBQyxHQUFmLENBQW1CLEtBQW5CLENBQVA7QUFDSixNQUFNLFFBQVEsR0FBRyxzQkFBc0IsQ0FBQyxLQUFELENBQXZDLENBVGlCLENBVWpCO0FBQ0E7O0FBQ0EsTUFBSSxRQUFRLEtBQUssS0FBakIsRUFBd0I7QUFDcEIsSUFBQSxjQUFjLENBQUMsR0FBZixDQUFtQixLQUFuQixFQUEwQixRQUExQjtBQUNBLElBQUEscUJBQXFCLENBQUMsR0FBdEIsQ0FBMEIsUUFBMUIsRUFBb0MsS0FBcEM7QUFDSDs7QUFDRCxTQUFPLFFBQVA7QUFDSDs7QUFDRCxJQUFNLE1BQU0sR0FBRyxTQUFULE1BQVMsQ0FBQyxLQUFEO0FBQUEsU0FBVyxxQkFBcUIsQ0FBQyxHQUF0QixDQUEwQixLQUExQixDQUFYO0FBQUEsQ0FBZjs7QUFFQSxPQUFPLENBQUMsYUFBUixHQUF3QixhQUF4QjtBQUNBLE9BQU8sQ0FBQyxZQUFSLEdBQXVCLFlBQXZCO0FBQ0EsT0FBTyxDQUFDLHFCQUFSLEdBQWdDLHFCQUFoQztBQUNBLE9BQU8sQ0FBQyxNQUFSLEdBQWlCLE1BQWpCO0FBQ0EsT0FBTyxDQUFDLElBQVIsR0FBZSxJQUFmOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5TEEsSUFBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQTs7QUFDQSxJQUFBLFFBQUEsR0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBOztBQUNBLElBQUEsb0JBQUEsR0FBQSxPQUFBLENBQUEsd0JBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBS2Esd0I7Ozs7O0FBRVQsV0FBQSx3QkFBQSxDQUFBLE1BQUEsRUFBb0I7QUFBQSxRQUFBLEtBQUE7O0FBQUEsSUFBQSxlQUFBLENBQUEsSUFBQSxFQUFBLHdCQUFBLENBQUE7O0FBQ2hCLElBQUEsS0FBQSxHQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxDQUFBO0FBRGdCLElBQUEsS0FBQSxDQURwQixRQUNvQixHQURULE1BQ1M7O0FBRWhCLFFBQUEsTUFBQSxFQUFZO0FBQ1IsTUFBQSxRQUFBLENBQUEsS0FBQSxDQUFBLFVBQUEsQ0FBQSxzQkFBQSxDQUFBLEtBQUEsQ0FBQSxFQUFBLE1BQUE7QUFDSDs7QUFKZSxXQUFBLEtBQUE7QUFLbkI7OztFQVB5QyxvQkFBQSxDQUFBLHlCO0FBVTlDO0FBQ0E7QUFDQTs7Ozs7SUFDYSxrQjs7Ozs7QUFLVCxXQUFBLGtCQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsRUFBeUI7QUFBQSxRQUFBLE1BQUE7O0FBQUEsSUFBQSxlQUFBLENBQUEsSUFBQSxFQUFBLGtCQUFBLENBQUE7O0FBQ3JCLElBQUEsTUFBQSxHQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxJQUFBLENBQUE7QUFEcUIsSUFBQSxNQUFBLENBSHpCLE1BR3lCLEdBSGhCLFFBQUEsQ0FBQSxLQUFBLENBQUEsZUFBQSxFQUdnQjtBQUFBLElBQUEsTUFBQSxDQUZ6QixRQUV5QixHQUZkLFFBQUEsQ0FBQSxLQUFBLENBQUEsUUFBQSxFQUVjOztBQUdyQixRQUFHLE1BQUEsQ0FBSCxRQUFBLEVBQWtCO0FBQ2QsTUFBQSxNQUFBLENBQUEsVUFBQSxDQUFBLDRCQUFBLENBQTZDO0FBQ3pDLFFBQUEsU0FBUyxFQUFFLFNBQUEsU0FBQSxDQUFBLFlBQUEsRUFBZ0I7QUFDdkIsVUFBQSxNQUFBLENBQUEsS0FBQSxDQUFBLFdBQUEsRUFBd0IsWUFBWSxDQUFwQyxNQUF3QixFQUF4QjtBQUZxQyxTQUFBO0FBS3pDLFFBQUEsUUFBUSxFQUFFLFNBQUEsUUFBQSxDQUFBLFlBQUEsRUFBZ0I7QUFDdEIsVUFBQSxNQUFBLENBQUEsS0FBQSxDQUFBLFVBQUEsRUFBdUIsWUFBWSxDQUFuQyxNQUF1QixFQUF2QjtBQUNIO0FBUHdDLE9BQTdDOztBQVVBLFVBQUksUUFBUSxHQUFBLHNCQUFBLENBQVosTUFBWSxDQUFaOztBQUNBLE1BQUEsTUFBQSxDQUFBLGtCQUFBLEdBQTBCO0FBQ3RCLFFBQUEsTUFBTSxFQUFFLFNBQUEsTUFBQSxDQUFBLE9BQUEsRUFBQSxtQkFBQSxFQUFBLE9BQUEsRUFBK0M7QUFDbkQ7QUFDQSxjQUFJLElBQUksR0FBRyxJQUFJLFFBQUEsQ0FBSixTQUFBLENBQVgsT0FBVyxDQUFYO0FBQ0EsVUFBQSxRQUFRLENBQVIsTUFBQSxDQUFBLE9BQUEsRUFBQSxtQkFBQSxFQUFBLElBQUE7QUFKa0IsU0FBQTtBQU10QixRQUFBLFVBQVUsRUFBRSxTQUFBLFVBQUEsQ0FBQSxjQUFBLEVBQXdCO0FBQ2hDLFVBQUEsUUFBUSxDQUFSLFVBQUEsQ0FBQSxPQUFBLENBQUEsY0FBQSxFQUFBLEtBQUEsQ0FBa0QsVUFBQSxDQUFBLEVBQUc7QUFDakQsWUFBQSxRQUFRLENBQVIsS0FBQSxDQUFBLGVBQUEsRUFBQSxjQUFBLEVBQWdELFFBQUEsQ0FBQSxLQUFBLENBQUEsV0FBQSxDQUFoRCxDQUFnRCxDQUFoRDtBQURKLFdBQUE7QUFQa0IsU0FBQTtBQVd0QixRQUFBLFNBQVMsRUFBRSxTQUFBLFNBQUEsQ0FBQSxPQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxXQUFBLEVBQWtEO0FBQ3pELGNBQUEsUUFBQSxFQUFZO0FBQ1IsWUFBQSxRQUFRLENBQVIscUJBQUEsQ0FBQSxvQkFBQSxDQUFBLFFBQUE7QUFDSDs7QUFDRCxjQUFJLFFBQVEsR0FBRyxDQUFmLFFBQUE7QUFDQSxjQUFJLElBQUksR0FBRyxJQUFJLFFBQUEsQ0FBSixTQUFBLENBQVgsT0FBVyxDQUFYOztBQUNBLFVBQUEsUUFBUSxDQUFSLG1DQUFBLENBQUEsSUFBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLEVBQUEsV0FBQTs7QUFDQSxlQUFBLEtBQUEsQ0FBQSxZQUFBLEVBQXlCLElBQUksQ0FBN0IsTUFBeUIsRUFBekI7QUFDSDtBQW5CcUIsT0FBMUI7O0FBc0JBLE1BQUEsTUFBTSxDQUFOLFNBQUEsR0FBbUIsVUFBQSxNQUFBLEVBQWlCO0FBQ2hDLFlBQUksTUFBTSxDQUFOLElBQUEsWUFBQSxNQUFBLElBQWlDLE1BQU0sQ0FBTixJQUFBLENBQUEsY0FBQSxDQUFqQyxhQUFpQyxDQUFqQyxJQUE4RSxNQUFNLENBQU4sSUFBQSxDQUFBLGNBQUEsQ0FBbEYsZ0JBQWtGLENBQWxGLEVBQWdJO0FBQzVILFVBQUEsUUFBUSxDQUFSLGtCQUFBLENBQTRCLE1BQU0sQ0FBTixJQUFBLENBQTVCLFdBQUEsRUFBQSxLQUFBLENBQUEsSUFBQSxFQUFpRSxNQUFNLENBQU4sSUFBQSxDQUFqRSxjQUFBO0FBREosU0FBQSxNQUVPO0FBQ0gsVUFBQSxRQUFRLENBQVIsWUFBQSxDQUFzQixNQUFNLENBQTVCLElBQUE7QUFDSDtBQUxMLE9BQUE7QUFPSDs7QUE1Q29CLFdBQUEsTUFBQTtBQTZDeEI7Ozs7V0FJRCxTQUFBLFNBQUEsQ0FBQSxNQUFBLEVBQWtCO0FBQ2QsTUFBQSxJQUFBLENBQUEsZUFBQSxDQUFBLGtCQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsV0FBQSxFQUFBLElBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsTUFBQTs7QUFDQSxVQUFHLEtBQUEsTUFBQSxDQUFILFFBQUEsRUFBd0I7QUFDcEIsYUFBQSxXQUFBLENBQWlCLEtBQUEsTUFBQSxDQUFqQixRQUFBO0FBQ0g7O0FBRUQsYUFBQSxJQUFBO0FBQ0g7OztXQUVELFNBQUEsV0FBQSxDQUFBLEtBQUEsRUFBa0I7QUFDZCxNQUFBLFFBQUEsQ0FBQSxHQUFBLENBQUEsUUFBQSxDQUFBLEtBQUE7QUFDSDs7O1dBRUQsU0FBQSxZQUFBLENBQUEsT0FBQSxFQUFzQjtBQUNsQixXQUFBLEtBQUEsQ0FBQSxNQUFBLEVBQUEsT0FBQTtBQUNIOzs7V0FFRCxTQUFBLEtBQUEsR0FBUTtBQUNKLFVBQUksU0FBUyxDQUFULE1BQUEsR0FBSixDQUFBLEVBQTBCO0FBQ3RCLGNBQU0sSUFBQSxTQUFBLENBQU4sOEJBQU0sQ0FBTjtBQUNIOztBQUNELFdBQUEsTUFBQSxDQUFBLFdBQUEsQ0FBd0I7QUFDcEIsK0JBQXVCLFNBQVMsQ0FEWixDQUNZLENBRFo7QUFFcEIsZ0NBQXdCLEtBQUssQ0FBTCxTQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsQ0FBQSxTQUFBLEVBQUEsQ0FBQTtBQUZKLE9BQXhCO0FBSUg7Ozs7RUEvRW1DLG9CQUFBLENBQUEsbUI7Ozs7Ozs7Ozs7Ozs7O0FDcEJ4QyxJQUFBLG1CQUFBLEdBQUEsT0FBQSxDQUFBLHNCQUFBLENBQUE7O0FBQ0EsSUFBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQTs7QUFDQSxJQUFBLHNCQUFBLEdBQUEsT0FBQSxDQUFBLHFDQUFBLENBQUE7O0FBQ0EsSUFBQSxjQUFBLEdBQUEsT0FBQSxDQUFBLDZCQUFBLENBQUE7O0FBQ0EsSUFBQSxrQkFBQSxHQUFBLE9BQUEsQ0FBQSxpQ0FBQSxDQUFBOztBQUNBLElBQUEsWUFBQSxHQUFBLE9BQUEsQ0FBQSxxQkFBQSxDQUFBOztBQUNBLElBQUEscUJBQUEsR0FBQSxPQUFBLENBQUEseUJBQUEsQ0FBQTs7QUFDQSxJQUFBLG1CQUFBLEdBQUEsT0FBQSxDQUFBLDZCQUFBLENBQUE7O0FBQ0EsSUFBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQTs7QUFDQSxJQUFBLE9BQUEsR0FBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQTs7QUFDQSxJQUFBLHlCQUFBLEdBQUEsT0FBQSxDQUFBLDBDQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBOzs7SUFDYSx5QjtBQUVUO0FBQ0o7QUFDQTs7QUFHSTtBQUNKO0FBQ0E7O0FBR0k7QUFDSjtBQUNBOztBQWFJO0FBQ0o7QUFDQTs7QUFHSTtBQUNKO0FBQ0E7QUFHSSxTQUFBLHlCQUFBLENBQUEsTUFBQSxFQUFvQjtBQUFBLEVBQUEsZUFBQSxDQUFBLElBQUEsRUFBQSx5QkFBQSxDQUFBOztBQUFBLE9BaENwQixRQWdDb0IsR0FoQ1QsSUFnQ1M7QUFBQSxPQTNCcEIsUUEyQm9CLEdBM0JULElBMkJTO0FBQUEsT0F0QnBCLE1Bc0JvQixHQXRCWDtBQUNMO0FBQ1I7QUFDQTtBQUNRLElBQUEscUJBQXFCLEVBSmhCLEtBQUE7O0FBTUw7QUFDUjtBQUNBO0FBQ1EsSUFBQSxHQUFHLEVBQUU7QUFUQSxHQXNCVztBQUFBLE9BUHBCLGlCQU9vQixHQVBBLEtBT0E7QUFBQSxPQUZwQixlQUVvQixHQUZGLEtBRUU7O0FBQ2hCLE1BQUEsTUFBQSxFQUFZO0FBQ1IsSUFBQSxRQUFBLENBQUEsS0FBQSxDQUFBLFVBQUEsQ0FBQSxJQUFBLEVBQUEsTUFBQTtBQUNIOztBQUlUO0FBQ0E7QUFDQTtBQUNBOzs7OztJQUNhLG1CO0FBV1QsV0FBQSxtQkFBQSxDQUFBLE1BQUEsRUFBaUM7QUFBQSxRQUFiLElBQWEsR0FBQSxTQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsSUFBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsU0FBQSxHQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsR0FBTixJQUFNOztBQUFBLElBQUEsZUFBQSxDQUFBLElBQUEsRUFBQSxtQkFBQSxDQUFBOztBQUM3QixTQUFBLElBQUEsR0FBQSxJQUFBO0FBQ0EsU0FBQSxTQUFBLENBQUEsTUFBQTtBQUNBLFNBQUEsZ0JBQUEsR0FBd0IsSUFBSSxtQkFBQSxDQUE1QixnQkFBd0IsRUFBeEI7QUFDQSxTQUFBLG9CQUFBLEdBQTRCLElBQUkscUJBQUEsQ0FBSixvQkFBQSxDQUF5QixLQUFyRCxnQkFBNEIsQ0FBNUI7QUFDQSxTQUFBLHFCQUFBLEdBQTZCLElBQUksc0JBQUEsQ0FBSixxQkFBQSxDQUEwQixLQUExQixnQkFBQSxFQUFpRCxLQUFBLE1BQUEsQ0FBOUUsUUFBNkIsQ0FBN0I7QUFFQSxTQUFBLFVBQUEsR0FBa0IsSUFBSSxZQUFBLENBQUosV0FBQSxDQUFnQixLQUFoQixvQkFBQSxFQUEyQyxLQUEzQyxxQkFBQSxFQUF1RTtBQUNyRixNQUFBLFNBQVMsRUFBRSxLQUFBLE1BQUEsQ0FBQSxNQUFBLENBRDBFLEdBQUE7QUFFckYsTUFBQSxjQUFjLEVBQUUsS0FBQSxNQUFBLENBRnFFLGlCQUFBO0FBR3JGLE1BQUEsZUFBZSxFQUFFLEtBQUEsTUFBQSxDQUFZO0FBSHdELEtBQXZFLENBQWxCO0FBTUEsU0FBQSxpQkFBQSxHQUF5QixJQUFJLGtCQUFBLENBQUosaUJBQUEsQ0FBc0IsS0FBdEIsSUFBQSxFQUFpQyxLQUFqQyxnQkFBQSxFQUF3RCxJQUFJLFlBQUEsQ0FBSixXQUFBLENBQWdCLEtBQWhCLG9CQUFBLEVBQTJDLEtBQTNDLHFCQUFBLEVBQXVFO0FBQ3BKLE1BQUEsY0FBYyxFQUFFO0FBRG9JLEtBQXZFLENBQXhELENBQXpCO0FBSUEsU0FBQSxhQUFBLEdBQXFCLElBQUksY0FBQSxDQUFKLGFBQUEsQ0FBa0IsS0FBdkMsZ0JBQXFCLENBQXJCO0FBQ0EsU0FBQSx3QkFBQSxHQUFnQyxJQUFJLHlCQUFBLENBQXBDLHdCQUFnQyxFQUFoQztBQUNIOzs7O1dBRUQsU0FBQSxTQUFBLENBQUEsTUFBQSxFQUFrQjtBQUNkLFdBQUEsTUFBQSxHQUFjLElBQUEseUJBQUEsQ0FBZCxNQUFjLENBQWQ7QUFDQSxhQUFBLElBQUE7QUFDSDs7O1dBRUQsU0FBQSxPQUFBLENBQUEsSUFBQSxFQUFhO0FBQ1QsV0FBQSxJQUFBLEdBQUEsSUFBQTtBQUNBLFdBQUEsaUJBQUEsQ0FBQSxPQUFBLENBQUEsSUFBQTtBQUNIO0FBR0Q7Ozs7V0FDQSxTQUFBLFNBQUEsR0FBVztBQUNQLGFBQU8sS0FBQSxrQ0FBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBLEVBQVAsU0FBTyxDQUFQO0FBQ0g7QUFFRDtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNJLFNBQUEsa0NBQUEsQ0FBQSxRQUFBLEVBQW1GO0FBQUEsVUFBQSxLQUFBLEdBQUEsSUFBQTs7QUFBQSxVQUF0QyxRQUFzQyxHQUFBLFNBQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxJQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQSxTQUFBLEdBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxHQUEzQixLQUEyQjtBQUFBLFVBQXBCLFdBQW9CLEdBQUEsU0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLElBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLFNBQUEsR0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEdBQU4sSUFBTTtBQUMvRSxhQUFPLE9BQU8sQ0FBUCxPQUFBLEdBQUEsSUFBQSxDQUF1QixZQUFLO0FBQy9CLFlBQUksS0FBSSxDQUFKLE1BQUEsQ0FBQSxNQUFBLENBQUoscUJBQUEsRUFBOEM7QUFDMUMsY0FBSSxNQUFNLEdBQUc7QUFDVCxZQUFBLFFBQVEsRUFEQyxRQUFBO0FBRVQsWUFBQSxXQUFXLEVBQUU7QUFGSixXQUFiOztBQUlBLGNBQUksQ0FBSixRQUFBLEVBQWU7QUFDWCxZQUFBLE1BQU0sQ0FBTixRQUFBLEdBQWtCLEtBQUksQ0FBSixjQUFBLEdBQWxCLElBQUE7QUFDSDs7QUFDRCxpQkFBTyxLQUFJLENBQUosTUFBQSxDQUFBLFdBQUEsRUFBQSxNQUFBLEVBQWlDLEtBQUksQ0FBckMsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLENBQXdELFVBQUEsWUFBQSxFQUFpQjtBQUM1RSxnQkFBSSxDQUFDLEdBQUcsWUFBWSxDQUFwQixPQUFRLEVBQVI7O0FBQ0EsWUFBQSxLQUFJLENBQUosSUFBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBO0FBRkosV0FBTyxDQUFQO0FBSUg7O0FBQ0QsZUFBTyxLQUFJLENBQUosbUNBQUEsQ0FBeUMsS0FBSSxDQUE3QyxJQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBUCxXQUFPLENBQVA7QUFkRyxPQUFBLEVBQUEsSUFBQSxDQWVDLFlBQUs7QUFDVCxRQUFBLEtBQUksQ0FBSixtQkFBQSxDQUF5QixLQUFJLENBQTdCLElBQUE7QUFoQkosT0FBTyxDQUFQO0FBbUJIOzs7V0FFRCxTQUFBLG1DQUFBLENBQUEsSUFBQSxFQUFBLFFBQUEsRUFBMEY7QUFBQSxVQUFBLE1BQUEsR0FBQSxJQUFBOztBQUFBLFVBQXRDLFFBQXNDLEdBQUEsU0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLElBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLFNBQUEsR0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEdBQTNCLEtBQTJCO0FBQUEsVUFBcEIsV0FBb0IsR0FBQSxTQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsSUFBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsU0FBQSxHQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsR0FBTixJQUFNO0FBRXRGLFdBQUEscUJBQUEsQ0FBQSw2QkFBQSxDQUF5RCxJQUFJLENBQTdELHVCQUFBO0FBQ0EsTUFBQSxJQUFJLENBQUosaUJBQUEsR0FBQSxFQUFBOztBQUVBLFVBQUksUUFBUSxJQUFaLFdBQUEsRUFBNkI7QUFDekIsYUFBQSxvQkFBQSxDQUFBLGVBQUEsQ0FBQSxJQUFBLEVBQUEsUUFBQSxFQUFBLFdBQUE7QUFDSDs7QUFFRCxVQUFJLFdBQVcsR0FBRyxLQUFBLHdCQUFBLENBQUEsUUFBQSxDQUF1QyxJQUFJLENBQTdELHVCQUFrQixDQUFsQjtBQUNBLFVBQUksYUFBYSxHQUFHLEtBQUEsY0FBQSxHQUFwQixhQUFBO0FBR0EsTUFBQSxJQUFJLENBQUosUUFBQSxHQUFBLE9BQUEsQ0FBd0IsVUFBQSxJQUFBLEVBQU87QUFDM0IsWUFBSSxFQUFFLEdBQUcsTUFBSSxDQUFKLGFBQUEsQ0FBQSxRQUFBLENBQTRCLElBQUksQ0FBSixvQkFBQSxDQUFyQyxJQUFxQyxDQUE1QixDQUFUOztBQUNBLFFBQUEsSUFBSSxDQUFKLGlCQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7O0FBQ0EsWUFBSSxFQUFFLENBQUYsT0FBQSxPQUFpQixDQUFBLGFBQUEsSUFBckIsV0FBSSxDQUFKLEVBQXFEO0FBQ2pELFVBQUEsTUFBSSxDQUFKLHFCQUFBLENBQUEsYUFBQSxDQUFBLElBQUEsRUFBQSxRQUFBO0FBQ0g7QUFMTCxPQUFBO0FBT0g7QUFFRDtBQUNKO0FBQ0E7Ozs7V0FDSSxTQUFBLGNBQUEsR0FBaUI7QUFDYixhQUFPLEtBQUEscUJBQUEsQ0FBUCxXQUFBO0FBQ0g7QUFFRDtBQUNKO0FBQ0E7QUFDQTs7OztXQUNJLFNBQUEsb0JBQUEsQ0FBQSxRQUFBLEVBQStCO0FBQzNCLFdBQUEsTUFBQSxDQUFBLFFBQUEsR0FBQSxRQUFBO0FBQ0EsYUFBTyxLQUFBLHFCQUFBLENBQUEsb0JBQUEsQ0FBUCxRQUFPLENBQVA7QUFDSDtBQUVEO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDSSxTQUFBLFlBQUEsQ0FBQSxPQUFBLEVBQXNCO0FBQ2xCLGFBQU8sS0FBQSxVQUFBLENBQUEsWUFBQSxDQUFQLE9BQU8sQ0FBUDtBQUNIO0FBRUQ7QUFDSjtBQUNBO0FBQ0E7Ozs7V0FDSSxTQUFBLG1CQUFBLENBQUEsTUFBQSxFQUE0QjtBQUN4QixhQUFPLEtBQUEsaUJBQUEsQ0FBQSxtQkFBQSxDQUFQLE1BQU8sQ0FBUDtBQUNIO0FBR0Q7QUFDSjtBQUNBO0FBQ0E7Ozs7V0FFSSxTQUFBLE9BQUEsQ0FBQSxJQUFBLEVBQWM7QUFDVixNQUFBLElBQUksR0FBRyxJQUFJLElBQUksS0FBZixJQUFBO0FBQ0EsYUFBTyxJQUFJLENBQUosaUJBQUEsQ0FBQSxLQUFBLENBQTZCLFVBQUEsRUFBQSxFQUFFO0FBQUEsZUFBRSxFQUFFLENBQUosT0FBRSxFQUFGO0FBQXRDLE9BQU8sQ0FBUDtBQUNIO0FBQ0Q7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNJLFNBQUEsTUFBQSxDQUFBLElBQUEsRUFBQSxlQUFBLEVBQUEsSUFBQSxFQUE2RTtBQUFBLFVBQXpDLGdDQUF5QyxHQUFBLFNBQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxJQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQSxTQUFBLEdBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxHQUFOLElBQU07QUFDekUsYUFBTyxLQUFBLFVBQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxFQUFBLGVBQUEsRUFBMkMsSUFBSSxJQUFJLEtBQW5ELElBQUEsRUFBUCxnQ0FBTyxDQUFQO0FBQ0g7QUFFRDtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNJLFNBQUEseUJBQUEsQ0FBQSxJQUFBLEVBQUEsZUFBQSxFQUFBLHdCQUFBLEVBQTJFO0FBQUEsVUFBQSxNQUFBLEdBQUEsSUFBQTs7QUFDdkUsYUFBTyxLQUFBLE1BQUEsQ0FBQSxJQUFBLEVBQUEsZUFBQSxFQUFBLElBQUEsQ0FBd0MsVUFBQSxFQUFBLEVBQUs7QUFDaEQsZUFBTyxJQUFJLG1CQUFBLENBQUosa0JBQUEsQ0FBdUIsTUFBSSxDQUEzQixVQUFBLEVBQUEsRUFBQSxFQUFQLHdCQUFPLENBQVA7QUFESixPQUFPLENBQVA7QUFHSDs7O1dBRUQsU0FBQSxnQkFBQSxDQUFBLE1BQUEsRUFBQSxhQUFBLEVBQUEsZUFBQSxFQUF3RDtBQUNwRCxhQUFPLEtBQUEsaUJBQUEsQ0FBQSxnQkFBQSxDQUFBLE1BQUEsRUFBQSxhQUFBLEVBQVAsZUFBTyxDQUFQO0FBQ0g7OztXQUVELFNBQUEsaUJBQUEsR0FBb0I7QUFDaEIsYUFBTyxLQUFBLHFCQUFBLENBQVAsS0FBQTtBQUNIOzs7V0FFRCxTQUFBLHNCQUFBLENBQUEsUUFBQSxFQUFnQztBQUM1QixhQUFPLEtBQUEscUJBQUEsQ0FBQSxzQkFBQSxDQUFQLFFBQU8sQ0FBUDtBQUNIOzs7V0FFRCxTQUFBLFVBQUEsQ0FBQSxRQUFBLEVBQXFCO0FBQ2pCLGFBQU8sS0FBQSxxQkFBQSxDQUFBLFVBQUEsQ0FBUCxRQUFPLENBQVA7QUFDSDs7O1dBR0QsU0FBQSxZQUFBLENBQUEsSUFBQSxFQUFrQjtBQUNkLE1BQUEsSUFBSSxHQUFHLElBQUksSUFBSSxLQUFmLElBQUE7QUFDQSxNQUFBLElBQUksQ0FBSixjQUFBO0FBQ0EsVUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFkLGdCQUFBO0FBQ0EsTUFBQSxJQUFJLENBQUosZ0JBQUEsR0FBd0IsS0FBQSxJQUFBLENBQVUsSUFBSSxDQUF0QyxnQkFBd0IsQ0FBeEI7QUFDQSxNQUFBLElBQUksQ0FBSixnQkFBQSxHQUF3QixLQUFBLElBQUEsQ0FBeEIsR0FBd0IsQ0FBeEI7QUFDQSxNQUFBLElBQUksQ0FBSix1QkFBQSxHQUErQixLQUFBLElBQUEsQ0FBVSxJQUFJLENBQTdDLHVCQUErQixDQUEvQjtBQUNBLFdBQUEscUJBQUEsQ0FBQSxRQUFBO0FBQ0EsYUFBTyxLQUFBLGtDQUFBLENBQVAsS0FBTyxDQUFQO0FBQ0g7OztXQUVELFNBQUEsSUFBQSxDQUFBLENBQUEsRUFBTztBQUNILFVBQUcsQ0FBQyxJQUFKLFFBQUEsRUFBaUI7QUFDYixlQUFBLENBQUE7QUFDSDs7QUFFRCxVQUFHLENBQUMsSUFBSixDQUFBLEVBQVU7QUFDTixlQUFBLFFBQUE7QUFDSDs7QUFFRCxhQUFPLEtBQUEsZ0JBQUEsQ0FBQSxTQUFBLENBQWdDLG1CQUFBLENBQUEsZ0JBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxFQUF2QyxDQUF1QyxDQUFoQyxDQUFQO0FBQ0g7OztXQUVELFNBQUEsbUJBQUEsQ0FBQSxJQUFBLEVBQWtEO0FBQUEsVUFBQSxNQUFBLEdBQUEsSUFBQTs7QUFBQSxVQUF4QixlQUF3QixHQUFBLFNBQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxJQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQSxTQUFBLEdBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxHQUFOLElBQU07QUFDOUMsTUFBQSxJQUFJLEdBQUcsSUFBSSxJQUFJLEtBQWYsSUFBQTs7QUFDQSxVQUFBLGVBQUEsRUFBcUI7QUFDakIsZUFBTyxLQUFBLGFBQUEsQ0FBQSxJQUFBLEVBQVAsZUFBTyxDQUFQO0FBQ0g7O0FBRUQsTUFBQSxJQUFJLENBQUosS0FBQSxDQUFBLE9BQUEsQ0FBbUIsVUFBQSxDQUFBLEVBQUk7QUFDbkIsUUFBQSxNQUFJLENBQUosdUJBQUEsQ0FBQSxDQUFBO0FBREosT0FBQTtBQUdBLE1BQUEsSUFBSSxDQUFKLEtBQUEsQ0FBQSxPQUFBLENBQW1CLFVBQUEsQ0FBQSxFQUFJO0FBQ25CLFFBQUEsTUFBSSxDQUFKLHVCQUFBLENBQUEsQ0FBQTtBQURKLE9BQUE7QUFHSDs7O1dBRUQsU0FBQSx1QkFBQSxDQUFBLElBQUEsRUFBOEI7QUFBQSxVQUFBLE1BQUEsR0FBQSxJQUFBOztBQUMxQixNQUFBLElBQUksQ0FBSixvQkFBQSxDQUFBLE9BQUEsQ0FBa0MsVUFBQSxDQUFBLEVBQUM7QUFBQSxlQUFFLElBQUksQ0FBSixZQUFBLENBQUEsQ0FBQSxFQUFxQixNQUFJLENBQUoscUJBQUEsQ0FBQSxtQkFBQSxDQUFBLElBQUEsRUFBdkIsQ0FBdUIsQ0FBckIsQ0FBRjtBQUFuQyxPQUFBO0FBQ0g7OztXQUVELFNBQUEsdUJBQUEsQ0FBQSxDQUFBLEVBQTJCO0FBQUEsVUFBQSxNQUFBLEdBQUEsSUFBQTs7QUFDdkIsTUFBQSxDQUFDLENBQUQsb0JBQUEsQ0FBQSxPQUFBLENBQStCLFVBQUEsQ0FBQSxFQUFDO0FBQUEsZUFBRSxDQUFDLENBQUQsWUFBQSxDQUFBLENBQUEsRUFBa0IsTUFBSSxDQUFKLHFCQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBLEVBQXBCLENBQW9CLENBQWxCLENBQUY7QUFBaEMsT0FBQTtBQUNIOzs7V0FFRCxTQUFBLGFBQUEsQ0FBQSxlQUFBLEVBQUEsSUFBQSxFQUFxQztBQUFBLFVBQUEsTUFBQSxHQUFBLElBQUE7O0FBR2pDLE1BQUEsSUFBSSxHQUFHLElBQUksSUFBSSxLQUFmLElBQUE7QUFDQSxNQUFBLElBQUksQ0FBSixLQUFBLENBQUEsT0FBQSxDQUFtQixVQUFBLENBQUEsRUFBSTtBQUNuQixRQUFBLENBQUMsQ0FBRCxrQkFBQTtBQURKLE9BQUE7QUFHQSxNQUFBLElBQUksQ0FBSixLQUFBLENBQUEsT0FBQSxDQUFtQixVQUFBLENBQUEsRUFBSTtBQUNuQixRQUFBLENBQUMsQ0FBRCxrQkFBQTtBQURKLE9BQUE7QUFHQSxNQUFBLElBQUksQ0FBSixRQUFBLEdBQUEsT0FBQSxDQUF3QixVQUFBLElBQUEsRUFBQTtBQUFBLGVBQVEsTUFBSSxDQUFKLG9CQUFBLENBQUEsSUFBQSxFQUFSLGVBQVEsQ0FBUjtBQUF4QixPQUFBO0FBQ0g7OztXQUVELFNBQUEsb0JBQUEsQ0FBQSxJQUFBLEVBQUEsTUFBQSxFQUFtQztBQUFBLFVBQUEsTUFBQSxHQUFBLElBQUE7O0FBQy9CLFVBQUksSUFBSSxZQUFZLFFBQUEsQ0FBQSxNQUFBLENBQXBCLFlBQUEsRUFBd0M7QUFDcEMsWUFBSSxRQUFRLEdBQUcsT0FBQSxDQUFBLE1BQUEsQ0FBQSxXQUFBLENBQUEsTUFBQSxFQURxQixJQUNyQixDQUFmLENBRG9DLENBRXBDOzs7QUFDQSxZQUFBLFFBQUEsRUFBYztBQUNWLFVBQUEsSUFBSSxDQUFKLFlBQUEsQ0FBQSxTQUFBLEVBQUEsSUFBQTtBQUNBLGNBQUksU0FBUyxHQUFHLElBQUksQ0FBSixVQUFBLENBQWdCLFFBQVEsQ0FBeEMsYUFBZ0IsQ0FBaEI7QUFDQSxVQUFBLFNBQVMsQ0FBVCxZQUFBLENBQUEsU0FBQSxFQUFBLElBQUE7QUFDQSxpQkFBTyxLQUFBLG9CQUFBLENBQTBCLFNBQVMsQ0FBbkMsU0FBQSxFQUFQLE1BQU8sQ0FBUDtBQUNIOztBQUNEO0FBVEosT0FBQSxNQVVPLElBQUcsSUFBSSxZQUFZLFFBQUEsQ0FBQSxNQUFBLENBQW5CLFVBQUEsRUFBb0M7QUFDdkMsUUFBQSxJQUFJLENBQUosWUFBQSxDQUFBLFNBQUEsRUFBQSxJQUFBO0FBQ0EsUUFBQSxJQUFJLENBQUosVUFBQSxDQUFBLE9BQUEsQ0FBd0IsVUFBQSxDQUFBLEVBQUc7QUFDdkIsVUFBQSxDQUFDLENBQUQsWUFBQSxDQUFBLFNBQUEsRUFBQSxJQUFBOztBQUNBLFVBQUEsTUFBSSxDQUFKLG9CQUFBLENBQTBCLENBQUMsQ0FBM0IsU0FBQSxFQUFBLE1BQUE7QUFGSixTQUFBO0FBRkcsT0FBQSxNQU1ELElBQUcsSUFBSSxZQUFZLFFBQUEsQ0FBQSxNQUFBLENBQW5CLFlBQUEsRUFBc0M7QUFDeEMsUUFBQSxJQUFJLENBQUosWUFBQSxDQUFBLFNBQUEsRUFBQSxJQUFBO0FBQ0g7QUFHSjs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZVTCxJQUFBLG1CQUFBLEdBQUEsT0FBQSxDQUFBLHNCQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUNhLGlCOzs7Ozs7O1dBRVQsU0FBQSxRQUFBLENBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQWtDO0FBQzlCLFVBQUksTUFBTSxHQUFHLG1CQUFBLENBQUEsZ0JBQUEsQ0FBQSxRQUFBLENBQUEsR0FBQSxFQUFiLEdBQWEsQ0FBYjs7QUFDQSxVQUFJLE1BQU0sR0FBRyxDQUFiLEdBQWEsQ0FBYjtBQUNBLFVBQUksS0FBSyxHQUFHLE1BQU0sR0FBbEIsQ0FBQTs7QUFDQSxVQUFHLENBQUgsS0FBQSxFQUFVO0FBQ04sZUFBQSxNQUFBO0FBQ0g7O0FBQ0QsVUFBSSxJQUFJLEdBQUcsbUJBQUEsQ0FBQSxnQkFBQSxDQUFBLE1BQUEsQ0FBQSxNQUFBLEVBQStCLE1BQU0sR0FBaEQsQ0FBVyxDQUFYOztBQUNBLFVBQUksSUFBSSxHQUFSLEdBQUE7O0FBQ0EsV0FBSyxJQUFJLENBQUMsR0FBVixDQUFBLEVBQWdCLENBQUMsR0FBRyxNQUFNLEdBQTFCLENBQUEsRUFBZ0MsQ0FBaEMsRUFBQSxFQUFxQztBQUNqQyxRQUFBLElBQUksR0FBRyxtQkFBQSxDQUFBLGdCQUFBLENBQUEsR0FBQSxDQUFBLElBQUEsRUFBUCxJQUFPLENBQVA7QUFDQSxRQUFBLE1BQU0sQ0FBTixJQUFBLENBQVksbUJBQUEsQ0FBQSxnQkFBQSxDQUFBLE9BQUEsQ0FBWixJQUFZLENBQVo7QUFDSDs7QUFDRCxNQUFBLE1BQU0sQ0FBTixJQUFBLENBQUEsR0FBQTtBQUNBLGFBQUEsTUFBQTtBQUNIOzs7Ozs7Ozs7Ozs7Ozs7O0FDbEJMLElBQUEsbUJBQUEsR0FBQSxPQUFBLENBQUEsc0JBQUEsQ0FBQTs7QUFDQSxJQUFBLFFBQUEsR0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBOztBQUNBLElBQUEsUUFBQSxHQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7OztJQUNhLG9CO0FBRVQsV0FBQSxvQkFBQSxDQUFBLGdCQUFBLEVBQTZCO0FBQUEsSUFBQSxlQUFBLENBQUEsSUFBQSxFQUFBLG9CQUFBLENBQUE7O0FBQ3pCLFNBQUEsZ0JBQUEsR0FBQSxnQkFBQTtBQUNIOzs7O1dBRUQsU0FBQSxLQUFBLENBQUEsSUFBQSxFQUFXO0FBQ1AsTUFBQSxJQUFJLENBQUosS0FBQSxDQUFBLE9BQUEsQ0FBbUIsVUFBQSxDQUFBLEVBQUc7QUFDbEIsUUFBQSxDQUFDLENBQUQsbUJBQUE7QUFESixPQUFBO0FBR0EsTUFBQSxJQUFJLENBQUosS0FBQSxDQUFBLE9BQUEsQ0FBbUIsVUFBQSxDQUFBLEVBQUc7QUFDbEIsUUFBQSxDQUFDLENBQUQsbUJBQUE7QUFESixPQUFBO0FBR0g7OztXQUVELFNBQUEsU0FBQSxDQUFBLElBQUEsRUFBQSxJQUFBLEVBQXFCO0FBQ2pCLE1BQUEsSUFBSSxDQUFKLG9CQUFBLENBQUEsSUFBQSxFQUFBLE9BQUEsQ0FBd0MsVUFBQSxDQUFBLEVBQUc7QUFDdkMsUUFBQSxDQUFDLENBQUQsbUJBQUE7QUFDQSxRQUFBLENBQUMsQ0FBRCxVQUFBLENBQUEsT0FBQSxDQUFxQixVQUFBLENBQUEsRUFBRztBQUNwQixVQUFBLENBQUMsQ0FBRCxtQkFBQTtBQURKLFNBQUE7QUFGSixPQUFBO0FBTUg7OztXQUVELFNBQUEsZUFBQSxDQUFBLElBQUEsRUFBd0U7QUFBQSxVQUFBLEtBQUEsR0FBQSxJQUFBOztBQUFBLFVBQWxELFFBQWtELEdBQUEsU0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLElBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLFNBQUEsR0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEdBQXpDLElBQXlDO0FBQUEsVUFBbkMsV0FBbUMsR0FBQSxTQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsSUFBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsU0FBQSxHQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsR0FBdkIsSUFBdUI7QUFBQSxVQUFqQixVQUFpQixHQUFBLFNBQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxJQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQSxTQUFBLEdBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxHQUFOLEtBQU07O0FBQ3BFLE1BQUEsUUFBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLENBQVUsOEJBQUEsUUFBQSxHQUFBLGVBQUEsR0FBVixXQUFBOztBQUNBLFVBQUEsUUFBQSxFQUFZO0FBQ1IsYUFBQSxjQUFBLENBQUEsSUFBQTtBQUNIOztBQUVELE1BQUEsSUFBSSxDQUFKLFFBQUEsR0FBQSxPQUFBLENBQXdCLFVBQUEsQ0FBQSxFQUFHO0FBQ3ZCLFFBQUEsS0FBSSxDQUFKLFNBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQTs7QUFDQSxRQUFBLEtBQUksQ0FBSixzQkFBQSxDQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsUUFBQSxFQUFBLFdBQUEsRUFBQSxVQUFBO0FBRkosT0FBQTtBQUtIOzs7V0FFRCxTQUFBLGNBQUEsQ0FBQSxJQUFBLEVBQW9CO0FBQ2hCLE1BQUEsSUFBSSxDQUFKLG9CQUFBO0FBQ0EsTUFBQSxJQUFJLENBQUosVUFBQSxHQUFBLEtBQUE7O0FBQ0EsVUFBRztBQUNDLFFBQUEsSUFBSSxDQUFKLFVBQUEsR0FBQSxJQUFBO0FBQ0EsYUFBQSxnQkFBQSxDQUFBLElBQUEsQ0FBMkIsSUFBSSxDQUEvQixJQUFBLEVBQUEsS0FBQSxFQUE2QyxJQUFJLENBQWpELGVBQUE7QUFGSixPQUFBLENBR0MsT0FBQSxDQUFBLEVBQVM7QUFDTixRQUFBLElBQUksQ0FBSixVQUFBLEdBQUEsQ0FBQTtBQUNIO0FBQ0o7OztXQUVELFNBQUEsVUFBQSxDQUFBLElBQUEsRUFBNEI7QUFBQSxVQUFYLEtBQVcsR0FBQSxTQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsSUFBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsU0FBQSxHQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsR0FBSCxDQUFHOztBQUN4QixVQUFJLG1CQUFBLENBQUEsZ0JBQUEsQ0FBQSx1QkFBQSxDQUF5QyxJQUFJLENBQUosTUFBQSxDQUE3QyxLQUE2QyxDQUF6QyxDQUFKLEVBQWtFO0FBQzlELGVBQUEsSUFBQTtBQUNIOztBQUNELGFBQU8sS0FBQSxnQkFBQSxDQUFBLElBQUEsQ0FBMkIsSUFBSSxDQUFKLE1BQUEsQ0FBM0IsS0FBMkIsQ0FBM0IsRUFBQSxJQUFBLEVBQXFELElBQUksQ0FBSixVQUFBLENBQTVELGVBQU8sQ0FBUDtBQUNIOzs7V0FFRCxTQUFBLHNCQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsRUFBcUY7QUFBQSxVQUFBLE1BQUEsR0FBQSxJQUFBOztBQUFBLFVBQWxELFFBQWtELEdBQUEsU0FBQSxDQUFBLE1BQUEsR0FBQSxDQUFBLElBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLFNBQUEsR0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEdBQXpDLElBQXlDO0FBQUEsVUFBbkMsV0FBbUMsR0FBQSxTQUFBLENBQUEsTUFBQSxHQUFBLENBQUEsSUFBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsU0FBQSxHQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsR0FBdkIsSUFBdUI7QUFBQSxVQUFqQixTQUFpQixHQUFBLFNBQUEsQ0FBQSxNQUFBLEdBQUEsQ0FBQSxJQUFBLFNBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQSxTQUFBLEdBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxHQUFQLEtBQU87O0FBQ2pGLFVBQUcsQ0FBQyxJQUFJLENBQUwsZUFBQSxJQUFBLFNBQUEsSUFBSCxRQUFBLEVBQWtEO0FBQzlDLGFBQUEsZ0JBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQTtBQUNIOztBQUNELFVBQUEsUUFBQSxFQUFZO0FBQ1IsUUFBQSxJQUFJLENBQUosVUFBQSxHQUFBLEtBQUE7O0FBQ0EsWUFBRyxJQUFJLENBQVAsSUFBQSxFQUFhO0FBQ1QsY0FBRztBQUNDLFlBQUEsSUFBSSxDQUFKLFVBQUEsR0FBQSxJQUFBO0FBQ0EsaUJBQUEsZ0JBQUEsQ0FBQSxJQUFBLENBQTJCLElBQUksQ0FBL0IsSUFBQSxFQUFBLEtBQUEsRUFBNkMsSUFBSSxDQUFqRCxlQUFBO0FBRkosV0FBQSxDQUdDLE9BQUEsQ0FBQSxFQUFTO0FBQ04sWUFBQSxJQUFJLENBQUosVUFBQSxHQUFBLENBQUE7O0FBQ0EsWUFBQSxRQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBO0FBQ0g7QUFDSjtBQUNKOztBQUVELFVBQUEsV0FBQSxFQUFlO0FBQ1gsWUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFoQixlQUFBOztBQUNBLFlBQUksY0FBYyxHQUFDLG1CQUFBLENBQUEsZ0JBQUEsQ0FBQSxRQUFBLENBQW5CLENBQW1CLENBQW5COztBQUNBLFlBQUksU0FBUyxHQUFiLEVBQUE7QUFDQSxZQUFJLFdBQVcsR0FBZixLQUFBO0FBRUEsUUFBQSxJQUFJLENBQUosVUFBQSxDQUFBLE9BQUEsQ0FBd0IsVUFBQSxDQUFBLEVBQUc7QUFDdkIsVUFBQSxDQUFDLENBQUQsTUFBQSxDQUFBLE9BQUEsQ0FBaUIsVUFBQSxTQUFBLEVBQUEsV0FBQSxFQUEyQjtBQUN4QyxnQkFBSSxJQUFJLEdBQUcsWUFBQSxXQUFBLEdBQVgsR0FBQTs7QUFDQSxnQkFBRyxDQUFDLENBQUQsWUFBQSxDQUFBLElBQUEsRUFBQSxJQUFBLEVBQUgsS0FBRyxDQUFILEVBQXFDO0FBQ2pDLGtCQUFHO0FBQ0MsZ0JBQUEsQ0FBQyxDQUFELGFBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxFQUE0QixNQUFJLENBQUosVUFBQSxDQUFBLENBQUEsRUFBNUIsV0FBNEIsQ0FBNUI7QUFESixlQUFBLENBRUMsT0FBQSxHQUFBLEVBQVcsQ0FDUjtBQUNIO0FBQ0o7QUFSTCxXQUFBOztBQWFBLGNBQUcsSUFBSSxZQUFZLFFBQUEsQ0FBQSxNQUFBLENBQW5CLFVBQUEsRUFBb0M7QUFDaEMsZ0JBQUcsbUJBQUEsQ0FBQSxnQkFBQSxDQUFBLE1BQUEsQ0FBd0IsQ0FBQyxDQUE1QixXQUFHLENBQUgsRUFBMEM7QUFDdEMsY0FBQSxTQUFTLENBQVQsSUFBQSxDQUFBLENBQUE7QUFDQTtBQUNIOztBQUVELGdCQUFHLG1CQUFBLENBQUEsZ0JBQUEsQ0FBQSx1QkFBQSxDQUF5QyxDQUFDLENBQTdDLFdBQUcsQ0FBSCxFQUEyRDtBQUFFO0FBQ3pELGNBQUEsUUFBQSxDQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUEsaURBQUEsRUFBQSxDQUFBOztBQUNBLHFCQUFBLElBQUE7QUFDSDs7QUFFRCxnQkFBRyxDQUFDLENBQUQsWUFBQSxDQUFBLGFBQUEsRUFBQSxJQUFBLEVBQUgsS0FBRyxDQUFILEVBQThDO0FBQzFDLGtCQUFHO0FBQ0Msb0JBQUksSUFBSSxHQUFHLE1BQUksQ0FBSixnQkFBQSxDQUFBLElBQUEsQ0FBMkIsQ0FBQyxDQUE1QixXQUFBLEVBQUEsSUFBQSxFQUFYLEtBQVcsQ0FBWDs7QUFDQSxnQkFBQSxDQUFDLENBQUQsYUFBQSxDQUFBLElBQUEsRUFBQSxhQUFBLEVBQUEsSUFBQTtBQUNBLGdCQUFBLGNBQWMsR0FBRyxtQkFBQSxDQUFBLGdCQUFBLENBQUEsR0FBQSxDQUFBLGNBQUEsRUFBakIsSUFBaUIsQ0FBakI7QUFISixlQUFBLENBSUMsT0FBQSxHQUFBLEVBQVc7QUFDUixnQkFBQSxXQUFXLEdBQVgsSUFBQTtBQUNIO0FBUEwsYUFBQSxNQVFLO0FBQ0QsY0FBQSxXQUFXLEdBQVgsSUFBQTtBQUNIO0FBQ0o7QUFwQ0wsU0FBQTs7QUF5Q0EsWUFBRyxJQUFJLFlBQVksUUFBQSxDQUFBLE1BQUEsQ0FBbkIsVUFBQSxFQUFvQztBQUNoQyxjQUFJLFdBQVcsR0FBRyxTQUFTLENBQVQsTUFBQSxJQUFvQixDQUFwQixXQUFBLElBQXFDLGNBQWMsQ0FBZCxPQUFBLENBQUEsQ0FBQSxLQUFBLENBQXJDLElBQXVFLGNBQWMsQ0FBZCxPQUFBLENBQUEsQ0FBQSxLQUF6RixDQUFBOztBQUVBLGNBQUEsV0FBQSxFQUFnQjtBQUNaLGdCQUFJLElBQUksR0FBRyxtQkFBQSxDQUFBLGdCQUFBLENBQUEsTUFBQSxDQUF3QixtQkFBQSxDQUFBLGdCQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBeEIsY0FBd0IsQ0FBeEIsRUFBc0UsU0FBUyxDQUExRixNQUFXLENBQVg7O0FBQ0EsWUFBQSxTQUFTLENBQVQsT0FBQSxDQUFrQixVQUFBLENBQUEsRUFBSTtBQUNsQixjQUFBLENBQUMsQ0FBRCxhQUFBLENBQUEsSUFBQSxFQUFBLGFBQUEsRUFBQSxJQUFBO0FBREosYUFBQTtBQUdIO0FBQ0o7O0FBRUQsUUFBQSxJQUFJLENBQUosVUFBQSxDQUFBLE9BQUEsQ0FBd0IsVUFBQSxDQUFBLEVBQUc7QUFDdkIsVUFBQSxNQUFJLENBQUosc0JBQUEsQ0FBQSxJQUFBLEVBQWtDLENBQUMsQ0FBbkMsU0FBQSxFQUFBLFFBQUEsRUFBQSxXQUFBLEVBQUEsU0FBQTtBQURKLFNBQUE7QUFHSDtBQUNKOzs7V0FFRCxTQUFBLGdCQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsRUFBNEI7QUFDeEIsVUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFqQixPQUFBO0FBQ0EsVUFBSSxXQUFXLEdBQUcsTUFBTSxHQUFDLE1BQU0sQ0FBUCxlQUFBLEdBQTBCLElBQUksQ0FBdEQsZUFBQTtBQUNBLE1BQUEsSUFBSSxDQUFKLGVBQUEsR0FBdUIsUUFBQSxDQUFBLEtBQUEsQ0FBQSxTQUFBLENBQXZCLFdBQXVCLENBQXZCO0FBQ0g7Ozs7Ozs7Ozs7Ozs7OztBQ2pKTCxJQUFBLG1CQUFBLEdBQUEsT0FBQSxDQUFBLHVCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxtQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxtQkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLG1CQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLG9CQUFBLEdBQUEsT0FBQSxDQUFBLHdCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxvQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxvQkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLG9CQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLHFCQUFBLEdBQUEsT0FBQSxDQUFBLHlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxxQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxxQkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEs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RUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLGdCQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLHdCQUFBLEdBQUEsT0FBQSxDQUFBLDhCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSx3QkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSx3QkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHdCQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLG9DQUFBLEdBQUEsT0FBQSxDQUFBLDJDQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxvQ0FBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxvQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLG9DQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLG9DQUFBLEdBQUEsT0FBQSxDQUFBLDJDQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxvQ0FBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxvQ0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLG9DQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLHdCQUFBLEdBQUEsT0FBQSxDQUFBLDZCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSx3QkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSx3QkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHdCQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLDhCQUFBLEdBQUEsT0FBQSxDQUFBLG9DQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSw4QkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSw4QkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLDhCQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLG9CQUFBLEdBQUEsT0FBQSxDQUFBLHlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxvQkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxvQkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLG9CQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNOQSxJQUFBLGdCQUFBLEdBQUEsT0FBQSxDQUFBLG9CQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQ2EsdUI7Ozs7Ozs7Ozs7OztFQUFnQyxnQkFBQSxDQUFBLGU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNEN0MsSUFBQSxnQkFBQSxHQUFBLE9BQUEsQ0FBQSxvQkFBQSxDQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUNhLHVCOzs7Ozs7Ozs7Ozs7RUFBZ0MsZ0JBQUEsQ0FBQSxlOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRDdDLElBQUEsZ0JBQUEsR0FBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFDYSxtQzs7Ozs7Ozs7Ozs7O0VBQTRDLGdCQUFBLENBQUEsZTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0R6RCxJQUFBLGdCQUFBLEdBQUEsT0FBQSxDQUFBLG9CQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQ2EsbUM7Ozs7Ozs7Ozs7OztFQUE0QyxnQkFBQSxDQUFBLGU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNEekQsSUFBQSxnQkFBQSxHQUFBLE9BQUEsQ0FBQSxvQkFBQSxDQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUNhLHVCOzs7Ozs7Ozs7Ozs7RUFBZ0MsZ0JBQUEsQ0FBQSxlOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRDdDLElBQUEsZ0JBQUEsR0FBQSxP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QUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLGlCQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsaUJBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsSUFBQSxHQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLElBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxJQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLGFBQUEsR0FBQSxPQUFBLENBQUEsaUJBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLGFBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxJQUFBLE9BQUEsSUFBQSxPQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsYUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLGFBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsaUJBQUEsR0FBQSxPQUFBLENBQUEsc0JBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLGlCQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLGlCQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsaUJBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEscUJBQUEsR0FBQSxPQUFBLENBQUEsMEJBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLHFCQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLHFCQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEscUJBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsWUFBQSxHQUFBLE9BQUEsQ0FBQSxnQkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxNQUFBLENBQUEsU0FBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxZQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxnQkFBQSxHQUFBLE9BQUEsQ0FBQSxxQkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsZ0JBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxJQUFBLE9BQUEsSUFBQSxPQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsZ0JBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxnQkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLFlBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxZQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLHVCQUFBLEdBQUEsT0FBQSxDQUFBLDRCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSx1QkFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxNQUFBLENBQUEsU0FBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSx1QkFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLHVCQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLGNBQUEsR0FBQSxPQUFBLENBQUEsa0JBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLGNBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxJQUFBLE9BQUEsSUFBQSxPQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsY0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLGNBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsVUFBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLFVBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxVQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLFVBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsVUFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxNQUFBLENBQUEsU0FBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxVQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsVUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxLQUFBLEdBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxjQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxHQUFBLENBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxJQUFBLE9BQUEsSUFBQSxPQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsS0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLEtBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsY0FBQSxHQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsY0FBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxNQUFBLENBQUEsU0FBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FB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U0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLFlBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxZQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLFVBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsVUFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxNQUFBLENBQUEsU0FBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxVQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsVUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNK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QUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSw4QkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSw4QkFBQSxHQUFBLE9BQUEsQ0FBQSxvQ0FBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsOEJBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxJQUFBLE9BQUEsSUFBQSxPQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsOEJBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSw4QkFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtBQUEsU0FBQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLFlBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQTtBQUFBLEVBQUEsTUFBQSxDQUFBLGNBQUEsQ0FBQSxPQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUEsSUFBQSxVQUFBLEVBQUEsSUFBQTtBQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQUEsYUFBQSxZQUFBLENBQUEsR0FBQSxDQUFBO0FBQUE7QUFBQSxHQUFBO0FBQUEsQ0FBQTs7QUFDQSxJQUFBLFlBQUEsR0FBQSxPQUFBLENBQUEsaUJBQUEsQ0FBQTs7QUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsRUFBQSxPQUFBLENBQUEsVUFBQSxHQUFBLEVBQUE7QUFBQSxNQUFBLEdBQUEsS0FBQSxTQUFBLElBQUEsR0FBQSxLQUFBLFlBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxJQUFBLE9BQUEsSUFBQSxPQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLFlBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBOztBQUNBLElBQUEsWUFBQSxHQUFBLE9BQUEsQ0FBQSxpQkFBQSxDQUFBOztBQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsWUFBQSxFQUFBLE9BQUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxZQUFBLENBQUEsR0FBQSxDQUFBLEVBQUE7QUFBQSxFQUFBLE1BQUEsQ0FBQSxjQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQTtBQUFBLElBQUEsVUFBQSxFQUFBLElBQUE7QUFBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQTtBQUFBLGFBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUFBO0FBQUEsR0FBQTtBQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUE7O0FBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxFQUFBO0FBQUEsTUFBQSxHQUFBLEtB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c291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIHdyYXBJZGJWYWx1ZSA9IHJlcXVpcmUoJy4vd3JhcC1pZGItdmFsdWUuanMnKTtcblxuLyoqXG4gKiBPcGVuIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nLCB0ZXJtaW5hdGVkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXBJZGJWYWx1ZS53cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwSWRiVmFsdWUud3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXBJZGJWYWx1ZS53cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKVxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKVxuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsICgpID0+IGJsb2NraW5nKCkpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKVxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xuICAgIHJldHVybiB3cmFwSWRiVmFsdWUud3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG53cmFwSWRiVmFsdWUucmVwbGFjZVRyYXBzKChvbGRUcmFwcykgPT4gKHtcbiAgICAuLi5vbGRUcmFwcyxcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksXG4gICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAhIWdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmhhcyh0YXJnZXQsIHByb3ApLFxufSkpO1xuXG5leHBvcnRzLnVud3JhcCA9IHdyYXBJZGJWYWx1ZS51bndyYXA7XG5leHBvcnRzLndyYXAgPSB3cmFwSWRiVmFsdWUud3JhcDtcbmV4cG9ydHMuZGVsZXRlREIgPSBkZWxldGVEQjtcbmV4cG9ydHMub3BlbkRCID0gb3BlbkRCO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZSgoYykgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XG4gICAgcmV0dXJuIChpZGJQcm94eWFibGVUeXBlcyB8fFxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbXG4gICAgICAgICAgICBJREJEYXRhYmFzZSxcbiAgICAgICAgICAgIElEQk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgSURCSW5kZXgsXG4gICAgICAgICAgICBJREJDdXJzb3IsXG4gICAgICAgICAgICBJREJUcmFuc2FjdGlvbixcbiAgICAgICAgXSkpO1xufVxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcbiAgICByZXR1cm4gKGN1cnNvckFkdmFuY2VNZXRob2RzIHx8XG4gICAgICAgIChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcbiAgICAgICAgXSkpO1xufVxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBwcm9taXNlXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0Y2hpbmcgdG8gYXZvaWQgXCJVbmNhdWdodCBQcm9taXNlIGV4Y2VwdGlvbnNcIlxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IgfHwgbmV3IERPTUV4Y2VwdGlvbignQWJvcnRFcnJvcicsICdBYm9ydEVycm9yJykpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xufVxubGV0IGlkYlByb3h5VHJhcHMgPSB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcbiAgICAgICAgISgnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0cy5pbnN0YW5jZU9mQW55ID0gaW5zdGFuY2VPZkFueTtcbmV4cG9ydHMucmVwbGFjZVRyYXBzID0gcmVwbGFjZVRyYXBzO1xuZXhwb3J0cy5yZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSByZXZlcnNlVHJhbnNmb3JtQ2FjaGU7XG5leHBvcnRzLnVud3JhcCA9IHVud3JhcDtcbmV4cG9ydHMud3JhcCA9IHdyYXA7XG4iLCJpbXBvcnQge1V0aWxzLCBsb2d9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtEYXRhTW9kZWx9IGZyb20gXCJzZC1tb2RlbFwiO1xuaW1wb3J0IHtDb21wdXRhdGlvbnNNYW5hZ2VyfSBmcm9tIFwiLi9jb21wdXRhdGlvbnMtbWFuYWdlclwiO1xuaW1wb3J0IHtDb21wdXRhdGlvbnNNYW5hZ2VyQ29uZmlnfSBmcm9tIFwiLi9jb21wdXRhdGlvbnMtbWFuYWdlclwiO1xuXG5cblxuZXhwb3J0IGNsYXNzIENvbXB1dGF0aW9uc0VuZ2luZUNvbmZpZyBleHRlbmRzIENvbXB1dGF0aW9uc01hbmFnZXJDb25maWd7XG4gICAgbG9nTGV2ZWwgPSAnd2Fybic7XG4gICAgY29uc3RydWN0b3IoY3VzdG9tKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChjdXN0b20pIHtcbiAgICAgICAgICAgIFV0aWxzLmRlZXBFeHRlbmQodGhpcywgY3VzdG9tKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBFbnRyeSBwb2ludCBjbGFzcyBmb3Igc3RhbmRhbG9uZSBjb21wdXRhdGlvbiB3b3JrZXJzXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wdXRhdGlvbnNFbmdpbmUgZXh0ZW5kcyBDb21wdXRhdGlvbnNNYW5hZ2Vye1xuXG4gICAgZ2xvYmFsID0gVXRpbHMuZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaXNXb3JrZXIgPSBVdGlscy5pc1dvcmtlcigpO1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBkYXRhKXtcbiAgICAgICAgc3VwZXIoY29uZmlnLCBkYXRhKTtcblxuICAgICAgICBpZih0aGlzLmlzV29ya2VyKSB7XG4gICAgICAgICAgICB0aGlzLmpvYnNNYW5nZXIucmVnaXN0ZXJKb2JFeGVjdXRpb25MaXN0ZW5lcih7XG4gICAgICAgICAgICAgICAgYmVmb3JlSm9iOiAoam9iRXhlY3V0aW9uKT0+e1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGx5KCdiZWZvcmVKb2InLCBqb2JFeGVjdXRpb24uZ2V0RFRPKCkpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBhZnRlckpvYjogKGpvYkV4ZWN1dGlvbik9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBseSgnYWZ0ZXJKb2InLCBqb2JFeGVjdXRpb24uZ2V0RFRPKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5xdWVyeWFibGVGdW5jdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcnVuSm9iOiBmdW5jdGlvbihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzVmFsdWVzLCBkYXRhRFRPKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coam9iTmFtZSwgam9iUGFyYW1ldGVycywgc2VyaWFsaXplZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBEYXRhTW9kZWwoZGF0YURUTyk7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnJ1bkpvYihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzVmFsdWVzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVKb2I6IGZ1bmN0aW9uKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2Uuam9ic01hbmdlci5leGVjdXRlKGpvYkV4ZWN1dGlvbklkKS5jYXRjaChlPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5yZXBseSgnam9iRmF0YWxFcnJvcicsIGpvYkV4ZWN1dGlvbklkLCBVdGlscy5nZXRFcnJvckRUTyhlKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWNvbXB1dGU6IGZ1bmN0aW9uKGRhdGFEVE8sIHJ1bGVOYW1lLCBldmFsQ29kZSwgZXZhbE51bWVyaWMpe1xuICAgICAgICAgICAgICAgICAgICBpZihydWxlTmFtZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5vYmplY3RpdmVSdWxlc01hbmFnZXIuc2V0Q3VycmVudFJ1bGVCeU5hbWUocnVsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGxSdWxlcyA9ICFydWxlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgRGF0YU1vZGVsKGRhdGFEVE8pO1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5fY2hlY2tWYWxpZGl0eUFuZFJlY29tcHV0ZU9iamVjdGl2ZShkYXRhLCBhbGxSdWxlcywgZXZhbENvZGUsIGV2YWxOdW1lcmljKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGx5KCdyZWNvbXB1dGVkJywgZGF0YS5nZXREVE8oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKG9FdmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChvRXZlbnQuZGF0YSBpbnN0YW5jZW9mIE9iamVjdCAmJiBvRXZlbnQuZGF0YS5oYXNPd25Qcm9wZXJ0eSgncXVlcnlNZXRob2QnKSAmJiBvRXZlbnQuZGF0YS5oYXNPd25Qcm9wZXJ0eSgncXVlcnlBcmd1bWVudHMnKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5xdWVyeWFibGVGdW5jdGlvbnNbb0V2ZW50LmRhdGEucXVlcnlNZXRob2RdLmFwcGx5KHNlbGYsIG9FdmVudC5kYXRhLnF1ZXJ5QXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5kZWZhdWx0UmVwbHkob0V2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgc2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgICBzdXBlci5zZXRDb25maWcoY29uZmlnKTtcbiAgICAgICAgaWYodGhpcy5jb25maWcubG9nTGV2ZWwpe1xuICAgICAgICAgICAgdGhpcy5zZXRMb2dMZXZlbCh0aGlzLmNvbmZpZy5sb2dMZXZlbCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzZXRMb2dMZXZlbChsZXZlbCl7XG4gICAgICAgIGxvZy5zZXRMZXZlbChsZXZlbClcbiAgICB9XG5cbiAgICBkZWZhdWx0UmVwbHkobWVzc2FnZSkge1xuICAgICAgICB0aGlzLnJlcGx5KCd0ZXN0JywgbWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcmVwbHkoKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncmVwbHkgLSBub3QgZW5vdWdoIGFyZ3VtZW50cycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2xvYmFsLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICdxdWVyeU1ldGhvZExpc3RlbmVyJzogYXJndW1lbnRzWzBdLFxuICAgICAgICAgICAgJ3F1ZXJ5TWV0aG9kQXJndW1lbnRzJzogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbiIsImltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7T2JqZWN0aXZlUnVsZXNNYW5hZ2VyfSBmcm9tIFwiLi9vYmplY3RpdmUvb2JqZWN0aXZlLXJ1bGVzLW1hbmFnZXJcIjtcbmltcG9ydCB7VHJlZVZhbGlkYXRvcn0gZnJvbSBcIi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHtPcGVyYXRpb25zTWFuYWdlcn0gZnJvbSBcIi4vb3BlcmF0aW9ucy9vcGVyYXRpb25zLW1hbmFnZXJcIjtcbmltcG9ydCB7Sm9ic01hbmFnZXJ9IGZyb20gXCIuL2pvYnMvam9icy1tYW5hZ2VyXCI7XG5pbXBvcnQge0V4cHJlc3Npb25zRXZhbHVhdG9yfSBmcm9tIFwiLi9leHByZXNzaW9ucy1ldmFsdWF0b3JcIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2VNYW5hZ2VyfSBmcm9tIFwiLi9qb2JzL2pvYi1pbnN0YW5jZS1tYW5hZ2VyXCI7XG5pbXBvcnQge2RvbWFpbiBhcyBtb2RlbH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge1BvbGljeX0gZnJvbSBcIi4vcG9saWNpZXMvcG9saWN5XCI7XG5pbXBvcnQge01jZG1XZWlnaHRWYWx1ZVZhbGlkYXRvcn0gZnJvbSBcIi4vdmFsaWRhdGlvbi9tY2RtLXdlaWdodC12YWx1ZS12YWxpZGF0b3JcIjtcblxuLyoqIENvbXB1dGF0aW9uIG1hbmFnZXIgY29uZmlndXJhdGlvbiBvYmplY3RcbiAqIEBwYXJhbSBjdXN0b20gY29uZmlndXJhdGlvbiBvYmplY3QgdG8gZXh0ZW5kXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wdXRhdGlvbnNNYW5hZ2VyQ29uZmlnIHtcblxuICAgIC8qKlxuICAgICAqIGxvZ2dpbmcgbGV2ZWxcbiAgICAgKiAqL1xuICAgIGxvZ0xldmVsID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIGRlZmF1bHQgb2JqZWN0aXZlIHJ1bGUgbmFtZVxuICAgICAqICovXG4gICAgcnVsZU5hbWUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogd29ya2VyIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAgICogKi9cbiAgICB3b3JrZXIgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkZWxlZ2F0ZSB0cmVlIHJlY29tcHV0YXRpb24gdG8gd29ya2VyXG4gICAgICAgICAqICovXG4gICAgICAgIGRlbGVnYXRlUmVjb21wdXRhdGlvbjogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdvcmtlciB1cmxcbiAgICAgICAgICogKi9cbiAgICAgICAgdXJsOiBudWxsXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGpvYiByZXBvc2l0b3J5IHRvIHVzZSwgYXZhaWxhYmxlIHR5cGVzOiBpZGIsIHRpbWVvdXQsIHNpbXBsZVxuICAgICogKi9cbiAgICBqb2JSZXBvc2l0b3J5VHlwZSA9ICdpZGInO1xuXG4gICAgLyoqXG4gICAgICogY2xlYXIgcmVwb3NpdG9yeSBhZnRlciBpbml0XG4gICAgICogKi9cbiAgICBjbGVhclJlcG9zaXRvcnkgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbSkge1xuICAgICAgICBpZiAoY3VzdG9tKSB7XG4gICAgICAgICAgICBVdGlscy5kZWVwRXh0ZW5kKHRoaXMsIGN1c3RvbSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKiBDb21wdXRhdGlvbiBtYW5hZ2VyXG4qIEBwYXJhbSB7b2JqZWN0fSBjb25maWdcbiogQHBhcmFtIHtEYXRhTW9kZWx9IGRhdGEgbW9kZWwgb2JqZWN0XG4qICovXG5leHBvcnQgY2xhc3MgQ29tcHV0YXRpb25zTWFuYWdlciB7XG5cbiAgICBkYXRhO1xuICAgIGV4cHJlc3Npb25FbmdpbmU7XG4gICAgZXhwcmVzc2lvbnNFdmFsdWF0b3I7XG4gICAgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyO1xuICAgIG9wZXJhdGlvbnNNYW5hZ2VyO1xuICAgIGpvYnNNYW5nZXI7XG5cbiAgICB0cmVlVmFsaWRhdG9yO1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBkYXRhID0gbnVsbCkge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLnNldENvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmUgPSBuZXcgRXhwcmVzc2lvbkVuZ2luZSgpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yID0gbmV3IEV4cHJlc3Npb25zRXZhbHVhdG9yKHRoaXMuZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyID0gbmV3IE9iamVjdGl2ZVJ1bGVzTWFuYWdlcih0aGlzLmV4cHJlc3Npb25FbmdpbmUsIHRoaXMuY29uZmlnLnJ1bGVOYW1lKTtcblxuICAgICAgICB0aGlzLmpvYnNNYW5nZXIgPSBuZXcgSm9ic01hbmFnZXIodGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIsIHtcbiAgICAgICAgICAgIHdvcmtlclVybDogdGhpcy5jb25maWcud29ya2VyLnVybCxcbiAgICAgICAgICAgIHJlcG9zaXRvcnlUeXBlOiB0aGlzLmNvbmZpZy5qb2JSZXBvc2l0b3J5VHlwZSxcbiAgICAgICAgICAgIGNsZWFyUmVwb3NpdG9yeTogdGhpcy5jb25maWcuY2xlYXJSZXBvc2l0b3J5XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMub3BlcmF0aW9uc01hbmFnZXIgPSBuZXcgT3BlcmF0aW9uc01hbmFnZXIodGhpcy5kYXRhLCB0aGlzLmV4cHJlc3Npb25FbmdpbmUsIG5ldyBKb2JzTWFuYWdlcih0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciwge1xuICAgICAgICAgICAgcmVwb3NpdG9yeVR5cGU6ICd0aW1lb3V0JyxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMudHJlZVZhbGlkYXRvciA9IG5ldyBUcmVlVmFsaWRhdG9yKHRoaXMuZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgICAgIHRoaXMubWNkbVdlaWdodFZhbHVlVmFsaWRhdG9yID0gbmV3IE1jZG1XZWlnaHRWYWx1ZVZhbGlkYXRvcigpO1xuICAgIH1cblxuICAgIHNldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgQ29tcHV0YXRpb25zTWFuYWdlckNvbmZpZyhjb25maWcpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzZXREYXRhKGRhdGEpe1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLm9wZXJhdGlvbnNNYW5hZ2VyLnNldERhdGEoZGF0YSk7XG4gICAgfVxuXG5cbiAgICAvKiogQWxpYXMgZnVuY3Rpb24gZm9yIGNoZWNrVmFsaWRpdHlBbmRSZWNvbXB1dGVPYmplY3RpdmUqL1xuICAgIHJlY29tcHV0ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja1ZhbGlkaXR5QW5kUmVjb21wdXRlT2JqZWN0aXZlKC4uLmFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHZhbGlkaXR5IG9mIGRhdGEgbW9kZWwgYW5kIHJlY29tcHV0ZXMgb2JqZWN0aXZlIHJ1bGVzXG4gICAgICogQHJldHVybnMgcHJvbWlzZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYWxsUnVsZXMgLSByZWNvbXB1dGUgYWxsIG9iamVjdGl2ZSBydWxlc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZXZhbENvZGUgLSBldmFsdWF0ZSBjb2RlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBldmFsTnVtZXJpYyAtIGV2YWx1YXRlIG51bWVyaWMgZXhwcmVzc2lvbnNcbiAgICAgKi9cbiAgICBjaGVja1ZhbGlkaXR5QW5kUmVjb21wdXRlT2JqZWN0aXZlKGFsbFJ1bGVzLCBldmFsQ29kZSA9IGZhbHNlLCBldmFsTnVtZXJpYyA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcud29ya2VyLmRlbGVnYXRlUmVjb21wdXRhdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGV2YWxDb2RlOiBldmFsQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgZXZhbE51bWVyaWM6IGV2YWxOdW1lcmljXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoIWFsbFJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5ydWxlTmFtZSA9IHRoaXMuZ2V0Q3VycmVudFJ1bGUoKS5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ydW5Kb2IoXCJyZWNvbXB1dGVcIiwgcGFyYW1zLCB0aGlzLmRhdGEsIGZhbHNlKS50aGVuKChqb2JFeGVjdXRpb24pPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGpvYkV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS51cGRhdGVGcm9tKGQpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1ZhbGlkaXR5QW5kUmVjb21wdXRlT2JqZWN0aXZlKHRoaXMuZGF0YSwgYWxsUnVsZXMsIGV2YWxDb2RlLCBldmFsTnVtZXJpYyk7XG4gICAgICAgIH0pLnRoZW4oKCk9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXlWYWx1ZXModGhpcy5kYXRhKTtcbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIF9jaGVja1ZhbGlkaXR5QW5kUmVjb21wdXRlT2JqZWN0aXZlKGRhdGEsIGFsbFJ1bGVzLCBldmFsQ29kZSA9IGZhbHNlLCBldmFsTnVtZXJpYyA9IHRydWUpIHtcblxuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci51cGRhdGVEZWZhdWx0Q3JpdGVyaW9uMVdlaWdodChkYXRhLmRlZmF1bHRDcml0ZXJpb24xV2VpZ2h0KTtcbiAgICAgICAgZGF0YS52YWxpZGF0aW9uUmVzdWx0cyA9IFtdO1xuXG4gICAgICAgIGlmIChldmFsQ29kZSB8fCBldmFsTnVtZXJpYykge1xuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsRXhwcmVzc2lvbnMoZGF0YSwgZXZhbENvZGUsIGV2YWxOdW1lcmljKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3ZWlnaHRWYWxpZCA9IHRoaXMubWNkbVdlaWdodFZhbHVlVmFsaWRhdG9yLnZhbGlkYXRlKGRhdGEuZGVmYXVsdENyaXRlcmlvbjFXZWlnaHQpO1xuICAgICAgICB2YXIgbXVsdGlDcml0ZXJpYSA9IHRoaXMuZ2V0Q3VycmVudFJ1bGUoKS5tdWx0aUNyaXRlcmlhO1xuXG5cbiAgICAgICAgZGF0YS5nZXRSb290cygpLmZvckVhY2gocm9vdD0+IHtcbiAgICAgICAgICAgIHZhciB2ciA9IHRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZShkYXRhLmdldEFsbE5vZGVzSW5TdWJ0cmVlKHJvb3QpKTtcbiAgICAgICAgICAgIGRhdGEudmFsaWRhdGlvblJlc3VsdHMucHVzaCh2cik7XG4gICAgICAgICAgICBpZiAodnIuaXNWYWxpZCgpICYmICghbXVsdGlDcml0ZXJpYSB8fCB3ZWlnaHRWYWxpZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5yZWNvbXB1dGVUcmVlKHJvb3QsIGFsbFJ1bGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge09iamVjdGl2ZVJ1bGV9IGN1cnJlbnQgb2JqZWN0aXZlIHJ1bGVcbiAgICAgKiAqL1xuICAgIGdldEN1cnJlbnRSdWxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuY3VycmVudFJ1bGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBjdXJyZW50IG9iamVjdGl2ZSBydWxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVOYW1lIC0gbmFtZSBvZiBvYmplY3RpdmUgcnVsZVxuICAgICAqICovXG4gICAgc2V0Q3VycmVudFJ1bGVCeU5hbWUocnVsZU5hbWUpIHtcbiAgICAgICAgdGhpcy5jb25maWcucnVsZU5hbWUgPSBydWxlTmFtZTtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogIEBwYXJhbSB7c3RyaW5nfSBqb2JOYW1lXG4gICAgICogIEByZXR1cm5zIHtKb2J9XG4gICAgICogKi9cbiAgICBnZXRKb2JCeU5hbWUoam9iTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JzTWFuZ2VyLmdldEpvYkJ5TmFtZShqb2JOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBhcnJheSBvZiBvcGVyYXRpb25zIGFwcGxpY2FibGUgdG8gdGhlIGdpdmVuIG9iamVjdCAobm9kZSBvciBlZGdlKVxuICAgICAqIEBwYXJhbSBvYmplY3RcbiAgICAgKi9cbiAgICBvcGVyYXRpb25zRm9yT2JqZWN0KG9iamVjdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zTWFuYWdlci5vcGVyYXRpb25zRm9yT2JqZWN0KG9iamVjdCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdmFsaWRpdHkgb2YgZGF0YSBtb2RlbCB3aXRob3V0IHJlY29tcHV0YXRpb24gYW5kIHJldmFsaWRhdGlvblxuICAgICAqIEBwYXJhbSB7RGF0YU1vZGVsfSBkYXRhIHRvIGNoZWNrXG4gICAgICovXG5cbiAgICBpc1ZhbGlkKGRhdGEpIHtcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgdGhpcy5kYXRhO1xuICAgICAgICByZXR1cm4gZGF0YS52YWxpZGF0aW9uUmVzdWx0cy5ldmVyeSh2cj0+dnIuaXNWYWxpZCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVuIGpvYlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gam9iIG5hbWVcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gam9iUGFyYW1zVmFsdWVzIC0gam9iIHBhcmFtZXRlciB2YWx1ZXMgb2JqZWN0XG4gICAgICogQHBhcmFtIHtEYXRhTW9kZWx9IGRhdGEgbW9kZWxcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlc29sdmVQcm9taXNlQWZ0ZXJKb2JJc0xhdW5jaGVkIC0gaW1tZWRpYXRlbHkgcmVzb2x2ZSBwcm9taXNlIHdpdGggc3RpbGwgcnVubmluZyBKb2JFeGVjdXRpb25cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gcmVzb2x2aW5nIHRvIEpvYkV4ZWN1dGlvblxuICAgICAqL1xuICAgIHJ1bkpvYihuYW1lLCBqb2JQYXJhbXNWYWx1ZXMsIGRhdGEsIHJlc29sdmVQcm9taXNlQWZ0ZXJKb2JJc0xhdW5jaGVkID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JzTWFuZ2VyLnJ1bihuYW1lLCBqb2JQYXJhbXNWYWx1ZXMsIGRhdGEgfHwgdGhpcy5kYXRhLCByZXNvbHZlUHJvbWlzZUFmdGVySm9iSXNMYXVuY2hlZClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSdW4gam9iIHVzaW5nIEpvYkluc3RhbmNlTWFuYWdlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gam9iIG5hbWVcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gam9iUGFyYW1zVmFsdWVzIC0gam9iIHBhcmFtZXRlciB2YWx1ZXMgb2JqZWN0XG4gICAgICogQHBhcmFtIHtKb2JJbnN0YW5jZU1hbmFnZXJDb25maWd9IGpvYkluc3RhbmNlTWFuYWdlckNvbmZpZyAtIEpvYkluc3RhbmNlTWFuYWdlciBjb25maWd1cmF0aW9uXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IHJlc29sdmluZyB0byBKb2JJbnN0YW5jZU1hbmFnZXJcbiAgICAgKi9cbiAgICBydW5Kb2JXaXRoSW5zdGFuY2VNYW5hZ2VyKG5hbWUsIGpvYlBhcmFtc1ZhbHVlcywgam9iSW5zdGFuY2VNYW5hZ2VyQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bkpvYihuYW1lLCBqb2JQYXJhbXNWYWx1ZXMpLnRoZW4oamU9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpvYkluc3RhbmNlTWFuYWdlcih0aGlzLmpvYnNNYW5nZXIsIGplLCBqb2JJbnN0YW5jZU1hbmFnZXJDb25maWcpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHBlcmZvcm1PcGVyYXRpb24ob2JqZWN0LCBvcGVyYXRpb25OYW1lLCBqb2JQYXJhbXNWYWx1ZXMpe1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zTWFuYWdlci5wZXJmb3JtT3BlcmF0aW9uKG9iamVjdCwgb3BlcmF0aW9uTmFtZSwgam9iUGFyYW1zVmFsdWVzKTtcbiAgICB9XG5cbiAgICBnZXRPYmplY3RpdmVSdWxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnJ1bGVzO1xuICAgIH1cblxuICAgIGdldE9iamVjdGl2ZVJ1bGVCeU5hbWUocnVsZU5hbWUpe1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuZ2V0T2JqZWN0aXZlUnVsZUJ5TmFtZShydWxlTmFtZSlcbiAgICB9XG5cbiAgICBpc1J1bGVOYW1lKHJ1bGVOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5pc1J1bGVOYW1lKHJ1bGVOYW1lKVxuICAgIH1cblxuXG4gICAgZmxpcENyaXRlcmlhKGRhdGEpe1xuICAgICAgICBkYXRhID0gZGF0YSB8fCB0aGlzLmRhdGE7XG4gICAgICAgIGRhdGEucmV2ZXJzZVBheW9mZnMoKTtcbiAgICAgICAgbGV0IHRtcCA9IGRhdGEud2VpZ2h0TG93ZXJCb3VuZDtcbiAgICAgICAgZGF0YS53ZWlnaHRMb3dlckJvdW5kID0gdGhpcy5mbGlwKGRhdGEud2VpZ2h0VXBwZXJCb3VuZCk7XG4gICAgICAgIGRhdGEud2VpZ2h0VXBwZXJCb3VuZCA9IHRoaXMuZmxpcCh0bXApO1xuICAgICAgICBkYXRhLmRlZmF1bHRDcml0ZXJpb24xV2VpZ2h0ID0gdGhpcy5mbGlwKGRhdGEuZGVmYXVsdENyaXRlcmlvbjFXZWlnaHQpO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5mbGlwUnVsZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja1ZhbGlkaXR5QW5kUmVjb21wdXRlT2JqZWN0aXZlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBmbGlwKGEpe1xuICAgICAgICBpZihhID09IEluZmluaXR5KXtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoYSA9PSAwKXtcbiAgICAgICAgICAgIHJldHVybiBJbmZpbml0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25FbmdpbmUuc2VyaWFsaXplKEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKDEsIGEpKVxuICAgIH1cblxuICAgIHVwZGF0ZURpc3BsYXlWYWx1ZXMoZGF0YSwgcG9saWN5VG9EaXNwbGF5ID0gbnVsbCkge1xuICAgICAgICBkYXRhID0gZGF0YSB8fCB0aGlzLmRhdGE7XG4gICAgICAgIGlmIChwb2xpY3lUb0Rpc3BsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlQb2xpY3koZGF0YSwgcG9saWN5VG9EaXNwbGF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEubm9kZXMuZm9yRWFjaChuPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVOb2RlRGlzcGxheVZhbHVlcyhuKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEuZWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFZGdlRGlzcGxheVZhbHVlcyhlKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB1cGRhdGVOb2RlRGlzcGxheVZhbHVlcyhub2RlKSB7XG4gICAgICAgIG5vZGUuJERJU1BMQVlfVkFMVUVfTkFNRVMuZm9yRWFjaChuPT5ub2RlLmRpc3BsYXlWYWx1ZShuLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5nZXROb2RlRGlzcGxheVZhbHVlKG5vZGUsIG4pKSk7XG4gICAgfVxuXG4gICAgdXBkYXRlRWRnZURpc3BsYXlWYWx1ZXMoZSkge1xuICAgICAgICBlLiRESVNQTEFZX1ZBTFVFX05BTUVTLmZvckVhY2gobj0+ZS5kaXNwbGF5VmFsdWUobiwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuZ2V0RWRnZURpc3BsYXlWYWx1ZShlLCBuKSkpO1xuICAgIH1cblxuICAgIGRpc3BsYXlQb2xpY3kocG9saWN5VG9EaXNwbGF5LCBkYXRhKSB7XG5cblxuICAgICAgICBkYXRhID0gZGF0YSB8fCB0aGlzLmRhdGE7XG4gICAgICAgIGRhdGEubm9kZXMuZm9yRWFjaChuPT4ge1xuICAgICAgICAgICAgbi5jbGVhckRpc3BsYXlWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEuZWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgZS5jbGVhckRpc3BsYXlWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEuZ2V0Um9vdHMoKS5mb3JFYWNoKChyb290KT0+dGhpcy5kaXNwbGF5UG9saWN5Rm9yTm9kZShyb290LCBwb2xpY3lUb0Rpc3BsYXkpKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5UG9saWN5Rm9yTm9kZShub2RlLCBwb2xpY3kpIHtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5EZWNpc2lvbk5vZGUpIHtcbiAgICAgICAgICAgIHZhciBkZWNpc2lvbiA9IFBvbGljeS5nZXREZWNpc2lvbihwb2xpY3ksIG5vZGUpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkZWNpc2lvbiwgbm9kZSwgcG9saWN5KTtcbiAgICAgICAgICAgIGlmIChkZWNpc2lvbikge1xuICAgICAgICAgICAgICAgIG5vZGUuZGlzcGxheVZhbHVlKCdvcHRpbWFsJywgdHJ1ZSlcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRFZGdlID0gbm9kZS5jaGlsZEVkZ2VzW2RlY2lzaW9uLmRlY2lzaW9uVmFsdWVdO1xuICAgICAgICAgICAgICAgIGNoaWxkRWRnZS5kaXNwbGF5VmFsdWUoJ29wdGltYWwnLCB0cnVlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlQb2xpY3lGb3JOb2RlKGNoaWxkRWRnZS5jaGlsZE5vZGUsIHBvbGljeSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlKXtcbiAgICAgICAgICAgIG5vZGUuZGlzcGxheVZhbHVlKCdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICAgICAgZS5kaXNwbGF5VmFsdWUoJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlQb2xpY3lGb3JOb2RlKGUuY2hpbGROb2RlLCBwb2xpY3kpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9ZWxzZSBpZihub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKXtcbiAgICAgICAgICAgIG5vZGUuZGlzcGxheVZhbHVlKCdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgIH1cblxuXG4gICAgfVxufVxuIiwiaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmV4cG9ydCBjbGFzcyBDb21wdXRhdGlvbnNVdGlsc3tcblxuICAgIHN0YXRpYyBzZXF1ZW5jZShtaW4sIG1heCwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBleHRlbnQgPSBFeHByZXNzaW9uRW5naW5lLnN1YnRyYWN0KG1heCwgbWluKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFttaW5dO1xuICAgICAgICB2YXIgc3RlcHMgPSBsZW5ndGggLSAxO1xuICAgICAgICBpZighc3RlcHMpe1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RlcCA9IEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKGV4dGVudCxsZW5ndGggLSAxKTtcbiAgICAgICAgdmFyIGN1cnIgPSBtaW47XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoIC0gMjsgaSsrKSB7XG4gICAgICAgICAgICBjdXJyID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQoY3Vyciwgc3RlcCk7XG4gICAgICAgICAgICByZXN1bHQucHVzaChFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQoY3VycikpO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5wdXNoKG1heCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7VXRpbHMsIGxvZ30gZnJvbSAnc2QtdXRpbHMnXG5cbi8qRXZhbHVhdGVzIGNvZGUgYW5kIGV4cHJlc3Npb25zIGluIHRyZWVzKi9cbmV4cG9ydCBjbGFzcyBFeHByZXNzaW9uc0V2YWx1YXRvciB7XG4gICAgZXhwcmVzc2lvbkVuZ2luZTtcbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKXtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbkVuZ2luZTtcbiAgICB9XG5cbiAgICBjbGVhcihkYXRhKXtcbiAgICAgICAgZGF0YS5ub2Rlcy5mb3JFYWNoKG49PntcbiAgICAgICAgICAgIG4uY2xlYXJDb21wdXRlZFZhbHVlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS5lZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgIGUuY2xlYXJDb21wdXRlZFZhbHVlcygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjbGVhclRyZWUoZGF0YSwgcm9vdCl7XG4gICAgICAgIGRhdGEuZ2V0QWxsTm9kZXNJblN1YnRyZWUocm9vdCkuZm9yRWFjaChuPT57XG4gICAgICAgICAgICBuLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoKTtcbiAgICAgICAgICAgIG4uY2hpbGRFZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgICAgICBlLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZXZhbEV4cHJlc3Npb25zKGRhdGEsIGV2YWxDb2RlPXRydWUsIGV2YWxOdW1lcmljPXRydWUsIGluaXRTY29wZXM9ZmFsc2Upe1xuICAgICAgICBsb2cuZGVidWcoJ2V2YWxFeHByZXNzaW9ucyBldmFsQ29kZTonK2V2YWxDb2RlKycgZXZhbE51bWVyaWM6JytldmFsTnVtZXJpYyk7XG4gICAgICAgIGlmKGV2YWxDb2RlKXtcbiAgICAgICAgICAgIHRoaXMuZXZhbEdsb2JhbENvZGUoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLmdldFJvb3RzKCkuZm9yRWFjaChuPT57XG4gICAgICAgICAgICB0aGlzLmNsZWFyVHJlZShkYXRhLCBuKTtcbiAgICAgICAgICAgIHRoaXMuZXZhbEV4cHJlc3Npb25zRm9yTm9kZShkYXRhLCBuLCBldmFsQ29kZSwgZXZhbE51bWVyaWMsaW5pdFNjb3Blcyk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZXZhbEdsb2JhbENvZGUoZGF0YSl7XG4gICAgICAgIGRhdGEuY2xlYXJFeHByZXNzaW9uU2NvcGUoKTtcbiAgICAgICAgZGF0YS4kY29kZURpcnR5ID0gZmFsc2U7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGRhdGEuJGNvZGVFcnJvciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmUuZXZhbChkYXRhLmNvZGUsIGZhbHNlLCBkYXRhLmV4cHJlc3Npb25TY29wZSk7XG4gICAgICAgIH1jYXRjaCAoZSl7XG4gICAgICAgICAgICBkYXRhLiRjb2RlRXJyb3IgPSBlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXZhbFBheW9mZihlZGdlLCBpbmRleCA9IDApIHtcbiAgICAgICAgaWYgKEV4cHJlc3Npb25FbmdpbmUuaGFzQXNzaWdubWVudEV4cHJlc3Npb24oZWRnZS5wYXlvZmZbaW5kZXhdKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbkVuZ2luZS5ldmFsKGVkZ2UucGF5b2ZmW2luZGV4XSwgdHJ1ZSwgZWRnZS5wYXJlbnROb2RlLmV4cHJlc3Npb25TY29wZSk7XG4gICAgfVxuXG4gICAgZXZhbEV4cHJlc3Npb25zRm9yTm9kZShkYXRhLCBub2RlLCBldmFsQ29kZT10cnVlLCBldmFsTnVtZXJpYz10cnVlLCBpbml0U2NvcGU9ZmFsc2UpIHtcbiAgICAgICAgaWYoIW5vZGUuZXhwcmVzc2lvblNjb3BlIHx8IGluaXRTY29wZSB8fCBldmFsQ29kZSl7XG4gICAgICAgICAgICB0aGlzLmluaXRTY29wZUZvck5vZGUoZGF0YSwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoZXZhbENvZGUpe1xuICAgICAgICAgICAgbm9kZS4kY29kZURpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICBpZihub2RlLmNvZGUpe1xuICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS4kY29kZUVycm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lLmV2YWwobm9kZS5jb2RlLCBmYWxzZSwgbm9kZS5leHByZXNzaW9uU2NvcGUpO1xuICAgICAgICAgICAgICAgIH1jYXRjaCAoZSl7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuJGNvZGVFcnJvciA9IGU7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihldmFsTnVtZXJpYyl7XG4gICAgICAgICAgICB2YXIgc2NvcGUgPSBub2RlLmV4cHJlc3Npb25TY29wZTtcbiAgICAgICAgICAgIHZhciBwcm9iYWJpbGl0eVN1bT1FeHByZXNzaW9uRW5naW5lLnRvTnVtYmVyKDApO1xuICAgICAgICAgICAgdmFyIGhhc2hFZGdlcz0gW107XG4gICAgICAgICAgICB2YXIgaW52YWxpZFByb2IgPSBmYWxzZTtcblxuICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+e1xuICAgICAgICAgICAgICAgIGUucGF5b2ZmLmZvckVhY2goKHJhd1BheW9mZiwgcGF5b2ZmSW5kZXgpPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGF0aCA9ICdwYXlvZmZbJyArIHBheW9mZkluZGV4ICsgJ10nO1xuICAgICAgICAgICAgICAgICAgICBpZihlLmlzRmllbGRWYWxpZChwYXRoLCB0cnVlLCBmYWxzZSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY29tcHV0ZWRWYWx1ZShudWxsLCBwYXRoLCB0aGlzLmV2YWxQYXlvZmYoZSwgcGF5b2ZmSW5kZXgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoIChlcnIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgTGVmdCBlbXB0eSBpbnRlbnRpb25hbGx5XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgICAgICBpZihub2RlIGluc3RhbmNlb2YgbW9kZWwuQ2hhbmNlTm9kZSl7XG4gICAgICAgICAgICAgICAgICAgIGlmKEV4cHJlc3Npb25FbmdpbmUuaXNIYXNoKGUucHJvYmFiaWxpdHkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hFZGdlcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoRXhwcmVzc2lvbkVuZ2luZS5oYXNBc3NpZ25tZW50RXhwcmVzc2lvbihlLnByb2JhYmlsaXR5KSl7IC8vSXQgc2hvdWxkIG5vdCBvY2N1ciBoZXJlIVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCJldmFsRXhwcmVzc2lvbnNGb3JOb2RlIGhhc0Fzc2lnbm1lbnRFeHByZXNzaW9uIVwiLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoZS5pc0ZpZWxkVmFsaWQoJ3Byb2JhYmlsaXR5JywgdHJ1ZSwgZmFsc2UpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvYiA9IHRoaXMuZXhwcmVzc2lvbkVuZ2luZS5ldmFsKGUucHJvYmFiaWxpdHksIHRydWUsIHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNvbXB1dGVkVmFsdWUobnVsbCwgJ3Byb2JhYmlsaXR5JywgcHJvYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvYmFiaWxpdHlTdW0gPSBFeHByZXNzaW9uRW5naW5lLmFkZChwcm9iYWJpbGl0eVN1bSwgcHJvYik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9Y2F0Y2ggKGVycil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFByb2IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRQcm9iID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgaWYobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkNoYW5jZU5vZGUpe1xuICAgICAgICAgICAgICAgIHZhciBjb21wdXRlSGFzaCA9IGhhc2hFZGdlcy5sZW5ndGggJiYgIWludmFsaWRQcm9iICYmIChwcm9iYWJpbGl0eVN1bS5jb21wYXJlKDApID49IDAgJiYgcHJvYmFiaWxpdHlTdW0uY29tcGFyZSgxKSA8PSAwKTtcblxuICAgICAgICAgICAgICAgIGlmKGNvbXB1dGVIYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoYXNoID0gRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUoRXhwcmVzc2lvbkVuZ2luZS5zdWJ0cmFjdCgxLCBwcm9iYWJpbGl0eVN1bSksIGhhc2hFZGdlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBoYXNoRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jb21wdXRlZFZhbHVlKG51bGwsICdwcm9iYWJpbGl0eScsIGhhc2gpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgICAgICB0aGlzLmV2YWxFeHByZXNzaW9uc0Zvck5vZGUoZGF0YSwgZS5jaGlsZE5vZGUsIGV2YWxDb2RlLCBldmFsTnVtZXJpYywgaW5pdFNjb3BlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdFNjb3BlRm9yTm9kZShkYXRhLCBub2RlKXtcbiAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUuJHBhcmVudDtcbiAgICAgICAgdmFyIHBhcmVudFNjb3BlID0gcGFyZW50P3BhcmVudC5leHByZXNzaW9uU2NvcGUgOiBkYXRhLmV4cHJlc3Npb25TY29wZTtcbiAgICAgICAgbm9kZS5leHByZXNzaW9uU2NvcGUgPSBVdGlscy5jbG9uZURlZXAocGFyZW50U2NvcGUpO1xuICAgIH1cbn1cbiIsImV4cG9ydCAqIGZyb20gJy4vY29tcHV0YXRpb25zLWVuZ2luZSdcbmV4cG9ydCAqIGZyb20gJy4vY29tcHV0YXRpb25zLW1hbmFnZXInXG5leHBvcnQgKiBmcm9tICcuL2V4cHJlc3Npb25zLWV2YWx1YXRvcidcbmV4cG9ydCAqIGZyb20gJy4vam9icy9pbmRleCdcblxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlcnN9IGZyb20gXCIuLi8uLi9lbmdpbmUvam9iLXBhcmFtZXRlcnNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyRGVmaW5pdGlvbiwgUEFSQU1FVEVSX1RZUEV9IGZyb20gXCIuLi8uLi9lbmdpbmUvam9iLXBhcmFtZXRlci1kZWZpbml0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBMZWFndWVUYWJsZUpvYlBhcmFtZXRlcnMgZXh0ZW5kcyBKb2JQYXJhbWV0ZXJzIHtcblxuICAgIGluaXREZWZpbml0aW9ucygpIHtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiaWRcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HLCAxLCAxLCB0cnVlKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcInJ1bGVOYW1lXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORykpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJleHRlbmRlZFBvbGljeURlc2NyaXB0aW9uXCIsIFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4pKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwid2VpZ2h0TG93ZXJCb3VuZFwiLCBQQVJBTUVURVJfVFlQRS5OVU1CRVJfRVhQUkVTU0lPTikuc2V0KFwic2luZ2xlVmFsdWVWYWxpZGF0b3JcIiwgKHYsIGFsbFZhbHMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB2ID49IDAgJiYgdiA8PSBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLmNvbXB1dGVOdW1iZXJFeHByZXNzaW9uKGFsbFZhbHNbJ3dlaWdodFVwcGVyQm91bmQnXSlcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJkZWZhdWx0V2VpZ2h0XCIsIFBBUkFNRVRFUl9UWVBFLk5VTUJFUl9FWFBSRVNTSU9OKS5zZXQoXCJzaW5nbGVWYWx1ZVZhbGlkYXRvclwiLCAodiwgYWxsVmFscykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHYgPj0gMCAmJiB2ID49IEpvYlBhcmFtZXRlckRlZmluaXRpb24uY29tcHV0ZU51bWJlckV4cHJlc3Npb24oYWxsVmFsc1snd2VpZ2h0TG93ZXJCb3VuZCddKSAmJiB2IDw9IEpvYlBhcmFtZXRlckRlZmluaXRpb24uY29tcHV0ZU51bWJlckV4cHJlc3Npb24oYWxsVmFsc1snd2VpZ2h0VXBwZXJCb3VuZCddKVxuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIndlaWdodFVwcGVyQm91bmRcIiwgUEFSQU1FVEVSX1RZUEUuTlVNQkVSX0VYUFJFU1NJT04pLnNldChcInNpbmdsZVZhbHVlVmFsaWRhdG9yXCIsICh2LCBhbGxWYWxzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdiA+PSAwICYmIHYgPj0gSm9iUGFyYW1ldGVyRGVmaW5pdGlvbi5jb21wdXRlTnVtYmVyRXhwcmVzc2lvbihhbGxWYWxzWyd3ZWlnaHRMb3dlckJvdW5kJ10pXG4gICAgICAgIH0pKTtcblxuICAgIH1cblxuXG4gICAgaW5pdERlZmF1bHRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge1xuICAgICAgICAgICAgaWQ6IFV0aWxzLmd1aWQoKSxcbiAgICAgICAgICAgIG5hbWVPZkNyaXRlcmlvbjE6ICdDb3N0JyxcbiAgICAgICAgICAgIG5hbWVPZkNyaXRlcmlvbjI6ICdFZmZlY3QnLFxuICAgICAgICAgICAgZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIHdlaWdodExvd2VyQm91bmQ6IDAsXG4gICAgICAgICAgICBkZWZhdWx0V2VpZ2h0OiAwLFxuICAgICAgICAgICAgd2VpZ2h0VXBwZXJCb3VuZDogSW5maW5pdHksXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1NpbXBsZUpvYn0gZnJvbSBcIi4uLy4uL2VuZ2luZS9zaW1wbGUtam9iXCI7XG5pbXBvcnQge1BvbGljeX0gZnJvbSBcIi4uLy4uLy4uL3BvbGljaWVzL3BvbGljeVwiO1xuaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU3RlcH0gZnJvbSBcIi4vc3RlcHMvY2FsY3VsYXRlLXN0ZXBcIjtcbmltcG9ydCB7TGVhZ3VlVGFibGVKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi9sZWFndWUtdGFibGUtam9iLXBhcmFtZXRlcnNcIjtcblxuXG5leHBvcnQgY2xhc3MgTGVhZ3VlVGFibGVKb2IgZXh0ZW5kcyBTaW1wbGVKb2Ige1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikge1xuICAgICAgICBzdXBlcihcImxlYWd1ZS10YWJsZVwiLCBqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKTtcbiAgICAgICAgdGhpcy5pbml0U3RlcHMoKTtcbiAgICB9XG5cbiAgICBpbml0U3RlcHMoKSB7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlU3RlcCA9IG5ldyBDYWxjdWxhdGVTdGVwKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIpO1xuICAgICAgICB0aGlzLmFkZFN0ZXAodGhpcy5jYWxjdWxhdGVTdGVwKTtcbiAgICB9XG5cbiAgICBjcmVhdGVKb2JQYXJhbWV0ZXJzKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gbmV3IExlYWd1ZVRhYmxlSm9iUGFyYW1ldGVycyh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGdldEpvYkRhdGFWYWxpZGF0b3IoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IGRhdGEuZ2V0Um9vdHMoKS5sZW5ndGggPT09IDFcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGpvYlJlc3VsdFRvQ3N2Um93cyhqb2JSZXN1bHQsIGpvYlBhcmFtZXRlcnMsIHdpdGhIZWFkZXJzID0gdHJ1ZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGlmICh3aXRoSGVhZGVycykge1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBbJ3BvbGljeV9pZCcsICdwb2xpY3knLCBqb2JSZXN1bHQucGF5b2ZmTmFtZXNbMF0sIGpvYlJlc3VsdC5wYXlvZmZOYW1lc1sxXSwgJ2RvbWluYXRlZF9ieScsICdleHRlbmRlZC1kb21pbmF0ZWRfYnknLCAnaW5jcmF0aW8nLCAnb3B0aW1hbCcsICdvcHRpbWFsX2Zvcl9kZWZhdWx0X3dlaWdodCddO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goaGVhZGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICBqb2JSZXN1bHQucm93cy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICByb3cucG9saWNpZXMuZm9yRWFjaChwb2xpY3k9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHJvd0NlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICByb3cuaWQsXG4gICAgICAgICAgICAgICAgICAgIFBvbGljeS50b1BvbGljeVN0cmluZyhwb2xpY3ksIGpvYlBhcmFtZXRlcnMudmFsdWVzLmV4dGVuZGVkUG9saWN5RGVzY3JpcHRpb24pLFxuICAgICAgICAgICAgICAgICAgICByb3cucGF5b2Zmc1sxXSxcbiAgICAgICAgICAgICAgICAgICAgcm93LnBheW9mZnNbMF0sXG4gICAgICAgICAgICAgICAgICAgIHJvdy5kb21pbmF0ZWRCeSxcbiAgICAgICAgICAgICAgICAgICAgcm93LmV4dGVuZGVkRG9taW5hdGVkQnkgPT09IG51bGwgPyBudWxsIDogcm93LmV4dGVuZGVkRG9taW5hdGVkQnlbMF0gKyAnLCAnICsgcm93LmV4dGVuZGVkRG9taW5hdGVkQnlbMV0sXG4gICAgICAgICAgICAgICAgICAgIHJvdy5pbmNyYXRpbyxcbiAgICAgICAgICAgICAgICAgICAgcm93Lm9wdGltYWwsXG4gICAgICAgICAgICAgICAgICAgIHJvdy5vcHRpbWFsRm9yRGVmYXVsdFdlaWdodFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocm93Q2VsbHMpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4iLCJpbXBvcnQge1N0ZXB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvc3RlcFwiO1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7UG9saWNpZXNDb2xsZWN0b3J9IGZyb20gXCIuLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY2llcy1jb2xsZWN0b3JcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge1RyZWVWYWxpZGF0b3J9IGZyb20gXCIuLi8uLi8uLi8uLi92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yXCI7XG5pbXBvcnQge1BvbGljeX0gZnJvbSBcIi4uLy4uLy4uLy4uL3BvbGljaWVzL3BvbGljeVwiO1xuXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRlU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoXCJjYWxjdWxhdGVfc3RlcFwiLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciA9IGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciA9IG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcbiAgICAgICAgdGhpcy50cmVlVmFsaWRhdG9yID0gbmV3IFRyZWVWYWxpZGF0b3IoKTtcbiAgICB9XG5cbiAgICBkb0V4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIHZhciBkYXRhID0gc3RlcEV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgdmFyIHJ1bGVOYW1lID0gcGFyYW1zLnZhbHVlKFwicnVsZU5hbWVcIik7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKTtcbiAgICAgICAgbGV0IHJ1bGUgPSB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5jdXJyZW50UnVsZTtcbiAgICAgICAgdmFyIHRyZWVSb290ID0gZGF0YS5nZXRSb290cygpWzBdO1xuICAgICAgICB2YXIgcG9saWNpZXNDb2xsZWN0b3IgPSBuZXcgUG9saWNpZXNDb2xsZWN0b3IodHJlZVJvb3QpO1xuXG4gICAgICAgIHZhciBwb2xpY2llcyA9IHBvbGljaWVzQ29sbGVjdG9yLnBvbGljaWVzO1xuXG5cbiAgICAgICAgdmFyIHBheW9mZkNvZWZmcyA9IHRoaXMucGF5b2ZmQ29lZmZzID0gcnVsZS5wYXlvZmZDb2VmZnM7XG5cbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsRXhwcmVzc2lvbnMoZGF0YSk7XG4gICAgICAgIHZhciB2ciA9IHRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZShkYXRhLmdldEFsbE5vZGVzSW5TdWJ0cmVlKHRyZWVSb290KSk7XG5cbiAgICAgICAgaWYgKCF2ci5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvbXBhcmUgPSAoYSwgYik9PigtcGF5b2ZmQ29lZmZzWzBdICogIChiLnBheW9mZnNbMF0gLSBhLnBheW9mZnNbMF0pKSB8fCAoLXBheW9mZkNvZWZmc1sxXSAqICAoYS5wYXlvZmZzWzFdIC0gYi5wYXlvZmZzWzFdKSk7XG5cbiAgICAgICAgdmFyIHJvd3MgPSBwb2xpY2llcy5tYXAocG9saWN5ID0+IHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnJlY29tcHV0ZVRyZWUodHJlZVJvb3QsIGZhbHNlLCBwb2xpY3kpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwb2xpY2llczogW3BvbGljeV0sXG4gICAgICAgICAgICAgICAgcGF5b2ZmczogdHJlZVJvb3QuY29tcHV0ZWRWYWx1ZShydWxlTmFtZSwgJ3BheW9mZicpLnNsaWNlKCksXG4gICAgICAgICAgICAgICAgZG9taW5hdGVkQnk6IG51bGwsXG4gICAgICAgICAgICAgICAgZXh0ZW5kZWREb21pbmF0ZWRCeTogbnVsbCxcbiAgICAgICAgICAgICAgICBpbmNyYXRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICBvcHRpbWFsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvcHRpbWFsRm9yRGVmYXVsdFdlaWdodDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuc29ydChjb21wYXJlKTtcblxuICAgICAgICByb3dzID0gcm93cy5yZWR1Y2UoKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRWYWx1ZSwgaW5kZXgsIGFycmF5KT0+e1xuICAgICAgICAgICAgaWYoIXByZXZpb3VzVmFsdWUubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2N1cnJlbnRWYWx1ZV1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHByZXYgPSBwcmV2aW91c1ZhbHVlW3ByZXZpb3VzVmFsdWUubGVuZ3RoLTFdO1xuICAgICAgICAgICAgaWYoY29tcGFyZShwcmV2LCBjdXJyZW50VmFsdWUpID09IDApe1xuICAgICAgICAgICAgICAgIHByZXYucG9saWNpZXMucHVzaCguLi5jdXJyZW50VmFsdWUucG9saWNpZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1ZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXNWYWx1ZS5jb25jYXQoY3VycmVudFZhbHVlKVxuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgcm93cy5zb3J0KChhLCBiKT0+KHBheW9mZkNvZWZmc1swXSAqICAoYS5wYXlvZmZzWzBdIC0gYi5wYXlvZmZzWzBdKSkgfHwgKC1wYXlvZmZDb2VmZnNbMV0gKiAgIChhLnBheW9mZnNbMV0gLSBiLnBheW9mZnNbMV0pKSk7XG4gICAgICAgIHJvd3MuZm9yRWFjaCgociwgaSk9PiB7XG4gICAgICAgICAgICByLmlkID0gaSsxO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gcm93cy5zb3J0KGNvbXBhcmUpO1xuICAgICAgICByb3dzLnNvcnQoKGEsIGIpPT4oLXBheW9mZkNvZWZmc1swXSAqICAoYS5wYXlvZmZzWzBdIC0gYi5wYXlvZmZzWzBdKSkgfHwgKC1wYXlvZmZDb2VmZnNbMV0gKiAgIChhLnBheW9mZnNbMV0gLSBiLnBheW9mZnNbMV0pKSk7XG5cbiAgICAgICAgbGV0IGJlc3RDb3N0ID0gLXBheW9mZkNvZWZmc1sxXSAqIEluZmluaXR5LFxuICAgICAgICAgICAgYmVzdENvc3RSb3cgPSBudWxsO1xuXG4gICAgICAgIGxldCBjbXA9IChhLCBiKSA9PiBhID4gYjtcbiAgICAgICAgaWYocGF5b2ZmQ29lZmZzWzFdPDApe1xuICAgICAgICAgICAgY21wPSAoYSwgYikgPT4gYSA8IGI7XG4gICAgICAgIH1cblxuICAgICAgICByb3dzLmZvckVhY2goKHIsIGkpPT4ge1xuICAgICAgICAgICAgaWYgKGNtcChyLnBheW9mZnNbMV0sIGJlc3RDb3N0KSkge1xuICAgICAgICAgICAgICAgIGJlc3RDb3N0ID0gci5wYXlvZmZzWzFdO1xuICAgICAgICAgICAgICAgIGJlc3RDb3N0Um93ID0gcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZihiZXN0Q29zdFJvdykge1xuICAgICAgICAgICAgICAgIHIuZG9taW5hdGVkQnkgPSBiZXN0Q29zdFJvdy5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY21wPSAoYSwgYikgPT4gYSA8IGI7XG4gICAgICAgIGlmKHBheW9mZkNvZWZmc1swXSA+IDAgJiYgcGF5b2ZmQ29lZmZzWzFdIDwgMCl7XG4gICAgICAgICAgICBjbXA9IChhLCBiKSA9PiBhIDwgYjtcbiAgICAgICAgfWVsc2UgaWYocGF5b2ZmQ29lZmZzWzBdIDwgMCAmJiBwYXlvZmZDb2VmZnNbMV0gPiAwKXtcbiAgICAgICAgICAgIGNtcD0gKGEsIGIpID0+IGEgPCBiO1xuICAgICAgICB9ZWxzZSBpZihwYXlvZmZDb2VmZnNbMV08MCl7XG4gICAgICAgICAgICBjbXA9IChhLCBiKSA9PiBhID4gYjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcmV2Mk5vdERvbWluYXRlZCA9IG51bGw7XG5cblxuICAgICAgICByb3dzLmZpbHRlcihyPT4hci5kb21pbmF0ZWRCeSkuc29ydCgoYSwgYik9PiggIHBheW9mZkNvZWZmc1swXSAqIChhLnBheW9mZnNbMF0gLSBiLnBheW9mZnNbMF0pKSkuZm9yRWFjaCgociwgaSwgYXJyKT0+IHtcbiAgICAgICAgICAgIGlmICghaSkge1xuICAgICAgICAgICAgICAgIHIuaW5jcmF0aW8gPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHByZXYgPSBhcnJbaSAtIDFdO1xuXG4gICAgICAgICAgICByLmluY3JhdGlvID0gdGhpcy5jb21wdXRlSUNFUihyLCBwcmV2KTtcbiAgICAgICAgICAgIGlmIChpIDwgMikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoIXByZXYyTm90RG9taW5hdGVkKXtcbiAgICAgICAgICAgICAgICBwcmV2Mk5vdERvbWluYXRlZCA9IGFycltpIC0gMl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGNtcChyLmluY3JhdGlvLHByZXYuaW5jcmF0aW8pKXtcbiAgICAgICAgICAgICAgICBwcmV2LmluY3JhdGlvID0gbnVsbDtcbiAgICAgICAgICAgICAgICBwcmV2LmV4dGVuZGVkRG9taW5hdGVkQnkgPSBbcHJldjJOb3REb21pbmF0ZWQuaWQsIHIuaWRdIDtcbiAgICAgICAgICAgICAgICByLmluY3JhdGlvID0gdGhpcy5jb21wdXRlSUNFUihyLCBwcmV2Mk5vdERvbWluYXRlZCk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBwcmV2Mk5vdERvbWluYXRlZCA9IHByZXY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCB3ZWlnaHRMb3dlckJvdW5kID0gcGFyYW1zLnZhbHVlKFwid2VpZ2h0TG93ZXJCb3VuZFwiKTtcbiAgICAgICAgbGV0IGRlZmF1bHRXZWlnaHQgPSBwYXJhbXMudmFsdWUoXCJkZWZhdWx0V2VpZ2h0XCIpO1xuICAgICAgICBsZXQgd2VpZ2h0VXBwZXJCb3VuZCA9IHBhcmFtcy52YWx1ZShcIndlaWdodFVwcGVyQm91bmRcIik7XG5cbiAgICAgICAgLy9tYXJrIG9wdGltYWwgZm9yIHdlaWdodCBpbiBbd2VpZ2h0TG93ZXJCb3VuZCwgd2VpZ2h0VXBwZXJCb3VuZF0gYW5kIG9wdGltYWwgZm9yIGRlZmF1bHQgV2VpZ2h0XG4gICAgICAgIGxldCBsYXN0TEVMb3dlciA9IG51bGw7XG4gICAgICAgIGxldCBsYXN0TEVMb3dlckRlZiA9IG51bGw7XG4gICAgICAgIHJvd3Muc2xpY2UoKS5maWx0ZXIocj0+IXIuZG9taW5hdGVkQnkgJiYgIXIuZXh0ZW5kZWREb21pbmF0ZWRCeSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgbGV0IHN1YiA9IGEuaW5jcmF0aW8gLSBiLmluY3JhdGlvO1xuICAgICAgICAgICAgcmV0dXJuIHN1YiA/IHN1YiA6IHBheW9mZkNvZWZmc1swXSAqIChhLnBheW9mZnNbMF0gLSBiLnBheW9mZnNbMF0pXG4gICAgICAgIH0pLmZvckVhY2goKHJvdywgaSwgYXJyKT0+e1xuXG4gICAgICAgICAgICBpZihyb3cuaW5jcmF0aW8gPCB3ZWlnaHRMb3dlckJvdW5kKXtcbiAgICAgICAgICAgICAgICBsYXN0TEVMb3dlciAgPSByb3c7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihyb3cuaW5jcmF0aW8gPCBkZWZhdWx0V2VpZ2h0KXtcbiAgICAgICAgICAgICAgICBsYXN0TEVMb3dlckRlZiAgPSByb3c7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJvdy5vcHRpbWFsID0gcm93LmluY3JhdGlvID49IHdlaWdodExvd2VyQm91bmQgJiYgcm93LmluY3JhdGlvIDw9IHdlaWdodFVwcGVyQm91bmQ7XG4gICAgICAgICAgICByb3cub3B0aW1hbEZvckRlZmF1bHRXZWlnaHQgPSByb3cuaW5jcmF0aW8gPT0gZGVmYXVsdFdlaWdodDtcblxuICAgICAgICB9KTtcbiAgICAgICAgaWYobGFzdExFTG93ZXIpe1xuICAgICAgICAgICAgbGFzdExFTG93ZXIub3B0aW1hbCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZihsYXN0TEVMb3dlckRlZil7XG4gICAgICAgICAgICBsYXN0TEVMb3dlckRlZi5vcHRpbWFsRm9yRGVmYXVsdFdlaWdodCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByb3dzLmZvckVhY2gocm93PT57XG4gICAgICAgICAgICByb3cucGF5b2Zmc1swXSA9ICBFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQocm93LnBheW9mZnNbMF0pO1xuICAgICAgICAgICAgcm93LnBheW9mZnNbMV0gPSAgRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHJvdy5wYXlvZmZzWzFdKTtcbiAgICAgICAgICAgIHJvdy5pbmNyYXRpbyA9IHJvdy5pbmNyYXRpbyA9PT0gbnVsbCA/IG51bGwgOiBFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQocm93LmluY3JhdGlvKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgam9iUmVzdWx0LmRhdGEgPSB7XG4gICAgICAgICAgICBwYXlvZmZOYW1lczogZGF0YS5wYXlvZmZOYW1lcy5zbGljZSgpLFxuICAgICAgICAgICAgcGF5b2ZmQ29lZmZzIDogcGF5b2ZmQ29lZmZzLFxuICAgICAgICAgICAgcm93czogcm93cy5zb3J0KChhLCBiKT0+KGEuaWQgLSBiLmlkKSksXG4gICAgICAgICAgICB3ZWlnaHRMb3dlckJvdW5kOiBFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQod2VpZ2h0TG93ZXJCb3VuZCksXG4gICAgICAgICAgICBkZWZhdWx0V2VpZ2h0OiBFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQoZGVmYXVsdFdlaWdodCksXG4gICAgICAgICAgICB3ZWlnaHRVcHBlckJvdW5kOiBFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQod2VpZ2h0VXBwZXJCb3VuZClcbiAgICAgICAgfTtcblxuICAgICAgICBzdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb247XG4gICAgfVxuXG4gICAgY29tcHV0ZUlDRVIociwgcHJldil7XG4gICAgICAgIGxldCBkID0gRXhwcmVzc2lvbkVuZ2luZS5zdWJ0cmFjdChyLnBheW9mZnNbMF0sIHByZXYucGF5b2Zmc1swXSk7XG4gICAgICAgIGxldCBuID0gRXhwcmVzc2lvbkVuZ2luZS5zdWJ0cmFjdChyLnBheW9mZnNbMV0sIHByZXYucGF5b2Zmc1sxXSk7XG4gICAgICAgIGlmIChkID09IDApe1xuICAgICAgICAgICAgaWYobjwwKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gLSBJbmZpbml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBJbmZpbml0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5hYnMoRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUobiwgZCkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlckRlZmluaXRpb24sIFBBUkFNRVRFUl9UWVBFfSBmcm9tIFwiLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvblwiO1xuZXhwb3J0IGNsYXNzIFBheW9mZnNUcmFuc2Zvcm1hdGlvbkpvYlBhcmFtZXRlcnMgZXh0ZW5kcyBKb2JQYXJhbWV0ZXJzIHtcblxuICAgIGluaXREZWZpbml0aW9ucygpIHtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiaWRcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HLCAxLCAxLCB0cnVlKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm9iamVjdElkXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORywgMSwgMSwgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJmdW5jdGlvbk5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKS5zZXQoJ3JlcXVpcmVkJywgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJmdW5jdGlvbkJvZHlcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKS5zZXQoJ3JlcXVpcmVkJywgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJmdW5jdGlvbkFyZ3VtZW50TmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpLnNldCgncmVxdWlyZWQnLCB0cnVlKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm1ha2VDbG9uZVwiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgfVxuXG4gICAgaW5pdERlZmF1bHRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge1xuICAgICAgICAgICAgaWQ6IFV0aWxzLmd1aWQoKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uTmFtZTogJ3RyYW5zZm9ybVBheW9mZicsXG4gICAgICAgICAgICBmdW5jdGlvbkJvZHk6ICdsb2cocCknLFxuICAgICAgICAgICAgZnVuY3Rpb25Bcmd1bWVudE5hbWU6ICdwJyxcbiAgICAgICAgICAgIG1ha2VDbG9uZTogdHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtTaW1wbGVKb2J9IGZyb20gXCIuLi8uLi9lbmdpbmUvc2ltcGxlLWpvYlwiO1xuaW1wb3J0IHtTdGVwfSBmcm9tIFwiLi4vLi4vZW5naW5lL3N0ZXBcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4uLy4uL2VuZ2luZS9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1RyZWVWYWxpZGF0b3J9IGZyb20gXCIuLi8uLi8uLi92YWxpZGF0aW9uL3RyZWUtdmFsaWRhdG9yXCI7XG5cbmltcG9ydCB7UGF5b2Zmc1RyYW5zZm9ybWF0aW9uSm9iUGFyYW1ldGVyc30gZnJvbSBcIi4vcGF5b2Zmcy10cmFuc2Zvcm1hdGlvbi1qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtKb2J9IGZyb20gXCIuLi8uLi9lbmdpbmUvam9iXCI7XG5pbXBvcnQge2RvbWFpbiBhcyBtb2RlbH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuXG5leHBvcnQgY2xhc3MgUGF5b2Zmc1RyYW5zZm9ybWF0aW9uSm9iIGV4dGVuZHMgSm9iIHtcblxuICAgIHN0YXRpYyAkTkFNRSA9ICdwYXlvZmZzLXRyYW5zZm9ybWF0aW9uJztcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoUGF5b2Zmc1RyYW5zZm9ybWF0aW9uSm9iLiROQU1FLCBqb2JSZXBvc2l0b3J5KTtcbiAgICAgICAgdGhpcy5pc1Jlc3RhcnRhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IgPSBleHByZXNzaW9uc0V2YWx1YXRvcjtcbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIgPSBvYmplY3RpdmVSdWxlc01hbmFnZXI7XG4gICAgICAgIHRoaXMudHJlZVZhbGlkYXRvciA9IG5ldyBUcmVlVmFsaWRhdG9yKCk7XG4gICAgfVxuXG4gICAgZG9FeGVjdXRlKGV4ZWN1dGlvbikge1xuICAgICAgICB2YXIgZGF0YSA9IGV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBleGVjdXRpb24uam9iUGFyYW1ldGVycztcbiAgICAgICAgbGV0IGZ1bmN0aW9uTmFtZSA9IHBhcmFtcy52YWx1ZShcImZ1bmN0aW9uTmFtZVwiKTtcblxuICAgICAgICBjb25zdCByb290ID0gZGF0YS5maW5kTm9kZUJ5SWQocGFyYW1zLnZhbHVlKFwib2JqZWN0SWRcIikpO1xuXG4gICAgICAgIGxldCBtYWtlQ2xvbmUgPSBwYXJhbXMudmFsdWUoXCJtYWtlQ2xvbmVcIik7XG5cbiAgICAgICAgbGV0IHJvb3RUYXJnZXQgPSBtYWtlQ2xvbmUgPyBkYXRhLmNsb25lU3VidHJlZShyb290LCB0cnVlKSA6IHJvb3Q7XG5cblxuICAgICAgICByb290VGFyZ2V0LmNvZGUgKz0gJ1xcbicgKyBmdW5jdGlvbk5hbWUgKyAnKCcrIHBhcmFtcy52YWx1ZSgnZnVuY3Rpb25Bcmd1bWVudE5hbWUnKSArICcpID0gJyArIHBhcmFtcy52YWx1ZSgnZnVuY3Rpb25Cb2R5Jyk7XG5cbiAgICAgICAgbGV0IGFsbE5vZGVzID0gZGF0YS5nZXRBbGxOb2Rlc0luU3VidHJlZShyb290VGFyZ2V0KTtcblxuXG4gICAgICAgIHRoaXMucHJvY2Vzc05vZGVQYXlvZmYocm9vdFRhcmdldCwgcGFyYW1zKTtcblxuICAgICAgICBpZihtYWtlQ2xvbmUpe1xuICAgICAgICAgICAgbGV0IG1pblkgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICAgICAgbGV0IG1heFkgPSBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgICAgICAgICAgYWxsTm9kZXMuZm9yRWFjaChuID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobi5sb2NhdGlvbi55IDwgbWluWSkge1xuICAgICAgICAgICAgICAgICAgICBtaW5ZID0gbi5sb2NhdGlvbi55O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobi5sb2NhdGlvbi55ID4gbWF4WSkge1xuICAgICAgICAgICAgICAgICAgICBtYXhZID0gbi5sb2NhdGlvbi55O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBleHRlbnRZID0gbWF4WSAtIG1pblk7XG4gICAgICAgICAgICBsZXQgbWFyZ2luID0gMzA7XG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gZXh0ZW50WSArIG1hcmdpbjtcblxuXG4gICAgICAgICAgICByb290VGFyZ2V0Lm1vdmUoMCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIGRhdGEuYXR0YWNoU3VidHJlZShyb290VGFyZ2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleGVjdXRpb247XG4gICAgfVxuXG4gICAgcHJvY2Vzc05vZGVQYXlvZmYobm9kZSwgcGFyYW1zLCBwYXJlbnRFZGdlID0gbnVsbCwgYWdncmVnYXRlZFBheW9mZiA9IFswLCAwXSl7XG4gICAgICAgIGlmKG5vZGUudHlwZSA9PT0gbW9kZWwuVGVybWluYWxOb2RlLiRUWVBFKXtcbiAgICAgICAgICAgIHBhcmVudEVkZ2UucGF5b2ZmID0gYWdncmVnYXRlZFBheW9mZi5tYXAocCA9PiBwYXJhbXMudmFsdWUoXCJmdW5jdGlvbk5hbWVcIikgKyAnKCcgKyBFeHByZXNzaW9uRW5naW5lLnRvTnVtYmVyKHApLnRvRnJhY3Rpb24oZmFsc2UpICsgJyknKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJlbnRFZGdlKSB7XG4gICAgICAgICAgICBwYXJlbnRFZGdlLnBheW9mZi5maWxsKDApO1xuICAgICAgICB9XG5cblxuICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzTm9kZVBheW9mZihlLmNoaWxkTm9kZSwgcGFyYW1zLCBlLCBhZ2dyZWdhdGVkUGF5b2ZmLm1hcCgocCxpKSA9PiBFeHByZXNzaW9uRW5naW5lLmFkZChwLCBlLmNvbXB1dGVkQmFzZVBheW9mZih1bmRlZmluZWQsIGkpKSkpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXlvZmZzVHJhbnNmb3JtYXRpb25Kb2JQYXJhbWV0ZXJzKHZhbHVlcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlcnN9IGZyb20gXCIuLi8uLi9lbmdpbmUvam9iLXBhcmFtZXRlcnNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyRGVmaW5pdGlvbiwgUEFSQU1FVEVSX1RZUEV9IGZyb20gXCIuLi8uLi9lbmdpbmUvam9iLXBhcmFtZXRlci1kZWZpbml0aW9uXCI7XG5leHBvcnQgY2xhc3MgUmVjb21wdXRlSm9iUGFyYW1ldGVycyBleHRlbmRzIEpvYlBhcmFtZXRlcnMge1xuXG4gICAgaW5pdERlZmluaXRpb25zKCkge1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJpZFwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcsIDEsIDEsIHRydWUpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwicnVsZU5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKS5zZXQoJ3JlcXVpcmVkJywgZmFsc2UpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiZXZhbENvZGVcIiwgUEFSQU1FVEVSX1RZUEUuQk9PTEVBTikpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJldmFsTnVtZXJpY1wiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgfVxuXG4gICAgaW5pdERlZmF1bHRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge1xuICAgICAgICAgICAgaWQ6IFV0aWxzLmd1aWQoKSxcbiAgICAgICAgICAgIHJ1bGVOYW1lOiBudWxsLCAvL3JlY29tcHV0ZSBhbGwgcnVsZXNcbiAgICAgICAgICAgIGV2YWxDb2RlOiB0cnVlLFxuICAgICAgICAgICAgZXZhbE51bWVyaWM6IHRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7U2ltcGxlSm9ifSBmcm9tIFwiLi4vLi4vZW5naW5lL3NpbXBsZS1qb2JcIjtcbmltcG9ydCB7U3RlcH0gZnJvbSBcIi4uLy4uL2VuZ2luZS9zdGVwXCI7XG5pbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuLi8uLi9lbmdpbmUvam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtUcmVlVmFsaWRhdG9yfSBmcm9tIFwiLi4vLi4vLi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHtCYXRjaFN0ZXB9IGZyb20gXCIuLi8uLi9lbmdpbmUvYmF0Y2gvYmF0Y2gtc3RlcFwiO1xuaW1wb3J0IHtSZWNvbXB1dGVKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi9yZWNvbXB1dGUtam9iLXBhcmFtZXRlcnNcIjtcbmltcG9ydCB7Sm9ifSBmcm9tIFwiLi4vLi4vZW5naW5lL2pvYlwiO1xuXG5leHBvcnQgY2xhc3MgUmVjb21wdXRlSm9iIGV4dGVuZHMgSm9iIHtcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoXCJyZWNvbXB1dGVcIiwgam9iUmVwb3NpdG9yeSk7XG4gICAgICAgIHRoaXMuaXNSZXN0YXJ0YWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yID0gZXhwcmVzc2lvbnNFdmFsdWF0b3I7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyID0gb2JqZWN0aXZlUnVsZXNNYW5hZ2VyO1xuICAgICAgICB0aGlzLnRyZWVWYWxpZGF0b3IgPSBuZXcgVHJlZVZhbGlkYXRvcigpO1xuICAgIH1cblxuICAgIGRvRXhlY3V0ZShleGVjdXRpb24pIHtcbiAgICAgICAgdmFyIGRhdGEgPSBleGVjdXRpb24uZ2V0RGF0YSgpO1xuICAgICAgICB2YXIgcGFyYW1zID0gZXhlY3V0aW9uLmpvYlBhcmFtZXRlcnM7XG4gICAgICAgIHZhciBydWxlTmFtZSA9IHBhcmFtcy52YWx1ZShcInJ1bGVOYW1lXCIpO1xuICAgICAgICB2YXIgYWxsUnVsZXMgPSAhcnVsZU5hbWU7XG4gICAgICAgIGlmKHJ1bGVOYW1lKXtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoZWNrVmFsaWRpdHlBbmRSZWNvbXB1dGVPYmplY3RpdmUoZGF0YSwgYWxsUnVsZXMsIHBhcmFtcy52YWx1ZShcImV2YWxDb2RlXCIpLCBwYXJhbXMudmFsdWUoXCJldmFsTnVtZXJpY1wiKSlcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGlvbjtcbiAgICB9XG5cbiAgICBjaGVja1ZhbGlkaXR5QW5kUmVjb21wdXRlT2JqZWN0aXZlKGRhdGEsIGFsbFJ1bGVzLCBldmFsQ29kZSwgZXZhbE51bWVyaWMpIHtcbiAgICAgICAgZGF0YS52YWxpZGF0aW9uUmVzdWx0cyA9IFtdO1xuXG4gICAgICAgIGlmKGV2YWxDb2RlfHxldmFsTnVtZXJpYyl7XG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmV2YWxFeHByZXNzaW9ucyhkYXRhLCBldmFsQ29kZSwgZXZhbE51bWVyaWMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS5nZXRSb290cygpLmZvckVhY2gocm9vdD0+IHtcbiAgICAgICAgICAgIHZhciB2ciA9IHRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZShkYXRhLmdldEFsbE5vZGVzSW5TdWJ0cmVlKHJvb3QpKTtcbiAgICAgICAgICAgIGRhdGEudmFsaWRhdGlvblJlc3VsdHMucHVzaCh2cik7XG4gICAgICAgICAgICBpZiAodnIuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIucmVjb21wdXRlVHJlZShyb290LCBhbGxSdWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNyZWF0ZUpvYlBhcmFtZXRlcnModmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb21wdXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0pvYlBhcmFtZXRlckRlZmluaXRpb24sIFBBUkFNRVRFUl9UWVBFfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvblwiO1xuZXhwb3J0IGNsYXNzIFNlbnNpdGl2aXR5QW5hbHlzaXNKb2JQYXJhbWV0ZXJzIGV4dGVuZHMgSm9iUGFyYW1ldGVycyB7XG5cbiAgICBpbml0RGVmaW5pdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImlkXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORywgMSwgMSwgdHJ1ZSkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJydWxlTmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvblwiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImZhaWxPbkludmFsaWRUcmVlXCIsIFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4pKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwidmFyaWFibGVzXCIsIFtcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKSxcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm1pblwiLCBQQVJBTUVURVJfVFlQRS5OVU1CRVIpLFxuICAgICAgICAgICAgICAgIG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwibWF4XCIsIFBBUkFNRVRFUl9UWVBFLk5VTUJFUiksXG4gICAgICAgICAgICAgICAgbmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJsZW5ndGhcIiwgUEFSQU1FVEVSX1RZUEUuSU5URUdFUikuc2V0KFwic2luZ2xlVmFsdWVWYWxpZGF0b3JcIiwgdiA9PiB2ID49IDIpLFxuICAgICAgICAgICAgXSwgMSwgSW5maW5pdHksIGZhbHNlLFxuICAgICAgICAgICAgdiA9PiB2W1wibWluXCJdIDwgdltcIm1heFwiXSxcbiAgICAgICAgICAgIHZhbHVlcyA9PiBVdGlscy5pc1VuaXF1ZSh2YWx1ZXMsIHY9PnZbXCJuYW1lXCJdKSAvL1ZhcmlhYmxlIG5hbWVzIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgICAgKSlcbiAgICB9XG5cbiAgICBpbml0RGVmYXVsdFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7XG4gICAgICAgICAgICBpZDogVXRpbHMuZ3VpZCgpLFxuICAgICAgICAgICAgZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIGZhaWxPbkludmFsaWRUcmVlOiB0cnVlXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1NpbXBsZUpvYn0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zaW1wbGUtam9iXCI7XG5pbXBvcnQge1NlbnNpdGl2aXR5QW5hbHlzaXNKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi9zZW5zaXRpdml0eS1hbmFseXNpcy1qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtQcmVwYXJlVmFyaWFibGVzU3RlcH0gZnJvbSBcIi4vc3RlcHMvcHJlcGFyZS12YXJpYWJsZXMtc3RlcFwiO1xuaW1wb3J0IHtJbml0UG9saWNpZXNTdGVwfSBmcm9tIFwiLi9zdGVwcy9pbml0LXBvbGljaWVzLXN0ZXBcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU3RlcH0gZnJvbSBcIi4vc3RlcHMvY2FsY3VsYXRlLXN0ZXBcIjtcbmltcG9ydCB7UG9saWN5fSBmcm9tIFwiLi4vLi4vLi4vLi4vcG9saWNpZXMvcG9saWN5XCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5cblxuZXhwb3J0IGNsYXNzIFNlbnNpdGl2aXR5QW5hbHlzaXNKb2IgZXh0ZW5kcyBTaW1wbGVKb2Ige1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlciwgYmF0Y2hTaXplPTUpIHtcbiAgICAgICAgc3VwZXIoXCJzZW5zaXRpdml0eS1hbmFseXNpc1wiLCBqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKTtcbiAgICAgICAgdGhpcy5iYXRjaFNpemUgPSA1O1xuICAgICAgICB0aGlzLmluaXRTdGVwcygpO1xuICAgIH1cblxuICAgIGluaXRTdGVwcygpe1xuICAgICAgICB0aGlzLmFkZFN0ZXAobmV3IFByZXBhcmVWYXJpYWJsZXNTdGVwKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5leHByZXNzaW9uRW5naW5lKSk7XG4gICAgICAgIHRoaXMuYWRkU3RlcChuZXcgSW5pdFBvbGljaWVzU3RlcCh0aGlzLmpvYlJlcG9zaXRvcnkpKTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVTdGVwID0gbmV3IENhbGN1bGF0ZVN0ZXAodGhpcy5qb2JSZXBvc2l0b3J5LCB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciwgdGhpcy5iYXRjaFNpemUpO1xuICAgICAgICB0aGlzLmFkZFN0ZXAodGhpcy5jYWxjdWxhdGVTdGVwKTtcbiAgICB9XG5cbiAgICBjcmVhdGVKb2JQYXJhbWV0ZXJzKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gbmV3IFNlbnNpdGl2aXR5QW5hbHlzaXNKb2JQYXJhbWV0ZXJzKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRGF0YVZhbGlkYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gZGF0YS5nZXRSb290cygpLmxlbmd0aCA9PT0gMVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0QmF0Y2hTaXplKGJhdGNoU2l6ZSl7XG4gICAgICAgIHRoaXMuYmF0Y2hTaXplID0gYmF0Y2hTaXplO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVN0ZXAuY2h1bmtTaXplID0gYmF0Y2hTaXplO1xuICAgIH1cblxuICAgIGpvYlJlc3VsdFRvQ3N2Um93cyhqb2JSZXN1bHQsIGpvYlBhcmFtZXRlcnMsIHdpdGhIZWFkZXJzPXRydWUpe1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGlmKHdpdGhIZWFkZXJzKXtcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0gWydwb2xpY3lfbnVtYmVyJywgJ3BvbGljeSddO1xuICAgICAgICAgICAgam9iUmVzdWx0LnZhcmlhYmxlTmFtZXMuZm9yRWFjaChuPT5oZWFkZXJzLnB1c2gobikpO1xuICAgICAgICAgICAgaGVhZGVycy5wdXNoKCdwYXlvZmYnKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGhlYWRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJvdW5kVmFyaWFibGVzID0gISFqb2JQYXJhbWV0ZXJzLnZhbHVlcy5yb3VuZFZhcmlhYmxlcztcbiAgICAgICAgaWYocm91bmRWYXJpYWJsZXMpe1xuICAgICAgICAgICAgdGhpcy5yb3VuZFZhcmlhYmxlcyhqb2JSZXN1bHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgam9iUmVzdWx0LnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgdmFyIHBvbGljeSA9IGpvYlJlc3VsdC5wb2xpY2llc1tyb3cucG9saWN5SW5kZXhdO1xuICAgICAgICAgICAgdmFyIHJvd0NlbGxzID0gW3Jvdy5wb2xpY3lJbmRleCsxLCBQb2xpY3kudG9Qb2xpY3lTdHJpbmcocG9saWN5LCBqb2JQYXJhbWV0ZXJzLnZhbHVlcy5leHRlbmRlZFBvbGljeURlc2NyaXB0aW9uKV07XG4gICAgICAgICAgICByb3cudmFyaWFibGVzLmZvckVhY2godj0+IHJvd0NlbGxzLnB1c2godikpO1xuICAgICAgICAgICAgcm93Q2VsbHMucHVzaChyb3cucGF5b2ZmKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJvd0NlbGxzKTtcblxuICAgICAgICAgICAgaWYocm93Ll92YXJpYWJsZXMpeyAvL3JldmVydCBvcmlnaW5hbCB2YXJpYWJsZXNcbiAgICAgICAgICAgICAgICByb3cudmFyaWFibGVzID0gcm93Ll92YXJpYWJsZXM7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJvdy5fdmFyaWFibGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJvdW5kVmFyaWFibGVzKGpvYlJlc3VsdCl7XG4gICAgICAgIHZhciB1bmlxdWVWYWx1ZXMgPSBqb2JSZXN1bHQudmFyaWFibGVOYW1lcy5tYXAoKCk9Pm5ldyBTZXQoKSk7XG5cbiAgICAgICAgam9iUmVzdWx0LnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgcm93Ll92YXJpYWJsZXMgPSByb3cudmFyaWFibGVzLnNsaWNlKCk7IC8vIHNhdmUgb3JpZ2luYWwgcm93IHZhcmlhYmxlc1xuICAgICAgICAgICAgcm93LnZhcmlhYmxlcy5mb3JFYWNoKCh2LGkpPT4ge1xuICAgICAgICAgICAgICAgIHVuaXF1ZVZhbHVlc1tpXS5hZGQodilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdW5pcXVlVmFsdWVzTm8gPSB1bmlxdWVWYWx1ZXMubWFwKChzKT0+cy5zaXplKTtcbiAgICAgICAgdmFyIG1heFByZWNpc2lvbiA9IDE0O1xuICAgICAgICB2YXIgcHJlY2lzaW9uID0gMjtcbiAgICAgICAgdmFyIG5vdFJlYWR5VmFyaWFibGVzSW5kZXhlcyA9IGpvYlJlc3VsdC52YXJpYWJsZU5hbWVzLm1hcCgodixpKT0+aSk7XG4gICAgICAgIHdoaWxlKHByZWNpc2lvbjw9bWF4UHJlY2lzaW9uICYmIG5vdFJlYWR5VmFyaWFibGVzSW5kZXhlcy5sZW5ndGgpe1xuICAgICAgICAgICAgdW5pcXVlVmFsdWVzID0gbm90UmVhZHlWYXJpYWJsZXNJbmRleGVzLm1hcCgoKT0+bmV3IFNldCgpKTtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5yb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgICAgICBub3RSZWFkeVZhcmlhYmxlc0luZGV4ZXMuZm9yRWFjaCgodmFyaWFibGVJbmRleCwgbm90UmVhZHlJbmRleCk9PntcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gcm93Ll92YXJpYWJsZXNbdmFyaWFibGVJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IFV0aWxzLnJvdW5kKHZhbCwgcHJlY2lzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlVmFsdWVzW25vdFJlYWR5SW5kZXhdLmFkZCh2YWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJvdy52YXJpYWJsZXNbdmFyaWFibGVJbmRleF0gPSB2YWw7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbmV3UmVhZHlJbmRleGVzID0gW107XG4gICAgICAgICAgICB1bmlxdWVWYWx1ZXMuZm9yRWFjaCgodW5pcXVlVmFscywgbm90UmVhZHlJbmRleCk9PntcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ1VuaXF1ZUNvdW50ID0gdW5pcXVlVmFsdWVzTm9bbm90UmVhZHlWYXJpYWJsZXNJbmRleGVzW25vdFJlYWR5SW5kZXhdXSA7XG4gICAgICAgICAgICAgICAgaWYob3JpZ1VuaXF1ZUNvdW50PT11bmlxdWVWYWxzLnNpemUpeyAvL3JlYWR5IGluIHByZXZpb3VzIGl0ZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICBuZXdSZWFkeUluZGV4ZXMucHVzaChub3RSZWFkeUluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmKG5ld1JlYWR5SW5kZXhlcy5sZW5ndGgpIHsgLy9yZXZlcnQgdmFsdWVzIHRvIHByZXYgaXRlcmF0aW9uXG4gICAgICAgICAgICAgICAgbmV3UmVhZHlJbmRleGVzLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICBuZXdSZWFkeUluZGV4ZXMuZm9yRWFjaChub3RSZWFkeUluZGV4PT57XG4gICAgICAgICAgICAgICAgICAgIG5vdFJlYWR5VmFyaWFibGVzSW5kZXhlcy5zcGxpY2Uobm90UmVhZHlJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZWNpc2lvbisrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypTaG91bGQgcmV0dXJuIHByb2dyZXNzIG9iamVjdCB3aXRoIGZpZWxkczpcbiAgICAgKiBjdXJyZW50XG4gICAgICogdG90YWwgKi9cbiAgICBnZXRQcm9ncmVzcyhleGVjdXRpb24pe1xuXG4gICAgICAgIGlmIChleGVjdXRpb24uc3RlcEV4ZWN1dGlvbnMubGVuZ3RoIDw9IDIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG90YWw6IDEsXG4gICAgICAgICAgICAgICAgY3VycmVudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzWzJdLmdldFByb2dyZXNzKGV4ZWN1dGlvbi5zdGVwRXhlY3V0aW9uc1syXSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuaW1wb3J0IHtCYXRjaFN0ZXB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvYmF0Y2gvYmF0Y2gtc3RlcFwiO1xuaW1wb3J0IHtUcmVlVmFsaWRhdG9yfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY3lcIjtcbmltcG9ydCB7Sm9iQ29tcHV0YXRpb25FeGNlcHRpb259IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvZXhjZXB0aW9ucy9qb2ItY29tcHV0YXRpb24tZXhjZXB0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDYWxjdWxhdGVTdGVwIGV4dGVuZHMgQmF0Y2hTdGVwIHtcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIsIGJhdGNoU2l6ZSkge1xuICAgICAgICBzdXBlcihcImNhbGN1bGF0ZV9zdGVwXCIsIGpvYlJlcG9zaXRvcnksIGJhdGNoU2l6ZSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IgPSBleHByZXNzaW9uc0V2YWx1YXRvcjtcbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIgPSBvYmplY3RpdmVSdWxlc01hbmFnZXI7XG4gICAgICAgIHRoaXMudHJlZVZhbGlkYXRvciA9IG5ldyBUcmVlVmFsaWRhdG9yKCk7XG4gICAgfVxuXG4gICAgaW5pdChzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdmFyIGpvYkV4ZWN1dGlvbkNvbnRleHQgPSBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKTtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgcnVsZU5hbWUgPSBwYXJhbXMudmFsdWUoXCJydWxlTmFtZVwiKTtcblxuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5zZXRDdXJyZW50UnVsZUJ5TmFtZShydWxlTmFtZSk7XG4gICAgICAgIHZhciB2YXJpYWJsZVZhbHVlcyA9IGpvYlJlc3VsdC5kYXRhLnZhcmlhYmxlVmFsdWVzO1xuICAgICAgICB2YXIgdmFyaWFibGVOYW1lcyA9IHBhcmFtcy52YWx1ZShcInZhcmlhYmxlc1wiKS5tYXAodj0+di5uYW1lKTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChcInZhcmlhYmxlTmFtZXNcIiwgdmFyaWFibGVOYW1lcyk7XG5cblxuICAgICAgICBpZiAoIWpvYlJlc3VsdC5kYXRhLnJvd3MpIHtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnJvd3MgPSBbXTtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnZhcmlhYmxlTmFtZXMgPSB2YXJpYWJsZU5hbWVzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlVmFsdWVzLmxlbmd0aDtcbiAgICB9XG5cblxuICAgIHJlYWROZXh0Q2h1bmsoc3RlcEV4ZWN1dGlvbiwgc3RhcnRJbmRleCwgY2h1bmtTaXplLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdmFyIHZhcmlhYmxlVmFsdWVzID0gam9iUmVzdWx0LmRhdGEudmFyaWFibGVWYWx1ZXM7XG4gICAgICAgIHJldHVybiB2YXJpYWJsZVZhbHVlcy5zbGljZShzdGFydEluZGV4LCBzdGFydEluZGV4ICsgY2h1bmtTaXplKTtcbiAgICB9XG5cblxuICAgIHByb2Nlc3NJdGVtKHN0ZXBFeGVjdXRpb24sIGl0ZW0pIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgcnVsZU5hbWUgPSBwYXJhbXMudmFsdWUoXCJydWxlTmFtZVwiKTtcbiAgICAgICAgdmFyIGZhaWxPbkludmFsaWRUcmVlID0gcGFyYW1zLnZhbHVlKFwiZmFpbE9uSW52YWxpZFRyZWVcIik7XG4gICAgICAgIHZhciBkYXRhID0gc3RlcEV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgIHZhciB0cmVlUm9vdCA9IGRhdGEuZ2V0Um9vdHMoKVswXTtcbiAgICAgICAgdmFyIHZhcmlhYmxlTmFtZXMgPSBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQuZ2V0KFwidmFyaWFibGVOYW1lc1wiKTtcbiAgICAgICAgdmFyIHBvbGljaWVzID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JFeGVjdXRpb25Db250ZXh0KCkuZ2V0KFwicG9saWNpZXNcIik7XG5cbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5jbGVhcihkYXRhKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsR2xvYmFsQ29kZShkYXRhKTtcbiAgICAgICAgdmFyaWFibGVOYW1lcy5mb3JFYWNoKCh2YXJpYWJsZU5hbWUsIGkpPT4ge1xuICAgICAgICAgICAgZGF0YS5leHByZXNzaW9uU2NvcGVbdmFyaWFibGVOYW1lXSA9IGl0ZW1baV07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEV4cHJlc3Npb25zRm9yTm9kZShkYXRhLCB0cmVlUm9vdCk7XG4gICAgICAgIHZhciB2ciA9IHRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZShkYXRhLmdldEFsbE5vZGVzSW5TdWJ0cmVlKHRyZWVSb290KSk7XG5cbiAgICAgICAgdmFyIHZhbGlkID0gdnIuaXNWYWxpZCgpO1xuXG4gICAgICAgIGlmKCF2YWxpZCAmJiBmYWlsT25JbnZhbGlkVHJlZSl7XG4gICAgICAgICAgICBsZXQgZXJyb3JEYXRhID0ge1xuICAgICAgICAgICAgICAgIHZhcmlhYmxlczoge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXJpYWJsZU5hbWVzLmZvckVhY2goKHZhcmlhYmxlTmFtZSwgaSk9PiB7XG4gICAgICAgICAgICAgICAgZXJyb3JEYXRhLnZhcmlhYmxlc1t2YXJpYWJsZU5hbWVdID0gaXRlbVtpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkNvbXB1dGF0aW9uRXhjZXB0aW9uKFwiY29tcHV0YXRpb25zXCIsIGVycm9yRGF0YSlcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXlvZmZzID0gW107XG5cbiAgICAgICAgcG9saWNpZXMuZm9yRWFjaChwb2xpY3k9PiB7XG4gICAgICAgICAgICB2YXIgcGF5b2ZmID0gJ24vYSc7XG4gICAgICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5yZWNvbXB1dGVUcmVlKHRyZWVSb290LCBmYWxzZSwgcG9saWN5KTtcbiAgICAgICAgICAgICAgICBwYXlvZmYgPSB0cmVlUm9vdC5jb21wdXRlZFZhbHVlKHJ1bGVOYW1lLCAncGF5b2ZmJylbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXlvZmZzLnB1c2gocGF5b2ZmKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvbGljaWVzOiBwb2xpY2llcyxcbiAgICAgICAgICAgIHZhcmlhYmxlczogaXRlbSxcbiAgICAgICAgICAgIHBheW9mZnM6IHBheW9mZnNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB3cml0ZUNodW5rKHN0ZXBFeGVjdXRpb24sIGl0ZW1zLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvbiA9IHBhcmFtcy52YWx1ZShcImV4dGVuZGVkUG9saWN5RGVzY3JpcHRpb25cIik7XG5cbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtPT4ge1xuICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbS5wb2xpY2llcy5mb3JFYWNoKChwb2xpY3ksIGkpPT4ge1xuICAgICAgICAgICAgICAgIHZhciB2YXJpYWJsZXMgPSBpdGVtLnZhcmlhYmxlcy5tYXAodiA9PiB0aGlzLnRvRmxvYXQodikpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBheW9mZiA9IGl0ZW0ucGF5b2Zmc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0ge1xuICAgICAgICAgICAgICAgICAgICBwb2xpY3lJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIHBheW9mZjogVXRpbHMuaXNTdHJpbmcocGF5b2ZmKSA/IHBheW9mZiA6IHRoaXMudG9GbG9hdChwYXlvZmYpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5yb3dzLnB1c2gocm93KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcG9zdFByb2Nlc3Moc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIGRlbGV0ZSBqb2JSZXN1bHQuZGF0YS52YXJpYWJsZVZhbHVlcztcbiAgICB9XG5cblxuICAgIHRvRmxvYXQodikge1xuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KHYpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7U3RlcH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9zdGVwXCI7XG5pbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtQb2xpY2llc0NvbGxlY3Rvcn0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3BvbGljaWVzL3BvbGljaWVzLWNvbGxlY3RvclwiO1xuXG5leHBvcnQgY2xhc3MgSW5pdFBvbGljaWVzU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgc3VwZXIoXCJpbml0X3BvbGljaWVzXCIsIGpvYlJlcG9zaXRvcnkpO1xuICAgIH1cblxuICAgIGRvRXhlY3V0ZShzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBzdGVwRXhlY3V0aW9uLmdldERhdGEoKTtcbiAgICAgICAgdmFyIHRyZWVSb290ID0gZGF0YS5nZXRSb290cygpWzBdO1xuICAgICAgICB2YXIgcG9saWNpZXNDb2xsZWN0b3IgPSBuZXcgUG9saWNpZXNDb2xsZWN0b3IodHJlZVJvb3QpO1xuXG4gICAgICAgIHZhciBwb2xpY2llcyA9IHBvbGljaWVzQ29sbGVjdG9yLnBvbGljaWVzO1xuICAgICAgICBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKS5wdXQoXCJwb2xpY2llc1wiLCBwb2xpY2llcyk7XG5cbiAgICAgICAgaWYoIWpvYlJlc3VsdC5kYXRhKXtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhPXt9XG4gICAgICAgIH1cblxuICAgICAgICBqb2JSZXN1bHQuZGF0YS5wb2xpY2llcyA9IHBvbGljaWVzO1xuXG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuQ09NUExFVEVEO1xuICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7U3RlcH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9zdGVwXCI7XG5pbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtDb21wdXRhdGlvbnNVdGlsc30gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2NvbXB1dGF0aW9ucy11dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgUHJlcGFyZVZhcmlhYmxlc1N0ZXAgZXh0ZW5kcyBTdGVwIHtcbiAgICBjb25zdHJ1Y3Rvcihqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uRW5naW5lKSB7XG4gICAgICAgIHN1cGVyKFwicHJlcGFyZV92YXJpYWJsZXNcIiwgam9iUmVwb3NpdG9yeSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZSA9IGV4cHJlc3Npb25FbmdpbmU7XG4gICAgfVxuXG4gICAgZG9FeGVjdXRlKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciB2YXJpYWJsZXMgPSBwYXJhbXMudmFsdWUoXCJ2YXJpYWJsZXNcIik7XG5cbiAgICAgICAgdmFyIHZhcmlhYmxlVmFsdWVzID0gW107XG4gICAgICAgIHZhcmlhYmxlcy5mb3JFYWNoKHY9PiB7XG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlcy5wdXNoKENvbXB1dGF0aW9uc1V0aWxzLnNlcXVlbmNlKHYubWluLCB2Lm1heCwgdi5sZW5ndGgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhcmlhYmxlVmFsdWVzID0gVXRpbHMuY2FydGVzaWFuUHJvZHVjdE9mKHZhcmlhYmxlVmFsdWVzKTtcbiAgICAgICAgam9iUmVzdWx0LmRhdGE9e1xuICAgICAgICAgICAgdmFyaWFibGVWYWx1ZXM6IHZhcmlhYmxlVmFsdWVzXG4gICAgICAgIH07XG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuQ09NUExFVEVEO1xuICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyc30gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLCBQQVJBTUVURVJfVFlQRX0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyLWRlZmluaXRpb25cIjtcbmV4cG9ydCBjbGFzcyBQcm9iYWJpbGlzdGljU2Vuc2l0aXZpdHlBbmFseXNpc0pvYlBhcmFtZXRlcnMgZXh0ZW5kcyBKb2JQYXJhbWV0ZXJzIHtcblxuICAgIGluaXREZWZpbml0aW9ucygpIHtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiaWRcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HLCAxLCAxLCB0cnVlKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcInJ1bGVOYW1lXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORykpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJmYWlsT25JbnZhbGlkVHJlZVwiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImV4dGVuZGVkUG9saWN5RGVzY3JpcHRpb25cIiwgUEFSQU1FVEVSX1RZUEUuQk9PTEVBTikpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJudW1iZXJPZlJ1bnNcIiwgUEFSQU1FVEVSX1RZUEUuSU5URUdFUikuc2V0KFwic2luZ2xlVmFsdWVWYWxpZGF0b3JcIiwgdiA9PiB2ID4gMCkpO1xuXG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcInZhcmlhYmxlc1wiLCBbXG4gICAgICAgICAgICAgICAgbmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJuYW1lXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORyksXG4gICAgICAgICAgICAgICAgbmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJmb3JtdWxhXCIsIFBBUkFNRVRFUl9UWVBFLk5VTUJFUl9FWFBSRVNTSU9OKVxuICAgICAgICAgICAgXSwgMSwgSW5maW5pdHksIGZhbHNlLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHZhbHVlcyA9PiBVdGlscy5pc1VuaXF1ZSh2YWx1ZXMsIHY9PnZbXCJuYW1lXCJdKSAvL1ZhcmlhYmxlIG5hbWVzIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgICAgKSlcbiAgICB9XG5cbiAgICBpbml0RGVmYXVsdFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7XG4gICAgICAgICAgICBpZDogVXRpbHMuZ3VpZCgpLFxuICAgICAgICAgICAgZXh0ZW5kZWRQb2xpY3lEZXNjcmlwdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIGZhaWxPbkludmFsaWRUcmVlOiB0cnVlXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1Byb2JhYmlsaXN0aWNTZW5zaXRpdml0eUFuYWx5c2lzSm9iUGFyYW1ldGVyc30gZnJvbSBcIi4vcHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpcy1qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtJbml0UG9saWNpZXNTdGVwfSBmcm9tIFwiLi4vbi13YXkvc3RlcHMvaW5pdC1wb2xpY2llcy1zdGVwXCI7XG5pbXBvcnQge1NlbnNpdGl2aXR5QW5hbHlzaXNKb2J9IGZyb20gXCIuLi9uLXdheS9zZW5zaXRpdml0eS1hbmFseXNpcy1qb2JcIjtcbmltcG9ydCB7UHJvYkNhbGN1bGF0ZVN0ZXB9IGZyb20gXCIuL3N0ZXBzL3Byb2ItY2FsY3VsYXRlLXN0ZXBcIjtcbmltcG9ydCB7Q29tcHV0ZVBvbGljeVN0YXRzU3RlcH0gZnJvbSBcIi4vc3RlcHMvY29tcHV0ZS1wb2xpY3ktc3RhdHMtc3RlcFwiO1xuXG5leHBvcnQgY2xhc3MgUHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2IgZXh0ZW5kcyBTZW5zaXRpdml0eUFuYWx5c2lzSm9iIHtcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIsIGJhdGNoU2l6ZT01KSB7XG4gICAgICAgIHN1cGVyKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIsIGJhdGNoU2l6ZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwicHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpc1wiO1xuICAgIH1cblxuICAgIGluaXRTdGVwcygpIHtcbiAgICAgICAgdGhpcy5hZGRTdGVwKG5ldyBJbml0UG9saWNpZXNTdGVwKHRoaXMuam9iUmVwb3NpdG9yeSkpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVN0ZXAgPSBuZXcgUHJvYkNhbGN1bGF0ZVN0ZXAodGhpcy5qb2JSZXBvc2l0b3J5LCB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLCB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciwgdGhpcy5iYXRjaFNpemUpO1xuICAgICAgICB0aGlzLmFkZFN0ZXAodGhpcy5jYWxjdWxhdGVTdGVwKTtcbiAgICAgICAgdGhpcy5hZGRTdGVwKG5ldyBDb21wdXRlUG9saWN5U3RhdHNTdGVwKHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXhwcmVzc2lvbkVuZ2luZSwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIsIHRoaXMuam9iUmVwb3NpdG9yeSkpO1xuICAgIH1cblxuICAgIGNyZWF0ZUpvYlBhcmFtZXRlcnModmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2JQYXJhbWV0ZXJzKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgLypTaG91bGQgcmV0dXJuIHByb2dyZXNzIG9iamVjdCB3aXRoIGZpZWxkczpcbiAgICAgKiBjdXJyZW50XG4gICAgICogdG90YWwgKi9cbiAgICBnZXRQcm9ncmVzcyhleGVjdXRpb24pIHtcblxuICAgICAgICBpZiAoZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvdGFsOiAxLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zdGVwc1sxXS5nZXRQcm9ncmVzcyhleGVjdXRpb24uc3RlcEV4ZWN1dGlvbnNbMV0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7bG9nLCBVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge1N0ZXB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvc3RlcFwiO1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21wdXRlUG9saWN5U3RhdHNTdGVwIGV4dGVuZHMgU3RlcCB7XG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyLCBqb2JSZXBvc2l0b3J5KSB7XG4gICAgICAgIHN1cGVyKFwiY29tcHV0ZV9wb2xpY3lfc3RhdHNcIiwgam9iUmVwb3NpdG9yeSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZSA9IGV4cHJlc3Npb25FbmdpbmU7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyID0gb2JqZWN0aXZlUnVsZXNNYW5hZ2VyO1xuICAgIH1cblxuICAgIGRvRXhlY3V0ZShzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgbnVtYmVyT2ZSdW5zID0gcGFyYW1zLnZhbHVlKFwibnVtYmVyT2ZSdW5zXCIpO1xuICAgICAgICB2YXIgcnVsZU5hbWUgPSBwYXJhbXMudmFsdWUoXCJydWxlTmFtZVwiKTtcblxuICAgICAgICBsZXQgcnVsZSA9IHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnJ1bGVCeU5hbWVbcnVsZU5hbWVdO1xuXG5cbiAgICAgICAgdmFyIHBheW9mZnNQZXJQb2xpY3kgPSBqb2JSZXN1bHQuZGF0YS5wb2xpY2llcy5tYXAoKCk9PltdKTtcblxuICAgICAgICBqb2JSZXN1bHQuZGF0YS5yb3dzLmZvckVhY2gocm93PT4ge1xuICAgICAgICAgICAgcGF5b2Zmc1BlclBvbGljeVtyb3cucG9saWN5SW5kZXhdLnB1c2goVXRpbHMuaXNTdHJpbmcocm93LnBheW9mZikgPyAwIDogcm93LnBheW9mZilcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9nLmRlYnVnKCdwYXlvZmZzUGVyUG9saWN5JywgcGF5b2Zmc1BlclBvbGljeSwgam9iUmVzdWx0LmRhdGEucm93cy5sZW5ndGgsIHJ1bGUubWF4aW1pemF0aW9uKTtcblxuICAgICAgICBqb2JSZXN1bHQuZGF0YS5tZWRpYW5zID0gcGF5b2Zmc1BlclBvbGljeS5tYXAocGF5b2Zmcz0+RXhwcmVzc2lvbkVuZ2luZS5tZWRpYW4ocGF5b2ZmcykpO1xuICAgICAgICBqb2JSZXN1bHQuZGF0YS5zdGFuZGFyZERldmlhdGlvbnMgPSBwYXlvZmZzUGVyUG9saWN5Lm1hcChwYXlvZmZzPT5FeHByZXNzaW9uRW5naW5lLnN0ZChwYXlvZmZzKSk7XG5cbiAgICAgICAgaWYgKHJ1bGUubWF4aW1pemF0aW9uKSB7XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5wb2xpY3lJc0Jlc3RQcm9iYWJpbGl0aWVzID0gam9iUmVzdWx0LmRhdGEucG9saWN5VG9IaWdoZXN0UGF5b2ZmQ291bnQubWFwKHY9PkV4cHJlc3Npb25FbmdpbmUudG9GbG9hdChFeHByZXNzaW9uRW5naW5lLmRpdmlkZSh2LCBudW1iZXJPZlJ1bnMpKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5wb2xpY3lJc0Jlc3RQcm9iYWJpbGl0aWVzID0gam9iUmVzdWx0LmRhdGEucG9saWN5VG9Mb3dlc3RQYXlvZmZDb3VudC5tYXAodj0+RXhwcmVzc2lvbkVuZ2luZS50b0Zsb2F0KEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKHYsIG51bWJlck9mUnVucykpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljeVRvSGlnaGVzdFBheW9mZkNvdW50ID0gam9iUmVzdWx0LmRhdGEucG9saWN5VG9IaWdoZXN0UGF5b2ZmQ291bnQubWFwKHY9PkV4cHJlc3Npb25FbmdpbmUudG9GbG9hdCh2KSk7XG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljeVRvTG93ZXN0UGF5b2ZmQ291bnQgPSBqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0xvd2VzdFBheW9mZkNvdW50Lm1hcCh2PT5FeHByZXNzaW9uRW5naW5lLnRvRmxvYXQodikpO1xuXG5cbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzID0gSk9CX1NUQVRVUy5DT01QTEVURUQ7XG4gICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU3RlcH0gZnJvbSBcIi4uLy4uL24td2F5L3N0ZXBzL2NhbGN1bGF0ZS1zdGVwXCI7XG5pbXBvcnQge0pvYkNvbXB1dGF0aW9uRXhjZXB0aW9ufSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL2V4Y2VwdGlvbnMvam9iLWNvbXB1dGF0aW9uLWV4Y2VwdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgUHJvYkNhbGN1bGF0ZVN0ZXAgZXh0ZW5kcyBDYWxjdWxhdGVTdGVwIHtcblxuICAgIGluaXQoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIHZhciBqb2JFeGVjdXRpb25Db250ZXh0ID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JFeGVjdXRpb25Db250ZXh0KCk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgdmFyIHJ1bGVOYW1lID0gcGFyYW1zLnZhbHVlKFwicnVsZU5hbWVcIik7XG5cbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuc2V0Q3VycmVudFJ1bGVCeU5hbWUocnVsZU5hbWUpO1xuICAgICAgICB2YXIgdmFyaWFibGVOYW1lcyA9IHBhcmFtcy52YWx1ZShcInZhcmlhYmxlc1wiKS5tYXAodj0+di5uYW1lKTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChcInZhcmlhYmxlTmFtZXNcIiwgdmFyaWFibGVOYW1lcyk7XG5cbiAgICAgICAgaWYoIWpvYlJlc3VsdC5kYXRhLnJvd3Mpe1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEucm93cyA9IFtdO1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEudmFyaWFibGVOYW1lcyA9IHZhcmlhYmxlTmFtZXM7XG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5leHBlY3RlZFZhbHVlcyA9IFV0aWxzLmZpbGwobmV3IEFycmF5KGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLmxlbmd0aCksIDApO1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEucG9saWN5VG9IaWdoZXN0UGF5b2ZmQ291bnQgPSBVdGlscy5maWxsKG5ldyBBcnJheShqb2JSZXN1bHQuZGF0YS5wb2xpY2llcy5sZW5ndGgpLCAwKTtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljeVRvTG93ZXN0UGF5b2ZmQ291bnQgPSBVdGlscy5maWxsKG5ldyBBcnJheShqb2JSZXN1bHQuZGF0YS5wb2xpY2llcy5sZW5ndGgpLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJhbXMudmFsdWUoXCJudW1iZXJPZlJ1bnNcIik7XG4gICAgfVxuXG4gICAgcmVhZE5leHRDaHVuayhzdGVwRXhlY3V0aW9uLCBzdGFydEluZGV4LCBjaHVua1NpemUsIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciB2YXJpYWJsZXMgPSBwYXJhbXMudmFsdWUoXCJ2YXJpYWJsZXNcIik7XG4gICAgICAgIHZhciBkYXRhID0gc3RlcEV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgIHZhciB2YXJpYWJsZVZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IodmFyIHJ1bkluZGV4PTA7IHJ1bkluZGV4PGNodW5rU2l6ZTsgcnVuSW5kZXgrKyl7XG4gICAgICAgICAgICB2YXIgc2luZ2xlUnVuVmFyaWFibGVWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgICAgICAgIHZhcmlhYmxlcy5mb3JFYWNoKHY9PiB7XG4gICAgICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXZhbHVhdGVkID0gdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5leHByZXNzaW9uRW5naW5lLmV2YWwodi5mb3JtdWxhLCB0cnVlLCBVdGlscy5jbG9uZURlZXAoZGF0YS5leHByZXNzaW9uU2NvcGUpKTtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlUnVuVmFyaWFibGVWYWx1ZXMucHVzaChFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQoZXZhbHVhdGVkKSk7XG4gICAgICAgICAgICAgICAgfWNhdGNoKGUpe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogdixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZihlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yRGF0YSA9IHt2YXJpYWJsZXM6IFtdfTtcbiAgICAgICAgICAgICAgICBlcnJvcnMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICAgICAgICAgIGVycm9yRGF0YS52YXJpYWJsZXNbZS52YXJpYWJsZS5uYW1lXSA9IGUuZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iQ29tcHV0YXRpb25FeGNlcHRpb24oXCJwYXJhbS1jb21wdXRhdGlvblwiLCBlcnJvckRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlcy5wdXNoKHNpbmdsZVJ1blZhcmlhYmxlVmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlVmFsdWVzO1xuICAgIH1cblxuICAgIHByb2Nlc3NJdGVtKHN0ZXBFeGVjdXRpb24sIGl0ZW0sIGN1cnJlbnRJdGVtQ291bnQsIGpvYlJlc3VsdCkge1xuICAgICAgICB2YXIgciA9IHN1cGVyLnByb2Nlc3NJdGVtKHN0ZXBFeGVjdXRpb24sIGl0ZW0sIGpvYlJlc3VsdCk7XG5cbiAgICAgICAgdmFyIHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICB2YXIgbnVtYmVyT2ZSdW5zID0gcGFyYW1zLnZhbHVlKFwibnVtYmVyT2ZSdW5zXCIpO1xuICAgICAgICB2YXIgcG9saWNpZXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKS5nZXQoXCJwb2xpY2llc1wiKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVBvbGljeVN0YXRzKHIsIHBvbGljaWVzLCBudW1iZXJPZlJ1bnMsIGpvYlJlc3VsdCk7XG5cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuXG4gICAgdXBkYXRlUG9saWN5U3RhdHMociwgcG9saWNpZXMsIG51bWJlck9mUnVucywgam9iUmVzdWx0KXtcbiAgICAgICAgdmFyIGhpZ2hlc3RQYXlvZmYgPSAtSW5maW5pdHk7XG4gICAgICAgIHZhciBsb3dlc3RQYXlvZmYgPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIGJlc3RQb2xpY3lJbmRleGVzID0gW107XG4gICAgICAgIHZhciB3b3JzdFBvbGljeUluZGV4ZXMgPSBbXTtcblxuICAgICAgICB2YXIgemVyb051bSA9IEV4cHJlc3Npb25FbmdpbmUudG9OdW1iZXIoMCk7XG5cbiAgICAgICAgcG9saWNpZXMuZm9yRWFjaCgocG9saWN5LGkpPT57XG4gICAgICAgICAgICBsZXQgcGF5b2ZmID0gci5wYXlvZmZzW2ldO1xuICAgICAgICAgICAgaWYoVXRpbHMuaXNTdHJpbmcocGF5b2ZmKSl7XG4gICAgICAgICAgICAgICAgcGF5b2ZmID0gemVyb051bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHBheW9mZiA8IGxvd2VzdFBheW9mZil7XG4gICAgICAgICAgICAgICAgbG93ZXN0UGF5b2ZmID0gcGF5b2ZmO1xuICAgICAgICAgICAgICAgIHdvcnN0UG9saWN5SW5kZXhlcyA9IFtpXTtcbiAgICAgICAgICAgIH1lbHNlIGlmKHBheW9mZi5lcXVhbHMobG93ZXN0UGF5b2ZmKSl7XG4gICAgICAgICAgICAgICAgd29yc3RQb2xpY3lJbmRleGVzLnB1c2goaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHBheW9mZiA+IGhpZ2hlc3RQYXlvZmYpe1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RQYXlvZmYgPSBwYXlvZmY7XG4gICAgICAgICAgICAgICAgYmVzdFBvbGljeUluZGV4ZXMgPSBbaV1cbiAgICAgICAgICAgIH1lbHNlIGlmKHBheW9mZi5lcXVhbHMoaGlnaGVzdFBheW9mZikpe1xuICAgICAgICAgICAgICAgIGJlc3RQb2xpY3lJbmRleGVzLnB1c2goaSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEuZXhwZWN0ZWRWYWx1ZXNbaV0gPSBFeHByZXNzaW9uRW5naW5lLmFkZChqb2JSZXN1bHQuZGF0YS5leHBlY3RlZFZhbHVlc1tpXSwgRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUocGF5b2ZmLCBudW1iZXJPZlJ1bnMpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYmVzdFBvbGljeUluZGV4ZXMuZm9yRWFjaChwb2xpY3lJbmRleD0+e1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEucG9saWN5VG9IaWdoZXN0UGF5b2ZmQ291bnRbcG9saWN5SW5kZXhdID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQoam9iUmVzdWx0LmRhdGEucG9saWN5VG9IaWdoZXN0UGF5b2ZmQ291bnRbcG9saWN5SW5kZXhdLCBFeHByZXNzaW9uRW5naW5lLmRpdmlkZSgxLCBiZXN0UG9saWN5SW5kZXhlcy5sZW5ndGgpKVxuICAgICAgICB9KTtcblxuICAgICAgICB3b3JzdFBvbGljeUluZGV4ZXMuZm9yRWFjaChwb2xpY3lJbmRleD0+e1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEucG9saWN5VG9Mb3dlc3RQYXlvZmZDb3VudFtwb2xpY3lJbmRleF0gPSBFeHByZXNzaW9uRW5naW5lLmFkZChqb2JSZXN1bHQuZGF0YS5wb2xpY3lUb0xvd2VzdFBheW9mZkNvdW50W3BvbGljeUluZGV4XSwgRXhwcmVzc2lvbkVuZ2luZS5kaXZpZGUoMSwgd29yc3RQb2xpY3lJbmRleGVzLmxlbmd0aCkpXG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgcG9zdFByb2Nlc3Moc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLmV4cGVjdGVkVmFsdWVzID0gam9iUmVzdWx0LmRhdGEuZXhwZWN0ZWRWYWx1ZXMubWFwKHY9PnRoaXMudG9GbG9hdCh2KSk7XG4gICAgfVxuXG5cbiAgICB0b0Zsb2F0KHYpIHtcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUudG9GbG9hdCh2KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyc30gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLCBQQVJBTUVURVJfVFlQRX0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyLWRlZmluaXRpb25cIjtcbmV4cG9ydCBjbGFzcyBTcGlkZXJQbG90Sm9iUGFyYW1ldGVycyBleHRlbmRzIEpvYlBhcmFtZXRlcnMge1xuXG4gICAgaW5pdERlZmluaXRpb25zKCkge1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJpZFwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcsIDEsIDEsIHRydWUpKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwicnVsZU5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcInBlcmNlbnRhZ2VDaGFuZ2VSYW5nZVwiLCBQQVJBTUVURVJfVFlQRS5OVU1CRVIpLnNldChcInNpbmdsZVZhbHVlVmFsaWRhdG9yXCIsIHYgPT4gdiA+IDAgJiYgdiA8PTEwMCkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJsZW5ndGhcIiwgUEFSQU1FVEVSX1RZUEUuSU5URUdFUikuc2V0KFwic2luZ2xlVmFsdWVWYWxpZGF0b3JcIiwgdiA9PiB2ID49IDApKTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwidmFyaWFibGVzXCIsIFtcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcIm5hbWVcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HKSxcbiAgICAgICAgICAgIF0sIDEsIEluZmluaXR5LCBmYWxzZSxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB2YWx1ZXMgPT4gVXRpbHMuaXNVbmlxdWUodmFsdWVzLCB2PT52W1wibmFtZVwiXSkgLy9WYXJpYWJsZSBuYW1lcyBzaG91bGQgYmUgdW5pcXVlXG4gICAgICAgICkpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJmYWlsT25JbnZhbGlkVHJlZVwiLCBQQVJBTUVURVJfVFlQRS5CT09MRUFOKSk7XG4gICAgfVxuXG4gICAgaW5pdERlZmF1bHRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMudmFsdWVzID0ge1xuICAgICAgICAgICAgaWQ6IFV0aWxzLmd1aWQoKSxcbiAgICAgICAgICAgIGZhaWxPbkludmFsaWRUcmVlOiB0cnVlXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1NpbXBsZUpvYn0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9zaW1wbGUtam9iXCI7XG5pbXBvcnQge0NhbGN1bGF0ZVN0ZXB9IGZyb20gXCIuL3N0ZXBzL2NhbGN1bGF0ZS1zdGVwXCI7XG5pbXBvcnQge1NwaWRlclBsb3RKb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi9zcGlkZXItcGxvdC1qb2ItcGFyYW1ldGVyc1wiO1xuXG5leHBvcnQgY2xhc3MgU3BpZGVyUGxvdEpvYiBleHRlbmRzIFNpbXBsZUpvYiB7XG5cbiAgICBjb25zdHJ1Y3Rvcihqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSB7XG4gICAgICAgIHN1cGVyKFwic3BpZGVyLXBsb3RcIiwgam9iUmVwb3NpdG9yeSk7XG4gICAgICAgIHRoaXMuYWRkU3RlcChuZXcgQ2FsY3VsYXRlU3RlcChqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSk7XG4gICAgfVxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGlkZXJQbG90Sm9iUGFyYW1ldGVycyh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGdldEpvYkRhdGFWYWxpZGF0b3IoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IGRhdGEuZ2V0Um9vdHMoKS5sZW5ndGggPT09IDFcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLypTaG91bGQgcmV0dXJuIHByb2dyZXNzIG9iamVjdCB3aXRoIGZpZWxkczpcbiAgICAgKiBjdXJyZW50XG4gICAgICogdG90YWwgKi9cbiAgICBnZXRQcm9ncmVzcyhleGVjdXRpb24pe1xuICAgICAgICBpZiAoZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG90YWw6IDEsXG4gICAgICAgICAgICAgICAgY3VycmVudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzWzBdLmdldFByb2dyZXNzKGV4ZWN1dGlvbi5zdGVwRXhlY3V0aW9uc1swXSk7XG4gICAgfVxuXG4gICAgam9iUmVzdWx0VG9Dc3ZSb3dzKGpvYlJlc3VsdCwgam9iUGFyYW1ldGVycywgd2l0aEhlYWRlcnM9dHJ1ZSl7XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZih3aXRoSGVhZGVycyl7XG4gICAgICAgICAgICByZXN1bHQucHVzaChbJ3ZhcmlhYmxlX25hbWUnLCAncG9saWN5X25vJ10uY29uY2F0KGpvYlJlc3VsdC5wZXJjZW50YWdlUmFuZ2VWYWx1ZXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGpvYlJlc3VsdC5yb3dzLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHtcblxuICAgICAgICAgICAgcmVzdWx0LnB1c2goLi4ucm93LnBheW9mZnMubWFwKChwYXlvZmZzLCBwb2xpY3lJbmRleCk9PltcbiAgICAgICAgICAgICAgICByb3cudmFyaWFibGVOYW1lLFxuICAgICAgICAgICAgICAgIHBvbGljeUluZGV4KzEsXG4gICAgICAgICAgICAgICAgLi4ucGF5b2Zmc1xuICAgICAgICAgICAgXSkpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuaW1wb3J0IHtKb2JDb21wdXRhdGlvbkV4Y2VwdGlvbn0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9leGNlcHRpb25zL2pvYi1jb21wdXRhdGlvbi1leGNlcHRpb25cIjtcbmltcG9ydCB7QmF0Y2hTdGVwfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL2JhdGNoL2JhdGNoLXN0ZXBcIjtcbmltcG9ydCB7VHJlZVZhbGlkYXRvcn0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3ZhbGlkYXRpb24vdHJlZS12YWxpZGF0b3JcIjtcbmltcG9ydCB7UG9saWN5fSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vcG9saWNpZXMvcG9saWN5XCI7XG5pbXBvcnQge1BvbGljaWVzQ29sbGVjdG9yfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vcG9saWNpZXMvcG9saWNpZXMtY29sbGVjdG9yXCI7XG5pbXBvcnQge0NvbXB1dGF0aW9uc1V0aWxzfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vY29tcHV0YXRpb25zLXV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBDYWxjdWxhdGVTdGVwIGV4dGVuZHMgQmF0Y2hTdGVwIHtcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoXCJjYWxjdWxhdGVfc3RlcFwiLCBqb2JSZXBvc2l0b3J5LCAxKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciA9IGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciA9IG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcbiAgICAgICAgdGhpcy50cmVlVmFsaWRhdG9yID0gbmV3IFRyZWVWYWxpZGF0b3IoKTtcbiAgICB9XG5cbiAgICBpbml0KHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICBsZXQgam9iRXhlY3V0aW9uQ29udGV4dCA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpO1xuICAgICAgICBsZXQgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIGxldCBydWxlTmFtZSA9IHBhcmFtcy52YWx1ZShcInJ1bGVOYW1lXCIpO1xuICAgICAgICBsZXQgcGVyY2VudGFnZUNoYW5nZVJhbmdlID0gcGFyYW1zLnZhbHVlKFwicGVyY2VudGFnZUNoYW5nZVJhbmdlXCIpO1xuICAgICAgICBsZXQgbGVuZ3RoID0gcGFyYW1zLnZhbHVlKFwibGVuZ3RoXCIpO1xuICAgICAgICBsZXQgdmFyaWFibGVzID0gcGFyYW1zLnZhbHVlKFwidmFyaWFibGVzXCIpO1xuXG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnNldEN1cnJlbnRSdWxlQnlOYW1lKHJ1bGVOYW1lKTtcbiAgICAgICAgbGV0IHZhcmlhYmxlTmFtZXMgPSBwYXJhbXMudmFsdWUoXCJ2YXJpYWJsZXNcIikubWFwKHY9PnYubmFtZSk7XG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dC5wdXQoXCJ2YXJpYWJsZU5hbWVzXCIsIHZhcmlhYmxlTmFtZXMpO1xuICAgICAgICBsZXQgZGF0YSA9IHN0ZXBFeGVjdXRpb24uZ2V0RGF0YSgpO1xuXG4gICAgICAgIGxldCB0cmVlUm9vdCA9IGRhdGEuZ2V0Um9vdHMoKVswXTtcbiAgICAgICAgbGV0IHBheW9mZiA9IHRyZWVSb290LmNvbXB1dGVkVmFsdWUocnVsZU5hbWUsICdwYXlvZmYnKTtcblxuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmNsZWFyKGRhdGEpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmV2YWxFeHByZXNzaW9ucyhkYXRhKTtcblxuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlci5yZWNvbXB1dGVUcmVlKHRyZWVSb290LCBmYWxzZSk7XG5cbiAgICAgICAgbGV0IHBvbGljaWVzQ29sbGVjdG9yID0gbmV3IFBvbGljaWVzQ29sbGVjdG9yKHRyZWVSb290LCBydWxlTmFtZSk7XG5cbiAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZXMgPSB7fTtcbiAgICAgICAgZGF0YS5nZXRHbG9iYWxWYXJpYWJsZU5hbWVzKCkuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICAgIGxldCB2ID0gZGF0YS5leHByZXNzaW9uU2NvcGVbbmFtZV07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZXNbbmFtZV0gPSB0aGlzLnRvRmxvYXQodik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkNvbXB1dGF0aW9uRXhjZXB0aW9uKFwiZXJyb3IgY29tcHV0aW5nIGZsb2F0IHZhbHVlIG9mIGEgdmFyaWFibGVcIiwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIGxldCBwZXJjZW50YWdlUmFuZ2VWYWx1ZXMgPSBDb21wdXRhdGlvbnNVdGlscy5zZXF1ZW5jZSgtcGVyY2VudGFnZUNoYW5nZVJhbmdlLCBwZXJjZW50YWdlQ2hhbmdlUmFuZ2UsIDIqbGVuZ3RoKzEpO1xuXG4gICAgICAgIGxldCB2YXJpYWJsZVZhbHVlcyA9IFtdO1xuXG4gICAgICAgIHZhcmlhYmxlcy5mb3JFYWNoKHY9PiB7XG4gICAgICAgICAgICBsZXQgZGVmVmFsID0gZGVmYXVsdFZhbHVlc1t2Lm5hbWVdO1xuICAgICAgICAgICAgdmFyaWFibGVWYWx1ZXMucHVzaChwZXJjZW50YWdlUmFuZ2VWYWx1ZXMubWFwKHA9PiB0aGlzLnRvRmxvYXQoRXhwcmVzc2lvbkVuZ2luZS5hZGQoZGVmVmFsLCBFeHByZXNzaW9uRW5naW5lLm11bHRpcGx5KEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKHAsMTAwKSwgZGVmVmFsKSkpKSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgaWYoIWpvYlJlc3VsdC5kYXRhKXtcbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhID0ge1xuICAgICAgICAgICAgICAgIHZhcmlhYmxlTmFtZXM6IHZhcmlhYmxlTmFtZXMsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlczogZGVmYXVsdFZhbHVlcyxcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlUmFuZ2VWYWx1ZXM6IHBlcmNlbnRhZ2VSYW5nZVZhbHVlcyxcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGF5b2ZmOiB0aGlzLnRvRmxvYXQocGF5b2ZmKVswXSxcbiAgICAgICAgICAgICAgICBwb2xpY2llczogcG9saWNpZXNDb2xsZWN0b3IucG9saWNpZXMsXG4gICAgICAgICAgICAgICAgcm93czogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKS5wdXQoXCJ2YXJpYWJsZVZhbHVlc1wiLCB2YXJpYWJsZVZhbHVlcyk7XG4gICAgICAgIHJldHVybiB2YXJpYWJsZVZhbHVlcy5sZW5ndGg7XG4gICAgfVxuXG5cbiAgICByZWFkTmV4dENodW5rKHN0ZXBFeGVjdXRpb24sIHN0YXJ0SW5kZXgsIGNodW5rU2l6ZSkge1xuICAgICAgICBsZXQgdmFyaWFibGVWYWx1ZXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYkV4ZWN1dGlvbkNvbnRleHQoKS5nZXQoXCJ2YXJpYWJsZVZhbHVlc1wiKTtcbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlVmFsdWVzLnNsaWNlKHN0YXJ0SW5kZXgsIHN0YXJ0SW5kZXggKyBjaHVua1NpemUpO1xuICAgIH1cblxuICAgIHByb2Nlc3NJdGVtKHN0ZXBFeGVjdXRpb24sIGl0ZW0sIGl0ZW1JbmRleCwgam9iUmVzdWx0KSB7XG4gICAgICAgIGxldCBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgbGV0IHJ1bGVOYW1lID0gcGFyYW1zLnZhbHVlKFwicnVsZU5hbWVcIik7XG4gICAgICAgIGxldCBmYWlsT25JbnZhbGlkVHJlZSA9IHBhcmFtcy52YWx1ZShcImZhaWxPbkludmFsaWRUcmVlXCIpO1xuICAgICAgICBsZXQgZGF0YSA9IHN0ZXBFeGVjdXRpb24uZ2V0RGF0YSgpO1xuICAgICAgICBsZXQgdHJlZVJvb3QgPSBkYXRhLmdldFJvb3RzKClbMF07XG4gICAgICAgIGxldCB2YXJpYWJsZU5hbWVzID0gc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LmdldChcInZhcmlhYmxlTmFtZXNcIik7XG4gICAgICAgIGxldCB2YXJpYWJsZU5hbWUgPSB2YXJpYWJsZU5hbWVzW2l0ZW1JbmRleF07XG5cblxuICAgICAgICBsZXQgcGF5b2ZmcyA9IGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLm1hcChwb2xpY3k9PltdKTtcblxuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmNsZWFyKGRhdGEpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yLmV2YWxHbG9iYWxDb2RlKGRhdGEpO1xuXG5cbiAgICAgICAgaXRlbS5mb3JFYWNoKHZhcmlhYmxlVmFsdWU9PntcblxuICAgICAgICAgICAgZGF0YS5leHByZXNzaW9uU2NvcGVbdmFyaWFibGVOYW1lXSA9IHZhcmlhYmxlVmFsdWU7XG5cbiAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEV4cHJlc3Npb25zRm9yTm9kZShkYXRhLCB0cmVlUm9vdCk7XG4gICAgICAgICAgICBsZXQgdnIgPSB0aGlzLnRyZWVWYWxpZGF0b3IudmFsaWRhdGUoZGF0YS5nZXRBbGxOb2Rlc0luU3VidHJlZSh0cmVlUm9vdCkpO1xuICAgICAgICAgICAgbGV0IHZhbGlkID0gdnIuaXNWYWxpZCgpO1xuXG4gICAgICAgICAgICBpZighdmFsaWQgJiYgZmFpbE9uSW52YWxpZFRyZWUpe1xuICAgICAgICAgICAgICAgIGxldCBlcnJvckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczoge31cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGVycm9yRGF0YS52YXJpYWJsZXNbdmFyaWFibGVOYW1lXSA9IHZhcmlhYmxlVmFsdWU7XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iQ29tcHV0YXRpb25FeGNlcHRpb24oXCJjb21wdXRhdGlvbnNcIiwgZXJyb3JEYXRhKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBqb2JSZXN1bHQuZGF0YS5wb2xpY2llcy5mb3JFYWNoKChwb2xpY3ksIHBvbGljeUluZGV4KT0+e1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnJlY29tcHV0ZVRyZWUodHJlZVJvb3QsIGZhbHNlLCBwb2xpY3kpO1xuICAgICAgICAgICAgICAgIGxldCBwYXlvZmYgPSB0cmVlUm9vdC5jb21wdXRlZFZhbHVlKHJ1bGVOYW1lLCAncGF5b2ZmJylbMF07XG4gICAgICAgICAgICAgICAgcGF5b2Zmc1twb2xpY3lJbmRleF0ucHVzaCh0aGlzLnRvRmxvYXQocGF5b2ZmKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFyaWFibGVOYW1lOiB2YXJpYWJsZU5hbWUsXG4gICAgICAgICAgICB2YXJpYWJsZUluZGV4OiBpdGVtSW5kZXgsXG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlczogaXRlbSxcbiAgICAgICAgICAgIHBheW9mZnM6IHBheW9mZnNcbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIHdyaXRlQ2h1bmsoc3RlcEV4ZWN1dGlvbiwgaXRlbXMsIGpvYlJlc3VsdCkge1xuICAgICAgICBqb2JSZXN1bHQuZGF0YS5yb3dzLnB1c2goLi4uaXRlbXMpO1xuICAgIH1cblxuXG4gICAgdG9GbG9hdCh2KXtcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUudG9GbG9hdCh2KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge0pvYkNvbXB1dGF0aW9uRXhjZXB0aW9ufSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL2V4Y2VwdGlvbnMvam9iLWNvbXB1dGF0aW9uLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtCYXRjaFN0ZXB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvYmF0Y2gvYmF0Y2gtc3RlcFwiO1xuaW1wb3J0IHtUcmVlVmFsaWRhdG9yfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY3lcIjtcbmltcG9ydCB7UG9saWNpZXNDb2xsZWN0b3J9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9wb2xpY2llcy9wb2xpY2llcy1jb2xsZWN0b3JcIjtcblxuZXhwb3J0IGNsYXNzIENhbGN1bGF0ZVN0ZXAgZXh0ZW5kcyBCYXRjaFN0ZXAge1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikge1xuICAgICAgICBzdXBlcihcImNhbGN1bGF0ZV9zdGVwXCIsIGpvYlJlcG9zaXRvcnksIDEpO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zRXZhbHVhdG9yID0gZXhwcmVzc2lvbnNFdmFsdWF0b3I7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyID0gb2JqZWN0aXZlUnVsZXNNYW5hZ2VyO1xuICAgICAgICB0aGlzLnRyZWVWYWxpZGF0b3IgPSBuZXcgVHJlZVZhbGlkYXRvcigpO1xuICAgIH1cblxuICAgIGluaXQoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIGxldCBqb2JFeGVjdXRpb25Db250ZXh0ID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JFeGVjdXRpb25Db250ZXh0KCk7XG4gICAgICAgIGxldCBwYXJhbXMgPSBzdGVwRXhlY3V0aW9uLmdldEpvYlBhcmFtZXRlcnMoKTtcbiAgICAgICAgbGV0IHJ1bGVOYW1lID0gcGFyYW1zLnZhbHVlKFwicnVsZU5hbWVcIik7XG5cbiAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIuc2V0Q3VycmVudFJ1bGVCeU5hbWUocnVsZU5hbWUpO1xuICAgICAgICBsZXQgdmFyaWFibGVWYWx1ZXMgPSBqb2JFeGVjdXRpb25Db250ZXh0LmdldChcInZhcmlhYmxlVmFsdWVzXCIpO1xuICAgICAgICBsZXQgdmFyaWFibGVOYW1lcyA9IHBhcmFtcy52YWx1ZShcInZhcmlhYmxlc1wiKS5tYXAodj0+di5uYW1lKTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChcInZhcmlhYmxlTmFtZXNcIiwgdmFyaWFibGVOYW1lcyk7XG4gICAgICAgIGxldCBkYXRhID0gc3RlcEV4ZWN1dGlvbi5nZXREYXRhKCk7XG5cbiAgICAgICAgbGV0IHRyZWVSb290ID0gZGF0YS5nZXRSb290cygpWzBdO1xuICAgICAgICBsZXQgcGF5b2ZmID0gdHJlZVJvb3QuY29tcHV0ZWRWYWx1ZShydWxlTmFtZSwgJ3BheW9mZicpO1xuXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuY2xlYXIoZGF0YSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEV4cHJlc3Npb25zKGRhdGEpO1xuXG4gICAgICAgIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyLnJlY29tcHV0ZVRyZWUodHJlZVJvb3QsIGZhbHNlKTtcblxuXG5cbiAgICAgICAgbGV0IHBvbGljaWVzQ29sbGVjdG9yID0gbmV3IFBvbGljaWVzQ29sbGVjdG9yKHRyZWVSb290LCBydWxlTmFtZSk7XG5cbiAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZXMgPSB7fTtcbiAgICAgICAgZGF0YS5nZXRHbG9iYWxWYXJpYWJsZU5hbWVzKCkuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICAgIGxldCB2ID0gZGF0YS5leHByZXNzaW9uU2NvcGVbbmFtZV07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZXNbbmFtZV0gPSB0aGlzLnRvRmxvYXQodik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkNvbXB1dGF0aW9uRXhjZXB0aW9uKFwiZXJyb3IgY29tcHV0aW5nIGZsb2F0IHZhbHVlIG9mIGEgdmFyaWFibGVcIiwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZigham9iUmVzdWx0LmRhdGEpe1xuICAgICAgICAgICAgam9iUmVzdWx0LmRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdmFyaWFibGVOYW1lczogdmFyaWFibGVOYW1lcyxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWVzOiBkZWZhdWx0VmFsdWVzLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlRXh0ZW50czogdmFyaWFibGVWYWx1ZXMubWFwKHY9Plt2WzBdLCB2W3YubGVuZ3RoLTFdXSksXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBheW9mZjogdGhpcy50b0Zsb2F0KHBheW9mZilbMF0sXG4gICAgICAgICAgICAgICAgcG9saWNpZXM6IHBvbGljaWVzQ29sbGVjdG9yLnBvbGljaWVzLFxuICAgICAgICAgICAgICAgIHJvd3M6IFtdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlVmFsdWVzLmxlbmd0aDtcbiAgICB9XG5cblxuICAgIHJlYWROZXh0Q2h1bmsoc3RlcEV4ZWN1dGlvbiwgc3RhcnRJbmRleCwgY2h1bmtTaXplKSB7XG4gICAgICAgIGxldCB2YXJpYWJsZVZhbHVlcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpLmdldChcInZhcmlhYmxlVmFsdWVzXCIpO1xuICAgICAgICByZXR1cm4gdmFyaWFibGVWYWx1ZXMuc2xpY2Uoc3RhcnRJbmRleCwgc3RhcnRJbmRleCArIGNodW5rU2l6ZSk7XG4gICAgfVxuXG4gICAgcHJvY2Vzc0l0ZW0oc3RlcEV4ZWN1dGlvbiwgaXRlbSwgaXRlbUluZGV4LCBqb2JSZXN1bHQpIHtcbiAgICAgICAgbGV0IHBhcmFtcyA9IHN0ZXBFeGVjdXRpb24uZ2V0Sm9iUGFyYW1ldGVycygpO1xuICAgICAgICBsZXQgcnVsZU5hbWUgPSBwYXJhbXMudmFsdWUoXCJydWxlTmFtZVwiKTtcbiAgICAgICAgbGV0IGZhaWxPbkludmFsaWRUcmVlID0gcGFyYW1zLnZhbHVlKFwiZmFpbE9uSW52YWxpZFRyZWVcIik7XG4gICAgICAgIGxldCBkYXRhID0gc3RlcEV4ZWN1dGlvbi5nZXREYXRhKCk7XG4gICAgICAgIGxldCB0cmVlUm9vdCA9IGRhdGEuZ2V0Um9vdHMoKVswXTtcbiAgICAgICAgbGV0IHZhcmlhYmxlTmFtZXMgPSBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQuZ2V0KFwidmFyaWFibGVOYW1lc1wiKTtcbiAgICAgICAgbGV0IHZhcmlhYmxlTmFtZSA9IHZhcmlhYmxlTmFtZXNbaXRlbUluZGV4XTtcblxuICAgICAgICBsZXQgZXh0ZW50cyA9IGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLm1hcChwb2xpY3k9PntcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWluOiBJbmZpbml0eSxcbiAgICAgICAgICAgICAgICBtYXg6IC1JbmZpbml0eVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgdmFsdWVzID0gam9iUmVzdWx0LmRhdGEucG9saWNpZXMubWFwKHBvbGljeT0+e1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtaW46IG51bGwsXG4gICAgICAgICAgICAgICAgbWF4OiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuY2xlYXIoZGF0YSk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXZhbEdsb2JhbENvZGUoZGF0YSk7XG5cblxuICAgICAgICBpdGVtLmZvckVhY2godmFyaWFibGVWYWx1ZT0+e1xuXG4gICAgICAgICAgICBkYXRhLmV4cHJlc3Npb25TY29wZVt2YXJpYWJsZU5hbWVdID0gdmFyaWFibGVWYWx1ZTtcblxuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvci5ldmFsRXhwcmVzc2lvbnNGb3JOb2RlKGRhdGEsIHRyZWVSb290KTtcbiAgICAgICAgICAgIGxldCB2ciA9IHRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZShkYXRhLmdldEFsbE5vZGVzSW5TdWJ0cmVlKHRyZWVSb290KSk7XG4gICAgICAgICAgICBsZXQgdmFsaWQgPSB2ci5pc1ZhbGlkKCk7XG5cbiAgICAgICAgICAgIGlmKCF2YWxpZCAmJiBmYWlsT25JbnZhbGlkVHJlZSl7XG4gICAgICAgICAgICAgICAgbGV0IGVycm9yRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7fVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZXJyb3JEYXRhLnZhcmlhYmxlc1t2YXJpYWJsZU5hbWVdID0gdmFyaWFibGVWYWx1ZTtcblxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JDb21wdXRhdGlvbkV4Y2VwdGlvbihcImNvbXB1dGF0aW9uc1wiLCBlcnJvckRhdGEpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpvYlJlc3VsdC5kYXRhLnBvbGljaWVzLmZvckVhY2goKHBvbGljeSwgcG9saWN5SW5kZXgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIucmVjb21wdXRlVHJlZSh0cmVlUm9vdCwgZmFsc2UsIHBvbGljeSk7XG4gICAgICAgICAgICAgICAgbGV0IHBheW9mZiA9IHRyZWVSb290LmNvbXB1dGVkVmFsdWUocnVsZU5hbWUsICdwYXlvZmYnKVswXTtcblxuICAgICAgICAgICAgICAgIGlmKHBheW9mZiA8IGV4dGVudHNbcG9saWN5SW5kZXhdLm1pbil7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVudHNbcG9saWN5SW5kZXhdLm1pbiA9IHBheW9mZjtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzW3BvbGljeUluZGV4XS5taW4gPSB2YXJpYWJsZVZhbHVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYocGF5b2ZmID4gZXh0ZW50c1twb2xpY3lJbmRleF0ubWF4KXtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50c1twb2xpY3lJbmRleF0ubWF4ID0gcGF5b2ZmO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbcG9saWN5SW5kZXhdLm1heCA9IHZhcmlhYmxlVmFsdWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFyaWFibGVOYW1lOiB2YXJpYWJsZU5hbWUsXG4gICAgICAgICAgICB2YXJpYWJsZUluZGV4OiBpdGVtSW5kZXgsXG4gICAgICAgICAgICBleHRlbnRzOiBleHRlbnRzLm1hcChlPT5bdGhpcy50b0Zsb2F0KGUubWluKSwgdGhpcy50b0Zsb2F0KGUubWF4KV0pLFxuICAgICAgICAgICAgZXh0ZW50VmFyaWFibGVWYWx1ZXM6IHZhbHVlcy5tYXAodj0+W3RoaXMudG9GbG9hdCh2Lm1pbiksIHRoaXMudG9GbG9hdCh2Lm1heCldKVxuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgd3JpdGVDaHVuayhzdGVwRXhlY3V0aW9uLCBpdGVtcywgam9iUmVzdWx0KSB7XG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnJvd3MucHVzaCguLi5pdGVtcyk7XG4gICAgfVxuXG4gICAgcG9zdFByb2Nlc3Moc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIGpvYlJlc3VsdC5kYXRhLnJvd3Muc29ydCgoYSwgYik9PihiLmV4dGVudHNbMF1bMV0tYi5leHRlbnRzWzBdWzBdKS0oYS5leHRlbnRzWzBdWzFdLWEuZXh0ZW50c1swXVswXSkpXG5cbiAgICB9XG5cblxuICAgIHRvRmxvYXQodil7XG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLnRvRmxvYXQodik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge1N0ZXB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvc3RlcFwiO1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSBcInNkLWV4cHJlc3Npb24tZW5naW5lXCI7XG5pbXBvcnQge0NvbXB1dGF0aW9uc1V0aWxzfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vY29tcHV0YXRpb25zLXV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBQcmVwYXJlVmFyaWFibGVzU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgc3VwZXIoXCJwcmVwYXJlX3ZhcmlhYmxlc1wiLCBqb2JSZXBvc2l0b3J5KTtcbiAgICB9XG5cbiAgICBkb0V4ZWN1dGUoc3RlcEV4ZWN1dGlvbikge1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RlcEV4ZWN1dGlvbi5nZXRKb2JQYXJhbWV0ZXJzKCk7XG4gICAgICAgIHZhciB2YXJpYWJsZXMgPSBwYXJhbXMudmFsdWUoXCJ2YXJpYWJsZXNcIik7XG5cbiAgICAgICAgdmFyIHZhcmlhYmxlVmFsdWVzID0gW107XG4gICAgICAgIHZhcmlhYmxlcy5mb3JFYWNoKHY9PiB7XG4gICAgICAgICAgICB2YXJpYWJsZVZhbHVlcy5wdXNoKENvbXB1dGF0aW9uc1V0aWxzLnNlcXVlbmNlKHYubWluLCB2Lm1heCwgdi5sZW5ndGgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZ2V0Sm9iRXhlY3V0aW9uQ29udGV4dCgpLnB1dChcInZhcmlhYmxlVmFsdWVzXCIsIHZhcmlhYmxlVmFsdWVzKTtcblxuICAgICAgICBzdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb247XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyc30gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyc1wiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJEZWZpbml0aW9uLCBQQVJBTUVURVJfVFlQRX0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9qb2ItcGFyYW1ldGVyLWRlZmluaXRpb25cIjtcbmV4cG9ydCBjbGFzcyBUb3JuYWRvRGlhZ3JhbUpvYlBhcmFtZXRlcnMgZXh0ZW5kcyBKb2JQYXJhbWV0ZXJzIHtcblxuICAgIGluaXREZWZpbml0aW9ucygpIHtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5wdXNoKG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwiaWRcIiwgUEFSQU1FVEVSX1RZUEUuU1RSSU5HLCAxLCAxLCB0cnVlKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcInJ1bGVOYW1lXCIsIFBBUkFNRVRFUl9UWVBFLlNUUklORykpO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zLnB1c2gobmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJ2YXJpYWJsZXNcIiwgW1xuICAgICAgICAgICAgICAgIG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwibmFtZVwiLCBQQVJBTUVURVJfVFlQRS5TVFJJTkcpLFxuICAgICAgICAgICAgICAgIG5ldyBKb2JQYXJhbWV0ZXJEZWZpbml0aW9uKFwibWluXCIsIFBBUkFNRVRFUl9UWVBFLk5VTUJFUiksXG4gICAgICAgICAgICAgICAgbmV3IEpvYlBhcmFtZXRlckRlZmluaXRpb24oXCJtYXhcIiwgUEFSQU1FVEVSX1RZUEUuTlVNQkVSKSxcbiAgICAgICAgICAgICAgICBuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImxlbmd0aFwiLCBQQVJBTUVURVJfVFlQRS5JTlRFR0VSKS5zZXQoXCJzaW5nbGVWYWx1ZVZhbGlkYXRvclwiLCB2ID0+IHYgPj0gMCksXG4gICAgICAgICAgICBdLCAxLCBJbmZpbml0eSwgZmFsc2UsXG4gICAgICAgICAgICB2ID0+IHZbXCJtaW5cIl0gPD0gdltcIm1heFwiXSxcbiAgICAgICAgICAgIHZhbHVlcyA9PiBVdGlscy5pc1VuaXF1ZSh2YWx1ZXMsIHY9PnZbXCJuYW1lXCJdKSAvL1ZhcmlhYmxlIG5hbWVzIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgICAgKSk7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbnMucHVzaChuZXcgSm9iUGFyYW1ldGVyRGVmaW5pdGlvbihcImZhaWxPbkludmFsaWRUcmVlXCIsIFBBUkFNRVRFUl9UWVBFLkJPT0xFQU4pKTtcbiAgICB9XG5cbiAgICBpbml0RGVmYXVsdFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB7XG4gICAgICAgICAgICBpZDogVXRpbHMuZ3VpZCgpLFxuICAgICAgICAgICAgZmFpbE9uSW52YWxpZFRyZWU6IHRydWVcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7U2ltcGxlSm9ifSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL3NpbXBsZS1qb2JcIjtcbmltcG9ydCB7UHJlcGFyZVZhcmlhYmxlc1N0ZXB9IGZyb20gXCIuL3N0ZXBzL3ByZXBhcmUtdmFyaWFibGVzLXN0ZXBcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU3RlcH0gZnJvbSBcIi4vc3RlcHMvY2FsY3VsYXRlLXN0ZXBcIjtcbmltcG9ydCB7VG9ybmFkb0RpYWdyYW1Kb2JQYXJhbWV0ZXJzfSBmcm9tIFwiLi90b3JuYWRvLWRpYWdyYW0tam9iLXBhcmFtZXRlcnNcIjtcblxuZXhwb3J0IGNsYXNzIFRvcm5hZG9EaWFncmFtSm9iIGV4dGVuZHMgU2ltcGxlSm9iIHtcblxuICAgIGNvbnN0cnVjdG9yKGpvYlJlcG9zaXRvcnksIGV4cHJlc3Npb25zRXZhbHVhdG9yLCBvYmplY3RpdmVSdWxlc01hbmFnZXIpIHtcbiAgICAgICAgc3VwZXIoXCJ0b3JuYWRvLWRpYWdyYW1cIiwgam9iUmVwb3NpdG9yeSk7XG4gICAgICAgIHRoaXMuYWRkU3RlcChuZXcgUHJlcGFyZVZhcmlhYmxlc1N0ZXAoam9iUmVwb3NpdG9yeSkpO1xuICAgICAgICB0aGlzLmFkZFN0ZXAobmV3IENhbGN1bGF0ZVN0ZXAoam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikpO1xuICAgIH1cblxuICAgIGNyZWF0ZUpvYlBhcmFtZXRlcnModmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBuZXcgVG9ybmFkb0RpYWdyYW1Kb2JQYXJhbWV0ZXJzKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRGF0YVZhbGlkYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gZGF0YS5nZXRSb290cygpLmxlbmd0aCA9PT0gMVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKlNob3VsZCByZXR1cm4gcHJvZ3Jlc3Mgb2JqZWN0IHdpdGggZmllbGRzOlxuICAgICAqIGN1cnJlbnRcbiAgICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKGV4ZWN1dGlvbil7XG5cbiAgICAgICAgaWYgKGV4ZWN1dGlvbi5zdGVwRXhlY3V0aW9ucy5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgICAgICBjdXJyZW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHNbMV0uZ2V0UHJvZ3Jlc3MoZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zWzFdKTtcbiAgICB9XG5cbiAgICBqb2JSZXN1bHRUb0NzdlJvd3Moam9iUmVzdWx0LCBqb2JQYXJhbWV0ZXJzLCB3aXRoSGVhZGVycz10cnVlKXtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZih3aXRoSGVhZGVycyl7XG4gICAgICAgICAgICByZXN1bHQucHVzaChbJ3ZhcmlhYmxlX25hbWUnLCAnZGVmYXVsdF92YXJfdmFsdWUnLCBcIm1pbl92YXJfdmFsdWVcIiwgXCJtYXhfdmFyX3ZhbHVlXCIsICdkZWZhdWx0X3BheW9mZicsIFwibWluX3BheW9mZlwiLCBcIm1heF9wYXlvZmZcIiwgXCJwb2xpY3lfbm9cIl0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBqb2JSZXN1bHQucm93cy5mb3JFYWNoKChyb3csIGluZGV4KSA9PiB7XG5cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKC4uLnJvdy5leHRlbnRzLm1hcCgoZXh0ZW50LCBwb2xpY3lJbmRleCk9PltcbiAgICAgICAgICAgICAgICByb3cudmFyaWFibGVOYW1lLFxuICAgICAgICAgICAgICAgIGpvYlJlc3VsdC5kZWZhdWx0VmFsdWVzW3Jvdy52YXJpYWJsZU5hbWVdLFxuICAgICAgICAgICAgICAgIHJvdy5leHRlbnRWYXJpYWJsZVZhbHVlc1twb2xpY3lJbmRleF1bMF0sXG4gICAgICAgICAgICAgICAgcm93LmV4dGVudFZhcmlhYmxlVmFsdWVzW3BvbGljeUluZGV4XVsxXSxcbiAgICAgICAgICAgICAgICBqb2JSZXN1bHQuZGVmYXVsdFBheW9mZixcbiAgICAgICAgICAgICAgICBleHRlbnRbMF0sXG4gICAgICAgICAgICAgICAgZXh0ZW50WzFdLFxuICAgICAgICAgICAgICAgIHBvbGljeUluZGV4KzFcbiAgICAgICAgICAgIF0pKTtcblxuICAgICAgICB9KTtcblxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi4vam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtsb2d9IGZyb20gJ3NkLXV0aWxzJ1xuaW1wb3J0IHtTdGVwfSBmcm9tIFwiLi4vc3RlcFwiO1xuaW1wb3J0IHtKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbn0gZnJvbSBcIi4uL2V4Y2VwdGlvbnMvam9iLWludGVycnVwdGVkLWV4Y2VwdGlvblwiO1xuXG4vKmpvYiBzdGVwIHRoYXQgcHJvY2VzcyBiYXRjaCBvZiBpdGVtcyovXG5leHBvcnQgY2xhc3MgQmF0Y2hTdGVwIGV4dGVuZHMgU3RlcCB7XG5cbiAgICBjaHVua1NpemU7XG4gICAgc3RhdGljIENVUlJFTlRfSVRFTV9DT1VOVF9QUk9QID0gJ2JhdGNoX3N0ZXBfY3VycmVudF9pdGVtX2NvdW50JztcbiAgICBzdGF0aWMgVE9UQUxfSVRFTV9DT1VOVF9QUk9QID0gJ2JhdGNoX3N0ZXBfdG90YWxfaXRlbV9jb3VudCc7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBqb2JSZXBvc2l0b3J5LCBjaHVua1NpemUpIHtcbiAgICAgICAgc3VwZXIobmFtZSwgam9iUmVwb3NpdG9yeSk7XG4gICAgICAgIHRoaXMuY2h1bmtTaXplID0gY2h1bmtTaXplO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3Igc3ViY2xhc3NlcyB0byBwZXJmb3JtIHN0ZXAgaW5pdGlhbGl6YXRpb24uIFNob3VsZCByZXR1cm4gdG90YWwgaXRlbSBjb3VudFxuICAgICAqL1xuICAgIGluaXQoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIHRocm93IFwiQmF0Y2hTdGVwLmluaXQgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIGZvciBzdGVwOiBcIiArIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRlbnNpb24gcG9pbnQgZm9yIHN1YmNsYXNzZXMgdG8gcmVhZCBhbmQgcmV0dXJuIGNodW5rIG9mIGl0ZW1zIHRvIHByb2Nlc3NcbiAgICAgKi9cbiAgICByZWFkTmV4dENodW5rKHN0ZXBFeGVjdXRpb24sIHN0YXJ0SW5kZXgsIGNodW5rU2l6ZSwgam9iUmVzdWx0KSB7XG4gICAgICAgIHRocm93IFwiQmF0Y2hTdGVwLnJlYWROZXh0Q2h1bmsgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIGZvciBzdGVwOiBcIiArIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRlbnNpb24gcG9pbnQgZm9yIHN1YmNsYXNzZXMgdG8gcHJvY2VzcyBzaW5nbGUgaXRlbVxuICAgICAqIE11c3QgcmV0dXJuIHByb2Nlc3NlZCBpdGVtIHdoaWNoIHdpbGwgYmUgcGFzc2VkIGluIGEgY2h1bmsgdG8gd3JpdGVDaHVuayBmdW5jdGlvblxuICAgICAqL1xuICAgIHByb2Nlc3NJdGVtKHN0ZXBFeGVjdXRpb24sIGl0ZW0sIGN1cnJlbnRJdGVtQ291bnQsIGpvYlJlc3VsdCkge1xuICAgICAgICB0aHJvdyBcIkJhdGNoU3RlcC5wcm9jZXNzSXRlbSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIHN0ZXA6IFwiICsgdGhpcy5uYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3Igc3ViY2xhc3NlcyB0byB3cml0ZSBjaHVuayBvZiBpdGVtcy4gTm90IHJlcXVpcmVkXG4gICAgICovXG4gICAgd3JpdGVDaHVuayhzdGVwRXhlY3V0aW9uLCBpdGVtcywgam9iUmVzdWx0KSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIHBlcmZvcm0gcG9zdHByb2Nlc3NpbmcgYWZ0ZXIgYWxsIGl0ZW1zIGhhdmUgYmVlbiBwcm9jZXNzZWQuIE5vdCByZXF1aXJlZFxuICAgICAqL1xuICAgIHBvc3RQcm9jZXNzKHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgIH1cblxuXG4gICAgc2V0VG90YWxJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbiwgY291bnQpIHtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChCYXRjaFN0ZXAuVE9UQUxfSVRFTV9DT1VOVF9QUk9QLCBjb3VudCk7XG4gICAgfVxuXG4gICAgZ2V0VG90YWxJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbikge1xuICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LmdldChCYXRjaFN0ZXAuVE9UQUxfSVRFTV9DT1VOVF9QUk9QKTtcbiAgICB9XG5cbiAgICBzZXRDdXJyZW50SXRlbUNvdW50KHN0ZXBFeGVjdXRpb24sIGNvdW50KSB7XG4gICAgICAgIHN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dC5wdXQoQmF0Y2hTdGVwLkNVUlJFTlRfSVRFTV9DT1VOVF9QUk9QLCBjb3VudCk7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uKSB7XG4gICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQuZ2V0KEJhdGNoU3RlcC5DVVJSRU5UX0lURU1fQ09VTlRfUFJPUCkgfHwgMDtcbiAgICB9XG5cblxuICAgIGRvRXhlY3V0ZShzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0KHN0ZXBFeGVjdXRpb24sIGpvYlJlc3VsdClcbiAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgIGxvZy5lcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIGJhdGNoIHN0ZXA6IFwiICsgdGhpcy5uYW1lLCBlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pLnRoZW4odG90YWxJdGVtQ291bnQ9PiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uLCB0aGlzLmdldEN1cnJlbnRJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbikpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VG90YWxJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbiwgdG90YWxJdGVtQ291bnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZU5leHRDaHVuayhzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpXG4gICAgICAgICAgICB9KS5jYXRjaChlPT4ge1xuICAgICAgICAgICAgICAgIGlmKCEoZSBpbnN0YW5jZW9mIEpvYkludGVycnVwdGVkRXhjZXB0aW9uKSl7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkZhaWxlZCB0byBoYW5kbGUgYmF0Y2ggc3RlcDogXCIgKyB0aGlzLm5hbWUsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zdFByb2Nlc3Moc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KVxuICAgICAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJGYWlsZWQgdG8gcG9zdFByb2Nlc3MgYmF0Y2ggc3RlcDogXCIgKyB0aGlzLm5hbWUsIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzID0gSk9CX1NUQVRVUy5DT01QTEVURUQ7XG4gICAgICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIGhhbmRsZU5leHRDaHVuayhzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJdGVtQ291bnQgPSB0aGlzLmdldEN1cnJlbnRJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbik7XG4gICAgICAgIHZhciB0b3RhbEl0ZW1Db3VudCA9IHRoaXMuZ2V0VG90YWxJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbik7XG4gICAgICAgIHZhciBjaHVua1NpemUgPSBNYXRoLm1pbih0aGlzLmNodW5rU2l6ZSwgdG90YWxJdGVtQ291bnQgLSBjdXJyZW50SXRlbUNvdW50KTtcbiAgICAgICAgaWYgKGN1cnJlbnRJdGVtQ291bnQgPj0gdG90YWxJdGVtQ291bnQpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrSm9iRXhlY3V0aW9uRmxhZ3Moc3RlcEV4ZWN1dGlvbikudGhlbigoKT0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHNvbWVvbmUgaXMgdHJ5aW5nIHRvIHN0b3AgdXNcbiAgICAgICAgICAgIGlmIChzdGVwRXhlY3V0aW9uLnRlcm1pbmF0ZU9ubHkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iSW50ZXJydXB0ZWRFeGNlcHRpb24oXCJKb2JFeGVjdXRpb24gaW50ZXJydXB0ZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb25cbiAgICAgICAgfSkudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZE5leHRDaHVuayhzdGVwRXhlY3V0aW9uLCBjdXJyZW50SXRlbUNvdW50LCBjaHVua1NpemUsIGpvYlJlc3VsdClcbiAgICAgICAgICAgIH0pLmNhdGNoKGU9PiB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKFwiRmFpbGVkIHRvIHJlYWQgY2h1bmsgKFwiICsgY3VycmVudEl0ZW1Db3VudCArIFwiLFwiICsgY2h1bmtTaXplICsgXCIpIGluIGJhdGNoIHN0ZXA6IFwiICsgdGhpcy5uYW1lLCBlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLnRoZW4oY2h1bms9PiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NDaHVuayhzdGVwRXhlY3V0aW9uLCBjaHVuaywgY3VycmVudEl0ZW1Db3VudCwgam9iUmVzdWx0KVxuICAgICAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJGYWlsZWQgdG8gcHJvY2VzcyBjaHVuayAoXCIgKyBjdXJyZW50SXRlbUNvdW50ICsgXCIsXCIgKyBjaHVua1NpemUgKyBcIikgaW4gYmF0Y2ggc3RlcDogXCIgKyB0aGlzLm5hbWUsIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS50aGVuKHByb2Nlc3NlZENodW5rPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cml0ZUNodW5rKHN0ZXBFeGVjdXRpb24sIHByb2Nlc3NlZENodW5rLCBqb2JSZXN1bHQpXG4gICAgICAgICAgICB9KS5jYXRjaChlPT4ge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkZhaWxlZCB0byB3cml0ZSBjaHVuayAoXCIgKyBjdXJyZW50SXRlbUNvdW50ICsgXCIsXCIgKyBjaHVua1NpemUgKyBcIikgaW4gYmF0Y2ggc3RlcDogXCIgKyB0aGlzLm5hbWUsIGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS50aGVuKChyZXMpPT4ge1xuICAgICAgICAgICAgY3VycmVudEl0ZW1Db3VudCArPSBjaHVua1NpemU7XG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRJdGVtQ291bnQoc3RlcEV4ZWN1dGlvbiwgY3VycmVudEl0ZW1Db3VudCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVKb2JQcm9ncmVzcyhzdGVwRXhlY3V0aW9uKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZU5leHRDaHVuayhzdGVwRXhlY3V0aW9uLCBqb2JSZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJvY2Vzc0NodW5rKHN0ZXBFeGVjdXRpb24sIGNodW5rLCBjdXJyZW50SXRlbUNvdW50LCBqb2JSZXN1bHQpIHsgLy9UT0RPIHByb21pc2lmeVxuICAgICAgICByZXR1cm4gY2h1bmsubWFwKChpdGVtLCBpKT0+dGhpcy5wcm9jZXNzSXRlbShzdGVwRXhlY3V0aW9uLCBpdGVtLCBjdXJyZW50SXRlbUNvdW50K2ksIGpvYlJlc3VsdCkpO1xuICAgIH1cblxuICAgIC8qU2hvdWxkIHJldHVybiBwcm9ncmVzcyBvYmplY3Qgd2l0aCBmaWVsZHM6XG4gICAgICogY3VycmVudFxuICAgICAqIHRvdGFsICovXG4gICAgZ2V0UHJvZ3Jlc3Moc3RlcEV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3RhbDogdGhpcy5nZXRUb3RhbEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uKSxcbiAgICAgICAgICAgIGN1cnJlbnQ6IHRoaXMuZ2V0Q3VycmVudEl0ZW1Db3VudChzdGVwRXhlY3V0aW9uKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlSm9iUHJvZ3Jlc3Moc3RlcEV4ZWN1dGlvbikge1xuICAgICAgICB2YXIgcHJvZ3Jlc3MgPSB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iQnlOYW1lKHN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlLmpvYk5hbWUpLmdldFByb2dyZXNzKHN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS51cGRhdGVKb2JFeGVjdXRpb25Qcm9ncmVzcyhzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbi5pZCwgcHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGNoZWNrSm9iRXhlY3V0aW9uRmxhZ3Moc3RlcEV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iQnlOYW1lKHN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlLmpvYk5hbWUpLmNoZWNrRXhlY3V0aW9uRmxhZ3Moc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBFeHRlbmRhYmxlRXJyb3Ige1xuICAgIGRhdGE7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZGF0YSkge1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgfVxufVxuIiwiZXhwb3J0ICogZnJvbSAnLi9leHRlbmRhYmxlLWVycm9yJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItZGF0YS1pbnZhbGlkLWV4Y2VwdGlvbidcbmV4cG9ydCAqIGZyb20gJy4vam9iLWV4ZWN1dGlvbi1hbHJlYWR5LXJ1bm5pbmctZXhjZXB0aW9uJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItaW5zdGFuY2UtYWxyZWFkeS1jb21wbGV0ZS1leGNlcHRpb24nXG5leHBvcnQgKiBmcm9tICcuL2pvYi1pbnRlcnJ1cHRlZC1leGNlcHRpb24nXG5leHBvcnQgKiBmcm9tICcuL2pvYi1wYXJhbWV0ZXJzLWludmFsaWQtZXhjZXB0aW9uJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItcmVzdGFydC1leGNlcHRpb24nXG5cblxuIiwiaW1wb3J0IHtFeHRlbmRhYmxlRXJyb3J9IGZyb20gXCIuL2V4dGVuZGFibGUtZXJyb3JcIjtcbmV4cG9ydCBjbGFzcyBKb2JDb21wdXRhdGlvbkV4Y2VwdGlvbiBleHRlbmRzIEV4dGVuZGFibGVFcnJvciB7XG59XG4iLCJpbXBvcnQge0V4dGVuZGFibGVFcnJvcn0gZnJvbSBcIi4vZXh0ZW5kYWJsZS1lcnJvclwiO1xuZXhwb3J0IGNsYXNzIEpvYkRhdGFJbnZhbGlkRXhjZXB0aW9uIGV4dGVuZHMgRXh0ZW5kYWJsZUVycm9yIHtcbn1cbiIsImltcG9ydCB7RXh0ZW5kYWJsZUVycm9yfSBmcm9tIFwiLi9leHRlbmRhYmxlLWVycm9yXCI7XG5leHBvcnQgY2xhc3MgSm9iRXhlY3V0aW9uQWxyZWFkeVJ1bm5pbmdFeGNlcHRpb24gZXh0ZW5kcyBFeHRlbmRhYmxlRXJyb3Ige1xufVxuIiwiaW1wb3J0IHtFeHRlbmRhYmxlRXJyb3J9IGZyb20gXCIuL2V4dGVuZGFibGUtZXJyb3JcIjtcbmV4cG9ydCBjbGFzcyBKb2JJbnN0YW5jZUFscmVhZHlDb21wbGV0ZUV4Y2VwdGlvbiBleHRlbmRzIEV4dGVuZGFibGVFcnJvciB7XG59XG4iLCJpbXBvcnQge0V4dGVuZGFibGVFcnJvcn0gZnJvbSBcIi4vZXh0ZW5kYWJsZS1lcnJvclwiO1xuZXhwb3J0IGNsYXNzIEpvYkludGVycnVwdGVkRXhjZXB0aW9uIGV4dGVuZHMgRXh0ZW5kYWJsZUVycm9yIHtcbn1cbiIsImltcG9ydCB7RXh0ZW5kYWJsZUVycm9yfSBmcm9tIFwiLi9leHRlbmRhYmxlLWVycm9yXCI7XG5leHBvcnQgY2xhc3MgSm9iUGFyYW1ldGVyc0ludmFsaWRFeGNlcHRpb24gZXh0ZW5kcyBFeHRlbmRhYmxlRXJyb3Ige1xufVxuIiwiaW1wb3J0IHtFeHRlbmRhYmxlRXJyb3J9IGZyb20gXCIuL2V4dGVuZGFibGUtZXJyb3JcIjtcbmV4cG9ydCBjbGFzcyBKb2JSZXN0YXJ0RXhjZXB0aW9uIGV4dGVuZHMgRXh0ZW5kYWJsZUVycm9yIHtcbn1cbiIsImltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtEYXRhTW9kZWx9IGZyb20gXCJzZC1tb2RlbFwiO1xuaW1wb3J0IHtTdGVwRXhlY3V0aW9ufSBmcm9tIFwiLi9zdGVwLWV4ZWN1dGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRXhlY3V0aW9uQ29udGV4dCB7XG5cbiAgICBkaXJ0eSA9IGZhbHNlO1xuICAgIGNvbnRleHQgPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IFV0aWxzLmNsb25lKGNvbnRleHQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgcHJldlZhbHVlID0gdGhpcy5jb250ZXh0W2tleV07XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jb250ZXh0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBwcmV2VmFsdWUgPT0gbnVsbCB8fCBwcmV2VmFsdWUgIT0gbnVsbCAmJiBwcmV2VmFsdWUgIT0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jb250ZXh0W2tleV07XG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gcHJldlZhbHVlICE9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHRba2V5XTtcbiAgICB9XG5cbiAgICBjb250YWluc0tleShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgIH1cblxuICAgIHJlbW92ZShrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuY29udGV4dFtrZXldO1xuICAgIH1cblxuICAgIHNldERhdGEoZGF0YSkgeyAvL3NldCBkYXRhIG1vZGVsXG4gICAgICAgIHJldHVybiB0aGlzLnB1dChcImRhdGFcIiwgZGF0YSk7XG4gICAgfVxuXG4gICAgZ2V0RGF0YSgpIHsgLy8gZ2V0IGRhdGEgbW9kZWxcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KFwiZGF0YVwiKTtcbiAgICB9XG5cblxuICAgIGdldERUTyhmaWx0ZXJlZFByb3BlcnRpZXMgPSBbXSwgZGVlcENsb25lID0gdHJ1ZSkge1xuICAgICAgICB2YXIgY2xvbmVNZXRob2QgPSBVdGlscy5jbG9uZURlZXBXaXRoO1xuICAgICAgICBpZiAoIWRlZXBDbG9uZSkge1xuICAgICAgICAgICAgY2xvbmVNZXRob2QgPSBVdGlscy5jbG9uZVdpdGg7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCBkdG8gPSBVdGlscy5hc3NpZ24oe30sIGNsb25lTWV0aG9kKHRoaXMsICh2YWx1ZSwga2V5LCBvYmplY3QsIHN0YWNrKT0+IHtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJlZFByb3BlcnRpZXMuaW5kZXhPZihrZXkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0YU1vZGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmdldERUTygpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHZhbHVlICYmIHZhbHVlLiRPYmplY3RXaXRoSWRBbmRFZGl0YWJsZUZpZWxkcyAmJiB2YWx1ZS5pZCAmJiB0aGlzLmdldERhdGEoKS5maW5kQnlJZCh2YWx1ZS5pZCkpe1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICckT2JqZWN0V2l0aElkQW5kRWRpdGFibGVGaWVsZHMnOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0aWxzLmdldEVycm9yRFRPKHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmV0dXJuIGR0b1xuICAgIH1cblxufVxuIiwiaW1wb3J0ICogYXMgZXhjZXB0aW9ucyBmcm9tICcuL2V4Y2VwdGlvbnMnXG5cbmV4cG9ydCB7ZXhjZXB0aW9uc31cbmV4cG9ydCAqIGZyb20gJy4vZXhlY3V0aW9uLWNvbnRleHQnXG5leHBvcnQgKiBmcm9tICcuL2pvYidcbmV4cG9ydCAqIGZyb20gJy4vam9iLWV4ZWN1dGlvbidcbmV4cG9ydCAqIGZyb20gJy4vam9iLWV4ZWN1dGlvbi1mbGFnJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItZXhlY3V0aW9uLWxpc3RlbmVyJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItaW5zdGFuY2UnXG5leHBvcnQgKiBmcm9tICcuL2pvYi1rZXktZ2VuZXJhdG9yJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2ItbGF1bmNoZXInXG5leHBvcnQgKiBmcm9tICcuL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvbidcbmV4cG9ydCAqIGZyb20gJy4vam9iLXBhcmFtZXRlcnMnXG5leHBvcnQgKiBmcm9tICcuL2pvYi1zdGF0dXMnXG5leHBvcnQgKiBmcm9tICcuL3NpbXBsZS1qb2InXG5leHBvcnQgKiBmcm9tICcuL3N0ZXAnXG5leHBvcnQgKiBmcm9tICcuL3N0ZXAtZXhlY3V0aW9uJ1xuZXhwb3J0ICogZnJvbSAnLi9zdGVwLWV4ZWN1dGlvbi1saXN0ZW5lcidcblxuXG5cblxuIiwiZXhwb3J0IGNvbnN0IEpPQl9FWEVDVVRJT05fRkxBRyA9IHtcbiAgICBTVE9QOiAnU1RPUCdcbn07XG4iLCJleHBvcnQgY2xhc3MgSm9iRXhlY3V0aW9uTGlzdGVuZXIge1xuICAgIC8qQ2FsbGVkIGJlZm9yZSBhIGpvYiBleGVjdXRlcyovXG4gICAgYmVmb3JlSm9iKGpvYkV4ZWN1dGlvbikge1xuXG4gICAgfVxuXG4gICAgLypDYWxsZWQgYWZ0ZXIgY29tcGxldGlvbiBvZiBhIGpvYi4gQ2FsbGVkIGFmdGVyIGJvdGggc3VjY2Vzc2Z1bCBhbmQgZmFpbGVkIGV4ZWN1dGlvbnMqL1xuICAgIGFmdGVySm9iKGpvYkV4ZWN1dGlvbikge1xuXG4gICAgfVxufVxuIiwiaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1N0ZXBFeGVjdXRpb259IGZyb20gXCIuL3N0ZXAtZXhlY3V0aW9uXCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcblxuLypkb21haW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZXhlY3V0aW9uIG9mIGEgam9iLiovXG5leHBvcnQgY2xhc3MgSm9iRXhlY3V0aW9uIHtcbiAgICBpZDtcbiAgICBqb2JJbnN0YW5jZTtcbiAgICBqb2JQYXJhbWV0ZXJzO1xuICAgIHN0ZXBFeGVjdXRpb25zID0gW107XG4gICAgc3RhdHVzID0gSk9CX1NUQVRVUy5TVEFSVElORztcbiAgICBleGl0U3RhdHVzID0gSk9CX1NUQVRVUy5VTktOT1dOO1xuICAgIGV4ZWN1dGlvbkNvbnRleHQgPSBuZXcgRXhlY3V0aW9uQ29udGV4dCgpO1xuXG4gICAgc3RhcnRUaW1lID0gbnVsbDtcbiAgICBjcmVhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICBlbmRUaW1lID0gbnVsbDtcbiAgICBsYXN0VXBkYXRlZCA9IG51bGw7XG5cbiAgICBmYWlsdXJlRXhjZXB0aW9ucyA9IFtdO1xuXG4gICAgY29uc3RydWN0b3Ioam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMsIGlkKSB7XG4gICAgICAgIGlmKGlkPT09bnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBVdGlscy5ndWlkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5qb2JJbnN0YW5jZSA9IGpvYkluc3RhbmNlO1xuICAgICAgICB0aGlzLmpvYlBhcmFtZXRlcnMgPSBqb2JQYXJhbWV0ZXJzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgc3RlcCBleGVjdXRpb24gd2l0aCB0aGUgY3VycmVudCBqb2IgZXhlY3V0aW9uLlxuICAgICAqIEBwYXJhbSBzdGVwTmFtZSB0aGUgbmFtZSBvZiB0aGUgc3RlcCB0aGUgbmV3IGV4ZWN1dGlvbiBpcyBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKi9cbiAgICBjcmVhdGVTdGVwRXhlY3V0aW9uKHN0ZXBOYW1lKSB7XG4gICAgICAgIHZhciBzdGVwRXhlY3V0aW9uID0gbmV3IFN0ZXBFeGVjdXRpb24oc3RlcE5hbWUsIHRoaXMpO1xuICAgICAgICB0aGlzLnN0ZXBFeGVjdXRpb25zLnB1c2goc3RlcEV4ZWN1dGlvbik7XG4gICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgIH1cblxuICAgIGlzUnVubmluZygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmVuZFRpbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGlzIEpvYkV4ZWN1dGlvbiBoYXMgYmVlbiBzaWduYWxsZWQgdG9cbiAgICAgKiBzdG9wLlxuICAgICAqL1xuICAgIGlzU3RvcHBpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gSk9CX1NUQVRVUy5TVE9QUElORztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaWduYWwgdGhlIEpvYkV4ZWN1dGlvbiB0byBzdG9wLlxuICAgICAqL1xuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuc3RlcEV4ZWN1dGlvbnMuZm9yRWFjaChzZT0+IHtcbiAgICAgICAgICAgIHNlLnRlcm1pbmF0ZU9ubHkgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBKT0JfU1RBVFVTLlNUT1BQSU5HO1xuICAgIH1cblxuICAgIGdldERhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGlvbkNvbnRleHQuZ2V0RGF0YSgpO1xuICAgIH1cblxuICAgIGdldERUTyhmaWx0ZXJlZFByb3BlcnRpZXMgPSBbXSwgZGVlcENsb25lID0gdHJ1ZSkge1xuICAgICAgICB2YXIgY2xvbmVNZXRob2QgPSBVdGlscy5jbG9uZURlZXBXaXRoO1xuICAgICAgICBpZiAoIWRlZXBDbG9uZSkge1xuICAgICAgICAgICAgY2xvbmVNZXRob2QgPSBVdGlscy5jbG9uZVdpdGg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVXRpbHMuYXNzaWduKHt9LCBjbG9uZU1ldGhvZCh0aGlzLCAodmFsdWUsIGtleSwgb2JqZWN0LCBzdGFjayk9PiB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRQcm9wZXJ0aWVzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChbXCJqb2JQYXJhbWV0ZXJzXCIsIFwiZXhlY3V0aW9uQ29udGV4dFwiXS5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5nZXREVE8oKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVXRpbHMuZ2V0RXJyb3JEVE8odmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTdGVwRXhlY3V0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmdldERUTyhbXCJqb2JFeGVjdXRpb25cIl0sIGRlZXBDbG9uZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgfVxufVxuIiwiLyogb2JqZWN0IHJlcHJlc2VudGluZyBhIHVuaXF1ZWx5IGlkZW50aWZpYWJsZSBqb2IgcnVuLiBKb2JJbnN0YW5jZSBjYW4gYmUgcmVzdGFydGVkIG11bHRpcGxlIHRpbWVzIGluIGNhc2Ugb2YgZXhlY3V0aW9uIGZhaWx1cmUgYW5kIGl0J3MgbGlmZWN5Y2xlIGVuZHMgd2l0aCBmaXJzdCBzdWNjZXNzZnVsIGV4ZWN1dGlvbiovXG5leHBvcnQgY2xhc3MgSm9iSW5zdGFuY2V7XG5cbiAgICBpZDtcbiAgICBqb2JOYW1lO1xuICAgIGNvbnN0cnVjdG9yKGlkLCBqb2JOYW1lKXtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmpvYk5hbWUgPSBqb2JOYW1lO1xuICAgIH1cblxufVxuIiwiXG5leHBvcnQgY2xhc3MgSm9iS2V5R2VuZXJhdG9yIHtcbiAgICAvKk1ldGhvZCB0byBnZW5lcmF0ZSB0aGUgdW5pcXVlIGtleSB1c2VkIHRvIGlkZW50aWZ5IGEgam9iIGluc3RhbmNlLiovXG4gICAgc3RhdGljIGdlbmVyYXRlS2V5KGpvYlBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGpvYlBhcmFtZXRlcnMuZGVmaW5pdGlvbnMuZm9yRWFjaCgoZCwgaSk9PiB7XG4gICAgICAgICAgICBpZihkLmlkZW50aWZ5aW5nKXtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gZC5uYW1lICsgXCI9XCIgKyBqb2JQYXJhbWV0ZXJzLnZhbHVlc1tkLm5hbWVdICsgXCI7XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7Sm9iUmVzdGFydEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItcmVzdGFydC1leGNlcHRpb25cIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4vam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtVdGlscywgbG9nfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyc0ludmFsaWRFeGNlcHRpb259IGZyb20gXCIuL2V4Y2VwdGlvbnMvam9iLXBhcmFtZXRlcnMtaW52YWxpZC1leGNlcHRpb25cIjtcbmltcG9ydCB7Sm9iRGF0YUludmFsaWRFeGNlcHRpb259IGZyb20gXCIuL2V4Y2VwdGlvbnMvam9iLWRhdGEtaW52YWxpZC1leGNlcHRpb25cIjtcblxuZXhwb3J0IGNsYXNzIEpvYkxhdW5jaGVyIHtcblxuICAgIGpvYlJlcG9zaXRvcnk7XG4gICAgam9iV29ya2VyO1xuXG4gICAgY29uc3RydWN0b3Ioam9iUmVwb3NpdG9yeSwgam9iV29ya2VyLCBkYXRhTW9kZWxTZXJpYWxpemVyKSB7XG4gICAgICAgIHRoaXMuam9iUmVwb3NpdG9yeSA9IGpvYlJlcG9zaXRvcnk7XG4gICAgICAgIHRoaXMuam9iV29ya2VyID0gam9iV29ya2VyO1xuICAgICAgICB0aGlzLmRhdGFNb2RlbFNlcmlhbGl6ZXIgPSBkYXRhTW9kZWxTZXJpYWxpemVyO1xuICAgIH1cblxuXG4gICAgcnVuKGpvYk9yTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcywgZGF0YSwgcmVzb2x2ZVByb21pc2VBZnRlckpvYklzTGF1bmNoZWQgPSB0cnVlKSB7XG4gICAgICAgIHZhciBqb2I7XG4gICAgICAgIHZhciBqb2JQYXJhbWV0ZXJzO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nKGpvYk9yTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBqb2IgPSB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iQnlOYW1lKGpvYk9yTmFtZSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgam9iID0gam9iT3JOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFqb2IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iUmVzdGFydEV4Y2VwdGlvbihcIk5vIHN1Y2ggam9iOiBcIiArIGpvYk9yTmFtZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpvYlBhcmFtZXRlcnMgPSBqb2IuY3JlYXRlSm9iUGFyYW1ldGVycyhqb2JQYXJhbWV0ZXJzVmFsdWVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGUoam9iLCBqb2JQYXJhbWV0ZXJzLCBkYXRhKTtcbiAgICAgICAgfSkudGhlbih2YWxpZD0+e1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5jcmVhdGVKb2JFeGVjdXRpb24oam9iLm5hbWUsIGpvYlBhcmFtZXRlcnMsIGRhdGEpLnRoZW4oam9iRXhlY3V0aW9uPT57XG5cblxuICAgICAgICAgICAgICAgIGlmKHRoaXMuam9iV29ya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiSm9iOiBbXCIgKyBqb2IubmFtZSArIFwiXSBleGVjdXRpb24gW1wiK2pvYkV4ZWN1dGlvbi5pZCtcIl0gZGVsZWdhdGVkIHRvIHdvcmtlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qb2JXb3JrZXIuZXhlY3V0ZUpvYihqb2JFeGVjdXRpb24uaWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gam9iRXhlY3V0aW9uO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBleGVjdXRpb25Qcm9taXNlID0gdGhpcy5fZXhlY3V0ZShqb2IsIGpvYkV4ZWN1dGlvbik7XG4gICAgICAgICAgICAgICAgaWYocmVzb2x2ZVByb21pc2VBZnRlckpvYklzTGF1bmNoZWQpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gam9iRXhlY3V0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uUHJvbWlzZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdmFsaWRhdGUoam9iLCBqb2JQYXJhbWV0ZXJzLCBkYXRhKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRMYXN0Sm9iRXhlY3V0aW9uKGpvYi5uYW1lLCBqb2JQYXJhbWV0ZXJzKS50aGVuKGxhc3RFeGVjdXRpb249PntcbiAgICAgICAgICAgIGlmIChsYXN0RXhlY3V0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWpvYi5pc1Jlc3RhcnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JSZXN0YXJ0RXhjZXB0aW9uKFwiSm9iSW5zdGFuY2UgYWxyZWFkeSBleGlzdHMgYW5kIGlzIG5vdCByZXN0YXJ0YWJsZVwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXN0RXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmZvckVhY2goZXhlY3V0aW9uPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhlY3V0aW9uLnN0YXR1cyA9PSBKT0JfU1RBVFVTLlVOS05PV04pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JSZXN0YXJ0RXhjZXB0aW9uKFwiU3RlcCBbXCIgKyBleGVjdXRpb24uc3RlcE5hbWUgKyBcIl0gaXMgb2Ygc3RhdHVzIFVOS05PV05cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqb2Iuam9iUGFyYW1ldGVyc1ZhbGlkYXRvciAmJiAham9iLmpvYlBhcmFtZXRlcnNWYWxpZGF0b3IudmFsaWRhdGUoam9iUGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iUGFyYW1ldGVyc0ludmFsaWRFeGNlcHRpb24oXCJJbnZhbGlkIGpvYiBwYXJhbWV0ZXJzIGluIGpvYkxhdW5jaGVyLnJ1biBmb3Igam9iOiBcIitqb2IubmFtZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoam9iLmpvYkRhdGFWYWxpZGF0b3IgJiYgIWpvYi5qb2JEYXRhVmFsaWRhdG9yLnZhbGlkYXRlKGRhdGEpKXtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSm9iRGF0YUludmFsaWRFeGNlcHRpb24oXCJJbnZhbGlkIGpvYiBkYXRhIGluIGpvYkxhdW5jaGVyLnJ1biBmb3Igam9iOiBcIitqb2IubmFtZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqRXhlY3V0ZSBwcmV2aW91c2x5IGNyZWF0ZWQgam9iIGV4ZWN1dGlvbiovXG4gICAgZXhlY3V0ZShqb2JFeGVjdXRpb25PcklkKXtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+e1xuICAgICAgICAgICAgaWYoVXRpbHMuaXNTdHJpbmcoam9iRXhlY3V0aW9uT3JJZCkpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iRXhlY3V0aW9uQnlJZChqb2JFeGVjdXRpb25PcklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBqb2JFeGVjdXRpb25PcklkO1xuICAgICAgICB9KS50aGVuKGpvYkV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgaWYoIWpvYkV4ZWN1dGlvbil7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYlJlc3RhcnRFeGNlcHRpb24oXCJKb2JFeGVjdXRpb24gW1wiICsgam9iRXhlY3V0aW9uT3JJZCArIFwiXSBpcyBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChqb2JFeGVjdXRpb24uc3RhdHVzICE9PSBKT0JfU1RBVFVTLlNUQVJUSU5HKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYlJlc3RhcnRFeGNlcHRpb24oXCJKb2JFeGVjdXRpb24gW1wiICsgam9iRXhlY3V0aW9uLmlkICsgXCJdIGFscmVhZHkgc3RhcnRlZFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGpvYk5hbWUgPSBqb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZTtcbiAgICAgICAgICAgIHZhciBqb2IgPSB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iQnlOYW1lKGpvYk5hbWUpO1xuICAgICAgICAgICAgaWYoIWpvYil7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYlJlc3RhcnRFeGNlcHRpb24oXCJObyBzdWNoIGpvYjogXCIgKyBqb2JOYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuICB0aGlzLl9leGVjdXRlKGpvYiwgam9iRXhlY3V0aW9uKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBfZXhlY3V0ZShqb2IsIGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHZhciBqb2JOYW1lID0gam9iLm5hbWU7XG4gICAgICAgIGxvZy5pbmZvKFwiSm9iOiBbXCIgKyBqb2JOYW1lICsgXCJdIGxhdW5jaGVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOiBbXCIgKyBqb2JFeGVjdXRpb24uam9iUGFyYW1ldGVycyArIFwiXVwiLCBqb2JFeGVjdXRpb24uZ2V0RGF0YSgpKTtcbiAgICAgICAgcmV0dXJuIGpvYi5leGVjdXRlKGpvYkV4ZWN1dGlvbikudGhlbihqb2JFeGVjdXRpb249PntcbiAgICAgICAgICAgIGxvZy5pbmZvKFwiSm9iOiBbXCIgKyBqb2JOYW1lICsgXCJdIGNvbXBsZXRlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczogW1wiICsgam9iRXhlY3V0aW9uLmpvYlBhcmFtZXRlcnMgKyBcIl0gYW5kIHRoZSBmb2xsb3dpbmcgc3RhdHVzOiBbXCIgKyBqb2JFeGVjdXRpb24uc3RhdHVzICsgXCJdXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgfSkuY2F0Y2goZSA9PntcbiAgICAgICAgICAgIGxvZy5lcnJvcihcIkpvYjogW1wiICsgam9iTmFtZSArIFwiXSBmYWlsZWQgdW5leHBlY3RlZGx5IGFuZCBmYXRhbGx5IHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOiBbXCIgKyBqb2JFeGVjdXRpb24uam9iUGFyYW1ldGVycyArIFwiXVwiLCBlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gXCJzZC1leHByZXNzaW9uLWVuZ2luZVwiO1xuXG5leHBvcnQgY29uc3QgUEFSQU1FVEVSX1RZUEUgPSB7XG4gICAgU1RSSU5HOiAnU1RSSU5HJyxcbiAgICBEQVRFOiAnREFURScsXG4gICAgSU5URUdFUjogJ0lOVEVHRVInLFxuICAgIE5VTUJFUjogJ0ZMT0FUJyxcbiAgICBCT09MRUFOOiAnQk9PTEVBTicsXG4gICAgTlVNQkVSX0VYUFJFU1NJT046ICdOVU1CRVJfRVhQUkVTU0lPTicsXG4gICAgQ09NUE9TSVRFOiAnQ09NUE9TSVRFJyAvL2NvbXBvc2l0ZSBwYXJhbWV0ZXIgd2l0aCBuZXN0ZWQgc3VicGFyYW1ldGVyc1xufTtcblxuZXhwb3J0IGNsYXNzIEpvYlBhcmFtZXRlckRlZmluaXRpb24ge1xuICAgIG5hbWU7XG4gICAgdHlwZTtcbiAgICBuZXN0ZWRQYXJhbWV0ZXJzID0gW107XG4gICAgbWluT2NjdXJzO1xuICAgIG1heE9jY3VycztcbiAgICByZXF1aXJlZCA9IHRydWU7XG5cbiAgICBpZGVudGlmeWluZztcbiAgICB2YWxpZGF0b3I7XG4gICAgc2luZ2xlVmFsdWVWYWxpZGF0b3I7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCB0eXBlT3JOZXN0ZWRQYXJhbWV0ZXJzRGVmaW5pdGlvbnMsIG1pbk9jY3VycyA9IDEsIG1heE9jY3VycyA9IDEsIGlkZW50aWZ5aW5nID0gZmFsc2UsIHNpbmdsZVZhbHVlVmFsaWRhdG9yID0gbnVsbCwgdmFsaWRhdG9yID0gbnVsbCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICBpZiAoVXRpbHMuaXNBcnJheSh0eXBlT3JOZXN0ZWRQYXJhbWV0ZXJzRGVmaW5pdGlvbnMpKSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBQQVJBTUVURVJfVFlQRS5DT01QT1NJVEU7XG4gICAgICAgICAgICB0aGlzLm5lc3RlZFBhcmFtZXRlcnMgPSB0eXBlT3JOZXN0ZWRQYXJhbWV0ZXJzRGVmaW5pdGlvbnM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlT3JOZXN0ZWRQYXJhbWV0ZXJzRGVmaW5pdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWxpZGF0b3IgPSB2YWxpZGF0b3I7XG4gICAgICAgIHRoaXMuc2luZ2xlVmFsdWVWYWxpZGF0b3IgPSBzaW5nbGVWYWx1ZVZhbGlkYXRvcjtcbiAgICAgICAgdGhpcy5pZGVudGlmeWluZyA9IGlkZW50aWZ5aW5nO1xuICAgICAgICB0aGlzLm1pbk9jY3VycyA9IG1pbk9jY3VycztcbiAgICAgICAgdGhpcy5tYXhPY2N1cnMgPSBtYXhPY2N1cnM7XG4gICAgfVxuXG4gICAgc2V0KGtleSwgdmFsKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IHZhbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFsaWRhdGUodmFsdWUsIGFsbFZhbHVlcykge1xuICAgICAgICB2YXIgaXNBcnJheSA9IFV0aWxzLmlzQXJyYXkodmFsdWUpO1xuXG4gICAgICAgIGlmICh0aGlzLm1heE9jY3VycyA+IDEgJiYgIWlzQXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVTaW5nbGVWYWx1ZSh2YWx1ZSwgYWxsVmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8IHRoaXMubWluT2NjdXJzIHx8IHZhbHVlLmxlbmd0aCA+IHRoaXMubWF4T2NjdXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbHVlLmV2ZXJ5KHY9PnRoaXMudmFsaWRhdGVTaW5nbGVWYWx1ZSh2LCB2YWx1ZSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy52YWxpZGF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRvcih2YWx1ZSwgYWxsVmFsdWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHN0YXRpYyBjb21wdXRlTnVtYmVyRXhwcmVzc2lvbih2YWwpe1xuICAgICAgICBsZXQgcGFyc2VkID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgICAgICBpZihwYXJzZWQgPT09IEluZmluaXR5IHx8IHBhcnNlZCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIUV4cHJlc3Npb25FbmdpbmUudmFsaWRhdGUodmFsLCB7fSwgZmFsc2UpKXtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS5ldmFsKHZhbCwgdHJ1ZSlcbiAgICB9XG5cbiAgICAvLyBhbGxWYWx1ZXMgLSBhbGwgdmFsdWVzIG9uIHRoZSBzYW1lIGxldmVsXG4gICAgdmFsaWRhdGVTaW5nbGVWYWx1ZSh2YWx1ZSwgYWxsVmFsdWVzKSB7XG5cbiAgICAgICAgaWYgKCghdmFsdWUgJiYgdmFsdWUgIT09IDAgJiYgdmFsdWUgIT09IGZhbHNlKSAmJiB0aGlzLm1pbk9jY3VycyA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5yZXF1aXJlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFBBUkFNRVRFUl9UWVBFLlNUUklORyA9PT0gdGhpcy50eXBlICYmICFVdGlscy5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoUEFSQU1FVEVSX1RZUEUuREFURSA9PT0gdGhpcy50eXBlICYmICFVdGlscy5pc0RhdGUodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBBUkFNRVRFUl9UWVBFLklOVEVHRVIgPT09IHRoaXMudHlwZSAmJiAhVXRpbHMuaXNJbnQodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBBUkFNRVRFUl9UWVBFLk5VTUJFUiA9PT0gdGhpcy50eXBlICYmICFVdGlscy5pc051bWJlcih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChQQVJBTUVURVJfVFlQRS5CT09MRUFOID09PSB0aGlzLnR5cGUgJiYgIVV0aWxzLmlzQm9vbGVhbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKFBBUkFNRVRFUl9UWVBFLk5VTUJFUl9FWFBSRVNTSU9OID09PSB0aGlzLnR5cGUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gSm9iUGFyYW1ldGVyRGVmaW5pdGlvbi5jb21wdXRlTnVtYmVyRXhwcmVzc2lvbih2YWx1ZSk7XG4gICAgICAgICAgICBpZih2YWx1ZSA9PT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUEFSQU1FVEVSX1RZUEUuQ09NUE9TSVRFID09PSB0aGlzLnR5cGUpIHtcbiAgICAgICAgICAgIGlmICghVXRpbHMuaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLm5lc3RlZFBhcmFtZXRlcnMuZXZlcnkoKG5lc3RlZERlZiwgaSk9Pm5lc3RlZERlZi52YWxpZGF0ZSh2YWx1ZVtuZXN0ZWREZWYubmFtZV0pKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVZhbHVlVmFsaWRhdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaW5nbGVWYWx1ZVZhbGlkYXRvcih2YWx1ZSwgYWxsVmFsdWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhbHVlKHZhbHVlKXtcbiAgICAgICAgaWYoUEFSQU1FVEVSX1RZUEUuTlVNQkVSX0VYUFJFU1NJT04gPT09IHRoaXMudHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIEpvYlBhcmFtZXRlckRlZmluaXRpb24uY29tcHV0ZU51bWJlckV4cHJlc3Npb24odmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7UEFSQU1FVEVSX1RZUEV9IGZyb20gXCIuL2pvYi1wYXJhbWV0ZXItZGVmaW5pdGlvblwiO1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBKb2JQYXJhbWV0ZXJze1xuICAgIGRlZmluaXRpb25zID0gW107XG4gICAgdmFsdWVzPXt9O1xuXG4gICAgY29uc3RydWN0b3IodmFsdWVzKXtcbiAgICAgICAgdGhpcy5pbml0RGVmaW5pdGlvbnMoKTtcbiAgICAgICAgdGhpcy5pbml0RGVmYXVsdFZhbHVlcygpO1xuICAgICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgICAgICBVdGlscy5kZWVwRXh0ZW5kKHRoaXMudmFsdWVzLCB2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdERlZmluaXRpb25zKCl7XG5cbiAgICB9XG5cbiAgICBpbml0RGVmYXVsdFZhbHVlcygpe1xuXG4gICAgfVxuXG4gICAgdmFsaWRhdGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmaW5pdGlvbnMuZXZlcnkoKGRlZiwgaSk9PmRlZi52YWxpZGF0ZSh0aGlzLnZhbHVlc1tkZWYubmFtZV0sIHRoaXMudmFsdWVzKSk7XG4gICAgfVxuXG4gICAgZ2V0RGVmaW5pdGlvbihwYXRoKXtcbiAgICAgICAgdmFyIGRlZnMgPXRoaXMuZGVmaW5pdGlvbnM7XG4gICAgICAgIGxldCBkZWYgPSBudWxsO1xuICAgICAgICBpZighcGF0aC5zcGxpdCgpLmV2ZXJ5KG5hbWU9PntcbiAgICAgICAgICAgICAgICBkZWYgPSBVdGlscy5maW5kKGRlZnMsIGQ9PmQubmFtZSA9PSBuYW1lKTtcbiAgICAgICAgICAgICAgICBpZighZGVmKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZnMgPSBkZWYubmVzdGVkUGFyYW1ldGVycztcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSkpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICB9XG5cbiAgICAvKmdldCBvciBzZXQgdmFsdWUgYnkgcGF0aCovXG4gICAgdmFsdWUocGF0aCwgdmFsdWUpe1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgbGV0IGRlZiA9IHRoaXMuZ2V0RGVmaW5pdGlvbihwYXRoKTtcbiAgICAgICAgICAgIGxldCB2YWwgPSBVdGlscy5nZXQodGhpcy52YWx1ZXMsIHBhdGgsIG51bGwpO1xuICAgICAgICAgICAgaWYoZGVmKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnZhbHVlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIHZhbDtcbiAgICAgICAgfVxuICAgICAgICBVdGlscy5zZXQodGhpcy52YWx1ZXMsIHBhdGgsIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCl7XG4gICAgICAgIHZhciByZXN1bHQgPSBcIkpvYlBhcmFtZXRlcnNbXCI7XG5cbiAgICAgICAgdGhpcy5kZWZpbml0aW9ucy5mb3JFYWNoKChkLCBpKT0+IHtcblxuICAgICAgICAgICAgdmFyIHZhbCA9IHRoaXMudmFsdWVzW2QubmFtZV07XG4gICAgICAgICAgICAvLyBpZihVdGlscy5pc0FycmF5KHZhbCkpe1xuICAgICAgICAgICAgLy8gICAgIHZhciB2YWx1ZXMgPSB2YWw7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vIGlmKFBBUkFNRVRFUl9UWVBFLkNPTVBPU0lURSA9PSBkLnR5cGUpe1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgcmVzdWx0ICs9IGQubmFtZSArIFwiPVwiK3ZhbCArIFwiO1wiO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0Kz1cIl1cIjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXREVE8oKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlczogdGhpcy52YWx1ZXNcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7Sm9iUmVwb3NpdG9yeX0gZnJvbSBcIi4vam9iLXJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IG9wZW5EQiwgZGVsZXRlREIgfSBmcm9tICdpZGInO1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge0pvYkV4ZWN1dGlvbn0gZnJvbSBcIi4uL2pvYi1leGVjdXRpb25cIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2V9IGZyb20gXCIuLi9qb2ItaW5zdGFuY2VcIjtcbmltcG9ydCB7U3RlcEV4ZWN1dGlvbn0gZnJvbSBcIi4uL3N0ZXAtZXhlY3V0aW9uXCI7XG5pbXBvcnQge0V4ZWN1dGlvbkNvbnRleHR9IGZyb20gXCIuLi9leGVjdXRpb24tY29udGV4dFwiO1xuaW1wb3J0IHtEYXRhTW9kZWx9IGZyb20gXCJzZC1tb2RlbFwiO1xuaW1wb3J0IHtsb2d9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JSZXN1bHR9IGZyb20gXCIuLi9qb2ItcmVzdWx0XCI7XG5cbi8qIEluZGV4ZWREQiBqb2IgcmVwb3NpdG9yeSovXG5leHBvcnQgY2xhc3MgSWRiSm9iUmVwb3NpdG9yeSBleHRlbmRzIEpvYlJlcG9zaXRvcnkge1xuXG4gICAgZGJQcm9taXNlO1xuICAgIGpvYkluc3RhbmNlRGFvO1xuICAgIGpvYkV4ZWN1dGlvbkRhbztcbiAgICBzdGVwRXhlY3V0aW9uRGFvO1xuICAgIGpvYlJlc3VsdERhbztcbiAgICBqb2JFeGVjdXRpb25Qcm9ncmVzc0RhbztcbiAgICBqb2JFeGVjdXRpb25GbGFnRGFvO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbnNSZXZpdmVyLCBkYk5hbWUgPSAnc2Qtam9iLXJlcG9zaXRvcnknLCBkZWxldGVEQiA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGJOYW1lID0gZGJOYW1lO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zUmV2aXZlciA9IGV4cHJlc3Npb25zUmV2aXZlcjtcbiAgICAgICAgaWYgKGRlbGV0ZURCKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZURCKCkudGhlbigoKT0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXREQigpXG4gICAgICAgICAgICB9KS5jYXRjaChlPT4ge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXREQigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdERCKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluaXREQigpIHtcbiAgICAgICAgdGhpcy5kYlByb21pc2UgPSBvcGVuREIodGhpcy5kYk5hbWUsIDIsIHtcbiAgICAgICAgICAgIHVwZ3JhZGUoZGIsIG9sZFZlcnNpb24sIG5ld1ZlcnNpb24sIHRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gTm90ZTogd2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LFxuICAgICAgICAgICAgICAgIC8vIHRoZSBmYWxsLXRocm91Z2ggYmVoYXZpb3VyIGlzIHdoYXQgd2Ugd2FudC5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoJ2pvYi1pbnN0YW5jZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2JFeGVjdXRpb25zT1MgPSBkYi5jcmVhdGVPYmplY3RTdG9yZSgnam9iLWV4ZWN1dGlvbnMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbnNPUy5jcmVhdGVJbmRleChcImpvYkluc3RhbmNlSWRcIiwgXCJqb2JJbnN0YW5jZS5pZFwiLCB7dW5pcXVlOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9iRXhlY3V0aW9uc09TLmNyZWF0ZUluZGV4KFwiY3JlYXRlVGltZVwiLCBcImNyZWF0ZVRpbWVcIiwge3VuaXF1ZTogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbnNPUy5jcmVhdGVJbmRleChcInN0YXR1c1wiLCBcInN0YXR1c1wiLCB7dW5pcXVlOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoJ2pvYi1leGVjdXRpb24tcHJvZ3Jlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdqb2ItZXhlY3V0aW9uLWZsYWdzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcEV4ZWN1dGlvbnNPUyA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdzdGVwLWV4ZWN1dGlvbnMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBFeGVjdXRpb25zT1MuY3JlYXRlSW5kZXgoXCJqb2JFeGVjdXRpb25JZFwiLCBcImpvYkV4ZWN1dGlvbklkXCIsIHt1bmlxdWU6IGZhbHNlfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2JSZXN1bHRPUyA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdqb2ItcmVzdWx0cycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgam9iUmVzdWx0T1MuY3JlYXRlSW5kZXgoXCJqb2JJbnN0YW5jZUlkXCIsIFwiam9iSW5zdGFuY2UuaWRcIiwge3VuaXF1ZTogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgnam9iLWluc3RhbmNlcycpLmNyZWF0ZUluZGV4KFwiaWRcIiwgXCJpZFwiLCB7dW5pcXVlOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuam9iSW5zdGFuY2VEYW8gPSBuZXcgT2JqZWN0U3RvcmVEYW8oJ2pvYi1pbnN0YW5jZXMnLCB0aGlzLmRiUHJvbWlzZSk7XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9uRGFvID0gbmV3IE9iamVjdFN0b3JlRGFvKCdqb2ItZXhlY3V0aW9ucycsIHRoaXMuZGJQcm9taXNlKTtcbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25Qcm9ncmVzc0RhbyA9IG5ldyBPYmplY3RTdG9yZURhbygnam9iLWV4ZWN1dGlvbi1wcm9ncmVzcycsIHRoaXMuZGJQcm9taXNlKTtcbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25GbGFnRGFvID0gbmV3IE9iamVjdFN0b3JlRGFvKCdqb2ItZXhlY3V0aW9uLWZsYWdzJywgdGhpcy5kYlByb21pc2UpO1xuICAgICAgICB0aGlzLnN0ZXBFeGVjdXRpb25EYW8gPSBuZXcgT2JqZWN0U3RvcmVEYW8oJ3N0ZXAtZXhlY3V0aW9ucycsIHRoaXMuZGJQcm9taXNlKTtcbiAgICAgICAgdGhpcy5qb2JSZXN1bHREYW8gPSBuZXcgT2JqZWN0U3RvcmVEYW8oJ2pvYi1yZXN1bHRzJywgdGhpcy5kYlByb21pc2UpO1xuICAgIH1cblxuICAgIGRlbGV0ZURCKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihfPT5kZWxldGVEQih0aGlzLmRiTmFtZSkpO1xuICAgIH1cblxuXG4gICAgcmVtb3ZlSm9iSW5zdGFuY2Uoam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMpe1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYkluc3RhbmNlLmpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JJbnN0YW5jZURhby5yZW1vdmUoa2V5KS50aGVuKCgpPT57XG4gICAgICAgICAgICB0aGlzLmZpbmRKb2JFeGVjdXRpb25zKGpvYkluc3RhbmNlLCBmYWxzZSkudGhlbihqb2JFeGVjdXRpb25zPT57ICAvLyAgTm90IHdhaXRpbmcgZm9yIHByb21pc2UgcmVzb2x2ZXNcbiAgICAgICAgICAgICAgICBqb2JFeGVjdXRpb25zLmZvckVhY2godGhpcy5yZW1vdmVKb2JFeGVjdXRpb24sIHRoaXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZShqb2JJbnN0YW5jZSkudGhlbihqb2JSZXN1bHQ9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVKb2JSZXN1bHQoam9iUmVzdWx0KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvbkRhby5yZW1vdmUoam9iRXhlY3V0aW9uLmlkKS50aGVuKCgpPT57XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kU3RlcEV4ZWN1dGlvbnMoam9iRXhlY3V0aW9uLmlkLCBmYWxzZSkudGhlbihzdGVwRXhlY3V0aW9ucz0+eyAgLy8gTm90IHdhaXRpbmcgZm9yIHByb21pc2UgcmVzb2x2ZXNcbiAgICAgICAgICAgICAgICBzdGVwRXhlY3V0aW9ucy5mb3JFYWNoKHRoaXMucmVtb3ZlU3RlcEV4ZWN1dGlvbiwgdGhpcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlU3RlcEV4ZWN1dGlvbihzdGVwRXhlY3V0aW9uKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcEV4ZWN1dGlvbkRhby5yZW1vdmUoc3RlcEV4ZWN1dGlvbi5pZClcbiAgICB9XG5cbiAgICByZW1vdmVKb2JSZXN1bHQoam9iUmVzdWx0KXtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVzdWx0RGFvLnJlbW92ZShqb2JSZXN1bHQuaWQpO1xuICAgIH1cblxuXG5cblxuICAgIGdldEpvYlJlc3VsdChqb2JSZXN1bHRJZCwgcmV2aXZlID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXN1bHREYW8uZ2V0KGpvYlJlc3VsdElkKS50aGVuKGR0byA9PiBkdG8gJiYgcmV2aXZlID8gdGhpcy5yZXZpdmVKb2JSZXN1bHQoZHRvKSA6IGR0byk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZShqb2JJbnN0YW5jZSwgcmV2aXZlID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXN1bHREYW8uZ2V0QnlJbmRleChcImpvYkluc3RhbmNlSWRcIiwgam9iSW5zdGFuY2UuaWQpLnRoZW4oZHRvID0+IGR0byAmJiByZXZpdmUgPyB0aGlzLnJldml2ZUpvYlJlc3VsdChkdG8pIDogZHRvKTtcbiAgICB9XG5cbiAgICBnZXRKb2JSZXN1bHRCeUV4ZWN1dGlvbihqb2JFeGVjdXRpb24sIHJldml2ZSA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZShqb2JFeGVjdXRpb24uam9iSW5zdGFuY2UsIGZhbHNlKS50aGVuKGR0byA9PiBkdG8gJiYgcmV2aXZlID8gdGhpcy5yZXZpdmVKb2JSZXN1bHQoZHRvLCBqb2JFeGVjdXRpb24pIDogZHRvKTtcbiAgICB9XG5cbiAgICBzYXZlSm9iUmVzdWx0KGpvYlJlc3VsdCkge1xuICAgICAgICBsZXQgZHRvID0gam9iUmVzdWx0LmdldERUTygpO1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXN1bHREYW8uc2V0KGpvYlJlc3VsdC5pZCwgZHRvKS50aGVuKHI9PmpvYlJlc3VsdCk7XG4gICAgfVxuXG4gICAgLypyZXR1cm5zIHByb21pc2UqL1xuICAgIGdldEpvYkluc3RhbmNlKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpIHtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2VuZXJhdGVKb2JJbnN0YW5jZUtleShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iSW5zdGFuY2VEYW8uZ2V0KGtleSkudGhlbihkdG89PmR0byA/IHRoaXMucmV2aXZlSm9iSW5zdGFuY2UoZHRvKSA6IGR0byk7XG4gICAgfVxuXG4gICAgLypzaG91bGQgcmV0dXJuIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBzYXZlZCBpbnN0YW5jZSovXG4gICAgc2F2ZUpvYkluc3RhbmNlKGpvYkluc3RhbmNlLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdlbmVyYXRlSm9iSW5zdGFuY2VLZXkoam9iSW5zdGFuY2Uuam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkluc3RhbmNlRGFvLnNldChrZXksIGpvYkluc3RhbmNlKS50aGVuKHI9PmpvYkluc3RhbmNlKTtcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHNhdmVkIGpvYkV4ZWN1dGlvbiovXG4gICAgc2F2ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb24pIHtcbiAgICAgICAgdmFyIGR0byA9IGpvYkV4ZWN1dGlvbi5nZXREVE8oKTtcbiAgICAgICAgdmFyIHN0ZXBFeGVjdXRpb25zRFRPcyA9IGR0by5zdGVwRXhlY3V0aW9ucztcbiAgICAgICAgZHRvLnN0ZXBFeGVjdXRpb25zID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iRXhlY3V0aW9uRGFvLnNldChqb2JFeGVjdXRpb24uaWQsIGR0bykudGhlbihyPT50aGlzLnNhdmVTdGVwRXhlY3V0aW9uc0RUT1Moc3RlcEV4ZWN1dGlvbnNEVE9zKSkudGhlbihyPT5qb2JFeGVjdXRpb24pO1xuICAgIH1cblxuICAgIHVwZGF0ZUpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbklkLCBwcm9ncmVzcykge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb25Qcm9ncmVzc0Rhby5zZXQoam9iRXhlY3V0aW9uSWQsIHByb2dyZXNzKVxuICAgIH1cblxuICAgIGdldEpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvblByb2dyZXNzRGFvLmdldChqb2JFeGVjdXRpb25JZClcbiAgICB9XG5cbiAgICBzYXZlSm9iRXhlY3V0aW9uRmxhZyhqb2JFeGVjdXRpb25JZCwgZmxhZykge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb25GbGFnRGFvLnNldChqb2JFeGVjdXRpb25JZCwgZmxhZylcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvbkZsYWdEYW8uZ2V0KGpvYkV4ZWN1dGlvbklkKVxuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHNhdmVkIHN0ZXBFeGVjdXRpb24qL1xuICAgIHNhdmVTdGVwRXhlY3V0aW9uKHN0ZXBFeGVjdXRpb24pIHtcbiAgICAgICAgdmFyIGR0byA9IHN0ZXBFeGVjdXRpb24uZ2V0RFRPKFtcImpvYkV4ZWN1dGlvblwiXSk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBFeGVjdXRpb25EYW8uc2V0KHN0ZXBFeGVjdXRpb24uaWQsIGR0bykudGhlbihyPT5zdGVwRXhlY3V0aW9uKTtcbiAgICB9XG5cbiAgICBzYXZlU3RlcEV4ZWN1dGlvbnNEVE9TKHN0ZXBFeGVjdXRpb25zLCBzYXZlZEV4ZWN1dGlvbnMgPSBbXSkge1xuICAgICAgICBpZiAoc3RlcEV4ZWN1dGlvbnMubGVuZ3RoIDw9IHNhdmVkRXhlY3V0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2F2ZWRFeGVjdXRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RlcEV4ZWN1dGlvbkRUTyA9IHN0ZXBFeGVjdXRpb25zW3NhdmVkRXhlY3V0aW9ucy5sZW5ndGhdO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwRXhlY3V0aW9uRGFvLnNldChzdGVwRXhlY3V0aW9uRFRPLmlkLCBzdGVwRXhlY3V0aW9uRFRPKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgc2F2ZWRFeGVjdXRpb25zLnB1c2goc3RlcEV4ZWN1dGlvbkRUTyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlU3RlcEV4ZWN1dGlvbnNEVE9TKHN0ZXBFeGVjdXRpb25zLCBzYXZlZEV4ZWN1dGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25CeUlkKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvbkRhby5nZXQoaWQpLnRoZW4oZHRvPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hKb2JFeGVjdXRpb25SZWxhdGlvbnMoZHRvKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZmV0Y2hKb2JFeGVjdXRpb25SZWxhdGlvbnMoam9iRXhlY3V0aW9uRFRPLCByZXZpdmUgPSB0cnVlKSB7XG4gICAgICAgIGlmICgham9iRXhlY3V0aW9uRFRPKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZFN0ZXBFeGVjdXRpb25zKGpvYkV4ZWN1dGlvbkRUTy5pZCwgZmFsc2UpLnRoZW4oc3RlcHM9PiB7XG4gICAgICAgICAgICBqb2JFeGVjdXRpb25EVE8uc3RlcEV4ZWN1dGlvbnMgPSBzdGVwcztcbiAgICAgICAgICAgIGlmICghcmV2aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvYkV4ZWN1dGlvbkRUTztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldml2ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb25EVE8pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZldGNoSm9iRXhlY3V0aW9uc1JlbGF0aW9ucyhqb2JFeGVjdXRpb25EdG9MaXN0LCByZXZpdmUgPSB0cnVlLCBmZXRjaGVkID0gW10pIHtcbiAgICAgICAgaWYgKGpvYkV4ZWN1dGlvbkR0b0xpc3QubGVuZ3RoIDw9IGZldGNoZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZldGNoZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoSm9iRXhlY3V0aW9uUmVsYXRpb25zKGpvYkV4ZWN1dGlvbkR0b0xpc3RbZmV0Y2hlZC5sZW5ndGhdLCByZXZpdmUpLnRoZW4oKGpvYkV4ZWN1dGlvbik9PiB7XG4gICAgICAgICAgICBmZXRjaGVkLnB1c2goam9iRXhlY3V0aW9uKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hKb2JFeGVjdXRpb25zUmVsYXRpb25zKGpvYkV4ZWN1dGlvbkR0b0xpc3QsIHJldml2ZSwgZmV0Y2hlZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZpbmRTdGVwRXhlY3V0aW9ucyhqb2JFeGVjdXRpb25JZCwgcmV2aXZlID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwRXhlY3V0aW9uRGFvLmdldEFsbEJ5SW5kZXgoXCJqb2JFeGVjdXRpb25JZFwiLCBqb2JFeGVjdXRpb25JZCkudGhlbihkdG9zPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXZpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZHRvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkdG9zLm1hcChkdG89PnRoaXMucmV2aXZlU3RlcEV4ZWN1dGlvbihkdG8pKTtcbiAgICAgICAgfSlcbiAgICB9XG5cblxuICAgIC8qZmluZCBqb2IgZXhlY3V0aW9ucyBzb3J0ZWQgYnkgY3JlYXRlVGltZSwgcmV0dXJucyBwcm9taXNlKi9cbiAgICBmaW5kSm9iRXhlY3V0aW9ucyhqb2JJbnN0YW5jZSwgZmV0Y2hSZWxhdGlvbnNBbmRSZXZpdmUgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvbkRhby5nZXRBbGxCeUluZGV4KFwiam9iSW5zdGFuY2VJZFwiLCBqb2JJbnN0YW5jZS5pZCkudGhlbih2YWx1ZXM9PiB7XG4gICAgICAgICAgICB2YXIgc29ydGVkID0gdmFsdWVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5jcmVhdGVUaW1lLmdldFRpbWUoKSAtIGIuY3JlYXRlVGltZS5nZXRUaW1lKClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIWZldGNoUmVsYXRpb25zQW5kUmV2aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvcnRlZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hKb2JFeGVjdXRpb25zUmVsYXRpb25zKHNvcnRlZCwgdHJ1ZSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0TGFzdEpvYkV4ZWN1dGlvbkJ5SW5zdGFuY2Uoam9iSW5zdGFuY2UsIGZldGNoUmVsYXRpb25zQW5kUmV2aXZlID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kSm9iRXhlY3V0aW9ucyhqb2JJbnN0YW5jZSwgZmFsc2UpLnRoZW4oZXhlY3V0aW9ucz0+e1xuICAgICAgICAgICAgbGV0IGV4ZWN1dGlvbiA9IGV4ZWN1dGlvbnNbZXhlY3V0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmICghZmV0Y2hSZWxhdGlvbnNBbmRSZXZpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mZXRjaEpvYkV4ZWN1dGlvblJlbGF0aW9ucyhleGVjdXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRMYXN0U3RlcEV4ZWN1dGlvbihqb2JJbnN0YW5jZSwgc3RlcE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEpvYkV4ZWN1dGlvbnMoam9iSW5zdGFuY2UpLnRoZW4oam9iRXhlY3V0aW9ucz0+IHtcbiAgICAgICAgICAgIHZhciBzdGVwRXhlY3V0aW9ucyA9IFtdO1xuICAgICAgICAgICAgam9iRXhlY3V0aW9ucy5mb3JFYWNoKGpvYkV4ZWN1dGlvbj0+am9iRXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmZpbHRlcihzPT5zLnN0ZXBOYW1lID09PSBzdGVwTmFtZSkuZm9yRWFjaCgocyk9PnN0ZXBFeGVjdXRpb25zLnB1c2gocykpKTtcbiAgICAgICAgICAgIHZhciBsYXRlc3QgPSBudWxsO1xuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbnMuZm9yRWFjaChzPT4ge1xuICAgICAgICAgICAgICAgIGlmIChsYXRlc3QgPT0gbnVsbCB8fCBsYXRlc3Quc3RhcnRUaW1lLmdldFRpbWUoKSA8IHMuc3RhcnRUaW1lLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICBsYXRlc3QgPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGxhdGVzdDtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXZpdmVKb2JJbnN0YW5jZShkdG8pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKb2JJbnN0YW5jZShkdG8uaWQsIGR0by5qb2JOYW1lKTtcbiAgICB9XG5cbiAgICByZXZpdmVFeGVjdXRpb25Db250ZXh0KGR0bykge1xuICAgICAgICBsZXQgZXhlY3V0aW9uQ29udGV4dCA9IG5ldyBFeGVjdXRpb25Db250ZXh0KCk7XG4gICAgICAgIGV4ZWN1dGlvbkNvbnRleHQuY29udGV4dCA9IGR0by5jb250ZXh0O1xuICAgICAgICBsZXQgZGF0YSA9IGV4ZWN1dGlvbkNvbnRleHQuZ2V0RGF0YSgpO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgbGV0IGRhdGFNb2RlbCA9IG5ldyBEYXRhTW9kZWwoKTtcbiAgICAgICAgICAgIGRhdGFNb2RlbC5sb2FkRnJvbURUTyhkYXRhLCB0aGlzLmV4cHJlc3Npb25zUmV2aXZlcik7XG5cbiAgICAgICAgICAgIGV4ZWN1dGlvbkNvbnRleHQuc2V0RGF0YShudWxsKTtcbiAgICAgICAgICAgIHRoaXMucmV2aXZlRnJvbURUTyhleGVjdXRpb25Db250ZXh0LmNvbnRleHQsIGR0by5jb250ZXh0LCBkYXRhTW9kZWwpO1xuXG4gICAgICAgICAgICBleGVjdXRpb25Db250ZXh0LnNldERhdGEoZGF0YU1vZGVsKTtcblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleGVjdXRpb25Db250ZXh0XG4gICAgfVxuXG4gICAgcmV2aXZlRnJvbURUTyh0YXJnZXQsIGR0bywgZGF0YU1vZGVsKSB7XG4gICAgICAgIHJldHVybiBVdGlscy5tZXJnZVdpdGgodGFyZ2V0LCBkdG8sICh2YWx1ZSwgZHRvVmFsdWUsIGtleSk9PiB7XG4gICAgICAgICAgICBpZihkdG9WYWx1ZSAmJiBkdG9WYWx1ZS4kT2JqZWN0V2l0aElkQW5kRWRpdGFibGVGaWVsZHMgJiYgZHRvVmFsdWUuaWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhTW9kZWwuZmluZEJ5SWQoZHRvVmFsdWUuaWQpIHx8IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldml2ZUpvYkV4ZWN1dGlvbihkdG8pIHtcblxuICAgICAgICB2YXIgam9iID0gdGhpcy5nZXRKb2JCeU5hbWUoZHRvLmpvYkluc3RhbmNlLmpvYk5hbWUpO1xuICAgICAgICB2YXIgam9iSW5zdGFuY2UgPSB0aGlzLnJldml2ZUpvYkluc3RhbmNlKGR0by5qb2JJbnN0YW5jZSk7XG4gICAgICAgIHZhciBqb2JQYXJhbWV0ZXJzID0gam9iLmNyZWF0ZUpvYlBhcmFtZXRlcnMoZHRvLmpvYlBhcmFtZXRlcnMudmFsdWVzKTtcbiAgICAgICAgdmFyIGpvYkV4ZWN1dGlvbiA9IG5ldyBKb2JFeGVjdXRpb24oam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMsIGR0by5pZCk7XG4gICAgICAgIHZhciBleGVjdXRpb25Db250ZXh0ID0gdGhpcy5yZXZpdmVFeGVjdXRpb25Db250ZXh0KGR0by5leGVjdXRpb25Db250ZXh0KTtcbiAgICAgICAgcmV0dXJuIFV0aWxzLm1lcmdlV2l0aChqb2JFeGVjdXRpb24sIGR0bywgKG9ialZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSwgc3RhY2spPT4ge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJqb2JJbnN0YW5jZVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvYkluc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJleGVjdXRpb25Db250ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uQ29udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiam9iUGFyYW1ldGVyc1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvYlBhcmFtZXRlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcImpvYkV4ZWN1dGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJzdGVwRXhlY3V0aW9uc1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNyY1ZhbHVlLm1hcChzdGVwRFRPID0+IHRoaXMucmV2aXZlU3RlcEV4ZWN1dGlvbihzdGVwRFRPLCBqb2JFeGVjdXRpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXZpdmVTdGVwRXhlY3V0aW9uKGR0bywgam9iRXhlY3V0aW9uKSB7XG4gICAgICAgIHZhciBzdGVwRXhlY3V0aW9uID0gbmV3IFN0ZXBFeGVjdXRpb24oZHRvLnN0ZXBOYW1lLCBqb2JFeGVjdXRpb24sIGR0by5pZCk7XG4gICAgICAgIHZhciBleGVjdXRpb25Db250ZXh0ID0gdGhpcy5yZXZpdmVFeGVjdXRpb25Db250ZXh0KGR0by5leGVjdXRpb25Db250ZXh0KTtcbiAgICAgICAgcmV0dXJuIFV0aWxzLm1lcmdlV2l0aChzdGVwRXhlY3V0aW9uLCBkdG8sIChvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKT0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiam9iRXhlY3V0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gam9iRXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJleGVjdXRpb25Db250ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uQ29udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXZpdmVKb2JSZXN1bHQoZHRvLCBqb2JFeGVjdXRpb24gPSBudWxsKSB7XG4gICAgICAgIGxldCBqb2IgPSB0aGlzLmdldEpvYkJ5TmFtZShkdG8uam9iSW5zdGFuY2Uuam9iTmFtZSk7XG4gICAgICAgIGxldCBqb2JJbnN0YW5jZSA9IHRoaXMucmV2aXZlSm9iSW5zdGFuY2UoZHRvLmpvYkluc3RhbmNlKTtcblxuICAgICAgICBsZXQgY29udGV4dFByb21pc2U7XG4gICAgICAgIGlmIChqb2JFeGVjdXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgY29udGV4dFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoam9iRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNvbnRleHRQcm9taXNlID0gdGhpcy5nZXRMYXN0Sm9iRXhlY3V0aW9uQnlJbnN0YW5jZShqb2JJbnN0YW5jZSwgZmFsc2UpLnRoZW4oam9iRXhlY3V0aW9uRHRvID0+IHRoaXMucmV2aXZlRXhlY3V0aW9uQ29udGV4dChqb2JFeGVjdXRpb25EdG8uZXhlY3V0aW9uQ29udGV4dCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRleHRQcm9taXNlLnRoZW4oZXhlY3V0aW9uQ29udGV4dCA9PiBqb2IucmV2aXZlUmVzdWx0RGF0YSggdGhpcy5yZXZpdmVGcm9tRFRPKHt9LCBkdG8uZGF0YSwgZXhlY3V0aW9uQ29udGV4dC5nZXREYXRhKCkpLCBleGVjdXRpb25Db250ZXh0KSkudGhlbihkPT5uZXcgSm9iUmVzdWx0KGpvYkluc3RhbmNlLCBkdG8uaWQsIGQpKTtcbiAgICB9XG59XG5cblxuY2xhc3MgT2JqZWN0U3RvcmVEYW8ge1xuXG4gICAgbmFtZTtcbiAgICBkYlByb21pc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBkYlByb21pc2UpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kYlByb21pc2UgPSBkYlByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGIudHJhbnNhY3Rpb24odGhpcy5uYW1lKVxuICAgICAgICAgICAgICAgIC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmdldChrZXkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRBbGxCeUluZGV4KGluZGV4TmFtZSwga2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiUHJvbWlzZS50aGVuKGRiID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkYi50cmFuc2FjdGlvbih0aGlzLm5hbWUpXG4gICAgICAgICAgICAgICAgLm9iamVjdFN0b3JlKHRoaXMubmFtZSkuaW5kZXgoaW5kZXhOYW1lKS5nZXRBbGwoa2V5KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRCeUluZGV4KGluZGV4TmFtZSwga2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiUHJvbWlzZS50aGVuKGRiID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkYi50cmFuc2FjdGlvbih0aGlzLm5hbWUpXG4gICAgICAgICAgICAgICAgLm9iamVjdFN0b3JlKHRoaXMubmFtZSkuaW5kZXgoaW5kZXhOYW1lKS5nZXQoa2V5KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXQoa2V5LCB2YWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGJQcm9taXNlLnRoZW4oZGIgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbih0aGlzLm5hbWUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKHRoaXMubmFtZSkucHV0KHZhbCwga2V5KTtcbiAgICAgICAgICAgIHJldHVybiB0eC5kb25lO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW1vdmUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiUHJvbWlzZS50aGVuKGRiID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24odGhpcy5uYW1lLCAncmVhZHdyaXRlJyk7XG4gICAgICAgICAgICB0eC5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHR4LmRvbmU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYlByb21pc2UudGhlbihkYiA9PiB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKHRoaXMubmFtZSwgJ3JlYWR3cml0ZScpO1xuICAgICAgICAgICAgdHgub2JqZWN0U3RvcmUodGhpcy5uYW1lKS5jbGVhcigpO1xuICAgICAgICAgICAgcmV0dXJuIHR4LmRvbmU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiUHJvbWlzZS50aGVuKGRiID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24odGhpcy5uYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUodGhpcy5uYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZS5nZXRBbGxLZXlzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Sm9iS2V5R2VuZXJhdG9yfSBmcm9tIFwiLi4vam9iLWtleS1nZW5lcmF0b3JcIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2V9IGZyb20gXCIuLi9qb2ItaW5zdGFuY2VcIjtcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuaW1wb3J0IHtKb2JFeGVjdXRpb259IGZyb20gXCIuLi9qb2ItZXhlY3V0aW9uXCI7XG5pbXBvcnQge0pvYkV4ZWN1dGlvbkFscmVhZHlSdW5uaW5nRXhjZXB0aW9ufSBmcm9tIFwiLi4vZXhjZXB0aW9ucy9qb2ItZXhlY3V0aW9uLWFscmVhZHktcnVubmluZy1leGNlcHRpb25cIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4uL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2VBbHJlYWR5Q29tcGxldGVFeGNlcHRpb259IGZyb20gXCIuLi9leGNlcHRpb25zL2pvYi1pbnN0YW5jZS1hbHJlYWR5LWNvbXBsZXRlLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtFeGVjdXRpb25Db250ZXh0fSBmcm9tIFwiLi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7U3RlcEV4ZWN1dGlvbn0gZnJvbSBcIi4uL3N0ZXAtZXhlY3V0aW9uXCI7XG5pbXBvcnQge0RhdGFNb2RlbH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge0pvYlJlc3VsdH0gZnJvbSBcIi4uL2pvYi1yZXN1bHRcIjtcblxuZXhwb3J0IGNsYXNzIEpvYlJlcG9zaXRvcnkge1xuXG4gICAgam9iQnlOYW1lID0ge307XG5cbiAgICByZWdpc3RlckpvYihqb2IpIHtcbiAgICAgICAgdGhpcy5qb2JCeU5hbWVbam9iLm5hbWVdID0gam9iO1xuICAgIH1cblxuICAgIGdldEpvYkJ5TmFtZShuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkJ5TmFtZVtuYW1lXTtcbiAgICB9XG5cblxuICAgIC8qcmV0dXJucyBwcm9taXNlKi9cbiAgICBnZXRKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5IGdldEpvYkluc3RhbmNlIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gc2F2ZWQgaW5zdGFuY2UqL1xuICAgIHNhdmVKb2JJbnN0YW5jZShrZXksIGpvYkluc3RhbmNlKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnNhdmVKb2JJbnN0YW5jZSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25CeUlkKGlkKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LmdldEpvYkV4ZWN1dGlvbkJ5SWQgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgLypzaG91bGQgcmV0dXJuIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBzYXZlZCBqb2JFeGVjdXRpb24qL1xuICAgIHNhdmVKb2JFeGVjdXRpb24oam9iRXhlY3V0aW9uKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnNhdmVKb2JJbnN0YW5jZSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICB1cGRhdGVKb2JFeGVjdXRpb25Qcm9ncmVzcyhqb2JFeGVjdXRpb25JZCwgcHJvZ3Jlc3Mpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuc2F2ZUpvYkluc3RhbmNlIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIGdldEpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LmdldEpvYkV4ZWN1dGlvblByb2dyZXNzIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIHNhdmVKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkLCBmbGFnKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnNhdmVKb2JFeGVjdXRpb25GbGFnIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIGdldEpvYkV4ZWN1dGlvbkZsYWcoam9iRXhlY3V0aW9uSWQpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuZ2V0Sm9iRXhlY3V0aW9uRmxhZyBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHNhdmVkIHN0ZXBFeGVjdXRpb24qL1xuICAgIHNhdmVTdGVwRXhlY3V0aW9uKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuc2F2ZVN0ZXBFeGVjdXRpb24gZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgLypmaW5kIGpvYiBleGVjdXRpb25zIHNvcnRlZCBieSBjcmVhdGVUaW1lLCByZXR1cm5zIHByb21pc2UqL1xuICAgIGZpbmRKb2JFeGVjdXRpb25zKGpvYkluc3RhbmNlKSB7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5maW5kSm9iRXhlY3V0aW9ucyBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBnZXRKb2JSZXN1bHQoam9iUmVzdWx0SWQpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuZ2V0Sm9iUmVzdWx0IGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2Upe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBnZXRKb2JSZXN1bHRCeUV4ZWN1dGlvbihqb2JJbnN0YW5jZSl7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5nZXRKb2JSZXN1bHRCeUV4ZWN1dGlvbiBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQhXCJcbiAgICB9XG5cbiAgICBzYXZlSm9iUmVzdWx0KGpvYlJlc3VsdCkge1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkuc2V0Sm9iUmVzdWx0IGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCFcIlxuICAgIH1cblxuXG4gICAgcmVtb3ZlSm9iSW5zdGFuY2Uoam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMpe1xuICAgICAgICB0aHJvdyBcIkpvYlJlcG9zaXRvcnkucmVtb3ZlSm9iSW5zdGFuY2UgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5yZW1vdmVKb2JFeGVjdXRpb24gZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgcmVtb3ZlU3RlcEV4ZWN1dGlvbihzdGVwRXhlY3V0aW9uKXtcbiAgICAgICAgdGhyb3cgXCJKb2JSZXBvc2l0b3J5LnJlbW92ZVN0ZXBFeGVjdXRpb24gZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iUmVzdWx0KGpvYlJlc3VsdCl7XG4gICAgICAgIHRocm93IFwiSm9iUmVwb3NpdG9yeS5yZW1vdmVKb2JSZXN1bHQgZnVuY3Rpb24gbm90IGltcGxlbWVudGVkIVwiXG4gICAgfVxuXG4gICAgLypDcmVhdGUgYSBuZXcgSm9iSW5zdGFuY2Ugd2l0aCB0aGUgbmFtZSBhbmQgam9iIHBhcmFtZXRlcnMgcHJvdmlkZWQuIHJldHVybiBwcm9taXNlKi9cbiAgICBjcmVhdGVKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBqb2JJbnN0YW5jZSA9IG5ldyBKb2JJbnN0YW5jZShVdGlscy5ndWlkKCksIGpvYk5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5zYXZlSm9iSW5zdGFuY2Uoam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMpO1xuICAgIH1cblxuICAgIC8qQ2hlY2sgaWYgYW4gaW5zdGFuY2Ugb2YgdGhpcyBqb2IgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgcGFyYW1ldGVycyBwcm92aWRlZC4qL1xuICAgIGlzSm9iSW5zdGFuY2VFeGlzdHMoam9iTmFtZSwgam9iUGFyYW1ldGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKS50aGVuKHJlc3VsdCA9PiAhIXJlc3VsdCkuY2F0Y2goZXJyb3I9PmZhbHNlKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpIHtcbiAgICAgICAgcmV0dXJuIGpvYk5hbWUgKyBcInxcIiArIEpvYktleUdlbmVyYXRvci5nZW5lcmF0ZUtleShqb2JQYXJhbWV0ZXJzKTtcbiAgICB9XG5cbiAgICAvKkNyZWF0ZSBhIEpvYkV4ZWN1dGlvbiBmb3IgYSBnaXZlbiAgSm9iIGFuZCBKb2JQYXJhbWV0ZXJzLiBJZiBtYXRjaGluZyBKb2JJbnN0YW5jZSBhbHJlYWR5IGV4aXN0cyxcbiAgICAgKiB0aGUgam9iIG11c3QgYmUgcmVzdGFydGFibGUgYW5kIGl0J3MgbGFzdCBKb2JFeGVjdXRpb24gbXVzdCAqbm90KiBiZVxuICAgICAqIGNvbXBsZXRlZC4gSWYgbWF0Y2hpbmcgSm9iSW5zdGFuY2UgZG9lcyBub3QgZXhpc3QgeWV0IGl0IHdpbGwgYmUgIGNyZWF0ZWQuKi9cblxuICAgIGNyZWF0ZUpvYkV4ZWN1dGlvbihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzLCBkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYkluc3RhbmNlKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpLnRoZW4oam9iSW5zdGFuY2U9PntcbiAgICAgICAgICAgIGlmIChqb2JJbnN0YW5jZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEpvYkV4ZWN1dGlvbnMoam9iSW5zdGFuY2UpLnRoZW4oZXhlY3V0aW9ucz0+e1xuICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25zLmZvckVhY2goZXhlY3V0aW9uPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4ZWN1dGlvbi5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JFeGVjdXRpb25BbHJlYWR5UnVubmluZ0V4Y2VwdGlvbihcIkEgam9iIGV4ZWN1dGlvbiBmb3IgdGhpcyBqb2IgaXMgYWxyZWFkeSBydW5uaW5nOiBcIiArIGpvYkluc3RhbmNlLmpvYk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4ZWN1dGlvbi5zdGF0dXMgPT0gSk9CX1NUQVRVUy5DT01QTEVURUQgfHwgZXhlY3V0aW9uLnN0YXR1cyA9PSBKT0JfU1RBVFVTLkFCQU5ET05FRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JJbnN0YW5jZUFscmVhZHlDb21wbGV0ZUV4Y2VwdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBIGpvYiBpbnN0YW5jZSBhbHJlYWR5IGV4aXN0cyBhbmQgaXMgY29tcGxldGUgZm9yIHBhcmFtZXRlcnM9XCIgKyBqb2JQYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgXCIuICBJZiB5b3Ugd2FudCB0byBydW4gdGhpcyBqb2IgYWdhaW4sIGNoYW5nZSB0aGUgcGFyYW1ldGVycy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBleGVjdXRpb25Db250ZXh0ID0gZXhlY3V0aW9uc1tleGVjdXRpb25zLmxlbmd0aCAtIDFdLmV4ZWN1dGlvbkNvbnRleHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtqb2JJbnN0YW5jZSwgZXhlY3V0aW9uQ29udGV4dF07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbm8gam9iIGZvdW5kLCBjcmVhdGUgb25lXG4gICAgICAgICAgICBqb2JJbnN0YW5jZSA9IHRoaXMuY3JlYXRlSm9iSW5zdGFuY2Uoam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgICAgICB2YXIgZXhlY3V0aW9uQ29udGV4dCA9IG5ldyBFeGVjdXRpb25Db250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgZGF0YU1vZGVsID0gbmV3IERhdGFNb2RlbCgpO1xuICAgICAgICAgICAgZGF0YU1vZGVsLl9zZXROZXdTdGF0ZShkYXRhLmNyZWF0ZVN0YXRlU25hcHNob3QoKSk7XG4gICAgICAgICAgICBleGVjdXRpb25Db250ZXh0LnNldERhdGEoZGF0YU1vZGVsKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbam9iSW5zdGFuY2UsIGV4ZWN1dGlvbkNvbnRleHRdKTtcbiAgICAgICAgfSkudGhlbihpbnN0YW5jZUFuZEV4ZWN1dGlvbkNvbnRleHQ9PntcbiAgICAgICAgICAgIHZhciBqb2JFeGVjdXRpb24gPSBuZXcgSm9iRXhlY3V0aW9uKGluc3RhbmNlQW5kRXhlY3V0aW9uQ29udGV4dFswXSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgICAgICBqb2JFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dCA9IGluc3RhbmNlQW5kRXhlY3V0aW9uQ29udGV4dFsxXTtcbiAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5sYXN0VXBkYXRlZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbik7XG4gICAgICAgIH0pLmNhdGNoKGU9PntcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0TGFzdEpvYkV4ZWN1dGlvbihqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYkluc3RhbmNlKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpLnRoZW4oKGpvYkluc3RhbmNlKT0+e1xuICAgICAgICAgICAgaWYoIWpvYkluc3RhbmNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExhc3RKb2JFeGVjdXRpb25CeUluc3RhbmNlKGpvYkluc3RhbmNlKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXRMYXN0Sm9iRXhlY3V0aW9uQnlJbnN0YW5jZShqb2JJbnN0YW5jZSl7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRKb2JFeGVjdXRpb25zKGpvYkluc3RhbmNlKS50aGVuKGV4ZWN1dGlvbnM9PmV4ZWN1dGlvbnNbZXhlY3V0aW9ucy5sZW5ndGggLTFdKTtcbiAgICB9XG5cbiAgICBnZXRMYXN0U3RlcEV4ZWN1dGlvbihqb2JJbnN0YW5jZSwgc3RlcE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEpvYkV4ZWN1dGlvbnMoam9iSW5zdGFuY2UpLnRoZW4oam9iRXhlY3V0aW9ucz0+e1xuICAgICAgICAgICAgdmFyIHN0ZXBFeGVjdXRpb25zPVtdO1xuICAgICAgICAgICAgam9iRXhlY3V0aW9ucy5mb3JFYWNoKGpvYkV4ZWN1dGlvbj0+am9iRXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmZpbHRlcihzPT5zLnN0ZXBOYW1lID09PSBzdGVwTmFtZSkuZm9yRWFjaCgocyk9PnN0ZXBFeGVjdXRpb25zLnB1c2gocykpKTtcbiAgICAgICAgICAgIHZhciBsYXRlc3QgPSBudWxsO1xuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbnMuZm9yRWFjaChzPT57XG4gICAgICAgICAgICAgICAgaWYgKGxhdGVzdCA9PSBudWxsIHx8IGxhdGVzdC5zdGFydFRpbWUuZ2V0VGltZSgpIDwgcy5zdGFydFRpbWUuZ2V0VGltZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdCA9IHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbGF0ZXN0O1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGFkZFN0ZXBFeGVjdXRpb24oc3RlcEV4ZWN1dGlvbikge1xuICAgICAgICBzdGVwRXhlY3V0aW9uLmxhc3RVcGRhdGVkID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVN0ZXBFeGVjdXRpb24oc3RlcEV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgdXBkYXRlKG8pe1xuICAgICAgICBvLmxhc3RVcGRhdGVkID0gbmV3IERhdGUoKTtcblxuICAgICAgICBpZihvIGluc3RhbmNlb2YgSm9iRXhlY3V0aW9uKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNhdmVKb2JFeGVjdXRpb24obyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihvIGluc3RhbmNlb2YgU3RlcEV4ZWN1dGlvbil7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlU3RlcEV4ZWN1dGlvbihvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IFwiT2JqZWN0IG5vdCB1cGRhdGFibGU6IFwiK29cbiAgICB9XG5cbiAgICByZW1vdmUobyl7XG5cbiAgICAgICAgaWYobyBpbnN0YW5jZW9mIEpvYkV4ZWN1dGlvbil7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVKb2JFeGVjdXRpb24obyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihvIGluc3RhbmNlb2YgU3RlcEV4ZWN1dGlvbil7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVTdGVwRXhlY3V0aW9uKG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYobyBpbnN0YW5jZW9mIEpvYlJlc3VsdCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVKb2JSZXN1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIk9iamVjdCBub3QgcmVtb3ZhYmxlOiBcIitvKTtcbiAgICB9XG5cblxuICAgIHJldml2ZUpvYkluc3RhbmNlKGR0bykge1xuICAgICAgICByZXR1cm4gZHRvO1xuICAgIH1cblxuICAgIHJldml2ZUV4ZWN1dGlvbkNvbnRleHQoZHRvKSB7XG4gICAgICAgIHJldHVybiBkdG87XG4gICAgfVxuXG4gICAgcmV2aXZlSm9iRXhlY3V0aW9uKGR0bykge1xuICAgICAgICByZXR1cm4gZHRvO1xuICAgIH1cblxuICAgIHJldml2ZVN0ZXBFeGVjdXRpb24oZHRvLCBqb2JFeGVjdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGR0bztcbiAgICB9XG59XG4iLCJpbXBvcnQge0pvYlJlcG9zaXRvcnl9IGZyb20gXCIuL2pvYi1yZXBvc2l0b3J5XCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFNpbXBsZUpvYlJlcG9zaXRvcnkgZXh0ZW5kcyBKb2JSZXBvc2l0b3J5e1xuICAgIGpvYkluc3RhbmNlc0J5S2V5ID0ge307XG4gICAgam9iRXhlY3V0aW9ucyA9IFtdO1xuICAgIHN0ZXBFeGVjdXRpb25zID0gW107XG4gICAgZXhlY3V0aW9uUHJvZ3Jlc3MgPSB7fTtcbiAgICBleGVjdXRpb25GbGFncyA9IHt9O1xuICAgIGpvYlJlc3VsdHMgPSBbXTtcblxuICAgIHJlbW92ZUpvYkluc3RhbmNlKGpvYkluc3RhbmNlKXtcbiAgICAgICAgVXRpbHMuZm9yT3duKHRoaXMuam9iSW5zdGFuY2VzQnlLZXksICAoamksIGtleSk9PntcbiAgICAgICAgICAgIGlmKGppPT09am9iSW5zdGFuY2Upe1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmpvYkluc3RhbmNlc0J5S2V5W2tleV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25zLmZpbHRlcihqb2JFeGVjdXRpb249PmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5pZCA9PSBqb2JJbnN0YW5jZS5pZCkucmV2ZXJzZSgpLmZvckVhY2godGhpcy5yZW1vdmVKb2JFeGVjdXRpb24sIHRoaXMpO1xuICAgICAgICB0aGlzLmpvYlJlc3VsdHMuZmlsdGVyKGpvYlJlc3VsdD0+am9iUmVzdWx0LmpvYkluc3RhbmNlLmlkID09IGpvYkluc3RhbmNlLmlkKS5yZXZlcnNlKCkuZm9yRWFjaCh0aGlzLnJlbW92ZUpvYlJlc3VsdCwgdGhpcyk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHJlbW92ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb24pe1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmpvYkV4ZWN1dGlvbnMuaW5kZXhPZihqb2JFeGVjdXRpb24pO1xuICAgICAgICBpZihpbmRleD4tMSkge1xuICAgICAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25zLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RlcEV4ZWN1dGlvbnMuZmlsdGVyKHN0ZXBFeGVjdXRpb249PnN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uLmlkID09PSBqb2JFeGVjdXRpb24uaWQpLnJldmVyc2UoKS5mb3JFYWNoKHRoaXMucmVtb3ZlU3RlcEV4ZWN1dGlvbiwgdGhpcyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZW1vdmVTdGVwRXhlY3V0aW9uKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnN0ZXBFeGVjdXRpb25zLmluZGV4T2Yoc3RlcEV4ZWN1dGlvbik7XG4gICAgICAgIGlmKGluZGV4Pi0xKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXBFeGVjdXRpb25zLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlSm9iUmVzdWx0KGpvYlJlc3VsdCl7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuam9iUmVzdWx0cy5pbmRleE9mKGpvYlJlc3VsdCk7XG4gICAgICAgIGlmKGluZGV4Pi0xKSB7XG4gICAgICAgICAgICB0aGlzLmpvYlJlc3VsdHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cblxuICAgIC8qcmV0dXJucyBwcm9taXNlKi9cbiAgICBnZXRKb2JJbnN0YW5jZShqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdlbmVyYXRlSm9iSW5zdGFuY2VLZXkoam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5qb2JJbnN0YW5jZXNCeUtleVtrZXldKTtcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHNhdmVkIGluc3RhbmNlKi9cbiAgICBzYXZlSm9iSW5zdGFuY2Uoam9iSW5zdGFuY2UsIGpvYlBhcmFtZXRlcnMpe1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYkluc3RhbmNlLmpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpO1xuICAgICAgICB0aGlzLmpvYkluc3RhbmNlc0J5S2V5W2tleV0gPSBqb2JJbnN0YW5jZTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqb2JJbnN0YW5jZSlcbiAgICB9XG5cbiAgICBnZXRKb2JSZXN1bHQoam9iUmVzdWx0SWQpe1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFV0aWxzLmZpbmQodGhpcy5qb2JSZXN1bHRzLCByPT5yLmlkPT09am9iUmVzdWx0SWQpKVxuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2Upe1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFV0aWxzLmZpbmQodGhpcy5qb2JSZXN1bHRzLCByPT5yLmpvYkluc3RhbmNlLmlkPT09am9iSW5zdGFuY2UuaWQpKVxuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5RXhlY3V0aW9uKGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iRXhlY3V0aW9uLmpvYkluc3RhbmNlKTtcbiAgICB9XG5cbiAgICBzYXZlSm9iUmVzdWx0KGpvYlJlc3VsdCkge1xuICAgICAgICB0aGlzLmpvYlJlc3VsdHMucHVzaChqb2JSZXN1bHQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpvYlJlc3VsdCk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRXhlY3V0aW9uQnlJZChpZCl7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoVXRpbHMuZmluZCh0aGlzLmpvYkV4ZWN1dGlvbnMsIGV4PT5leC5pZD09PWlkKSlcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHNhdmVkIGpvYkV4ZWN1dGlvbiovXG4gICAgc2F2ZUpvYkV4ZWN1dGlvbihqb2JFeGVjdXRpb24pe1xuICAgICAgICB0aGlzLmpvYkV4ZWN1dGlvbnMucHVzaChqb2JFeGVjdXRpb24pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpvYkV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgdXBkYXRlSm9iRXhlY3V0aW9uUHJvZ3Jlc3Moam9iRXhlY3V0aW9uSWQsIHByb2dyZXNzKXtcbiAgICAgICAgdGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0gPSBwcm9ncmVzcztcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9ncmVzcylcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25Qcm9ncmVzcyhqb2JFeGVjdXRpb25JZCl7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0pXG4gICAgfVxuXG4gICAgc2F2ZUpvYkV4ZWN1dGlvbkZsYWcoam9iRXhlY3V0aW9uSWQsIGZsYWcpe1xuICAgICAgICB0aGlzLmV4ZWN1dGlvbkZsYWdzW2pvYkV4ZWN1dGlvbklkXSA9IGZsYWc7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmxhZylcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmV4ZWN1dGlvbkZsYWdzW2pvYkV4ZWN1dGlvbklkXSlcbiAgICB9XG5cbiAgICAvKnNob3VsZCByZXR1cm4gcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBzYXZlZCBzdGVwRXhlY3V0aW9uKi9cbiAgICBzYXZlU3RlcEV4ZWN1dGlvbihzdGVwRXhlY3V0aW9uKXtcbiAgICAgICAgdGhpcy5zdGVwRXhlY3V0aW9ucy5wdXNoKHN0ZXBFeGVjdXRpb24pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHN0ZXBFeGVjdXRpb24pO1xuICAgIH1cblxuICAgIC8qZmluZCBqb2IgZXhlY3V0aW9ucyBzb3J0ZWQgYnkgY3JlYXRlVGltZSwgcmV0dXJucyBwcm9taXNlKi9cbiAgICBmaW5kSm9iRXhlY3V0aW9ucyhqb2JJbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuam9iRXhlY3V0aW9ucy5maWx0ZXIoZT0+ZS5qb2JJbnN0YW5jZS5pZCA9PSBqb2JJbnN0YW5jZS5pZCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuY3JlYXRlVGltZS5nZXRUaW1lKCkgLSBiLmNyZWF0ZVRpbWUuZ2V0VGltZSgpXG4gICAgICAgIH0pKTtcbiAgICB9XG5cblxufVxuIiwiaW1wb3J0IHtKb2JSZXBvc2l0b3J5fSBmcm9tIFwiLi9qb2ItcmVwb3NpdG9yeVwiO1xuaW1wb3J0IHtVdGlsc30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQge1NpbXBsZUpvYlJlcG9zaXRvcnl9IGZyb20gXCIuL3NpbXBsZS1qb2ItcmVwb3NpdG9yeVwiO1xuXG5cblxuZXhwb3J0IGNsYXNzIFRpbWVvdXRKb2JSZXBvc2l0b3J5IGV4dGVuZHMgU2ltcGxlSm9iUmVwb3NpdG9yeXtcblxuICAgIGNyZWF0ZVRpbWVvdXRQcm9taXNlKHZhbHVlVG9SZXNvbHZlLCBkZWxheT0xKXtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmU9PntcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlVG9SZXNvbHZlKTtcbiAgICAgICAgICAgIH0sIGRlbGF5KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKnJldHVybnMgcHJvbWlzZSovXG4gICAgZ2V0Sm9iSW5zdGFuY2Uoam9iTmFtZSwgam9iUGFyYW1ldGVycykge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZW5lcmF0ZUpvYkluc3RhbmNlS2V5KGpvYk5hbWUsIGpvYlBhcmFtZXRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZSh0aGlzLmpvYkluc3RhbmNlc0J5S2V5W2tleV0pO1xuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gc2F2ZWQgaW5zdGFuY2UqL1xuICAgIHNhdmVKb2JJbnN0YW5jZShqb2JJbnN0YW5jZSwgam9iUGFyYW1ldGVycyl7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdlbmVyYXRlSm9iSW5zdGFuY2VLZXkoam9iSW5zdGFuY2Uuam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgICAgIHRoaXMuam9iSW5zdGFuY2VzQnlLZXlba2V5XSA9IGpvYkluc3RhbmNlO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZShqb2JJbnN0YW5jZSk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUmVzdWx0KGpvYlJlc3VsdElkKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UoVXRpbHMuZmluZCh0aGlzLmpvYlJlc3VsdHMsIHI9PnIuaWQ9PT1qb2JSZXN1bHRJZCkpO1xuICAgIH1cblxuICAgIGdldEpvYlJlc3VsdEJ5SW5zdGFuY2Uoam9iSW5zdGFuY2Upe1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZShVdGlscy5maW5kKHRoaXMuam9iUmVzdWx0cywgcj0+ci5qb2JJbnN0YW5jZS5pZD09PWpvYkluc3RhbmNlLmlkKSk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUmVzdWx0QnlFeGVjdXRpb24oam9iRXhlY3V0aW9uKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZShqb2JFeGVjdXRpb24uam9iSW5zdGFuY2UpO1xuICAgIH1cblxuICAgIHNhdmVKb2JSZXN1bHQoam9iUmVzdWx0KSB7XG4gICAgICAgIHRoaXMuam9iUmVzdWx0cy5wdXNoKGpvYlJlc3VsdCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKGpvYlJlc3VsdCk7XG4gICAgfVxuXG4gICAgZ2V0Sm9iRXhlY3V0aW9uQnlJZChpZCl7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKFV0aWxzLmZpbmQodGhpcy5qb2JFeGVjdXRpb25zLCBleD0+ZXguaWQ9PT1pZCkpO1xuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gc2F2ZWQgam9iRXhlY3V0aW9uKi9cbiAgICBzYXZlSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbil7XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9ucy5wdXNoKGpvYkV4ZWN1dGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKGpvYkV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgdXBkYXRlSm9iRXhlY3V0aW9uUHJvZ3Jlc3Moam9iRXhlY3V0aW9uSWQsIHByb2dyZXNzKXtcbiAgICAgICAgdGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0gPSBwcm9ncmVzcztcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UocHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGdldEpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UodGhpcy5leGVjdXRpb25Qcm9ncmVzc1tqb2JFeGVjdXRpb25JZF0pO1xuICAgIH1cblxuICAgIHNhdmVKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkLCBmbGFnKXtcbiAgICAgICAgdGhpcy5leGVjdXRpb25GbGFnc1tqb2JFeGVjdXRpb25JZF0gPSBmbGFnO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZShmbGFnKTtcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25GbGFnKGpvYkV4ZWN1dGlvbklkKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGltZW91dFByb21pc2UodGhpcy5leGVjdXRpb25GbGFnc1tqb2JFeGVjdXRpb25JZF0pO1xuICAgIH1cblxuICAgIC8qc2hvdWxkIHJldHVybiBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHNhdmVkIHN0ZXBFeGVjdXRpb24qL1xuICAgIHNhdmVTdGVwRXhlY3V0aW9uKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICB0aGlzLnN0ZXBFeGVjdXRpb25zLnB1c2goc3RlcEV4ZWN1dGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRpbWVvdXRQcm9taXNlKHN0ZXBFeGVjdXRpb24pO1xuICAgIH1cblxuICAgIC8qZmluZCBqb2IgZXhlY3V0aW9ucyBzb3J0ZWQgYnkgY3JlYXRlVGltZSwgcmV0dXJucyBwcm9taXNlKi9cbiAgICBmaW5kSm9iRXhlY3V0aW9ucyhqb2JJbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaW1lb3V0UHJvbWlzZSh0aGlzLmpvYkV4ZWN1dGlvbnMuZmlsdGVyKGU9PmUuam9iSW5zdGFuY2UuaWQgPT0gam9iSW5zdGFuY2UuaWQpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmNyZWF0ZVRpbWUuZ2V0VGltZSgpIC0gYi5jcmVhdGVUaW1lLmdldFRpbWUoKVxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlKG9iamVjdCl7IC8vVE9ET1xuXG4gICAgfVxufVxuIiwiaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge1N0ZXBFeGVjdXRpb259IGZyb20gXCIuL3N0ZXAtZXhlY3V0aW9uXCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7Sm9iRXhlY3V0aW9ufSBmcm9tIFwiLi9qb2ItZXhlY3V0aW9uXCI7XG5cbi8qZG9tYWluIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhIGpvYiBpbnN0YW5jZS4qL1xuZXhwb3J0IGNsYXNzIEpvYlJlc3VsdCB7XG4gICAgaWQ7XG4gICAgam9iSW5zdGFuY2U7XG4gICAgbGFzdFVwZGF0ZWQgPSBudWxsO1xuXG4gICAgZGF0YTsgLy8gam9iIHJlc3VsdCBkYXRhIC0gdGhpcyBpcyBub3QgYSBkYXRhIG1vZGVsIVxuXG4gICAgY29uc3RydWN0b3Ioam9iSW5zdGFuY2UsIGlkLCBkYXRhKSB7XG4gICAgICAgIGlmKGlkPT09bnVsbCB8fCBpZCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBVdGlscy5ndWlkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5qb2JJbnN0YW5jZSA9IGpvYkluc3RhbmNlO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH1cblxuICAgIGdldERUTyhmaWx0ZXJlZFByb3BlcnRpZXM9W10sIGRlZXBDbG9uZSA9IHRydWUpe1xuXG4gICAgICAgIHZhciBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lRGVlcFdpdGg7XG4gICAgICAgIGlmKCFkZWVwQ2xvbmUpIHtcbiAgICAgICAgICAgIGNsb25lTWV0aG9kID0gVXRpbHMuY2xvbmVXaXRoO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGR0byA9IFV0aWxzLmFzc2lnbih7fSwgY2xvbmVNZXRob2QodGhpcywgKHZhbHVlLCBrZXksIG9iamVjdCwgc3RhY2spPT4ge1xuICAgICAgICAgICAgaWYoZmlsdGVyZWRQcm9wZXJ0aWVzLmluZGV4T2Yoa2V5KT4tMSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHZhbHVlICYmIHZhbHVlLiRPYmplY3RXaXRoSWRBbmRFZGl0YWJsZUZpZWxkcyAmJiB2YWx1ZS5pZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgJyRPYmplY3RXaXRoSWRBbmRFZGl0YWJsZUZpZWxkcyc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBFcnJvcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0aWxzLmdldEVycm9yRFRPKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiBkdG9cbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgSk9CX1NUQVRVUyA9IHtcbiAgICBDT01QTEVURUQ6ICdDT01QTEVURUQnLFxuICAgIFNUQVJUSU5HOiAnU1RBUlRJTkcnLFxuICAgIFNUQVJURUQ6ICdTVEFSVEVEJyxcbiAgICBTVE9QUElORzogJ1NUT1BQSU5HJyxcbiAgICBTVE9QUEVEOiAnU1RPUFBFRCcsXG4gICAgRkFJTEVEOiAnRkFJTEVEJyxcbiAgICBVTktOT1dOOiAnVU5LTk9XTicsXG4gICAgQUJBTkRPTkVEOiAnQUJBTkRPTkVEJyxcbiAgICBFWEVDVVRJTkc6ICdFWEVDVVRJTkcnIC8vZm9yIGV4aXQgc3RhdHVzIG9ubHlcbn07XG4iLCJpbXBvcnQge2xvZ30gZnJvbSAnc2QtdXRpbHMnXG5pbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7Sm9iSW50ZXJydXB0ZWRFeGNlcHRpb259IGZyb20gXCIuL2V4Y2VwdGlvbnMvam9iLWludGVycnVwdGVkLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKb2JQYXJhbWV0ZXJzSW52YWxpZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItcGFyYW1ldGVycy1pbnZhbGlkLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKb2JEYXRhSW52YWxpZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItZGF0YS1pbnZhbGlkLWV4Y2VwdGlvblwiO1xuaW1wb3J0IHtKT0JfRVhFQ1VUSU9OX0ZMQUd9IGZyb20gXCIuL2pvYi1leGVjdXRpb24tZmxhZ1wiO1xuaW1wb3J0IHtKb2JSZXN1bHR9IGZyb20gXCIuL2pvYi1yZXN1bHRcIjtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBqb2JzXG4gKiBBIEpvYiBpcyBhbiBlbnRpdHkgdGhhdCBlbmNhcHN1bGF0ZXMgYW4gZW50aXJlIGpvYiBwcm9jZXNzICggYW4gYWJzdHJhY3Rpb24gcmVwcmVzZW50aW5nIHRoZSBjb25maWd1cmF0aW9uIG9mIGEgam9iKVxuICogKi9cblxuZXhwb3J0IGNsYXNzIEpvYiB7XG5cbiAgICBpZDtcbiAgICBuYW1lO1xuICAgIHN0ZXBzID0gW107XG5cbiAgICBpc1Jlc3RhcnRhYmxlPXRydWU7XG4gICAgZXhlY3V0aW9uTGlzdGVuZXJzID0gW107XG4gICAgam9iUGFyYW1ldGVyc1ZhbGlkYXRvcjtcblxuICAgIGpvYlJlcG9zaXRvcnk7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuam9iUGFyYW1ldGVyc1ZhbGlkYXRvciA9IHRoaXMuZ2V0Sm9iUGFyYW1ldGVyc1ZhbGlkYXRvcigpO1xuICAgICAgICB0aGlzLmpvYkRhdGFWYWxpZGF0b3IgPSB0aGlzLmdldEpvYkRhdGFWYWxpZGF0b3IoKTtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciA9IGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciA9IG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcbiAgICB9XG5cbiAgICBzZXRKb2JSZXBvc2l0b3J5KGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICB9XG5cbiAgICBleGVjdXRlKGV4ZWN1dGlvbikge1xuICAgICAgICBsb2cuZGVidWcoXCJKb2IgZXhlY3V0aW9uIHN0YXJ0aW5nOiBcIiwgZXhlY3V0aW9uKTtcbiAgICAgICAgdmFyIGpvYlJlc3VsdDtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFeGVjdXRpb25GbGFncyhleGVjdXRpb24pLnRoZW4oZXhlY3V0aW9uPT57XG5cbiAgICAgICAgICAgIGlmIChleGVjdXRpb24uc3RhdHVzID09PSBKT0JfU1RBVFVTLlNUT1BQSU5HKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGpvYiB3YXMgYWxyZWFkeSBzdG9wcGVkXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uLnN0YXR1cyA9IEpPQl9TVEFUVVMuU1RPUFBFRDtcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuQ09NUExFVEVEO1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkpvYiBleGVjdXRpb24gd2FzIHN0b3BwZWQ6IFwiICsgZXhlY3V0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5qb2JQYXJhbWV0ZXJzVmFsaWRhdG9yICYmICF0aGlzLmpvYlBhcmFtZXRlcnNWYWxpZGF0b3IudmFsaWRhdGUoZXhlY3V0aW9uLmpvYlBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYlBhcmFtZXRlcnNJbnZhbGlkRXhjZXB0aW9uKFwiSW52YWxpZCBqb2IgcGFyYW1ldGVycyBpbiBqb2IgZXhlY3V0ZVwiKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLmpvYkRhdGFWYWxpZGF0b3IgJiYgIXRoaXMuam9iRGF0YVZhbGlkYXRvci52YWxpZGF0ZShleGVjdXRpb24uZ2V0RGF0YSgpKSl7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkRhdGFJbnZhbGlkRXhjZXB0aW9uKFwiSW52YWxpZCBqb2IgZGF0YSBpbiBqb2IgZXhlY3V0ZVwiKVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGV4ZWN1dGlvbi5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLnVwZGF0ZVN0YXR1cyhleGVjdXRpb24sIEpPQl9TVEFUVVMuU1RBUlRFRCksIHRoaXMuZ2V0UmVzdWx0KGV4ZWN1dGlvbiksIHRoaXMudXBkYXRlUHJvZ3Jlc3MoZXhlY3V0aW9uKV0pLnRoZW4ocmVzPT57XG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uPXJlc1swXTtcbiAgICAgICAgICAgICAgICBqb2JSZXN1bHQgPSByZXNbMV07XG4gICAgICAgICAgICAgICAgaWYoIWpvYlJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBqb2JSZXN1bHQgPSBuZXcgSm9iUmVzdWx0KGV4ZWN1dGlvbi5qb2JJbnN0YW5jZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25MaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lcj0+bGlzdGVuZXIuYmVmb3JlSm9iKGV4ZWN1dGlvbikpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9FeGVjdXRlKGV4ZWN1dGlvbiwgam9iUmVzdWx0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pLnRoZW4oZXhlY3V0aW9uPT57XG4gICAgICAgICAgICBsb2cuZGVidWcoXCJKb2IgZXhlY3V0aW9uIGNvbXBsZXRlOiBcIixleGVjdXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGlvblxuICAgICAgICB9KS5jYXRjaChlPT57XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEpvYkludGVycnVwdGVkRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgbG9nLmluZm8oXCJFbmNvdW50ZXJlZCBpbnRlcnJ1cHRpb24gZXhlY3V0aW5nIGpvYlwiLCBlKTtcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uc3RhdHVzID0gSk9CX1NUQVRVUy5TVE9QUEVEO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5leGl0U3RhdHVzID0gSk9CX1NUQVRVUy5TVE9QUEVEO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJFbmNvdW50ZXJlZCBmYXRhbCBlcnJvciBleGVjdXRpbmcgam9iXCIsIGUpO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkZBSUxFRDtcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuRkFJTEVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhlY3V0aW9uLmZhaWx1cmVFeGNlcHRpb25zLnB1c2goZSk7XG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uO1xuICAgICAgICB9KS50aGVuKGV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgaWYoam9iUmVzdWx0KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnNhdmVKb2JSZXN1bHQoam9iUmVzdWx0KS50aGVuKCgpPT5leGVjdXRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uXG4gICAgICAgIH0pLmNhdGNoKGU9PntcbiAgICAgICAgICAgIGxvZy5lcnJvcihcIkVuY291bnRlcmVkIGZhdGFsIGVycm9yIHNhdmluZyBqb2IgcmVzdWx0c1wiLCBlKTtcbiAgICAgICAgICAgIGlmKGUpe1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5mYWlsdXJlRXhjZXB0aW9ucy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhlY3V0aW9uLnN0YXR1cyA9IEpPQl9TVEFUVVMuRkFJTEVEO1xuICAgICAgICAgICAgZXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkZBSUxFRDtcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRpb247XG4gICAgICAgIH0pLnRoZW4oZXhlY3V0aW9uPT57XG4gICAgICAgICAgICBleGVjdXRpb24uZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuam9iUmVwb3NpdG9yeS51cGRhdGUoZXhlY3V0aW9uKSwgdGhpcy51cGRhdGVQcm9ncmVzcyhleGVjdXRpb24pXSkudGhlbihyZXM9PnJlc1swXSlcbiAgICAgICAgfSkudGhlbihleGVjdXRpb249PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25MaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lcj0+bGlzdGVuZXIuYWZ0ZXJKb2IoZXhlY3V0aW9uKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKFwiRXhjZXB0aW9uIGVuY291bnRlcmVkIGluIGFmdGVyU3RlcCBjYWxsYmFja1wiLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBleGVjdXRpb247XG4gICAgICAgIH0pXG4gICAgfVxuXG5cbiAgICB1cGRhdGVTdGF0dXMoam9iRXhlY3V0aW9uLCBzdGF0dXMpIHtcbiAgICAgICAgam9iRXhlY3V0aW9uLnN0YXR1cz1zdGF0dXM7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkudXBkYXRlKGpvYkV4ZWN1dGlvbilcbiAgICB9XG5cbiAgICB1cGRhdGVQcm9ncmVzcyhqb2JFeGVjdXRpb24pe1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnVwZGF0ZUpvYkV4ZWN1dGlvblByb2dyZXNzKGpvYkV4ZWN1dGlvbi5pZCwgdGhpcy5nZXRQcm9ncmVzcyhqb2JFeGVjdXRpb24pKTtcbiAgICB9XG5cbiAgICAvKiBFeHRlbnNpb24gcG9pbnQgZm9yIHN1YmNsYXNzZXMgYWxsb3dpbmcgdGhlbSB0byBjb25jZW50cmF0ZSBvbiBwcm9jZXNzaW5nIGxvZ2ljIGFuZCBpZ25vcmUgbGlzdGVuZXJzLCByZXR1cm5zIHByb21pc2UqL1xuICAgIGRvRXhlY3V0ZShleGVjdXRpb24sIGpvYlJlc3VsdCkge1xuICAgICAgICB0aHJvdyAnZG9FeGVjdXRlIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igam9iOiAnICsgdGhpcy5uYW1lXG4gICAgfVxuXG4gICAgZ2V0Sm9iUGFyYW1ldGVyc1ZhbGlkYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkYXRlOiAocGFyYW1zKSA9PiBwYXJhbXMudmFsaWRhdGUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Sm9iRGF0YVZhbGlkYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkU3RlcChzdGVwKXtcbiAgICAgICAgdGhpcy5zdGVwcy5wdXNoKHN0ZXApO1xuICAgIH1cblxuXG4gICAgY3JlYXRlSm9iUGFyYW1ldGVycyh2YWx1ZXMpe1xuICAgICAgICB0aHJvdyAnY3JlYXRlSm9iUGFyYW1ldGVycyBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIGpvYjogJyArIHRoaXMubmFtZVxuICAgIH1cblxuICAgIC8qU2hvdWxkIHJldHVybiBwcm9ncmVzcyBvYmplY3Qgd2l0aCBmaWVsZHM6XG4gICAgKiBjdXJyZW50XG4gICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKGV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgIGN1cnJlbnQ6IGV4ZWN1dGlvbi5zdGF0dXMgPT09IEpPQl9TVEFUVVMuQ09NUExFVEVEID8gMSA6IDBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlZ2lzdGVyRXhlY3V0aW9uTGlzdGVuZXIobGlzdGVuZXIpe1xuICAgICAgICB0aGlzLmV4ZWN1dGlvbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBjaGVja0V4ZWN1dGlvbkZsYWdzKGV4ZWN1dGlvbil7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iRXhlY3V0aW9uRmxhZyhleGVjdXRpb24uaWQpLnRoZW4oZmxhZz0+e1xuICAgICAgICAgICAgaWYoSk9CX0VYRUNVVElPTl9GTEFHLlNUT1AgPT09IGZsYWcpe1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0aW9uXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0UmVzdWx0KGV4ZWN1dGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldEpvYlJlc3VsdEJ5RXhlY3V0aW9uKGV4ZWN1dGlvbik7XG4gICAgfVxuXG4gICAgLyogcmV2aXZlIGpvYiByZXN1bHQgZGF0YSAoYWZ0ZXIgY29udmVyc2lvbiB0byBkdG8pIGlmIG5lZWRlZCovXG4gICAgcmV2aXZlUmVzdWx0RGF0YShkYXRhLCBleGVjdXRpb25Db250ZXh0KSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGpvYlJlc3VsdFRvQ3N2Um93cyhqb2JSZXN1bHQsIGpvYlBhcmFtZXRlcnMpe1xuICAgICAgICB0aHJvdyAnam9iUmVzdWx0VG9Dc3ZSb3dzIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igam9iOiAnICsgdGhpcy5uYW1lXG4gICAgfVxufVxuIiwiaW1wb3J0IHtsb2d9IGZyb20gJ3NkLXV0aWxzJ1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9qb2Itc3RhdHVzXCI7XG5pbXBvcnQge0pvYn0gZnJvbSBcIi4vam9iXCI7XG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7U3RlcH0gZnJvbSBcIi4vc3RlcFwiO1xuaW1wb3J0IHtKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItaW50ZXJydXB0ZWQtZXhjZXB0aW9uXCI7XG5pbXBvcnQge0pvYlJlc3RhcnRFeGNlcHRpb259IGZyb20gXCIuL2V4Y2VwdGlvbnMvam9iLXJlc3RhcnQtZXhjZXB0aW9uXCI7XG5pbXBvcnQge0pPQl9FWEVDVVRJT05fRkxBR30gZnJvbSBcIi4vam9iLWV4ZWN1dGlvbi1mbGFnXCI7XG5cbi8qIFNpbXBsZSBKb2IgdGhhdCBzZXF1ZW50aWFsbHkgZXhlY3V0ZXMgYSBqb2IgYnkgaXRlcmF0aW5nIHRocm91Z2ggaXRzIGxpc3Qgb2Ygc3RlcHMuICBBbnkgU3RlcCB0aGF0IGZhaWxzIHdpbGwgZmFpbCB0aGUgam9iLiAgVGhlIGpvYiBpc1xuIGNvbnNpZGVyZWQgY29tcGxldGUgd2hlbiBhbGwgc3RlcHMgaGF2ZSBiZWVuIGV4ZWN1dGVkLiovXG5cbmV4cG9ydCBjbGFzcyBTaW1wbGVKb2IgZXh0ZW5kcyBKb2Ige1xuXG4gICAgY29uc3RydWN0b3IobmFtZSwgam9iUmVwb3NpdG9yeSwgZXhwcmVzc2lvbnNFdmFsdWF0b3IsIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcikge1xuICAgICAgICBzdXBlcihuYW1lLCBqb2JSZXBvc2l0b3J5LCBleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyKVxuICAgIH1cblxuICAgIGdldFN0ZXAoc3RlcE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIFV0aWxzLmZpbmQodGhpcy5zdGVwcywgcz0+cy5uYW1lID09IHN0ZXBOYW1lKTtcbiAgICB9XG5cbiAgICBkb0V4ZWN1dGUoZXhlY3V0aW9uLCBqb2JSZXN1bHQpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVOZXh0U3RlcChleGVjdXRpb24sIGpvYlJlc3VsdCkudGhlbihsYXN0RXhlY3V0ZWRTdGVwRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBpZiAobGFzdEV4ZWN1dGVkU3RlcEV4ZWN1dGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwiVXBkYXRpbmcgSm9iRXhlY3V0aW9uIHN0YXR1czogXCIsIGxhc3RFeGVjdXRlZFN0ZXBFeGVjdXRpb24pO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbi5zdGF0dXMgPSBsYXN0RXhlY3V0ZWRTdGVwRXhlY3V0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZXhpdFN0YXR1cyA9IGxhc3RFeGVjdXRlZFN0ZXBFeGVjdXRpb24uZXhpdFN0YXR1cztcbiAgICAgICAgICAgICAgICBleGVjdXRpb24uZmFpbHVyZUV4Y2VwdGlvbnMucHVzaCguLi5sYXN0RXhlY3V0ZWRTdGVwRXhlY3V0aW9uLmZhaWx1cmVFeGNlcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGlvbjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlTmV4dFN0ZXAoam9iRXhlY3V0aW9uLCBqb2JSZXN1bHQsIHByZXZTdGVwPW51bGwsIHByZXZTdGVwRXhlY3V0aW9uPW51bGwpe1xuICAgICAgICB2YXIgc3RlcEluZGV4ID0gMDtcbiAgICAgICAgaWYocHJldlN0ZXApe1xuICAgICAgICAgICAgc3RlcEluZGV4ID0gdGhpcy5zdGVwcy5pbmRleE9mKHByZXZTdGVwKSsxO1xuICAgICAgICB9XG4gICAgICAgIGlmKHN0ZXBJbmRleD49dGhpcy5zdGVwcy5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcmV2U3RlcEV4ZWN1dGlvbilcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RlcCA9IHRoaXMuc3RlcHNbc3RlcEluZGV4XTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3RlcChzdGVwLCBqb2JFeGVjdXRpb24sIGpvYlJlc3VsdCkudGhlbihzdGVwRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBpZihzdGVwRXhlY3V0aW9uLnN0YXR1cyAhPT0gSk9CX1NUQVRVUy5DT01QTEVURUQpeyAvLyBUZXJtaW5hdGUgdGhlIGpvYiBpZiBhIHN0ZXAgZmFpbHNcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZU5leHRTdGVwKGpvYkV4ZWN1dGlvbiwgam9iUmVzdWx0LCBzdGVwLCBzdGVwRXhlY3V0aW9uKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBoYW5kbGVTdGVwKHN0ZXAsIGpvYkV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIHZhciBqb2JJbnN0YW5jZSA9IGpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFeGVjdXRpb25GbGFncyhqb2JFeGVjdXRpb24pLnRoZW4oam9iRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBpZiAoam9iRXhlY3V0aW9uLmlzU3RvcHBpbmcoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbihcIkpvYkV4ZWN1dGlvbiBpbnRlcnJ1cHRlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldExhc3RTdGVwRXhlY3V0aW9uKGpvYkluc3RhbmNlLCBzdGVwLm5hbWUpXG5cbiAgICAgICAgfSkudGhlbihsYXN0U3RlcEV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RlcEV4ZWN1dGlvblBhcnRPZkV4aXN0aW5nSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbiwgbGFzdFN0ZXBFeGVjdXRpb24pKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGxhc3QgZXhlY3V0aW9uIG9mIHRoaXMgc3RlcCB3YXMgaW4gdGhlIHNhbWUgam9iLCBpdCdzIHByb2JhYmx5IGludGVudGlvbmFsIHNvIHdlIHdhbnQgdG8gcnVuIGl0IGFnYWluLlxuICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwiRHVwbGljYXRlIHN0ZXAgZGV0ZWN0ZWQgaW4gZXhlY3V0aW9uIG9mIGpvYi4gc3RlcDogXCIgKyBzdGVwLm5hbWUgKyBcIiBqb2JOYW1lOiBcIiwgam9iSW5zdGFuY2Uuam9iTmFtZSk7XG4gICAgICAgICAgICAgICAgbGFzdFN0ZXBFeGVjdXRpb24gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY3VycmVudFN0ZXBFeGVjdXRpb24gPSBsYXN0U3RlcEV4ZWN1dGlvbjtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnNob3VsZFN0YXJ0KGN1cnJlbnRTdGVwRXhlY3V0aW9uLCBqb2JFeGVjdXRpb24sIHN0ZXApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGVwRXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbiA9IGpvYkV4ZWN1dGlvbi5jcmVhdGVTdGVwRXhlY3V0aW9uKHN0ZXAubmFtZSk7XG5cbiAgICAgICAgICAgIHZhciBpc0NvbXBsZXRlZCA9IGxhc3RTdGVwRXhlY3V0aW9uICE9IG51bGwgJiYgbGFzdFN0ZXBFeGVjdXRpb24uc3RhdHVzID09PSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgIHZhciBpc1Jlc3RhcnQgPSBsYXN0U3RlcEV4ZWN1dGlvbiAhPSBudWxsICYmICFpc0NvbXBsZXRlZDtcbiAgICAgICAgICAgIHZhciBza2lwRXhlY3V0aW9uID0gaXNDb21wbGV0ZWQgJiYgc3RlcC5za2lwT25SZXN0YXJ0SWZDb21wbGV0ZWQ7XG5cbiAgICAgICAgICAgIGlmIChpc1Jlc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0ID0gbGFzdFN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdFN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dC5jb250YWluc0tleShcImV4ZWN1dGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucmVtb3ZlKFwiZXhlY3V0ZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0ID0gbmV3IEV4ZWN1dGlvbkNvbnRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHNraXBFeGVjdXRpb24pe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RlcEV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0LnB1dChcInNraXBwZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuYWRkU3RlcEV4ZWN1dGlvbihjdXJyZW50U3RlcEV4ZWN1dGlvbikudGhlbigoX2N1cnJlbnRTdGVwRXhlY3V0aW9uKT0+e1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uPV9jdXJyZW50U3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgICAgICAgICBpZihza2lwRXhlY3V0aW9uKXtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oXCJTa2lwcGluZyBjb21wbGV0ZWQgc3RlcCBleGVjdXRpb246IFtcIiArIHN0ZXAubmFtZSArIFwiXVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGVwRXhlY3V0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2cuaW5mbyhcIkV4ZWN1dGluZyBzdGVwOiBbXCIgKyBzdGVwLm5hbWUgKyBcIl1cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0ZXAuZXhlY3V0ZShjdXJyZW50U3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KVxuICAgICAgICAgICAgfSkudGhlbigoKT0+e1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQucHV0KFwiZXhlY3V0ZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGVwRXhlY3V0aW9uO1xuICAgICAgICAgICAgfSkuY2F0Y2ggKGUgPT4ge1xuICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkZBSUxFRDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnVwZGF0ZShqb2JFeGVjdXRpb24pLnRoZW4oam9iRXhlY3V0aW9uPT57dGhyb3cgZX0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KS50aGVuKChjdXJyZW50U3RlcEV4ZWN1dGlvbik9PntcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RlcEV4ZWN1dGlvbi5zdGF0dXMgPT0gSk9CX1NUQVRVUy5TVE9QUElOR1xuICAgICAgICAgICAgICAgIHx8IGN1cnJlbnRTdGVwRXhlY3V0aW9uLnN0YXR1cyA9PSBKT0JfU1RBVFVTLlNUT1BQRUQpIHtcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgam9iIGdldHMgdGhlIG1lc3NhZ2UgdGhhdCBpdCBpcyBzdG9wcGluZ1xuICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLlNUT1BQSU5HO1xuICAgICAgICAgICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIkpvYiBpbnRlcnJ1cHRlZCBieSBzdGVwIGV4ZWN1dGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVByb2dyZXNzKGpvYkV4ZWN1dGlvbikudGhlbigoKT0+Y3VycmVudFN0ZXBFeGVjdXRpb24pO1xuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgc3RlcEV4ZWN1dGlvblBhcnRPZkV4aXN0aW5nSm9iRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbiwgc3RlcEV4ZWN1dGlvbikge1xuICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbiAhPSBudWxsICYmIHN0ZXBFeGVjdXRpb24uam9iRXhlY3V0aW9uLmlkID09IGpvYkV4ZWN1dGlvbi5pZFxuICAgIH1cblxuICAgIHNob3VsZFN0YXJ0KGxhc3RTdGVwRXhlY3V0aW9uLCBleGVjdXRpb24sIHN0ZXApIHtcbiAgICAgICAgdmFyIHN0ZXBTdGF0dXM7XG4gICAgICAgIGlmIChsYXN0U3RlcEV4ZWN1dGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBzdGVwU3RhdHVzID0gSk9CX1NUQVRVUy5TVEFSVElORztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0ZXBTdGF0dXMgPSBsYXN0U3RlcEV4ZWN1dGlvbi5zdGF0dXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RlcFN0YXR1cyA9PSBKT0JfU1RBVFVTLlVOS05PV04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKb2JSZXN0YXJ0RXhjZXB0aW9uKFwiQ2Fubm90IHJlc3RhcnQgc3RlcCBmcm9tIFVOS05PV04gc3RhdHVzXCIpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3RlcFN0YXR1cyAhPSBKT0JfU1RBVFVTLkNPTVBMRVRFRCB8fCBzdGVwLmlzUmVzdGFydGFibGU7XG4gICAgfVxuXG4gICAgZ2V0UHJvZ3Jlc3MoZXhlY3V0aW9uKXtcbiAgICAgICAgdmFyIGNvbXBsZXRlZFN0ZXBzID0gZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmxlbmd0aDtcbiAgICAgICAgbGV0IHByb2dyZXNzID0ge1xuICAgICAgICAgICAgdG90YWw6IHRoaXMuc3RlcHMubGVuZ3RoLFxuICAgICAgICAgICAgY3VycmVudDogY29tcGxldGVkU3RlcHNcbiAgICAgICAgfTtcbiAgICAgICAgaWYoIWNvbXBsZXRlZFN0ZXBzKXtcbiAgICAgICAgICAgIHJldHVybiBwcm9ncmVzc1xuICAgICAgICB9XG4gICAgICAgIGlmKEpPQl9TVEFUVVMuQ09NUExFVEVEICE9PSBleGVjdXRpb24uc3RlcEV4ZWN1dGlvbnNbZXhlY3V0aW9uLnN0ZXBFeGVjdXRpb25zLmxlbmd0aC0xXS5zdGF0dXMpe1xuICAgICAgICAgICAgcHJvZ3Jlc3MuY3VycmVudC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgIH1cblxuICAgIGFkZFN0ZXAoKXtcbiAgICAgICAgaWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmFkZFN0ZXAoYXJndW1lbnRzWzBdKVxuICAgICAgICB9XG4gICAgICAgIHZhciBzdGVwID0gbmV3IFN0ZXAoYXJndW1lbnRzWzBdLCB0aGlzLmpvYlJlcG9zaXRvcnkpO1xuICAgICAgICBzdGVwLmRvRXhlY3V0ZSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmFkZFN0ZXAoc3RlcCk7XG4gICAgfVxuXG59XG4iLCJleHBvcnQgY2xhc3MgU3RlcEV4ZWN1dGlvbkxpc3RlbmVyIHtcbiAgICAvKkNhbGxlZCBiZWZvcmUgYSBzdGVwIGV4ZWN1dGVzKi9cbiAgICBiZWZvcmVTdGVwKGpvYkV4ZWN1dGlvbikge1xuXG4gICAgfVxuXG4gICAgLypDYWxsZWQgYWZ0ZXIgY29tcGxldGlvbiBvZiBhIHN0ZXAuIENhbGxlZCBhZnRlciBib3RoIHN1Y2Nlc3NmdWwgYW5kIGZhaWxlZCBleGVjdXRpb25zKi9cbiAgICBhZnRlclN0ZXAoam9iRXhlY3V0aW9uKSB7XG5cbiAgICB9XG59XG4iLCJpbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7RXhlY3V0aW9uQ29udGV4dH0gZnJvbSBcIi4vZXhlY3V0aW9uLWNvbnRleHRcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4vam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtKb2JFeGVjdXRpb259IGZyb20gXCIuL2pvYi1leGVjdXRpb25cIjtcblxuLypcbiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZXhlY3V0aW9uIG9mIGEgc3RlcFxuICovXG5leHBvcnQgY2xhc3MgU3RlcEV4ZWN1dGlvbiB7XG4gICAgaWQ7XG4gICAgc3RlcE5hbWU7XG4gICAgam9iRXhlY3V0aW9uO1xuXG4gICAgc3RhdHVzID0gSk9CX1NUQVRVUy5TVEFSVElORztcbiAgICBleGl0U3RhdHVzID0gSk9CX1NUQVRVUy5FWEVDVVRJTkc7XG4gICAgZXhlY3V0aW9uQ29udGV4dCA9IG5ldyBFeGVjdXRpb25Db250ZXh0KCk7IC8vZXhlY3V0aW9uIGNvbnRleHQgZm9yIHNpbmdsZSBzdGVwIGxldmVsLFxuXG4gICAgc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcbiAgICBlbmRUaW1lID0gbnVsbDtcbiAgICBsYXN0VXBkYXRlZCA9IG51bGw7XG5cbiAgICB0ZXJtaW5hdGVPbmx5ID0gZmFsc2U7IC8vZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGFuIGV4ZWN1dGlvbiBzaG91bGQgaGFsdFxuICAgIGZhaWx1cmVFeGNlcHRpb25zID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihzdGVwTmFtZSwgam9iRXhlY3V0aW9uLCBpZCkge1xuICAgICAgICBpZihpZD09PW51bGwgfHwgaWQgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICB0aGlzLmlkID0gVXRpbHMuZ3VpZCgpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RlcE5hbWUgPSBzdGVwTmFtZTtcbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb24gPSBqb2JFeGVjdXRpb247XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9uSWQgPSBqb2JFeGVjdXRpb24uaWQ7XG4gICAgfVxuXG4gICAgZ2V0Sm9iUGFyYW1ldGVycygpe1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JFeGVjdXRpb24uam9iUGFyYW1ldGVycztcbiAgICB9XG5cbiAgICBnZXRKb2JFeGVjdXRpb25Db250ZXh0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkV4ZWN1dGlvbi5leGVjdXRpb25Db250ZXh0O1xuICAgIH1cblxuICAgIGdldERhdGEoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iRXhlY3V0aW9uLmdldERhdGEoKTtcbiAgICB9XG5cbiAgICBnZXREVE8oZmlsdGVyZWRQcm9wZXJ0aWVzPVtdLCBkZWVwQ2xvbmUgPSB0cnVlKXtcblxuICAgICAgICB2YXIgY2xvbmVNZXRob2QgPSBVdGlscy5jbG9uZURlZXBXaXRoO1xuICAgICAgICBpZighZGVlcENsb25lKSB7XG4gICAgICAgICAgICBjbG9uZU1ldGhvZCA9IFV0aWxzLmNsb25lV2l0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBVdGlscy5hc3NpZ24oe30sIGNsb25lTWV0aG9kKHRoaXMsICh2YWx1ZSwga2V5LCBvYmplY3QsIHN0YWNrKT0+IHtcbiAgICAgICAgICAgIGlmKGZpbHRlcmVkUHJvcGVydGllcy5pbmRleE9mKGtleSk+LTEpe1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoW1wiZXhlY3V0aW9uQ29udGV4dFwiXS5pbmRleE9mKGtleSk+LTEpe1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5nZXREVE8oKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBFcnJvcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFV0aWxzLmdldEVycm9yRFRPKHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSm9iRXhlY3V0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmdldERUTyhbXCJzdGVwRXhlY3V0aW9uc1wiXSwgZGVlcENsb25lKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICB9XG59XG4iLCJpbXBvcnQge0pPQl9TVEFUVVN9IGZyb20gXCIuL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7bG9nfSBmcm9tICdzZC11dGlscydcblxuaW1wb3J0IHtKb2JJbnRlcnJ1cHRlZEV4Y2VwdGlvbn0gZnJvbSBcIi4vZXhjZXB0aW9ucy9qb2ItaW50ZXJydXB0ZWQtZXhjZXB0aW9uXCI7XG4vKmRvbWFpbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjb25maWd1cmF0aW9uIG9mIGEgam9iIHN0ZXAqL1xuZXhwb3J0IGNsYXNzIFN0ZXAge1xuXG4gICAgaWQ7XG4gICAgbmFtZTtcbiAgICBpc1Jlc3RhcnRhYmxlID0gdHJ1ZTtcbiAgICBza2lwT25SZXN0YXJ0SWZDb21wbGV0ZWQ9dHJ1ZTtcbiAgICBzdGVwcyA9IFtdO1xuICAgIGV4ZWN1dGlvbkxpc3RlbmVycyA9IFtdO1xuXG4gICAgam9iUmVwb3NpdG9yeTtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICB9XG5cbiAgICBzZXRKb2JSZXBvc2l0b3J5KGpvYlJlcG9zaXRvcnkpIHtcbiAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gam9iUmVwb3NpdG9yeTtcbiAgICB9XG5cbiAgICAvKlByb2Nlc3MgdGhlIHN0ZXAgYW5kIGFzc2lnbiBwcm9ncmVzcyBhbmQgc3RhdHVzIG1ldGEgaW5mb3JtYXRpb24gdG8gdGhlIFN0ZXBFeGVjdXRpb24gcHJvdmlkZWQqL1xuICAgIGV4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcIkV4ZWN1dGluZyBzdGVwOiBuYW1lPVwiICsgdGhpcy5uYW1lKTtcbiAgICAgICAgc3RlcEV4ZWN1dGlvbi5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBzdGVwRXhlY3V0aW9uLnN0YXR1cyA9IEpPQl9TVEFUVVMuU1RBUlRFRDtcbiAgICAgICAgdmFyIGV4aXRTdGF0dXM7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkudXBkYXRlKHN0ZXBFeGVjdXRpb24pLnRoZW4oc3RlcEV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgZXhpdFN0YXR1cyA9IEpPQl9TVEFUVVMuRVhFQ1VUSU5HO1xuXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGlvbkxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyPT5saXN0ZW5lci5iZWZvcmVTdGVwKHN0ZXBFeGVjdXRpb24pKTtcbiAgICAgICAgICAgIHRoaXMub3BlbihzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb0V4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KVxuICAgICAgICB9KS50aGVuKF9zdGVwRXhlY3V0aW9uPT57XG4gICAgICAgICAgICBzdGVwRXhlY3V0aW9uID0gX3N0ZXBFeGVjdXRpb247XG4gICAgICAgICAgICBleGl0U3RhdHVzID0gc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzb21lb25lIGlzIHRyeWluZyB0byBzdG9wIHVzXG4gICAgICAgICAgICBpZiAoc3RlcEV4ZWN1dGlvbi50ZXJtaW5hdGVPbmx5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpvYkludGVycnVwdGVkRXhjZXB0aW9uKFwiSm9iRXhlY3V0aW9uIGludGVycnVwdGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5lZWQgdG8gdXBncmFkZSBoZXJlIG5vdCBzZXQsIGluIGNhc2UgdGhlIGV4ZWN1dGlvbiB3YXMgc3RvcHBlZFxuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkNPTVBMRVRFRDtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIlN0ZXAgZXhlY3V0aW9uIHN1Y2Nlc3M6IG5hbWU9XCIgKyB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHN0ZXBFeGVjdXRpb25cbiAgICAgICAgfSkuY2F0Y2goZT0+e1xuICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5zdGF0dXMgPSB0aGlzLmRldGVybWluZUpvYlN0YXR1cyhlKTtcbiAgICAgICAgICAgIGV4aXRTdGF0dXMgPSBzdGVwRXhlY3V0aW9uLnN0YXR1cztcbiAgICAgICAgICAgIHN0ZXBFeGVjdXRpb24uZmFpbHVyZUV4Y2VwdGlvbnMucHVzaChlKTtcblxuICAgICAgICAgICAgaWYgKHN0ZXBFeGVjdXRpb24uc3RhdHVzID09IEpPQl9TVEFUVVMuU1RPUFBFRCkge1xuICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwiRW5jb3VudGVyZWQgaW50ZXJydXB0aW9uIGV4ZWN1dGluZyBzdGVwOiBcIiArIHRoaXMubmFtZSArIFwiIGluIGpvYjogXCIgKyBzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5qb2JOYW1lLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkVuY291bnRlcmVkIGFuIGVycm9yIGV4ZWN1dGluZyBzdGVwOiBcIiArIHRoaXMubmFtZSArIFwiIGluIGpvYjogXCIgKyBzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5qb2JOYW1lLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGVwRXhlY3V0aW9uO1xuICAgICAgICB9KS50aGVuKHN0ZXBFeGVjdXRpb249PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5leGl0U3RhdHVzID0gZXhpdFN0YXR1cztcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGlvbkxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyPT5saXN0ZW5lci5hZnRlclN0ZXAoc3RlcEV4ZWN1dGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJFeGNlcHRpb24gaW4gYWZ0ZXJTdGVwIGNhbGxiYWNrIGluIHN0ZXAgXCIgKyB0aGlzLm5hbWUgKyBcIiBpbiBqb2I6IFwiICsgc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSwgZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0ZXBFeGVjdXRpb24uZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBzdGVwRXhlY3V0aW9uLmV4aXRTdGF0dXMgPSBleGl0U3RhdHVzO1xuXG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkudXBkYXRlKHN0ZXBFeGVjdXRpb24pXG4gICAgICAgIH0pLnRoZW4oc3RlcEV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKHN0ZXBFeGVjdXRpb24uZXhlY3V0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIkV4Y2VwdGlvbiB3aGlsZSBjbG9zaW5nIHN0ZXAgZXhlY3V0aW9uIHJlc291cmNlcyBpbiBzdGVwOiBcIiArIHRoaXMubmFtZSArIFwiIGluIGpvYjogXCIgKyBzdGVwRXhlY3V0aW9uLmpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5qb2JOYW1lLCBlKTtcbiAgICAgICAgICAgICAgICBzdGVwRXhlY3V0aW9uLmZhaWx1cmVFeGNlcHRpb25zLnB1c2goZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZShzdGVwRXhlY3V0aW9uLmV4ZWN1dGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJFeGNlcHRpb24gd2hpbGUgY2xvc2luZyBzdGVwIGV4ZWN1dGlvbiByZXNvdXJjZXMgaW4gc3RlcDogXCIgKyB0aGlzLm5hbWUgKyBcIiBpbiBqb2I6IFwiICsgc3RlcEV4ZWN1dGlvbi5qb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSwgZSk7XG4gICAgICAgICAgICAgICAgc3RlcEV4ZWN1dGlvbi5mYWlsdXJlRXhjZXB0aW9ucy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkb0V4ZWN1dGlvblJlbGVhc2UoKTtcblxuICAgICAgICAgICAgbG9nLmRlYnVnKFwiU3RlcCBleGVjdXRpb24gY29tcGxldGU6IFwiICsgc3RlcEV4ZWN1dGlvbi5pZCk7XG4gICAgICAgICAgICByZXR1cm4gc3RlcEV4ZWN1dGlvbjtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBkZXRlcm1pbmVKb2JTdGF0dXMoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEpvYkludGVycnVwdGVkRXhjZXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gSk9CX1NUQVRVUy5TVE9QUEVEO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEpPQl9TVEFUVVMuRkFJTEVEO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIGV4ZWN1dGUgYnVzaW5lc3MgbG9naWMuIFN1YmNsYXNzZXMgc2hvdWxkIHNldCB0aGUgZXhpdFN0YXR1cyBvbiB0aGVcbiAgICAgKiBTdGVwRXhlY3V0aW9uIGJlZm9yZSByZXR1cm5pbmcuIE11c3QgcmV0dXJuIHN0ZXBFeGVjdXRpb25cbiAgICAgKi9cbiAgICBkb0V4ZWN1dGUoc3RlcEV4ZWN1dGlvbiwgam9iUmVzdWx0KSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIHByb3ZpZGUgY2FsbGJhY2tzIHRvIHRoZWlyIGNvbGxhYm9yYXRvcnMgYXQgdGhlIGJlZ2lubmluZyBvZiBhIHN0ZXAsIHRvIG9wZW4gb3JcbiAgICAgKiBhY3F1aXJlIHJlc291cmNlcy4gRG9lcyBub3RoaW5nIGJ5IGRlZmF1bHQuXG4gICAgICovXG4gICAgb3BlbihleGVjdXRpb25Db250ZXh0KSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uIHBvaW50IGZvciBzdWJjbGFzc2VzIHRvIHByb3ZpZGUgY2FsbGJhY2tzIHRvIHRoZWlyIGNvbGxhYm9yYXRvcnMgYXQgdGhlIGVuZCBvZiBhIHN0ZXAgKHJpZ2h0IGF0IHRoZSBlbmRcbiAgICAgKiBvZiB0aGUgZmluYWxseSBibG9jayksIHRvIGNsb3NlIG9yIHJlbGVhc2UgcmVzb3VyY2VzLiBEb2VzIG5vdGhpbmcgYnkgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBjbG9zZShleGVjdXRpb25Db250ZXh0KSB7XG4gICAgfVxuXG5cbiAgICAvKlNob3VsZCByZXR1cm4gcHJvZ3Jlc3Mgb2JqZWN0IHdpdGggZmllbGRzOlxuICAgICAqIGN1cnJlbnRcbiAgICAgKiB0b3RhbCAqL1xuICAgIGdldFByb2dyZXNzKHN0ZXBFeGVjdXRpb24pe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG90YWw6IDEsXG4gICAgICAgICAgICBjdXJyZW50OiBzdGVwRXhlY3V0aW9uLnN0YXR1cyA9PT0gSk9CX1NUQVRVUy5DT01QTEVURUQgPyAxIDogMFxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgZW5naW5lIGZyb20gJy4vZW5naW5lL2luZGV4J1xuXG5leHBvcnQge2VuZ2luZX1cbmV4cG9ydCAqIGZyb20gJy4vam9icy1tYW5hZ2VyJ1xuZXhwb3J0ICogZnJvbSAnLi9qb2Itd29ya2VyJ1xuXG5cblxuIiwiaW1wb3J0IHtKb2JFeGVjdXRpb25MaXN0ZW5lcn0gZnJvbSBcIi4vZW5naW5lL2pvYi1leGVjdXRpb24tbGlzdGVuZXJcIjtcbmltcG9ydCB7Sk9CX1NUQVRVU30gZnJvbSBcIi4vZW5naW5lL2pvYi1zdGF0dXNcIjtcbmltcG9ydCB7Sm9iSW5zdGFuY2V9IGZyb20gXCIuL2VuZ2luZS9qb2ItaW5zdGFuY2VcIjtcbmltcG9ydCB7VXRpbHMsIGxvZ30gZnJvbSBcInNkLXV0aWxzXCI7XG5cblxuZXhwb3J0IGNsYXNzIEpvYkluc3RhbmNlTWFuYWdlckNvbmZpZyB7XG4gICAgb25Kb2JTdGFydGVkID0gKCkgPT4ge307XG4gICAgb25Kb2JDb21wbGV0ZWQgPSByZXN1bHQgPT4ge307XG4gICAgb25Kb2JGYWlsZWQgPSBlcnJvcnMgPT4ge307XG4gICAgb25Kb2JTdG9wcGVkID0gKCkgPT4ge307XG4gICAgb25Kb2JUZXJtaW5hdGVkID0gKCkgPT4ge307XG4gICAgb25Qcm9ncmVzcyA9IChwcm9ncmVzcykgPT4ge307XG4gICAgY2FsbGJhY2tzVGhpc0FyZztcbiAgICB1cGRhdGVJbnRlcnZhbCA9IDEwMDtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbSkge1xuICAgICAgICBpZiAoY3VzdG9tKSB7XG4gICAgICAgICAgICBVdGlscy5kZWVwRXh0ZW5kKHRoaXMsIGN1c3RvbSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qY29udmVuaWVuY2UgY2xhc3MgZm9yIG1hbmFnaW5nIGFuZCB0cmFja2luZyBqb2IgaW5zdGFuY2UgcHJvZ3Jlc3MqL1xuZXhwb3J0IGNsYXNzIEpvYkluc3RhbmNlTWFuYWdlciBleHRlbmRzIEpvYkV4ZWN1dGlvbkxpc3RlbmVyIHtcblxuICAgIGpvYnNNYW5nZXI7XG4gICAgam9iSW5zdGFuY2U7XG4gICAgY29uZmlnO1xuXG4gICAgbGFzdEpvYkV4ZWN1dGlvbjtcbiAgICBsYXN0VXBkYXRlVGltZTtcbiAgICBwcm9ncmVzcyA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcihqb2JzTWFuZ2VyLCBqb2JJbnN0YW5jZU9yRXhlY3V0aW9uLCBjb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgSm9iSW5zdGFuY2VNYW5hZ2VyQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuam9ic01hbmdlciA9IGpvYnNNYW5nZXI7XG4gICAgICAgIGlmIChqb2JJbnN0YW5jZU9yRXhlY3V0aW9uIGluc3RhbmNlb2YgSm9iSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRoaXMuam9iSW5zdGFuY2UgPSBqb2JJbnN0YW5jZU9yRXhlY3V0aW9uO1xuICAgICAgICAgICAgdGhpcy5nZXRMYXN0Sm9iRXhlY3V0aW9uKCkudGhlbihqZT0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RKb2JFeGVjdXRpb24gPSBqb2JJbnN0YW5jZU9yRXhlY3V0aW9uO1xuICAgICAgICAgICAgdGhpcy5qb2JJbnN0YW5jZSA9IHRoaXMubGFzdEpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tQcm9ncmVzcygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxhc3RKb2JFeGVjdXRpb24gJiYgIXRoaXMubGFzdEpvYkV4ZWN1dGlvbi5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5hZnRlckpvYih0aGlzLmxhc3RKb2JFeGVjdXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGpvYnNNYW5nZXIucmVnaXN0ZXJKb2JFeGVjdXRpb25MaXN0ZW5lcih0aGlzKTtcbiAgICB9XG5cbiAgICBjaGVja1Byb2dyZXNzKCkge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMudGVybWluYXRlZCB8fCAhdGhpcy5sYXN0Sm9iRXhlY3V0aW9uLmlzUnVubmluZygpIHx8IHRoaXMuZ2V0UHJvZ3Jlc3NQZXJjZW50cyh0aGlzLnByb2dyZXNzKSA9PT0gMTAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5qb2JzTWFuZ2VyLmdldFByb2dyZXNzKHRoaXMubGFzdEpvYkV4ZWN1dGlvbikudGhlbihwcm9ncmVzcz0+IHtcbiAgICAgICAgICAgIHRoaXMubGFzdFVwZGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgaWYgKHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uUHJvZ3Jlc3MuY2FsbCh0aGlzLmNvbmZpZy5jYWxsYmFja3NUaGlzQXJnIHx8IHRoaXMsIHByb2dyZXNzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jaGVja1Byb2dyZXNzKCk7XG4gICAgICAgICAgICB9LCB0aGlzLmNvbmZpZy51cGRhdGVJbnRlcnZhbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBiZWZvcmVKb2Ioam9iRXhlY3V0aW9uKSB7XG4gICAgICAgIGlmIChqb2JFeGVjdXRpb24uam9iSW5zdGFuY2UuaWQgIT09IHRoaXMuam9iSW5zdGFuY2UuaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgdGhpcy5jb25maWcub25Kb2JTdGFydGVkLmNhbGwodGhpcy5jb25maWcuY2FsbGJhY2tzVGhpc0FyZyB8fCB0aGlzKTtcbiAgICB9XG5cbiAgICBnZXRQcm9ncmVzc1BlcmNlbnRzKHByb2dyZXNzKSB7XG4gICAgICAgIGlmICghcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9ncmVzcy5jdXJyZW50ICogMTAwIC8gcHJvZ3Jlc3MudG90YWw7XG4gICAgfVxuXG4gICAgZ2V0UHJvZ3Jlc3NGcm9tRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbikge1xuICAgICAgICB2YXIgam9iID0gdGhpcy5qb2JzTWFuZ2VyLmdldEpvYkJ5TmFtZShqb2JFeGVjdXRpb24uam9iSW5zdGFuY2Uuam9iTmFtZSk7XG4gICAgICAgIHJldHVybiBqb2IuZ2V0UHJvZ3Jlc3Moam9iRXhlY3V0aW9uKTtcbiAgICB9XG5cbiAgICBhZnRlckpvYihqb2JFeGVjdXRpb24pIHtcbiAgICAgICAgaWYgKGpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5pZCAhPT0gdGhpcy5qb2JJbnN0YW5jZS5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgaWYgKEpPQl9TVEFUVVMuQ09NUExFVEVEID09PSBqb2JFeGVjdXRpb24uc3RhdHVzKSB7XG4gICAgICAgICAgICB0aGlzLmpvYnNNYW5nZXIuZGVyZWdpc3RlckpvYkV4ZWN1dGlvbkxpc3RlbmVyKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuZ2V0UHJvZ3Jlc3NGcm9tRXhlY3V0aW9uKGpvYkV4ZWN1dGlvbik7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5vblByb2dyZXNzLmNhbGwodGhpcy5jb25maWcuY2FsbGJhY2tzVGhpc0FyZyB8fCB0aGlzLCB0aGlzLnByb2dyZXNzKTtcbiAgICAgICAgICAgIHRoaXMuam9ic01hbmdlci5nZXRSZXN1bHQoam9iRXhlY3V0aW9uKS50aGVuKHJlc3VsdD0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5vbkpvYkNvbXBsZXRlZC5jYWxsKHRoaXMuY29uZmlnLmNhbGxiYWNrc1RoaXNBcmcgfHwgdGhpcywgcmVzdWx0LmRhdGEpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgfSBlbHNlIGlmIChKT0JfU1RBVFVTLkZBSUxFRCA9PT0gam9iRXhlY3V0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcub25Kb2JGYWlsZWQuY2FsbCh0aGlzLmNvbmZpZy5jYWxsYmFja3NUaGlzQXJnIHx8IHRoaXMsIGpvYkV4ZWN1dGlvbi5mYWlsdXJlRXhjZXB0aW9ucyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChKT0JfU1RBVFVTLlNUT1BQRUQgPT09IGpvYkV4ZWN1dGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uSm9iU3RvcHBlZC5jYWxsKHRoaXMuY29uZmlnLmNhbGxiYWNrc1RoaXNBcmcgfHwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMYXN0Sm9iRXhlY3V0aW9uKGZvcmNlVXBkYXRlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhc3RKb2JFeGVjdXRpb24gfHwgZm9yY2VVcGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIuam9iUmVwb3NpdG9yeS5nZXRMYXN0Sm9iRXhlY3V0aW9uQnlJbnN0YW5jZSh0aGlzLmpvYkluc3RhbmNlKS50aGVuKGplPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGplO1xuICAgICAgICAgICAgICAgIHJldHVybiBqZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5sYXN0Sm9iRXhlY3V0aW9uKTtcbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0Sm9iRXhlY3V0aW9uKCkudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIuc3RvcCh0aGlzLmxhc3RKb2JFeGVjdXRpb24pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVzdW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0Sm9iRXhlY3V0aW9uKCkudGhlbigoKT0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIucnVuKHRoaXMuam9iSW5zdGFuY2Uuam9iTmFtZSwgdGhpcy5sYXN0Sm9iRXhlY3V0aW9uLmpvYlBhcmFtZXRlcnMudmFsdWVzLCB0aGlzLmxhc3RKb2JFeGVjdXRpb24uZ2V0RGF0YSgpKS50aGVuKGplPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEpvYkV4ZWN1dGlvbiA9IGplO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQcm9ncmVzcygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSkuY2F0Y2goZT0+IHtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExhc3RKb2JFeGVjdXRpb24oKS50aGVuKCgpPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9ic01hbmdlci50ZXJtaW5hdGUodGhpcy5qb2JJbnN0YW5jZSkudGhlbigoKT0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uSm9iVGVybWluYXRlZC5jYWxsKHRoaXMuY29uZmlnLmNhbGxiYWNrc1RoaXNBcmcgfHwgdGhpcywgdGhpcy5sYXN0Sm9iRXhlY3V0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmpvYnNNYW5nZXIuZGVyZWdpc3RlckpvYkV4ZWN1dGlvbkxpc3RlbmVyKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFzdEpvYkV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLmNhdGNoKGU9PiB7XG4gICAgICAgICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pXG4gICAgfVxuXG59XG4iLCJleHBvcnQgY2xhc3MgSm9iV29ya2Vye1xuXG4gICAgd29ya2VyO1xuICAgIGxpc3RlbmVycyA9IHt9O1xuICAgIGRlZmF1bHRMaXN0ZW5lcjtcblxuICAgIGNvbnN0cnVjdG9yKHVybCwgZGVmYXVsdExpc3RlbmVyLCBvbkVycm9yKXtcbiAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgICAgdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKHVybCk7XG4gICAgICAgIHRoaXMuZGVmYXVsdExpc3RlbmVyID0gZGVmYXVsdExpc3RlbmVyIHx8IGZ1bmN0aW9uKCkge307XG4gICAgICAgIGlmIChvbkVycm9yKSB7dGhpcy53b3JrZXIub25lcnJvciA9IG9uRXJyb3I7fVxuXG4gICAgICAgIHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSBpbnN0YW5jZW9mIE9iamVjdCAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaGFzT3duUHJvcGVydHkoJ3F1ZXJ5TWV0aG9kTGlzdGVuZXInKSAmJiBldmVudC5kYXRhLmhhc093blByb3BlcnR5KCdxdWVyeU1ldGhvZEFyZ3VtZW50cycpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gaW5zdGFuY2UubGlzdGVuZXJzW2V2ZW50LmRhdGEucXVlcnlNZXRob2RMaXN0ZW5lcl07XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBldmVudC5kYXRhLnF1ZXJ5TWV0aG9kQXJndW1lbnRzO1xuICAgICAgICAgICAgICAgIGlmKGxpc3RlbmVyLmRlc2VyaWFsaXplcil7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBsaXN0ZW5lci5kZXNlcmlhbGl6ZXIoYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmZuLmFwcGx5KGxpc3RlbmVyLnRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRMaXN0ZW5lci5jYWxsKGluc3RhbmNlLCBldmVudC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgc2VuZFF1ZXJ5KCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0pvYldvcmtlci5zZW5kUXVlcnkgdGFrZXMgYXQgbGVhc3Qgb25lIGFyZ3VtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgJ3F1ZXJ5TWV0aG9kJzogYXJndW1lbnRzWzBdLFxuICAgICAgICAgICAgJ3F1ZXJ5QXJndW1lbnRzJzogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBydW5Kb2Ioam9iTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcywgZGF0YURUTyl7XG4gICAgICAgIHRoaXMuc2VuZFF1ZXJ5KCdydW5Kb2InLCBqb2JOYW1lLCBqb2JQYXJhbWV0ZXJzVmFsdWVzLCBkYXRhRFRPKVxuICAgIH1cblxuICAgIGV4ZWN1dGVKb2Ioam9iRXhlY3V0aW9uSWQpe1xuICAgICAgICB0aGlzLnNlbmRRdWVyeSgnZXhlY3V0ZUpvYicsIGpvYkV4ZWN1dGlvbklkKVxuICAgIH1cblxuICAgIHJlY29tcHV0ZShkYXRhRFRPLCBydWxlTmFtZXMsIGV2YWxDb2RlLCBldmFsTnVtZXJpYyl7XG4gICAgICAgIHRoaXMuc2VuZFF1ZXJ5KCdyZWNvbXB1dGUnLCBkYXRhRFRPLCBydWxlTmFtZXMsIGV2YWxDb2RlLCBldmFsTnVtZXJpYylcbiAgICB9XG5cbiAgICBwb3N0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXIobmFtZSwgbGlzdGVuZXIsIHRoaXNBcmcsIGRlc2VyaWFsaXplcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVyc1tuYW1lXSA9IHtcbiAgICAgICAgICAgIGZuOiBsaXN0ZW5lcixcbiAgICAgICAgICAgIHRoaXNBcmc6IHRoaXNBcmcgfHwgdGhpcyxcbiAgICAgICAgICAgIGRlc2VyaWFsaXplcjogZGVzZXJpYWxpemVyXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmVtb3ZlTGlzdGVuZXIobmFtZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNbbmFtZV07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVdGlscywgbG9nfSBmcm9tIFwic2QtdXRpbHNcIjtcbmltcG9ydCB7U2Vuc2l0aXZpdHlBbmFseXNpc0pvYn0gZnJvbSBcIi4vY29uZmlndXJhdGlvbnMvc2Vuc2l0aXZpdHktYW5hbHlzaXMvbi13YXkvc2Vuc2l0aXZpdHktYW5hbHlzaXMtam9iXCI7XG5pbXBvcnQge0pvYkxhdW5jaGVyfSBmcm9tIFwiLi9lbmdpbmUvam9iLWxhdW5jaGVyXCI7XG5pbXBvcnQge0pvYldvcmtlcn0gZnJvbSBcIi4vam9iLXdvcmtlclwiO1xuaW1wb3J0IHtKb2JFeGVjdXRpb25MaXN0ZW5lcn0gZnJvbSBcIi4vZW5naW5lL2pvYi1leGVjdXRpb24tbGlzdGVuZXJcIjtcbmltcG9ydCB7Sm9iUGFyYW1ldGVyc30gZnJvbSBcIi4vZW5naW5lL2pvYi1wYXJhbWV0ZXJzXCI7XG5pbXBvcnQge0lkYkpvYlJlcG9zaXRvcnl9IGZyb20gXCIuL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS9pZGItam9iLXJlcG9zaXRvcnlcIjtcbmltcG9ydCB7Sk9CX0VYRUNVVElPTl9GTEFHfSBmcm9tIFwiLi9lbmdpbmUvam9iLWV4ZWN1dGlvbi1mbGFnXCI7XG5pbXBvcnQge1JlY29tcHV0ZUpvYn0gZnJvbSBcIi4vY29uZmlndXJhdGlvbnMvcmVjb21wdXRlL3JlY29tcHV0ZS1qb2JcIjtcbmltcG9ydCB7UHJvYmFiaWxpc3RpY1NlbnNpdGl2aXR5QW5hbHlzaXNKb2J9IGZyb20gXCIuL2NvbmZpZ3VyYXRpb25zL3NlbnNpdGl2aXR5LWFuYWx5c2lzL3Byb2JhYmlsaXN0aWMvcHJvYmFiaWxpc3RpYy1zZW5zaXRpdml0eS1hbmFseXNpcy1qb2JcIjtcbmltcG9ydCB7VGltZW91dEpvYlJlcG9zaXRvcnl9IGZyb20gXCIuL2VuZ2luZS9qb2ItcmVwb3NpdG9yeS90aW1lb3V0LWpvYi1yZXBvc2l0b3J5XCI7XG5pbXBvcnQge1Rvcm5hZG9EaWFncmFtSm9ifSBmcm9tIFwiLi9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy90b3JuYWRvLWRpYWdyYW0vdG9ybmFkby1kaWFncmFtLWpvYlwiO1xuaW1wb3J0IHtKT0JfU1RBVFVTfSBmcm9tIFwiLi9lbmdpbmUvam9iLXN0YXR1c1wiO1xuaW1wb3J0IHtTaW1wbGVKb2JSZXBvc2l0b3J5fSBmcm9tIFwiLi9lbmdpbmUvam9iLXJlcG9zaXRvcnkvc2ltcGxlLWpvYi1yZXBvc2l0b3J5XCI7XG5pbXBvcnQge0xlYWd1ZVRhYmxlSm9ifSBmcm9tIFwiLi9jb25maWd1cmF0aW9ucy9sZWFndWUtdGFibGUvbGVhZ3VlLXRhYmxlLWpvYlwiO1xuaW1wb3J0IHtTcGlkZXJQbG90Sm9ifSBmcm9tIFwiLi9jb25maWd1cmF0aW9ucy9zZW5zaXRpdml0eS1hbmFseXNpcy9zcGlkZXItcGxvdC9zcGlkZXItcGxvdC1qb2JcIjtcbmltcG9ydCB7UGF5b2Zmc1RyYW5zZm9ybWF0aW9uSm9ifSBmcm9tIFwiLi9jb25maWd1cmF0aW9ucy9wYXlvZmZzLXRyYW5zZm9ybWF0aW9uL3BheW9mZnMtdHJhbnNmb3JtYXRpb24tam9iXCI7XG5cblxuZXhwb3J0IGNsYXNzIEpvYnNNYW5hZ2VyQ29uZmlnIHtcblxuICAgIHdvcmtlclVybCA9IG51bGw7XG4gICAgcmVwb3NpdG9yeVR5cGUgPSAnaWRiJztcbiAgICBjbGVhclJlcG9zaXRvcnkgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKGN1c3RvbSkge1xuICAgICAgICBpZiAoY3VzdG9tKSB7XG4gICAgICAgICAgICBVdGlscy5kZWVwRXh0ZW5kKHRoaXMsIGN1c3RvbSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBKb2JzTWFuYWdlciBleHRlbmRzIEpvYkV4ZWN1dGlvbkxpc3RlbmVyIHtcblxuXG4gICAgdXNlV29ya2VyO1xuICAgIGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgIG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcbiAgICBqb2JXb3JrZXI7XG5cbiAgICBqb2JSZXBvc2l0b3J5O1xuICAgIGpvYkxhdW5jaGVyO1xuXG4gICAgam9iRXhlY3V0aW9uTGlzdGVuZXJzID0gW107XG5cbiAgICBhZnRlckpvYkV4ZWN1dGlvblByb21pc2VSZXNvbHZlcyA9IHt9O1xuICAgIGpvYkluc3RhbmNlc1RvVGVybWluYXRlID0ge307XG5cbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uc0V2YWx1YXRvciwgb2JqZWN0aXZlUnVsZXNNYW5hZ2VyLCBjb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zZXRDb25maWcoY29uZmlnKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbnNFdmFsdWF0b3IuZXhwcmVzc2lvbkVuZ2luZTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciA9IGV4cHJlc3Npb25zRXZhbHVhdG9yO1xuICAgICAgICB0aGlzLm9iamVjdGl2ZVJ1bGVzTWFuYWdlciA9IG9iamVjdGl2ZVJ1bGVzTWFuYWdlcjtcblxuXG4gICAgICAgIHRoaXMudXNlV29ya2VyID0gISF0aGlzLmNvbmZpZy53b3JrZXJVcmw7XG4gICAgICAgIGlmICh0aGlzLnVzZVdvcmtlcikge1xuICAgICAgICAgICAgdGhpcy5pbml0V29ya2VyKHRoaXMuY29uZmlnLndvcmtlclVybCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluaXRSZXBvc2l0b3J5KCk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckpvYnMoKTtcblxuXG5cbiAgICAgICAgdGhpcy5qb2JMYXVuY2hlciA9IG5ldyBKb2JMYXVuY2hlcih0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuam9iV29ya2VyLCAoZGF0YSk9PnRoaXMuc2VyaWFsaXplRGF0YShkYXRhKSk7XG4gICAgfVxuXG4gICAgc2V0Q29uZmlnKGNvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IG5ldyBKb2JzTWFuYWdlckNvbmZpZyhjb25maWcpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBpbml0UmVwb3NpdG9yeSgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmNvbmZpZy5yZXBvc2l0b3J5VHlwZSl7XG4gICAgICAgICAgICBjYXNlICdpZGInOlxuICAgICAgICAgICAgICAgIHRoaXMuam9iUmVwb3NpdG9yeSA9IG5ldyBJZGJKb2JSZXBvc2l0b3J5KHRoaXMuZXhwcmVzc2lvbkVuZ2luZS5nZXRKc29uUmV2aXZlcigpLCAnc2Qtam9iLXJlcG9zaXRvcnknLCB0aGlzLmNvbmZpZy5jbGVhclJlcG9zaXRvcnkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGltZW91dCc6XG4gICAgICAgICAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gbmV3IFRpbWVvdXRKb2JSZXBvc2l0b3J5KHRoaXMuZXhwcmVzc2lvbkVuZ2luZS5nZXRKc29uUmV2aXZlcigpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NpbXBsZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5ID0gbmV3IFNpbXBsZUpvYlJlcG9zaXRvcnkodGhpcy5leHByZXNzaW9uRW5naW5lLmdldEpzb25SZXZpdmVyKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoJ0pvYnNNYW5hZ2VyIGNvbmZpZ3VyYXRpb24gZXJyb3IhIFVua25vd24gcmVwb3NpdG9yeSB0eXBlOiAnK3RoaXMuY29uZmlnLnJlcG9zaXRvcnlUeXBlKycuIFVzaW5nIGRlZmF1bHQ6IGlkYicpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnJlcG9zaXRvcnlUeXBlID0gJ2lkYic7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0UmVwb3NpdG9yeSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXJpYWxpemVEYXRhKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEuc2VyaWFsaXplKHRydWUsIGZhbHNlLCBmYWxzZSwgdGhpcy5leHByZXNzaW9uRW5naW5lLmdldEpzb25SZXBsYWNlcigpKTtcbiAgICB9XG5cbiAgICBnZXRQcm9ncmVzcyhqb2JFeGVjdXRpb25PcklkKSB7XG4gICAgICAgIHZhciBpZCA9IGpvYkV4ZWN1dGlvbk9ySWQ7XG4gICAgICAgIGlmICghVXRpbHMuaXNTdHJpbmcoam9iRXhlY3V0aW9uT3JJZCkpIHtcbiAgICAgICAgICAgIGlkID0gam9iRXhlY3V0aW9uT3JJZC5pZFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iRXhlY3V0aW9uUHJvZ3Jlc3MoaWQpO1xuICAgIH1cblxuICAgIGdldFJlc3VsdChqb2JJbnN0YW5jZU9yRXhlY3V0aW9uKSB7XG4gICAgICAgIGxldCBqb2JJbnN0YW5jZSA9IGpvYkluc3RhbmNlT3JFeGVjdXRpb247XG4gICAgICAgIGxldCBqb2JFeGVjdXRpb24gPSBudWxsO1xuICAgICAgICBpZihqb2JJbnN0YW5jZU9yRXhlY3V0aW9uLmpvYkluc3RhbmNlKXtcbiAgICAgICAgICAgIGpvYkV4ZWN1dGlvbiA9IGpvYkluc3RhbmNlT3JFeGVjdXRpb247XG4gICAgICAgICAgICBqb2JJbnN0YW5jZSA9IGpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0Sm9iUmVzdWx0QnlJbnN0YW5jZShqb2JJbnN0YW5jZSk7XG4gICAgfVxuXG4gICAgcnVuKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnNWYWx1ZXMsIGRhdGEsIHJlc29sdmVQcm9taXNlQWZ0ZXJKb2JJc0xhdW5jaGVkID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JMYXVuY2hlci5ydW4oam9iTmFtZSwgam9iUGFyYW1ldGVyc1ZhbHVlcywgZGF0YSwgcmVzb2x2ZVByb21pc2VBZnRlckpvYklzTGF1bmNoZWQpLnRoZW4oam9iRXhlY3V0aW9uPT4ge1xuICAgICAgICAgICAgaWYgKHJlc29sdmVQcm9taXNlQWZ0ZXJKb2JJc0xhdW5jaGVkIHx8ICFqb2JFeGVjdXRpb24uaXNSdW5uaW5nKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gam9iRXhlY3V0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9qb2Igd2FzIGRlbGVnYXRlZCB0byB3b3JrZXIgYW5kIGlzIHN0aWxsIHJ1bm5pbmdcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWZ0ZXJKb2JFeGVjdXRpb25Qcm9taXNlUmVzb2x2ZXNbam9iRXhlY3V0aW9uLmlkXSA9IHJlc29sdmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZShqb2JFeGVjdXRpb25PcklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYkxhdW5jaGVyLmV4ZWN1dGUoam9iRXhlY3V0aW9uT3JJZCk7XG4gICAgfVxuXG4gICAgc3RvcChqb2JFeGVjdXRpb25PcklkKSB7XG4gICAgICAgIHZhciBpZCA9IGpvYkV4ZWN1dGlvbk9ySWQ7XG4gICAgICAgIGlmICghVXRpbHMuaXNTdHJpbmcoam9iRXhlY3V0aW9uT3JJZCkpIHtcbiAgICAgICAgICAgIGlkID0gam9iRXhlY3V0aW9uT3JJZC5pZFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JFeGVjdXRpb25CeUlkKGlkKS50aGVuKGpvYkV4ZWN1dGlvbj0+IHtcbiAgICAgICAgICAgIGlmICgham9iRXhlY3V0aW9uKSB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKFwiSm9iIEV4ZWN1dGlvbiBub3QgZm91bmQ6IFwiICsgam9iRXhlY3V0aW9uT3JJZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWpvYkV4ZWN1dGlvbi5pc1J1bm5pbmcoKSkge1xuICAgICAgICAgICAgICAgIGxvZy53YXJuKFwiSm9iIEV4ZWN1dGlvbiBub3QgcnVubmluZywgc3RhdHVzOiBcIiArIGpvYkV4ZWN1dGlvbi5zdGF0dXMgKyBcIiwgZW5kVGltZTogXCIgKyBqb2JFeGVjdXRpb24uZW5kVGltZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvYkV4ZWN1dGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5zYXZlSm9iRXhlY3V0aW9uRmxhZyhqb2JFeGVjdXRpb24uaWQsIEpPQl9FWEVDVVRJT05fRkxBRy5TVE9QKS50aGVuKCgpPT5qb2JFeGVjdXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKnN0b3Agam9iIGV4ZWN1dGlvbiBpZiBydW5uaW5nIGFuZCBkZWxldGUgam9iIGluc3RhbmNlIGZyb20gcmVwb3NpdG9yeSovXG4gICAgdGVybWluYXRlKGpvYkluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuZ2V0TGFzdEpvYkV4ZWN1dGlvbkJ5SW5zdGFuY2Uoam9iSW5zdGFuY2UpLnRoZW4oam9iRXhlY3V0aW9uPT4ge1xuICAgICAgICAgICAgaWYgKGpvYkV4ZWN1dGlvbikge1xuICAgICAgICAgICAgICAgIGlmKGpvYkV4ZWN1dGlvbi5pc1J1bm5pbmcoKSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYlJlcG9zaXRvcnkuc2F2ZUpvYkV4ZWN1dGlvbkZsYWcoam9iRXhlY3V0aW9uLmlkLCBKT0JfRVhFQ1VUSU9OX0ZMQUcuU1RPUCkudGhlbigoKT0+am9iRXhlY3V0aW9uKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5yZW1vdmVKb2JJbnN0YW5jZShqb2JJbnN0YW5jZSwgam9iRXhlY3V0aW9uLmpvYlBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbigoKT0+e1xuICAgICAgICAgICAgdGhpcy5qb2JJbnN0YW5jZXNUb1Rlcm1pbmF0ZVtqb2JJbnN0YW5jZS5pZF09am9iSW5zdGFuY2U7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0Sm9iQnlOYW1lKGpvYk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JCeU5hbWUoam9iTmFtZSk7XG4gICAgfVxuXG5cbiAgICBjcmVhdGVKb2JQYXJhbWV0ZXJzKGpvYk5hbWUsIGpvYlBhcmFtZXRlcnNWYWx1ZXMpIHtcbiAgICAgICAgdmFyIGpvYiA9IHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JCeU5hbWUoam9iTmFtZSk7XG4gICAgICAgIHJldHVybiBqb2IuY3JlYXRlSm9iUGFyYW1ldGVycyhqb2JQYXJhbWV0ZXJzVmFsdWVzKTtcbiAgICB9XG5cblxuICAgIC8qUmV0dXJucyBhIHByb21pc2UqL1xuICAgIGdldExhc3RKb2JFeGVjdXRpb24oam9iTmFtZSwgam9iUGFyYW1ldGVycykge1xuICAgICAgICBpZiAodGhpcy51c2VXb3JrZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmpvYldvcmtlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShqb2JQYXJhbWV0ZXJzIGluc3RhbmNlb2YgSm9iUGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgIGpvYlBhcmFtZXRlcnMgPSB0aGlzLmNyZWF0ZUpvYlBhcmFtZXRlcnMoam9iUGFyYW1ldGVycylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LmdldExhc3RKb2JFeGVjdXRpb24oam9iTmFtZSwgam9iUGFyYW1ldGVycyk7XG4gICAgfVxuXG4gICAgaW5pdFdvcmtlcih3b3JrZXJVcmwpIHtcbiAgICAgICAgdGhpcy5qb2JXb3JrZXIgPSBuZXcgSm9iV29ya2VyKHdvcmtlclVybCwgKCk9PntcbiAgICAgICAgICAgIGxvZy5lcnJvcignZXJyb3IgaW4gd29ya2VyJywgYXJndW1lbnRzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBhcmdzRGVzZXJpYWxpemVyID0gKGFyZ3MpPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmpvYlJlcG9zaXRvcnkucmV2aXZlSm9iRXhlY3V0aW9uKGFyZ3NbMF0pXVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuam9iV29ya2VyLmFkZExpc3RlbmVyKFwiYmVmb3JlSm9iXCIsIHRoaXMuYmVmb3JlSm9iLCB0aGlzLCBhcmdzRGVzZXJpYWxpemVyKTtcbiAgICAgICAgdGhpcy5qb2JXb3JrZXIuYWRkTGlzdGVuZXIoXCJhZnRlckpvYlwiLCB0aGlzLmFmdGVySm9iLCB0aGlzLCBhcmdzRGVzZXJpYWxpemVyKTtcbiAgICAgICAgdGhpcy5qb2JXb3JrZXIuYWRkTGlzdGVuZXIoXCJqb2JGYXRhbEVycm9yXCIsIHRoaXMub25Kb2JGYXRhbEVycm9yLCB0aGlzKTtcbiAgICB9XG5cbiAgICByZWdpc3RlckpvYnMoKSB7XG5cbiAgICAgICAgbGV0IHNlbnNpdGl2aXR5QW5hbHlzaXNKb2IgPSBuZXcgU2Vuc2l0aXZpdHlBbmFseXNpc0pvYih0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IsIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyKTtcbiAgICAgICAgbGV0IHByb2JhYmlsaXN0aWNTZW5zaXRpdml0eUFuYWx5c2lzSm9iID0gbmV3IFByb2JhYmlsaXN0aWNTZW5zaXRpdml0eUFuYWx5c2lzSm9iKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIpO1xuICAgICAgICBpZighVXRpbHMuaXNXb3JrZXIoKSl7XG4gICAgICAgICAgICBzZW5zaXRpdml0eUFuYWx5c2lzSm9iLnNldEJhdGNoU2l6ZSgxKTtcbiAgICAgICAgICAgIHByb2JhYmlsaXN0aWNTZW5zaXRpdml0eUFuYWx5c2lzSm9iLnNldEJhdGNoU2l6ZSgxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJKb2Ioc2Vuc2l0aXZpdHlBbmFseXNpc0pvYik7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJKb2IobmV3IFRvcm5hZG9EaWFncmFtSm9iKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckpvYihwcm9iYWJpbGlzdGljU2Vuc2l0aXZpdHlBbmFseXNpc0pvYik7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJKb2IobmV3IFJlY29tcHV0ZUpvYih0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IsIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJKb2IobmV3IExlYWd1ZVRhYmxlSm9iKHRoaXMuam9iUmVwb3NpdG9yeSwgdGhpcy5leHByZXNzaW9uc0V2YWx1YXRvciwgdGhpcy5vYmplY3RpdmVSdWxlc01hbmFnZXIpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckpvYihuZXcgU3BpZGVyUGxvdEpvYih0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IsIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJKb2IobmV3IFBheW9mZnNUcmFuc2Zvcm1hdGlvbkpvYih0aGlzLmpvYlJlcG9zaXRvcnksIHRoaXMuZXhwcmVzc2lvbnNFdmFsdWF0b3IsIHRoaXMub2JqZWN0aXZlUnVsZXNNYW5hZ2VyKSk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJKb2Ioam9iKSB7XG4gICAgICAgIHRoaXMuam9iUmVwb3NpdG9yeS5yZWdpc3RlckpvYihqb2IpO1xuICAgICAgICBqb2IucmVnaXN0ZXJFeGVjdXRpb25MaXN0ZW5lcih0aGlzKVxuICAgIH1cblxuICAgIHJlZ2lzdGVySm9iRXhlY3V0aW9uTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgZGVyZWdpc3RlckpvYkV4ZWN1dGlvbkxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuam9iRXhlY3V0aW9uTGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5qb2JFeGVjdXRpb25MaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYmVmb3JlSm9iKGpvYkV4ZWN1dGlvbikge1xuICAgICAgICBsb2cuZGVidWcoXCJiZWZvcmVKb2JcIiwgdGhpcy51c2VXb3JrZXIsIGpvYkV4ZWN1dGlvbik7XG4gICAgICAgIHRoaXMuam9iRXhlY3V0aW9uTGlzdGVuZXJzLmZvckVhY2gobD0+bC5iZWZvcmVKb2Ioam9iRXhlY3V0aW9uKSk7XG4gICAgfVxuXG4gICAgYWZ0ZXJKb2Ioam9iRXhlY3V0aW9uKSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcImFmdGVySm9iXCIsIHRoaXMudXNlV29ya2VyLCBqb2JFeGVjdXRpb24pO1xuICAgICAgICB0aGlzLmpvYkV4ZWN1dGlvbkxpc3RlbmVycy5mb3JFYWNoKGw9PmwuYWZ0ZXJKb2Ioam9iRXhlY3V0aW9uKSk7XG4gICAgICAgIHZhciBwcm9taXNlUmVzb2x2ZSA9IHRoaXMuYWZ0ZXJKb2JFeGVjdXRpb25Qcm9taXNlUmVzb2x2ZXNbam9iRXhlY3V0aW9uLmlkXTtcbiAgICAgICAgaWYgKHByb21pc2VSZXNvbHZlKSB7XG4gICAgICAgICAgICBwcm9taXNlUmVzb2x2ZShqb2JFeGVjdXRpb24pXG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmpvYkluc3RhbmNlc1RvVGVybWluYXRlW2pvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZS5pZF0pe1xuICAgICAgICAgICAgdGhpcy5qb2JSZXBvc2l0b3J5LnJlbW92ZUpvYkluc3RhbmNlKGpvYkV4ZWN1dGlvbi5qb2JJbnN0YW5jZSwgam9iRXhlY3V0aW9uLmpvYlBhcmFtZXRlcnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Kb2JGYXRhbEVycm9yKGpvYkV4ZWN1dGlvbklkLCBlcnJvcil7XG4gICAgICAgIHZhciBwcm9taXNlUmVzb2x2ZSA9IHRoaXMuYWZ0ZXJKb2JFeGVjdXRpb25Qcm9taXNlUmVzb2x2ZXNbam9iRXhlY3V0aW9uSWRdO1xuICAgICAgICBpZiAocHJvbWlzZVJlc29sdmUpIHtcbiAgICAgICAgICAgIHRoaXMuam9iUmVwb3NpdG9yeS5nZXRKb2JFeGVjdXRpb25CeUlkKGpvYkV4ZWN1dGlvbklkKS50aGVuKGpvYkV4ZWN1dGlvbj0+e1xuICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5zdGF0dXMgPSBKT0JfU1RBVFVTLkZBSUxFRDtcbiAgICAgICAgICAgICAgICBpZihlcnJvcil7XG4gICAgICAgICAgICAgICAgICAgIGpvYkV4ZWN1dGlvbi5mYWlsdXJlRXhjZXB0aW9ucy5wdXNoKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5qb2JSZXBvc2l0b3J5LnNhdmVKb2JFeGVjdXRpb24oam9iRXhlY3V0aW9uKS50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VSZXNvbHZlKGpvYkV4ZWN1dGlvbik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLmNhdGNoKGU9PntcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIH1cbiAgICAgICAgbG9nLmRlYnVnKCdvbkpvYkZhdGFsRXJyb3InLCBqb2JFeGVjdXRpb25JZCwgZXJyb3IpO1xuICAgIH1cblxuXG59XG4iLCJpbXBvcnQge1xuICAgIEV4cGVjdGVkVmFsdWVNYXhpbWl6YXRpb25SdWxlLFxuICAgIEV4cGVjdGVkVmFsdWVNaW5pbWl6YXRpb25SdWxlLFxuICAgIE1heGlNaW5SdWxlLFxuICAgIE1heGlNYXhSdWxlLFxuICAgIE1pbmlNaW5SdWxlLFxuICAgIE1pbmlNYXhSdWxlXG59IGZyb20gXCIuL3J1bGVzXCI7XG5pbXBvcnQge2xvZ30gZnJvbSBcInNkLXV0aWxzXCI7XG5pbXBvcnQgKiBhcyBtb2RlbCBmcm9tIFwic2QtbW9kZWxcIjtcbmltcG9ydCB7TWluTWF4UnVsZX0gZnJvbSBcIi4vcnVsZXMvbWluLW1heC1ydWxlXCI7XG5pbXBvcnQge01heE1pblJ1bGV9IGZyb20gXCIuL3J1bGVzL21heC1taW4tcnVsZVwiO1xuaW1wb3J0IHtNaW5NaW5SdWxlfSBmcm9tIFwiLi9ydWxlcy9taW4tbWluLXJ1bGVcIjtcbmltcG9ydCB7TWF4TWF4UnVsZX0gZnJvbSBcIi4vcnVsZXMvbWF4LW1heC1ydWxlXCI7XG5cbmV4cG9ydCBjbGFzcyBPYmplY3RpdmVSdWxlc01hbmFnZXJ7XG5cbiAgICBleHByZXNzaW9uRW5naW5lO1xuICAgIGN1cnJlbnRSdWxlO1xuICAgIHJ1bGVCeU5hbWUgPSB7fTtcbiAgICBydWxlcyA9IFtdO1xuXG5cbiAgICBmbGlwUGFpciA9IHt9O1xuICAgIHBheW9mZkluZGV4ID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUsIGN1cnJlbnRSdWxlTmFtZSkge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmUgPSBleHByZXNzaW9uRW5naW5lO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobmV3IEV4cGVjdGVkVmFsdWVNYXhpbWl6YXRpb25SdWxlKGV4cHJlc3Npb25FbmdpbmUpKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG5ldyBFeHBlY3RlZFZhbHVlTWluaW1pemF0aW9uUnVsZShleHByZXNzaW9uRW5naW5lKSk7XG4gICAgICAgIHRoaXMuYWRkUnVsZShuZXcgTWF4aU1pblJ1bGUoZXhwcmVzc2lvbkVuZ2luZSkpO1xuICAgICAgICB0aGlzLmFkZFJ1bGUobmV3IE1heGlNYXhSdWxlKGV4cHJlc3Npb25FbmdpbmUpKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG5ldyBNaW5pTWluUnVsZShleHByZXNzaW9uRW5naW5lKSk7XG4gICAgICAgIHRoaXMuYWRkUnVsZShuZXcgTWluaU1heFJ1bGUoZXhwcmVzc2lvbkVuZ2luZSkpO1xuXG4gICAgICAgIGxldCBtaW5NYXggPSBuZXcgTWluTWF4UnVsZShleHByZXNzaW9uRW5naW5lKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG1pbk1heCk7XG4gICAgICAgIGxldCBtYXhNaW4gPSBuZXcgTWF4TWluUnVsZShleHByZXNzaW9uRW5naW5lKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG1heE1pbik7XG4gICAgICAgIHRoaXMuYWRkRmxpcFBhaXIobWluTWF4LCBtYXhNaW4pO1xuXG4gICAgICAgIGxldCBtaW5NaW4gPSBuZXcgTWluTWluUnVsZShleHByZXNzaW9uRW5naW5lKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG1pbk1pbik7XG4gICAgICAgIGxldCBtYXhNYXggPSBuZXcgTWF4TWF4UnVsZShleHByZXNzaW9uRW5naW5lKTtcbiAgICAgICAgdGhpcy5hZGRSdWxlKG1heE1heCk7XG5cblxuICAgICAgICBpZiAoY3VycmVudFJ1bGVOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSdWxlID0gdGhpcy5ydWxlQnlOYW1lW2N1cnJlbnRSdWxlTmFtZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSdWxlID0gdGhpcy5ydWxlc1swXTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBzZXRQYXlvZmZJbmRleChwYXlvZmZJbmRleCl7XG4gICAgICAgIHRoaXMucGF5b2ZmSW5kZXggPSBwYXlvZmZJbmRleCB8fCAwO1xuICAgIH1cblxuICAgIGFkZFJ1bGUocnVsZSl7XG4gICAgICAgIHRoaXMucnVsZUJ5TmFtZVtydWxlLm5hbWVdPXJ1bGU7XG4gICAgICAgIHRoaXMucnVsZXMucHVzaChydWxlKTtcbiAgICB9XG5cbiAgICBpc1J1bGVOYW1lKHJ1bGVOYW1lKXtcbiAgICAgICAgIHJldHVybiAhIXRoaXMucnVsZUJ5TmFtZVtydWxlTmFtZV1cbiAgICB9XG5cbiAgICBzZXRDdXJyZW50UnVsZUJ5TmFtZShydWxlTmFtZSl7XG4gICAgICAgIHRoaXMuY3VycmVudFJ1bGUgPSB0aGlzLnJ1bGVCeU5hbWVbcnVsZU5hbWVdO1xuICAgIH1cblxuICAgIGdldE9iamVjdGl2ZVJ1bGVCeU5hbWUocnVsZU5hbWUpe1xuICAgICAgICByZXR1cm4gdGhpcy5ydWxlQnlOYW1lW3J1bGVOYW1lXTtcbiAgICB9XG5cbiAgICBmbGlwUnVsZSgpe1xuICAgICAgICB2YXIgZmxpcHBlZCA9IHRoaXMuZmxpcFBhaXJbdGhpcy5jdXJyZW50UnVsZS5uYW1lXTtcbiAgICAgICAgaWYoZmxpcHBlZCl7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSdWxlID0gZmxpcHBlZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZURlZmF1bHRDcml0ZXJpb24xV2VpZ2h0KGRlZmF1bHRDcml0ZXJpb24xV2VpZ2h0KXtcbiAgICAgICAgdGhpcy5ydWxlcy5maWx0ZXIocj0+ci5tdWx0aUNyaXRlcmlhKS5mb3JFYWNoKHI9PnIuc2V0RGVmYXVsdENyaXRlcmlvbjFXZWlnaHQoZGVmYXVsdENyaXRlcmlvbjFXZWlnaHQpKTtcbiAgICB9XG5cbiAgICByZWNvbXB1dGUoZGF0YU1vZGVsLCBhbGxSdWxlcywgZGVjaXNpb25Qb2xpY3k9bnVsbCl7XG5cbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBsb2cudHJhY2UoJ3JlY29tcHV0aW5nIHJ1bGVzLCBhbGw6ICcrYWxsUnVsZXMpO1xuXG4gICAgICAgIGRhdGFNb2RlbC5nZXRSb290cygpLmZvckVhY2gobj0+e1xuICAgICAgICAgICAgdGhpcy5yZWNvbXB1dGVUcmVlKG4sIGFsbFJ1bGVzLCBkZWNpc2lvblBvbGljeSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciB0aW1lICA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZS8xMDAwKTtcbiAgICAgICAgbG9nLnRyYWNlKCdyZWNvbXB1dGF0aW9uIHRvb2sgJyt0aW1lKydzJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcmVjb21wdXRlVHJlZShyb290LCBhbGxSdWxlcywgZGVjaXNpb25Qb2xpY3k9bnVsbCl7XG4gICAgICAgIGxvZy50cmFjZSgncmVjb21wdXRpbmcgcnVsZXMgZm9yIHRyZWUgLi4uJywgcm9vdCk7XG5cbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgIHZhciBydWxlcyAgPSBbdGhpcy5jdXJyZW50UnVsZV07XG4gICAgICAgIGlmKGFsbFJ1bGVzKXtcbiAgICAgICAgICAgIHJ1bGVzID0gdGhpcy5ydWxlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJ1bGVzLmZvckVhY2gocnVsZT0+IHtcbiAgICAgICAgICAgIHJ1bGUuc2V0UGF5b2ZmSW5kZXgodGhpcy5wYXlvZmZJbmRleCk7XG4gICAgICAgICAgICBydWxlLnNldERlY2lzaW9uUG9saWN5KGRlY2lzaW9uUG9saWN5KTtcbiAgICAgICAgICAgIHJ1bGUuY29tcHV0ZVBheW9mZihyb290KTtcbiAgICAgICAgICAgIHJ1bGUuY29tcHV0ZU9wdGltYWwocm9vdCk7XG4gICAgICAgICAgICBydWxlLmNsZWFyRGVjaXNpb25Qb2xpY3koKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHRpbWUgID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lKS8xMDAwO1xuICAgICAgICBsb2cudHJhY2UoJ3JlY29tcHV0YXRpb24gdG9vayAnK3RpbWUrJ3MnKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIGdldE5vZGVEaXNwbGF5VmFsdWUobm9kZSwgbmFtZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5jb21wdXRlZFZhbHVlKHRoaXMuY3VycmVudFJ1bGUubmFtZSwgbmFtZSlcblxuICAgIH1cblxuICAgIGdldEVkZ2VEaXNwbGF5VmFsdWUoZSwgbmFtZSl7XG4gICAgICAgIGlmKG5hbWU9PT0ncHJvYmFiaWxpdHknKXtcbiAgICAgICAgICAgIGlmKGUucGFyZW50Tm9kZSBpbnN0YW5jZW9mIG1vZGVsLmRvbWFpbi5EZWNpc2lvbk5vZGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmNvbXB1dGVkVmFsdWUodGhpcy5jdXJyZW50UnVsZS5uYW1lLCAncHJvYmFiaWxpdHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGUucGFyZW50Tm9kZSBpbnN0YW5jZW9mIG1vZGVsLmRvbWFpbi5DaGFuY2VOb2RlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5jb21wdXRlZEJhc2VQcm9iYWJpbGl0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYobmFtZT09PSdwYXlvZmYnKXtcbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudFJ1bGUubXVsdGlDcml0ZXJpYSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuY29tcHV0ZWRWYWx1ZShudWxsLCAncGF5b2ZmJyk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5jb21wdXRlZFZhbHVlKG51bGwsICdwYXlvZmZbJyArdGhpcy5wYXlvZmZJbmRleCArICddJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBpZihuYW1lPT09J29wdGltYWwnKXtcbiAgICAgICAgICAgIHJldHVybiBlLmNvbXB1dGVkVmFsdWUodGhpcy5jdXJyZW50UnVsZS5uYW1lLCAnb3B0aW1hbCcpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRGbGlwUGFpcihydWxlMSwgcnVsZTIpIHtcbiAgICAgICAgdGhpcy5mbGlwUGFpcltydWxlMS5uYW1lXSA9IHJ1bGUyO1xuICAgICAgICB0aGlzLmZsaXBQYWlyW3J1bGUyLm5hbWVdID0gcnVsZTE7XG4gICAgfVxuXG5cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7T2JqZWN0aXZlUnVsZX0gZnJvbSAnLi9vYmplY3RpdmUtcnVsZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gJ3NkLXV0aWxzJ1xuXG4vKmV4cGVjdGVkIHZhbHVlIG1heGltaXphdGlvbiBydWxlKi9cbmV4cG9ydCBjbGFzcyBFeHBlY3RlZFZhbHVlTWF4aW1pemF0aW9uUnVsZSBleHRlbmRzIE9iamVjdGl2ZVJ1bGV7XG5cbiAgICBzdGF0aWMgTkFNRSA9ICdleHBlY3RlZC12YWx1ZS1tYXhpbWl6YXRpb24nO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKEV4cGVjdGVkVmFsdWVNYXhpbWl6YXRpb25SdWxlLk5BTUUsIHRydWUsIGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cblxuICAgIC8vICBwYXlvZmYgLSBwYXJlbnQgZWRnZSBwYXlvZmZcbiAgICBjb21wdXRlT3B0aW1hbChub2RlLCBwYXlvZmY9MCwgcHJvYmFiaWxpdHlUb0VudGVyPTEpe1xuICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICBpZihub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKXtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdwcm9iYWJpbGl0eVRvRW50ZXInLCBwcm9iYWJpbGl0eVRvRW50ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+e1xuICAgICAgICAgICAgaWYgKCB0aGlzLnN1YnRyYWN0KHRoaXMuY29tcHV0ZWRQYXlvZmYobm9kZSkscGF5b2ZmKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpIHx8ICEobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZSkgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVPcHRpbWFsKGUuY2hpbGROb2RlLCB0aGlzLmJhc2VQYXlvZmYoZSksIHRoaXMubXVsdGlwbHkocHJvYmFiaWxpdHlUb0VudGVyLCB0aGlzLmNWYWx1ZShlLCdwcm9iYWJpbGl0eScpKSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7T2JqZWN0aXZlUnVsZX0gZnJvbSAnLi9vYmplY3RpdmUtcnVsZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG4vKmV4cGVjdGVkIHZhbHVlIG1pbmltaXphdGlvbiBydWxlKi9cbmV4cG9ydCBjbGFzcyBFeHBlY3RlZFZhbHVlTWluaW1pemF0aW9uUnVsZSBleHRlbmRzIE9iamVjdGl2ZVJ1bGV7XG5cbiAgICBzdGF0aWMgTkFNRSA9ICdleHBlY3RlZC12YWx1ZS1taW5pbWl6YXRpb24nO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKEV4cGVjdGVkVmFsdWVNaW5pbWl6YXRpb25SdWxlLk5BTUUsIGZhbHNlLCBleHByZXNzaW9uRW5naW5lKTtcbiAgICB9XG5cbiAgICAvLyAgcGF5b2ZmIC0gcGFyZW50IGVkZ2UgcGF5b2ZmXG4gICAgY29tcHV0ZU9wdGltYWwobm9kZSwgcGF5b2ZmPTAsIHByb2JhYmlsaXR5VG9FbnRlcj0xKXtcbiAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgaWYobm9kZSBpbnN0YW5jZW9mIG1vZGVsLlRlcm1pbmFsTm9kZSl7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAncHJvYmFiaWxpdHlUb0VudGVyJywgcHJvYmFiaWxpdHlUb0VudGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgIGlmICggdGhpcy5zdWJ0cmFjdCh0aGlzLmNvbXB1dGVkUGF5b2ZmKG5vZGUpLHBheW9mZikuZXF1YWxzKHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpKSB8fCAhKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5EZWNpc2lvbk5vZGUpICkge1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlT3B0aW1hbChlLmNoaWxkTm9kZSwgdGhpcy5iYXNlUGF5b2ZmKGUpLCB0aGlzLm11bHRpcGx5KHByb2JhYmlsaXR5VG9FbnRlciwgdGhpcy5jVmFsdWUoZSwncHJvYmFiaWxpdHknKSkpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG59XG4iLCJleHBvcnQgKiBmcm9tICcuL29iamVjdGl2ZS1ydWxlJ1xuZXhwb3J0ICogZnJvbSAnLi9leHBlY3RlZC12YWx1ZS1tYXhpbWl6YXRpb24tcnVsZSdcbmV4cG9ydCAqIGZyb20gJy4vZXhwZWN0ZWQtdmFsdWUtbWluaW1pemF0aW9uLXJ1bGUnXG5leHBvcnQgKiBmcm9tICcuL21heGktbWF4LXJ1bGUnXG5leHBvcnQgKiBmcm9tICcuL21heGktbWluLXJ1bGUnXG5leHBvcnQgKiBmcm9tICcuL21pbmktbWF4LXJ1bGUnXG5leHBvcnQgKiBmcm9tICcuL21pbmktbWluLXJ1bGUnXG5cblxuIiwiaW1wb3J0IHtNdWx0aUNyaXRlcmlhUnVsZX0gZnJvbSBcIi4vbXVsdGktY3JpdGVyaWEtcnVsZVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBNYXhNYXhSdWxlIGV4dGVuZHMgTXVsdGlDcml0ZXJpYVJ1bGV7XG5cbiAgICBzdGF0aWMgTkFNRSA9ICdtYXgtbWF4JztcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICBzdXBlcihNYXhNYXhSdWxlLk5BTUUsIFsxLCAxXSwgZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtNdWx0aUNyaXRlcmlhUnVsZX0gZnJvbSBcIi4vbXVsdGktY3JpdGVyaWEtcnVsZVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBNYXhNaW5SdWxlIGV4dGVuZHMgTXVsdGlDcml0ZXJpYVJ1bGV7XG5cbiAgICBzdGF0aWMgTkFNRSA9ICdtYXgtbWluJztcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICBzdXBlcihNYXhNaW5SdWxlLk5BTUUsIFsxLCAtMV0sIGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7T2JqZWN0aXZlUnVsZX0gZnJvbSAnLi9vYmplY3RpdmUtcnVsZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG4vKm1heGktbWF4IHJ1bGUqL1xuZXhwb3J0IGNsYXNzIE1heGlNYXhSdWxlIGV4dGVuZHMgT2JqZWN0aXZlUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ21heGktbWF4JztcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICBzdXBlcihNYXhpTWF4UnVsZS5OQU1FLCB0cnVlLCBleHByZXNzaW9uRW5naW5lKTtcbiAgICB9XG5cblxuICAgIG1vZGlmeUNoYW5jZVByb2JhYmlsaXR5KGVkZ2VzLCBiZXN0Q2hpbGRQYXlvZmYsIGJlc3RDb3VudCwgd29yc3RDaGlsZFBheW9mZiwgd29yc3RDb3VudCl7XG4gICAgICAgIGVkZ2VzLmZvckVhY2goZT0+e1xuICAgICAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKGUpO1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JywgdGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSk8YmVzdENoaWxkUGF5b2ZmID8gMC4wIDogKDEuMC9iZXN0Q291bnQpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gIHBheW9mZiAtIHBhcmVudCBlZGdlIHBheW9mZlxuICAgIGNvbXB1dGVPcHRpbWFsKG5vZGUsIHBheW9mZiA9IDAsIHByb2JhYmlsaXR5VG9FbnRlciA9IDEpIHtcbiAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5UZXJtaW5hbE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdwcm9iYWJpbGl0eVRvRW50ZXInLCBwcm9iYWJpbGl0eVRvRW50ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wdGltYWxFZGdlID0gbnVsbDtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlKSB7XG4gICAgICAgICAgICBvcHRpbWFsRWRnZSA9IFV0aWxzLm1heEJ5KG5vZGUuY2hpbGRFZGdlcywgZT0+dGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgIHZhciBpc09wdGltYWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChvcHRpbWFsRWRnZSkge1xuICAgICAgICAgICAgICAgIGlzT3B0aW1hbCA9IHRoaXMuY29tcHV0ZWRQYXlvZmYob3B0aW1hbEVkZ2UuY2hpbGROb2RlKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlzT3B0aW1hbCA9ICEhKHRoaXMuc3VidHJhY3QodGhpcy5jb21wdXRlZFBheW9mZihub2RlKSwgcGF5b2ZmKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpIHx8ICEobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZSkpO1xuXG4gICAgICAgICAgICBpZiAoaXNPcHRpbWFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVPcHRpbWFsKGUuY2hpbGROb2RlLCB0aGlzLmJhc2VQYXlvZmYoZSksIHRoaXMubXVsdGlwbHkocHJvYmFiaWxpdHlUb0VudGVyLCB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7T2JqZWN0aXZlUnVsZX0gZnJvbSAnLi9vYmplY3RpdmUtcnVsZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG4vKm1heGktbWluIHJ1bGUqL1xuZXhwb3J0IGNsYXNzIE1heGlNaW5SdWxlIGV4dGVuZHMgT2JqZWN0aXZlUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ21heGktbWluJztcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICBzdXBlcihNYXhpTWluUnVsZS5OQU1FLCB0cnVlLCBleHByZXNzaW9uRW5naW5lKTtcbiAgICB9XG5cbiAgICBtb2RpZnlDaGFuY2VQcm9iYWJpbGl0eShlZGdlcywgYmVzdENoaWxkUGF5b2ZmLCBiZXN0Q291bnQsIHdvcnN0Q2hpbGRQYXlvZmYsIHdvcnN0Q291bnQpe1xuICAgICAgICBlZGdlcy5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDb21wdXRlZFZhbHVlcyhlKTtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScsIHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpPndvcnN0Q2hpbGRQYXlvZmYgPyAwLjAgOiAoMS4wL3dvcnN0Q291bnQpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gIHBheW9mZiAtIHBhcmVudCBlZGdlIHBheW9mZlxuICAgIGNvbXB1dGVPcHRpbWFsKG5vZGUsIHBheW9mZiA9IDAsIHByb2JhYmlsaXR5VG9FbnRlciA9IDEpIHtcbiAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5UZXJtaW5hbE5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdwcm9iYWJpbGl0eVRvRW50ZXInLCBwcm9iYWJpbGl0eVRvRW50ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wdGltYWxFZGdlID0gbnVsbDtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlKSB7XG4gICAgICAgICAgICBvcHRpbWFsRWRnZSA9IFV0aWxzLm1pbkJ5KG5vZGUuY2hpbGRFZGdlcywgZT0+dGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgIHZhciBpc09wdGltYWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChvcHRpbWFsRWRnZSkge1xuICAgICAgICAgICAgICAgIGlzT3B0aW1hbCA9IHRoaXMuY29tcHV0ZWRQYXlvZmYob3B0aW1hbEVkZ2UuY2hpbGROb2RlKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlzT3B0aW1hbCA9ICEhKHRoaXMuc3VidHJhY3QodGhpcy5jb21wdXRlZFBheW9mZihub2RlKSwgcGF5b2ZmKS5lcXVhbHModGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpIHx8ICEobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZSkpO1xuXG4gICAgICAgICAgICBpZiAoaXNPcHRpbWFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVPcHRpbWFsKGUuY2hpbGROb2RlLCB0aGlzLmJhc2VQYXlvZmYoZSksIHRoaXMubXVsdGlwbHkocHJvYmFiaWxpdHlUb0VudGVyLCB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7TXVsdGlDcml0ZXJpYVJ1bGV9IGZyb20gXCIuL211bHRpLWNyaXRlcmlhLXJ1bGVcIjtcblxuXG5leHBvcnQgY2xhc3MgTWluTWF4UnVsZSBleHRlbmRzIE11bHRpQ3JpdGVyaWFSdWxle1xuXG4gICAgc3RhdGljIE5BTUUgPSAnbWluLW1heCc7XG5cbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKXtcbiAgICAgICAgc3VwZXIoTWluTWF4UnVsZS5OQU1FLCBbLTEsIDFdLCBleHByZXNzaW9uRW5naW5lKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge011bHRpQ3JpdGVyaWFSdWxlfSBmcm9tIFwiLi9tdWx0aS1jcml0ZXJpYS1ydWxlXCI7XG5cblxuZXhwb3J0IGNsYXNzIE1pbk1pblJ1bGUgZXh0ZW5kcyBNdWx0aUNyaXRlcmlhUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ21pbi1taW4nO1xuXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHN1cGVyKE1pbk1pblJ1bGUuTkFNRSwgWy0xLCAtMV0sIGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7T2JqZWN0aXZlUnVsZX0gZnJvbSAnLi9vYmplY3RpdmUtcnVsZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG4vKm1pbmktbWF4IHJ1bGUqL1xuZXhwb3J0IGNsYXNzIE1pbmlNYXhSdWxlIGV4dGVuZHMgT2JqZWN0aXZlUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ21pbmktbWF4JztcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICBzdXBlcihNaW5pTWF4UnVsZS5OQU1FLCBmYWxzZSwgZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxuXG4gICAgbW9kaWZ5Q2hhbmNlUHJvYmFiaWxpdHkoZWRnZXMsIGJlc3RDaGlsZFBheW9mZiwgYmVzdENvdW50LCB3b3JzdENoaWxkUGF5b2ZmLCB3b3JzdENvdW50KXtcbiAgICAgICAgZWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoZSk7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknLCB0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKTxiZXN0Q2hpbGRQYXlvZmYgPyAwLjAgOiAoMS4wL2Jlc3RDb3VudCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAgcGF5b2ZmIC0gcGFyZW50IGVkZ2UgcGF5b2ZmXG4gICAgY29tcHV0ZU9wdGltYWwobm9kZSwgcGF5b2ZmID0gMCwgcHJvYmFiaWxpdHlUb0VudGVyID0gMSkge1xuICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLlRlcm1pbmFsTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ3Byb2JhYmlsaXR5VG9FbnRlcicsIHByb2JhYmlsaXR5VG9FbnRlcik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3B0aW1hbEVkZ2UgPSBudWxsO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkNoYW5jZU5vZGUpIHtcbiAgICAgICAgICAgIG9wdGltYWxFZGdlID0gVXRpbHMubWF4Qnkobm9kZS5jaGlsZEVkZ2VzLCBlPT50aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgdmFyIGlzT3B0aW1hbCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG9wdGltYWxFZGdlKSB7XG4gICAgICAgICAgICAgICAgaXNPcHRpbWFsID0gdGhpcy5jb21wdXRlZFBheW9mZihvcHRpbWFsRWRnZS5jaGlsZE5vZGUpLmVxdWFscyh0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSk7XG4gICAgICAgICAgICB9IGVsc2UgaXNPcHRpbWFsID0gISEodGhpcy5zdWJ0cmFjdCh0aGlzLmNvbXB1dGVkUGF5b2ZmKG5vZGUpLCBwYXlvZmYpLmVxdWFscyh0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKSkgfHwgIShub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKSk7XG5cbiAgICAgICAgICAgIGlmIChpc09wdGltYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU9wdGltYWwoZS5jaGlsZE5vZGUsIHRoaXMuYmFzZVBheW9mZihlKSwgdGhpcy5tdWx0aXBseShwcm9iYWJpbGl0eVRvRW50ZXIsIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScpKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn1cbiIsImltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tICdzZC1tb2RlbCdcbmltcG9ydCB7T2JqZWN0aXZlUnVsZX0gZnJvbSAnLi9vYmplY3RpdmUtcnVsZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG4vKm1pbmktbWluIHJ1bGUqL1xuZXhwb3J0IGNsYXNzIE1pbmlNaW5SdWxlIGV4dGVuZHMgT2JqZWN0aXZlUnVsZXtcblxuICAgIHN0YXRpYyBOQU1FID0gJ21pbmktbWluJztcblxuICAgIGNvbnN0cnVjdG9yKGV4cHJlc3Npb25FbmdpbmUpe1xuICAgICAgICBzdXBlcihNaW5pTWluUnVsZS5OQU1FLCBmYWxzZSwgZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxuXG4gICAgbW9kaWZ5Q2hhbmNlUHJvYmFiaWxpdHkoZWRnZXMsIGJlc3RDaGlsZFBheW9mZiwgYmVzdENvdW50LCB3b3JzdENoaWxkUGF5b2ZmLCB3b3JzdENvdW50KXtcbiAgICAgICAgZWRnZXMuZm9yRWFjaChlPT57XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ29tcHV0ZWRWYWx1ZXMoZSk7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknLCB0aGlzLmNvbXB1dGVkUGF5b2ZmKGUuY2hpbGROb2RlKT53b3JzdENoaWxkUGF5b2ZmID8gMC4wIDogKDEuMC93b3JzdENvdW50KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICBwYXlvZmYgLSBwYXJlbnQgZWRnZSBwYXlvZmZcbiAgICBjb21wdXRlT3B0aW1hbChub2RlLCBwYXlvZmYgPSAwLCBwcm9iYWJpbGl0eVRvRW50ZXIgPSAxKSB7XG4gICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAncHJvYmFiaWxpdHlUb0VudGVyJywgcHJvYmFiaWxpdHlUb0VudGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvcHRpbWFsRWRnZSA9IG51bGw7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuQ2hhbmNlTm9kZSkge1xuICAgICAgICAgICAgb3B0aW1hbEVkZ2UgPSBVdGlscy5taW5CeShub2RlLmNoaWxkRWRnZXMsIGU9PnRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICB2YXIgaXNPcHRpbWFsID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAob3B0aW1hbEVkZ2UpIHtcbiAgICAgICAgICAgICAgICBpc09wdGltYWwgPSB0aGlzLmNvbXB1dGVkUGF5b2ZmKG9wdGltYWxFZGdlLmNoaWxkTm9kZSkuZXF1YWxzKHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpc09wdGltYWwgPSAhISh0aGlzLnN1YnRyYWN0KHRoaXMuY29tcHV0ZWRQYXlvZmYobm9kZSksIHBheW9mZikuZXF1YWxzKHRoaXMuY29tcHV0ZWRQYXlvZmYoZS5jaGlsZE5vZGUpKSB8fCAhKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5EZWNpc2lvbk5vZGUpKTtcblxuICAgICAgICAgICAgaWYgKGlzT3B0aW1hbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY1ZhbHVlKGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlT3B0aW1hbChlLmNoaWxkTm9kZSwgdGhpcy5iYXNlUGF5b2ZmKGUpLCB0aGlzLm11bHRpcGx5KHByb2JhYmlsaXR5VG9FbnRlciwgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JykpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG59XG4iLCJpbXBvcnQge2RvbWFpbiBhcyBtb2RlbH0gZnJvbSBcInNkLW1vZGVsXCI7XG5pbXBvcnQge09iamVjdGl2ZVJ1bGV9IGZyb20gXCIuL29iamVjdGl2ZS1ydWxlXCI7XG5pbXBvcnQge1BvbGljeX0gZnJvbSBcIi4uLy4uL3BvbGljaWVzL3BvbGljeVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBNdWx0aUNyaXRlcmlhUnVsZSBleHRlbmRzIE9iamVjdGl2ZVJ1bGUge1xuXG4gICAgY3JpdGVyaW9uMVdlaWdodCA9IDE7XG4gICAgcGF5b2ZmQ29lZmZzID0gWzEsIC0xXTtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHBheW9mZkNvZWZmcywgZXhwcmVzc2lvbkVuZ2luZSkge1xuICAgICAgICBzdXBlcihuYW1lLCB0cnVlLCBleHByZXNzaW9uRW5naW5lLCB0cnVlKTtcbiAgICAgICAgdGhpcy5wYXlvZmZDb2VmZnMgPSBwYXlvZmZDb2VmZnM7XG5cbiAgICB9XG5cbiAgICBzZXREZWZhdWx0Q3JpdGVyaW9uMVdlaWdodChjcml0ZXJpb24xV2VpZ2h0KSB7XG4gICAgICAgIHRoaXMuY3JpdGVyaW9uMVdlaWdodCA9IGNyaXRlcmlvbjFXZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gcGF5b2ZmIC0gcGFyZW50IGVkZ2UgcGF5b2ZmLCBhZ2dyZWdhdGVkUGF5b2ZmIC0gYWdncmVnYXRlZCBwYXlvZmYgYWxvbmcgcGF0aFxuICAgIGNvbXB1dGVQYXlvZmYobm9kZSwgcGF5b2ZmID0gWzAsIDBdLCBhZ2dyZWdhdGVkUGF5b2ZmID0gWzAsIDBdKSB7XG4gICAgICAgIHZhciBjaGlsZHJlblBheW9mZiA9IFswLCAwXTtcbiAgICAgICAgaWYgKG5vZGUuY2hpbGRFZGdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGJlc3RDaGlsZCA9IC1JbmZpbml0eTtcblxuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKChlLCBpKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhc2VQYXlvZmZzID0gW3RoaXMuYmFzZVBheW9mZihlLCAwKSwgdGhpcy5iYXNlUGF5b2ZmKGUsIDEpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkUGF5b2ZmID0gdGhpcy5jb21wdXRlUGF5b2ZmKGUuY2hpbGROb2RlLCBiYXNlUGF5b2ZmcywgW3RoaXMuYWRkKGJhc2VQYXlvZmZzWzBdLCBhZ2dyZWdhdGVkUGF5b2ZmWzBdKSwgdGhpcy5hZGQoYmFzZVBheW9mZnNbMV0sIGFnZ3JlZ2F0ZWRQYXlvZmZbMV0pXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZENvbWJpbmVkUGF5b2ZmID0gdGhpcy5jVmFsdWUoZS5jaGlsZE5vZGUsICdjb21iaW5lZFBheW9mZicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRDb21iaW5lZFBheW9mZiA+IGJlc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdENoaWxkID0gY2hpbGRDb21iaW5lZFBheW9mZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXhlcyA9IFtpXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiZXN0Q2hpbGQuZXF1YWxzKGNoaWxkQ29tYmluZWRQYXlvZmYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVjaXNpb25Qb2xpY3kpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWNpc2lvbiA9IFBvbGljeS5nZXREZWNpc2lvbih0aGlzLmRlY2lzaW9uUG9saWN5LCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY2lzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ZXMgPSBbZGVjaXNpb24uZGVjaXNpb25WYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKChlLCBpKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknLCBzZWxlY3RlZEluZGV4ZXMuaW5kZXhPZihpKSA8IDAgPyAwLjAgOiAxLjApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZVBheW9mZnMgPSBbdGhpcy5iYXNlUGF5b2ZmKGUsIDApLCB0aGlzLmJhc2VQYXlvZmYoZSwgMSldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVQYXlvZmYoZS5jaGlsZE5vZGUsIGJhc2VQYXlvZmZzLCBbdGhpcy5hZGQoYmFzZVBheW9mZnNbMF0sIGFnZ3JlZ2F0ZWRQYXlvZmZbMF0pLCB0aGlzLmFkZChiYXNlUGF5b2Zmc1sxXSwgYWdncmVnYXRlZFBheW9mZlsxXSldKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknLCB0aGlzLmJhc2VQcm9iYWJpbGl0eShlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdW13ZWlnaHQgPSAwO1xuICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgICAgICBzdW13ZWlnaHQgPSB0aGlzLmFkZChzdW13ZWlnaHQsIHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc3Vtd2VpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuUGF5b2ZmLmZvckVhY2goKHAsIGkpPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVwID0gdGhpcy5jVmFsdWUoZS5jaGlsZE5vZGUsICdwYXlvZmZbJyArIGkgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5QYXlvZmZbaV0gPSB0aGlzLmFkZChwLCB0aGlzLm11bHRpcGx5KHRoaXMuY1ZhbHVlKGUsICdwcm9iYWJpbGl0eScpLCBlcCkuZGl2KHN1bXdlaWdodCkpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgICAgICBwYXlvZmYuZm9yRWFjaCgocCwgaSk9PiB7XG4gICAgICAgICAgICBwYXlvZmZbaV0gPSB0aGlzLmFkZChwLCBjaGlsZHJlblBheW9mZltpXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY2xlYXJDb21wdXRlZFZhbHVlcyhub2RlKTtcblxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLlRlcm1pbmFsTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ2FnZ3JlZ2F0ZWRQYXlvZmYnLCBhZ2dyZWdhdGVkUGF5b2ZmKTtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdwcm9iYWJpbGl0eVRvRW50ZXInLCAwKTsgLy9pbml0aWFsIHZhbHVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnY2hpbGRyZW5QYXlvZmYnLCBjaGlsZHJlblBheW9mZik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnY29tYmluZWRQYXlvZmYnLCB0aGlzLmNvbXB1dGVDb21iaW5lZFBheW9mZihwYXlvZmYpKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jVmFsdWUobm9kZSwgJ3BheW9mZicsIHBheW9mZik7XG4gICAgfVxuXG4gICAgY29tcHV0ZUNvbWJpbmVkUGF5b2ZmKHBheW9mZil7XG4gICAgICAgIC8vIFtjcml0ZXJpb24gMSBjb2VmZl0qW2NyaXRlcmlvbiAxXSpbd2VpZ2h0XStbY3JpdGVyaW9uIDIgY29lZmZdKltjcml0ZXJpb24gMl1cbiAgICAgICAgaWYgKHRoaXMuY3JpdGVyaW9uMVdlaWdodCA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5KHRoaXMucGF5b2ZmQ29lZmZzWzBdLCBwYXlvZmZbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmFkZCh0aGlzLm11bHRpcGx5KHRoaXMucGF5b2ZmQ29lZmZzWzBdLCB0aGlzLm11bHRpcGx5KHRoaXMuY3JpdGVyaW9uMVdlaWdodCwgcGF5b2ZmWzBdKSksIHRoaXMubXVsdGlwbHkodGhpcy5wYXlvZmZDb2VmZnNbMV0sIHBheW9mZlsxXSkpO1xuICAgIH1cblxuICAgIC8vICBjb21iaW5lZFBheW9mZiAtIHBhcmVudCBlZGdlIGNvbWJpbmVkUGF5b2ZmXG4gICAgY29tcHV0ZU9wdGltYWwobm9kZSwgY29tYmluZWRQYXlvZmYgPSAwLCBwcm9iYWJpbGl0eVRvRW50ZXIgPSAxKSB7XG4gICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdvcHRpbWFsJywgdHJ1ZSk7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAncHJvYmFiaWxpdHlUb0VudGVyJywgcHJvYmFiaWxpdHlUb0VudGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWJ0cmFjdCh0aGlzLmNWYWx1ZShub2RlLCAnY29tYmluZWRQYXlvZmYnKSwgY29tYmluZWRQYXlvZmYpLmVxdWFscyh0aGlzLmNWYWx1ZShlLmNoaWxkTm9kZSwgJ2NvbWJpbmVkUGF5b2ZmJykpIHx8ICEobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAnb3B0aW1hbCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU9wdGltYWwoZS5jaGlsZE5vZGUsIHRoaXMuY29tcHV0ZUNvbWJpbmVkUGF5b2ZmKFt0aGlzLmJhc2VQYXlvZmYoZSwgMCksIHRoaXMuYmFzZVBheW9mZihlLCAxKV0pLCB0aGlzLm11bHRpcGx5KHByb2JhYmlsaXR5VG9FbnRlciwgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JykpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ29wdGltYWwnLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmltcG9ydCB7ZG9tYWluIGFzIG1vZGVsfSBmcm9tIFwic2QtbW9kZWxcIjtcbmltcG9ydCB7UG9saWN5fSBmcm9tIFwiLi4vLi4vcG9saWNpZXMvcG9saWN5XCI7XG5cbi8qQmFzZSBjbGFzcyBmb3Igb2JqZWN0aXZlIHJ1bGVzKi9cbmV4cG9ydCBjbGFzcyBPYmplY3RpdmVSdWxlIHtcbiAgICBuYW1lO1xuICAgIGV4cHJlc3Npb25FbmdpbmU7XG5cbiAgICBkZWNpc2lvblBvbGljeTtcbiAgICBtYXhpbWl6YXRpb247XG5cbiAgICBwYXlvZmZJbmRleCA9IDA7XG4gICAgbXVsdGlDcml0ZXJpYSA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IobmFtZSwgbWF4aW1pemF0aW9uLCBleHByZXNzaW9uRW5naW5lLCBtdWx0aUNyaXRlcmlhPWZhbHNlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMubWF4aW1pemF0aW9uID0gbWF4aW1pemF0aW9uO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25FbmdpbmUgPSBleHByZXNzaW9uRW5naW5lO1xuICAgICAgICB0aGlzLm11bHRpQ3JpdGVyaWEgPSBtdWx0aUNyaXRlcmlhO1xuICAgIH1cblxuICAgIHNldERlY2lzaW9uUG9saWN5KGRlY2lzaW9uUG9saWN5KSB7XG4gICAgICAgIHRoaXMuZGVjaXNpb25Qb2xpY3kgPSBkZWNpc2lvblBvbGljeTtcbiAgICB9XG5cbiAgICBzZXRQYXlvZmZJbmRleChwYXlvZmZJbmRleCkge1xuICAgICAgICB0aGlzLnBheW9mZkluZGV4ID0gcGF5b2ZmSW5kZXg7XG4gICAgfVxuXG4gICAgY2xlYXJEZWNpc2lvblBvbGljeSgpIHtcbiAgICAgICAgdGhpcy5kZWNpc2lvblBvbGljeSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gc2hvdWxkIHJldHVybiBhcnJheSBvZiBzZWxlY3RlZCBjaGlsZHJlbiBpbmRleGVzXG4gICAgbWFrZURlY2lzaW9uKGRlY2lzaW9uTm9kZSwgY2hpbGRyZW5QYXlvZmZzKSB7XG4gICAgICAgIHZhciBiZXN0O1xuICAgICAgICBpZiAodGhpcy5tYXhpbWl6YXRpb24pIHtcbiAgICAgICAgICAgIGJlc3QgPSB0aGlzLm1heCguLi5jaGlsZHJlblBheW9mZnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmVzdCA9IHRoaXMubWluKC4uLmNoaWxkcmVuUGF5b2Zmcyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXhlcyA9IFtdO1xuICAgICAgICBjaGlsZHJlblBheW9mZnMuZm9yRWFjaCgocCwgaSk9PiB7XG4gICAgICAgICAgICBpZiAoRXhwcmVzc2lvbkVuZ2luZS5jb21wYXJlKGJlc3QsIHApID09IDApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZEluZGV4ZXM7XG4gICAgfVxuXG4gICAgX21ha2VEZWNpc2lvbihkZWNpc2lvbk5vZGUsIGNoaWxkcmVuUGF5b2Zmcykge1xuICAgICAgICBpZiAodGhpcy5kZWNpc2lvblBvbGljeSkge1xuICAgICAgICAgICAgdmFyIGRlY2lzaW9uID0gUG9saWN5LmdldERlY2lzaW9uKHRoaXMuZGVjaXNpb25Qb2xpY3ksIGRlY2lzaW9uTm9kZSk7XG4gICAgICAgICAgICBpZiAoZGVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2RlY2lzaW9uLmRlY2lzaW9uVmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm1ha2VEZWNpc2lvbihkZWNpc2lvbk5vZGUsIGNoaWxkcmVuUGF5b2Zmcyk7XG4gICAgfVxuXG4gICAgLy8gZXh0ZW5zaW9uIHBvaW50IGZvciBjaGFuZ2luZyBjb21wdXRlZCBwcm9iYWJpbGl0eSBvZiBlZGdlcyBpbiBhIGNoYW5jZSBub2RlXG4gICAgbW9kaWZ5Q2hhbmNlUHJvYmFiaWxpdHkoZWRnZXMsIGJlc3RDaGlsZFBheW9mZiwgYmVzdENvdW50LCB3b3JzdENoaWxkUGF5b2ZmLCB3b3JzdENvdW50KSB7XG5cbiAgICB9XG5cbiAgICAvLyBwYXlvZmYgLSBwYXJlbnQgZWRnZSBwYXlvZmYsIGFnZ3JlZ2F0ZWRQYXlvZmYgLSBhZ2dyZWdhdGVkIHBheW9mZiBhbG9uZyBwYXRoXG4gICAgY29tcHV0ZVBheW9mZihub2RlLCBwYXlvZmYgPSAwLCBhZ2dyZWdhdGVkUGF5b2ZmID0gMCkge1xuICAgICAgICB2YXIgY2hpbGRyZW5QYXlvZmYgPSAwO1xuICAgICAgICBpZiAobm9kZS5jaGlsZEVkZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5EZWNpc2lvbk5vZGUpIHtcblxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ZXMgPSB0aGlzLl9tYWtlRGVjaXNpb24obm9kZSwgbm9kZS5jaGlsZEVkZ2VzLm1hcChlPT50aGlzLmNvbXB1dGVQYXlvZmYoZS5jaGlsZE5vZGUsIHRoaXMuYmFzZVBheW9mZihlKSwgdGhpcy5hZGQodGhpcy5iYXNlUGF5b2ZmKGUpLCBhZ2dyZWdhdGVkUGF5b2ZmKSkpKTtcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaCgoZSwgaSk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDb21wdXRlZFZhbHVlcyhlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5Jywgc2VsZWN0ZWRJbmRleGVzLmluZGV4T2YoaSkgPCAwID8gMC4wIDogMS4wKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgYmVzdENoaWxkID0gLUluZmluaXR5O1xuICAgICAgICAgICAgICAgIHZhciBiZXN0Q291bnQgPSAxO1xuICAgICAgICAgICAgICAgIHZhciB3b3JzdENoaWxkID0gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgdmFyIHdvcnN0Q291bnQgPSAxO1xuXG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkUGF5b2ZmID0gdGhpcy5jb21wdXRlUGF5b2ZmKGUuY2hpbGROb2RlLCB0aGlzLmJhc2VQYXlvZmYoZSksIHRoaXMuYWRkKHRoaXMuYmFzZVBheW9mZihlKSwgYWdncmVnYXRlZFBheW9mZikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRQYXlvZmYgPCB3b3JzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JzdENoaWxkID0gY2hpbGRQYXlvZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JzdENvdW50ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaGlsZFBheW9mZi5lcXVhbHMod29yc3RDaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcnN0Q291bnQrK1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZFBheW9mZiA+IGJlc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdENoaWxkID0gY2hpbGRQYXlvZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q291bnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkUGF5b2ZmLmVxdWFscyhiZXN0Q2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q291bnQrK1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknLCB0aGlzLmJhc2VQcm9iYWJpbGl0eShlKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZnlDaGFuY2VQcm9iYWJpbGl0eShub2RlLmNoaWxkRWRnZXMsIGJlc3RDaGlsZCwgYmVzdENvdW50LCB3b3JzdENoaWxkLCB3b3JzdENvdW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHN1bXdlaWdodCA9IDA7XG4gICAgICAgICAgICBub2RlLmNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgIHN1bXdlaWdodCA9IHRoaXMuYWRkKHN1bXdlaWdodCwgdGhpcy5jVmFsdWUoZSwgJ3Byb2JhYmlsaXR5JykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBheW9mZixub2RlLmNoaWxkRWRnZXMsJ3N1bXdlaWdodCcsc3Vtd2VpZ2h0KTtcbiAgICAgICAgICAgIGlmIChzdW13ZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5QYXlvZmYgPSB0aGlzLmFkZChjaGlsZHJlblBheW9mZiwgdGhpcy5tdWx0aXBseSh0aGlzLmNWYWx1ZShlLCAncHJvYmFiaWxpdHknKSwgdGhpcy5jb21wdXRlZFBheW9mZihlLmNoaWxkTm9kZSkpLmRpdihzdW13ZWlnaHQpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuICAgICAgICBwYXlvZmYgPSB0aGlzLmFkZChwYXlvZmYsIGNoaWxkcmVuUGF5b2ZmKTtcbiAgICAgICAgdGhpcy5jbGVhckNvbXB1dGVkVmFsdWVzKG5vZGUpO1xuXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgbW9kZWwuVGVybWluYWxOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNWYWx1ZShub2RlLCAnYWdncmVnYXRlZFBheW9mZicrICdbJyArIHRoaXMucGF5b2ZmSW5kZXggKyAnXScsIGFnZ3JlZ2F0ZWRQYXlvZmYpO1xuICAgICAgICAgICAgdGhpcy5jVmFsdWUobm9kZSwgJ3Byb2JhYmlsaXR5VG9FbnRlcicsIDApOyAvL2luaXRpYWwgdmFsdWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY1ZhbHVlKG5vZGUsICdjaGlsZHJlblBheW9mZicgKyAnWycgKyB0aGlzLnBheW9mZkluZGV4ICsgJ10nLCBjaGlsZHJlblBheW9mZik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jb21wdXRlZFBheW9mZihub2RlLCBwYXlvZmYpO1xuICAgIH1cblxuICAgIC8vIGtvbG9ydWplIG9wdHltYWxuZSDFm2NpZcW8a2lcbiAgICBjb21wdXRlT3B0aW1hbChub2RlKSB7XG4gICAgICAgIHRocm93ICdjb21wdXRlT3B0aW1hbCBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIHJ1bGU6ICcgKyB0aGlzLm5hbWVcbiAgICB9XG5cbiAgICAvKiBnZXQgb3Igc2V0IGNvbXB1dGVkIHBheW9mZiovXG4gICAgY29tcHV0ZWRQYXlvZmYobm9kZSwgdmFsdWUpe1xuICAgICAgICByZXR1cm4gdGhpcy5jVmFsdWUobm9kZSwgJ3BheW9mZlsnICsgdGhpcy5wYXlvZmZJbmRleCArICddJywgdmFsdWUpXG4gICAgfVxuXG4gICAgLypHZXQgb3Igc2V0IG9iamVjdCdzIGNvbXB1dGVkIHZhbHVlIGZvciBjdXJyZW50IHJ1bGUqL1xuICAgIGNWYWx1ZShvYmplY3QsIGZpZWxkUGF0aCwgdmFsdWUpIHtcbiAgICAgICAgLy8gaWYoZmllbGRQYXRoLnRyaW0oKSA9PT0gJ3BheW9mZicpe1xuICAgICAgICAvLyAgICAgZmllbGRQYXRoICs9ICdbJyArIHRoaXMucGF5b2ZmSW5kZXggKyAnXSc7XG4gICAgICAgIC8vIH1cblxuICAgICAgICByZXR1cm4gb2JqZWN0LmNvbXB1dGVkVmFsdWUodGhpcy5uYW1lLCBmaWVsZFBhdGgsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBiYXNlUHJvYmFiaWxpdHkoZWRnZSkge1xuICAgICAgICByZXR1cm4gZWRnZS5jb21wdXRlZEJhc2VQcm9iYWJpbGl0eSgpO1xuICAgIH1cblxuICAgIGJhc2VQYXlvZmYoZWRnZSwgcGF5b2ZmSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGVkZ2UuY29tcHV0ZWRCYXNlUGF5b2ZmKHVuZGVmaW5lZCwgcGF5b2ZmSW5kZXggfHwgdGhpcy5wYXlvZmZJbmRleCk7XG4gICAgfVxuXG4gICAgY2xlYXJDb21wdXRlZFZhbHVlcyhvYmplY3QpIHtcbiAgICAgICAgb2JqZWN0LmNsZWFyQ29tcHV0ZWRWYWx1ZXModGhpcy5uYW1lKTtcbiAgICB9XG5cbiAgICBhZGQoYSwgYikge1xuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS5hZGQoYSwgYilcbiAgICB9XG5cbiAgICBzdWJ0cmFjdChhLCBiKSB7XG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLnN1YnRyYWN0KGEsIGIpXG4gICAgfVxuXG4gICAgZGl2aWRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKGEsIGIpXG4gICAgfVxuXG4gICAgbXVsdGlwbHkoYSwgYikge1xuICAgICAgICByZXR1cm4gRXhwcmVzc2lvbkVuZ2luZS5tdWx0aXBseShhLCBiKVxuICAgIH1cblxuICAgIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25FbmdpbmUubWF4KC4uLmFyZ3VtZW50cylcbiAgICB9XG5cbiAgICBtaW4oKSB7XG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLm1pbiguLi5hcmd1bWVudHMpXG4gICAgfVxuXG59XG4iLCJpbXBvcnQge2RvbWFpbiBhcyBtb2RlbH0gZnJvbSAnc2QtbW9kZWwnXG5pbXBvcnQge0V4cHJlc3Npb25FbmdpbmV9IGZyb20gJ3NkLWV4cHJlc3Npb24tZW5naW5lJ1xuaW1wb3J0IHtsb2d9IGZyb20gJ3NkLXV0aWxzJ1xuaW1wb3J0IHtPcGVyYXRpb259IGZyb20gXCIuL29wZXJhdGlvblwiO1xuaW1wb3J0IHtUcmVlVmFsaWRhdG9yfSBmcm9tIFwiLi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuXG4vKlN1YnRyZWUgZmxpcHBpbmcgb3BlcmF0aW9uKi9cbmV4cG9ydCBjbGFzcyBGbGlwU3VidHJlZSBleHRlbmRzIE9wZXJhdGlvbntcblxuICAgIHN0YXRpYyAkTkFNRSA9ICdmbGlwU3VidHJlZSc7XG4gICAgZGF0YTtcbiAgICBleHByZXNzaW9uRW5naW5lO1xuXG4gICAgY29uc3RydWN0b3IoZGF0YSwgZXhwcmVzc2lvbkVuZ2luZSkge1xuICAgICAgICBzdXBlcihGbGlwU3VidHJlZS4kTkFNRSk7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZSA9IGV4cHJlc3Npb25FbmdpbmU7XG4gICAgICAgIHRoaXMudHJlZVZhbGlkYXRvciA9IG5ldyBUcmVlVmFsaWRhdG9yKGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cblxuICAgIGlzQXBwbGljYWJsZShvYmplY3Qpe1xuICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgbW9kZWwuQ2hhbmNlTm9kZVxuICAgIH1cblxuICAgIGNhblBlcmZvcm0obm9kZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNBcHBsaWNhYmxlKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZSh0aGlzLmRhdGEuZ2V0QWxsTm9kZXNJblN1YnRyZWUobm9kZSkpLmlzVmFsaWQoKSkgeyAvL2NoZWNrIGlmIHRoZSB3aG9sZSBzdWJ0cmVlIGlzIHByb3BlclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGUuY2hpbGRFZGdlcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHZhciBncmFuZGNoaWxkcmVuTnVtYmVyID0gbnVsbDtcbiAgICAgICAgdmFyIGdyYW5kY2hpbGRyZW5FZGdlTGFiZWxzID0gW107XG4gICAgICAgIHZhciBjaGlsZHJlbkVkZ2VMYWJlbHNTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgIHZhciBncmFuZGNoaWxkcmVuRWRnZUxhYmVsc1NldDtcbiAgICAgICAgaWYgKCFub2RlLmNoaWxkRWRnZXMuZXZlcnkoZT0+IHtcblxuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGUuY2hpbGROb2RlO1xuICAgICAgICAgICAgICAgIGlmICghKGNoaWxkIGluc3RhbmNlb2YgbW9kZWwuQ2hhbmNlTm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbkVkZ2VMYWJlbHNTZXQuaGFzKGUubmFtZS50cmltKCkpKSB7IC8vIGVkZ2UgbGFiZWxzIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGlsZHJlbkVkZ2VMYWJlbHNTZXQuYWRkKGUubmFtZS50cmltKCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGdyYW5kY2hpbGRyZW5OdW1iZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhbmRjaGlsZHJlbk51bWJlciA9IGNoaWxkLmNoaWxkRWRnZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JhbmRjaGlsZHJlbk51bWJlciA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5jaGlsZEVkZ2VzLmZvckVhY2goZ2U9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFuZGNoaWxkcmVuRWRnZUxhYmVscy5wdXNoKGdlLm5hbWUudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZ3JhbmRjaGlsZHJlbkVkZ2VMYWJlbHNTZXQgPSBuZXcgU2V0KGdyYW5kY2hpbGRyZW5FZGdlTGFiZWxzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JhbmRjaGlsZHJlbkVkZ2VMYWJlbHNTZXQuc2l6ZSAhPT0gZ3JhbmRjaGlsZHJlbkVkZ2VMYWJlbHMubGVuZ3RoKSB7IC8vZ3JhbmRjaGlsZHJlbiBlZGdlIGxhYmVscyBzaG91bGQgYmUgdW5pcXVlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuY2hpbGRFZGdlcy5sZW5ndGggIT0gZ3JhbmRjaGlsZHJlbk51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFjaGlsZC5jaGlsZEVkZ2VzLmV2ZXJ5KChnZSwgaSk9PmdyYW5kY2hpbGRyZW5FZGdlTGFiZWxzW2ldID09PSBnZS5uYW1lLnRyaW0oKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICB9KSkge1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwZXJmb3JtKHJvb3QpIHtcblxuICAgICAgICB2YXIgcm9vdENsb25lID0gdGhpcy5kYXRhLmNsb25lU3VidHJlZShyb290LCB0cnVlKTtcbiAgICAgICAgdmFyIG9sZENoaWxkcmVuTnVtYmVyID0gcm9vdC5jaGlsZEVkZ2VzLmxlbmd0aDtcbiAgICAgICAgdmFyIG9sZEdyYW5kQ2hpbGRyZW5OdW1iZXIgPSByb290LmNoaWxkRWRnZXNbMF0uY2hpbGROb2RlLmNoaWxkRWRnZXMubGVuZ3RoO1xuXG4gICAgICAgIHZhciBjaGlsZHJlbk51bWJlciA9IG9sZEdyYW5kQ2hpbGRyZW5OdW1iZXI7XG4gICAgICAgIHZhciBncmFuZENoaWxkcmVuTnVtYmVyID0gb2xkQ2hpbGRyZW5OdW1iZXI7XG5cbiAgICAgICAgdmFyIGNhbGxiYWNrc0Rpc2FibGVkID0gdGhpcy5kYXRhLmNhbGxiYWNrc0Rpc2FibGVkO1xuICAgICAgICB0aGlzLmRhdGEuY2FsbGJhY2tzRGlzYWJsZWQgPSB0cnVlO1xuXG5cbiAgICAgICAgdmFyIGNoaWxkWCA9IHJvb3QuY2hpbGRFZGdlc1swXS5jaGlsZE5vZGUubG9jYXRpb24ueDtcbiAgICAgICAgdmFyIHRvcFkgPSByb290LmNoaWxkRWRnZXNbMF0uY2hpbGROb2RlLmNoaWxkRWRnZXNbMF0uY2hpbGROb2RlLmxvY2F0aW9uLnk7XG4gICAgICAgIHZhciBib3R0b21ZID0gcm9vdC5jaGlsZEVkZ2VzW29sZENoaWxkcmVuTnVtYmVyIC0gMV0uY2hpbGROb2RlLmNoaWxkRWRnZXNbb2xkR3JhbmRDaGlsZHJlbk51bWJlciAtIDFdLmNoaWxkTm9kZS5sb2NhdGlvbi55O1xuXG4gICAgICAgIHZhciBleHRlbnRZID0gYm90dG9tWSAtIHRvcFk7XG4gICAgICAgIHZhciBzdGVwWSA9IGV4dGVudFkgLyAoY2hpbGRyZW5OdW1iZXIgKyAxKTtcblxuICAgICAgICByb290LmNoaWxkRWRnZXMuc2xpY2UoKS5mb3JFYWNoKGU9PiB0aGlzLmRhdGEucmVtb3ZlTm9kZShlLmNoaWxkTm9kZSkpO1xuXG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbk51bWJlcjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBuZXcgbW9kZWwuQ2hhbmNlTm9kZShuZXcgbW9kZWwuUG9pbnQoY2hpbGRYLCB0b3BZICsgKGkgKyAxKSAqIHN0ZXBZKSk7XG4gICAgICAgICAgICB2YXIgZWRnZSA9IHRoaXMuZGF0YS5hZGROb2RlKGNoaWxkLCByb290KTtcbiAgICAgICAgICAgIGVkZ2UubmFtZSA9IHJvb3RDbG9uZS5jaGlsZEVkZ2VzWzBdLmNoaWxkTm9kZS5jaGlsZEVkZ2VzW2ldLm5hbWU7XG5cbiAgICAgICAgICAgIGVkZ2UucHJvYmFiaWxpdHkgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdyYW5kQ2hpbGRyZW5OdW1iZXI7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBncmFuZENoaWxkID0gcm9vdENsb25lLmNoaWxkRWRnZXNbal0uY2hpbGROb2RlLmNoaWxkRWRnZXNbaV0uY2hpbGROb2RlO1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgZ3JhbmRDaGlsZEVkZ2UgPSB0aGlzLmRhdGEuYXR0YWNoU3VidHJlZShncmFuZENoaWxkLCBjaGlsZCk7XG4gICAgICAgICAgICAgICAgZ3JhbmRDaGlsZEVkZ2UubmFtZSA9IHJvb3RDbG9uZS5jaGlsZEVkZ2VzW2pdLm5hbWU7XG4gICAgICAgICAgICAgICAgZ3JhbmRDaGlsZEVkZ2UucGF5b2ZmID0gW1xuICAgICAgICAgICAgICAgICAgICBFeHByZXNzaW9uRW5naW5lLmFkZChyb290Q2xvbmUuY2hpbGRFZGdlc1tqXS5jb21wdXRlZEJhc2VQYXlvZmYodW5kZWZpbmVkLCAwKSwgcm9vdENsb25lLmNoaWxkRWRnZXNbal0uY2hpbGROb2RlLmNoaWxkRWRnZXNbaV0uY29tcHV0ZWRCYXNlUGF5b2ZmKHVuZGVmaW5lZCwgMCkpLFxuICAgICAgICAgICAgICAgICAgICBFeHByZXNzaW9uRW5naW5lLmFkZChyb290Q2xvbmUuY2hpbGRFZGdlc1tqXS5jb21wdXRlZEJhc2VQYXlvZmYodW5kZWZpbmVkLCAxKSwgcm9vdENsb25lLmNoaWxkRWRnZXNbal0uY2hpbGROb2RlLmNoaWxkRWRnZXNbaV0uY29tcHV0ZWRCYXNlUGF5b2ZmKHVuZGVmaW5lZCwgMSkpLFxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICBncmFuZENoaWxkRWRnZS5wcm9iYWJpbGl0eSA9IEV4cHJlc3Npb25FbmdpbmUubXVsdGlwbHkocm9vdENsb25lLmNoaWxkRWRnZXNbal0uY29tcHV0ZWRCYXNlUHJvYmFiaWxpdHkoKSwgcm9vdENsb25lLmNoaWxkRWRnZXNbal0uY2hpbGROb2RlLmNoaWxkRWRnZXNbaV0uY29tcHV0ZWRCYXNlUHJvYmFiaWxpdHkoKSk7XG4gICAgICAgICAgICAgICAgZWRnZS5wcm9iYWJpbGl0eSA9IEV4cHJlc3Npb25FbmdpbmUuYWRkKGVkZ2UucHJvYmFiaWxpdHksIGdyYW5kQ2hpbGRFZGdlLnByb2JhYmlsaXR5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRpdmlkZUdyYW5kQ2hpbGRFZGdlUHJvYmFiaWxpdHkgPSBwID0+IEV4cHJlc3Npb25FbmdpbmUuZGl2aWRlKHAsIGVkZ2UucHJvYmFiaWxpdHkpO1xuICAgICAgICAgICAgaWYgKGVkZ2UucHJvYmFiaWxpdHkuZXF1YWxzKDApKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2IgPSBFeHByZXNzaW9uRW5naW5lLmRpdmlkZSgxLCBncmFuZENoaWxkcmVuTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBkaXZpZGVHcmFuZENoaWxkRWRnZVByb2JhYmlsaXR5ID0gcCA9PiBwcm9iO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcHJvYmFiaWxpdHlTdW0gPSAwLjA7XG4gICAgICAgICAgICBjaGlsZC5jaGlsZEVkZ2VzLmZvckVhY2goZ3JhbmRDaGlsZEVkZ2U9PiB7XG4gICAgICAgICAgICAgICAgZ3JhbmRDaGlsZEVkZ2UucHJvYmFiaWxpdHkgPSBkaXZpZGVHcmFuZENoaWxkRWRnZVByb2JhYmlsaXR5KGdyYW5kQ2hpbGRFZGdlLnByb2JhYmlsaXR5KTtcbiAgICAgICAgICAgICAgICBwcm9iYWJpbGl0eVN1bSA9IEV4cHJlc3Npb25FbmdpbmUuYWRkKHByb2JhYmlsaXR5U3VtLCBncmFuZENoaWxkRWRnZS5wcm9iYWJpbGl0eSk7XG4gICAgICAgICAgICAgICAgZ3JhbmRDaGlsZEVkZ2UucHJvYmFiaWxpdHkgPSB0aGlzLmV4cHJlc3Npb25FbmdpbmUuc2VyaWFsaXplKGdyYW5kQ2hpbGRFZGdlLnByb2JhYmlsaXR5KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX25vcm1hbGl6ZVByb2JhYmlsaXRpZXNBZnRlckZsaXAoY2hpbGQuY2hpbGRFZGdlcywgcHJvYmFiaWxpdHlTdW0pO1xuICAgICAgICAgICAgZWRnZS5wcm9iYWJpbGl0eSA9IHRoaXMuZXhwcmVzc2lvbkVuZ2luZS5zZXJpYWxpemUoZWRnZS5wcm9iYWJpbGl0eSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ub3JtYWxpemVQcm9iYWJpbGl0aWVzQWZ0ZXJGbGlwKHJvb3QuY2hpbGRFZGdlcyk7XG5cblxuICAgICAgICB0aGlzLmRhdGEuY2FsbGJhY2tzRGlzYWJsZWQgPSBjYWxsYmFja3NEaXNhYmxlZDtcbiAgICAgICAgdGhpcy5kYXRhLl9maXJlTm9kZUFkZGVkQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBfbm9ybWFsaXplUHJvYmFiaWxpdGllc0FmdGVyRmxpcChjaGlsZEVkZ2VzLCBwcm9iYWJpbGl0eVN1bSl7XG4gICAgICAgIGlmKCFwcm9iYWJpbGl0eVN1bSl7XG4gICAgICAgICAgICBwcm9iYWJpbGl0eVN1bSA9IDAuMDtcbiAgICAgICAgICAgIGNoaWxkRWRnZXMuZm9yRWFjaChlPT4ge1xuICAgICAgICAgICAgICAgIHByb2JhYmlsaXR5U3VtID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQocHJvYmFiaWxpdHlTdW0sIGUucHJvYmFiaWxpdHkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwcm9iYWJpbGl0eVN1bS5lcXVhbHMoMSkpIHtcbiAgICAgICAgICAgIGxvZy5pbmZvKCdTdW0gb2YgdGhlIHByb2JhYmlsaXRpZXMgaW4gY2hpbGQgbm9kZXMgaXMgbm90IGVxdWFsIHRvIDEgOiAnLCBwcm9iYWJpbGl0eVN1bSk7XG4gICAgICAgICAgICB2YXIgbmV3UHJvYmFiaWxpdHlTdW0gPSAwLjA7XG4gICAgICAgICAgICB2YXIgY2YgPSAxMDAwMDAwMDAwMDAwOyAvLzEwXjEyXG4gICAgICAgICAgICB2YXIgcHJlYyA9IDEyO1xuICAgICAgICAgICAgY2hpbGRFZGdlcy5mb3JFYWNoKGU9PiB7XG4gICAgICAgICAgICAgICAgZS5wcm9iYWJpbGl0eSA9IHBhcnNlSW50KEV4cHJlc3Npb25FbmdpbmUucm91bmQoZS5wcm9iYWJpbGl0eSwgcHJlYykgKiBjZik7XG4gICAgICAgICAgICAgICAgbmV3UHJvYmFiaWxpdHlTdW0gPSBuZXdQcm9iYWJpbGl0eVN1bSArIGUucHJvYmFiaWxpdHk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciByZXN0ID0gY2YgLSBuZXdQcm9iYWJpbGl0eVN1bTtcbiAgICAgICAgICAgIGxvZy5pbmZvKCdOb3JtYWxpemluZyB3aXRoIHJvdW5kaW5nIHRvIHByZWNpc2lvbjogJyArIHByZWMsIHJlc3QpO1xuICAgICAgICAgICAgY2hpbGRFZGdlc1swXS5wcm9iYWJpbGl0eSA9IEV4cHJlc3Npb25FbmdpbmUuYWRkKHJlc3QsIGNoaWxkRWRnZXNbMF0ucHJvYmFiaWxpdHkpO1xuICAgICAgICAgICAgbmV3UHJvYmFiaWxpdHlTdW0gPSAwLjA7XG4gICAgICAgICAgICBjaGlsZEVkZ2VzLmZvckVhY2goZT0+IHtcbiAgICAgICAgICAgICAgICBlLnByb2JhYmlsaXR5ID0gdGhpcy5leHByZXNzaW9uRW5naW5lLnNlcmlhbGl6ZShFeHByZXNzaW9uRW5naW5lLmRpdmlkZShwYXJzZUludChlLnByb2JhYmlsaXR5KSwgY2YpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIlxuXG5cbi8qQmFzZSBjbGFzcyBmb3IgY29tcGxleCBvcGVyYXRpb25zIGV4ZWN1dGluZyBhIGpvYiovXG5pbXBvcnQge09wZXJhdGlvbn0gZnJvbSBcIi4vb3BlcmF0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBKb2JFeGVjdXRpbmdPcGVyYXRpb24gZXh0ZW5kcyBPcGVyYXRpb257XG5cblxuICAgIGpvYk5hbWU7IC8vSm9iIG5hbWUgaWYgdGhpcyBvcGVyYXRpb24gZXhlY3V0ZXMgYSBqb2JcblxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGpvYk5hbWUgPSBudWxsKXtcbiAgICAgICAgc3VwZXIobmFtZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5qb2JOYW1lID0gam9iTmFtZTtcbiAgICB9XG5cblxuICAgIC8vY2hlY2sgaWYgY2FuIHBlcmZvcm0gb3BlcmF0aW9uIGZvciBhcHBsaWNhYmxlIG9iamVjdFxuICAgIGNhblBlcmZvcm0ob2JqZWN0LCBwYXJhbXMpe1xuXG4gICAgICAgIHRocm93ICdjYW5QZXJmb3JtIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igb3BlcmF0aW9uOiAnK3RoaXMubmFtZVxuICAgIH1cblxuICAgIC8vUGVyZm9ybWVkIGluIGpvYiBieSBvcGVyYXRpb25zIG1hbmFnZXJcbiAgICBwZXJmb3JtKG9iamVjdCwgcGFyYW1zLCApe1xuXG4gICAgfVxuXG5cbiAgICBwb3N0UHJvY2VzcyhvYmplY3QsIHBhcmFtcyl7XG5cbiAgICB9XG5cblxufVxuIiwiXG5cblxuLypCYXNlIGNsYXNzIGZvciBjb21wbGV4IG9wZXJhdGlvbnMgb24gdHJlZSBzdHJ1Y3R1cmUqL1xuZXhwb3J0IGNsYXNzIE9wZXJhdGlvbntcblxuICAgIG5hbWU7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lKXtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICAvL2NoZWNrIGlmIG9wZXJhdGlvbiBpcyBwb3RlbnRpYWxseSBhcHBsaWNhYmxlIGZvciBvYmplY3RcbiAgICBpc0FwcGxpY2FibGUob2JqZWN0KXtcbiAgICAgICAgdGhyb3cgJ2lzQXBwbGljYWJsZSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIG9wZXJhdGlvbjogJyt0aGlzLm5hbWVcbiAgICB9XG5cbiAgICAvL2NoZWNrIGlmIGNhbiBwZXJmb3JtIG9wZXJhdGlvbiBmb3IgYXBwbGljYWJsZSBvYmplY3RcbiAgICBjYW5QZXJmb3JtKG9iamVjdCl7XG4gICAgICAgIHRocm93ICdjYW5QZXJmb3JtIGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igb3BlcmF0aW9uOiAnK3RoaXMubmFtZVxuICAgIH1cblxuICAgIHBlcmZvcm0ob2JqZWN0LCBwYXJhbXMpe1xuICAgICAgICB0aHJvdyAncGVyZm9ybSBmdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQgZm9yIG9wZXJhdGlvbjogJyt0aGlzLm5hbWVcbiAgICB9XG5cblxufVxuIiwiaW1wb3J0IHtGbGlwU3VidHJlZX0gZnJvbSBcIi4vZmxpcC1zdWJ0cmVlXCI7XG5pbXBvcnQge1BheW9mZnNUcmFuc2Zvcm1hdGlvbn0gZnJvbSBcIi4vcGF5b2Zmcy10cmFuc2Zvcm1hdGlvbi5qc1wiO1xuXG5cbmV4cG9ydCBjbGFzcyBPcGVyYXRpb25zTWFuYWdlciB7XG5cbiAgICBvcGVyYXRpb25zID0gW107XG4gICAgb3BlcmF0aW9uQnlOYW1lID0ge307XG5cbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBleHByZXNzaW9uRW5naW5lLCBqb2JzTWFuZ2VyKXtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbkVuZ2luZTtcbiAgICAgICAgdGhpcy5qb2JzTWFuZ2VyID0gam9ic01hbmdlcjtcbiAgICAgICAgdGhpcy5yZWdpc3Rlck9wZXJhdGlvbihuZXcgRmxpcFN1YnRyZWUoZGF0YSwgZXhwcmVzc2lvbkVuZ2luZSkpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyT3BlcmF0aW9uKG5ldyBQYXlvZmZzVHJhbnNmb3JtYXRpb24oZGF0YSwgZXhwcmVzc2lvbkVuZ2luZSkpO1xuICAgIH1cblxuICAgIHJlZ2lzdGVyT3BlcmF0aW9uKG9wZXJhdGlvbil7XG4gICAgICAgIHRoaXMub3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbik7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uQnlOYW1lW29wZXJhdGlvbi5uYW1lXSA9IG9wZXJhdGlvbjtcbiAgICB9XG5cblxuICAgIGdldE9wZXJhdGlvbkJ5TmFtZShuYW1lKXtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9uQnlOYW1lW25hbWVdO1xuICAgIH1cblxuICAgIG9wZXJhdGlvbnNGb3JPYmplY3Qob2JqZWN0KXtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9ucy5maWx0ZXIob3A9Pm9wLmlzQXBwbGljYWJsZShvYmplY3QpKVxuICAgIH1cblxuICAgIHNldERhdGEoZGF0YSl7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMub3BlcmF0aW9ucy5mb3JFYWNoKG8gPT4gby5kYXRhID0gZGF0YSlcbiAgICB9XG5cbiAgICBwZXJmb3JtT3BlcmF0aW9uKG9iamVjdCwgb3BlcmF0aW9uTmFtZSwgam9iUGFyYW1zVmFsdWVzKXtcblxuICAgICAgICBsZXQgb3BlcmF0aW9uID0gdGhpcy5nZXRPcGVyYXRpb25CeU5hbWUob3BlcmF0aW9uTmFtZSk7XG5cbiAgICAgICAgaWYoIW9wZXJhdGlvbi5qb2JOYW1lKXtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUob3BlcmF0aW9uLnBlcmZvcm0ob2JqZWN0LCBqb2JQYXJhbXNWYWx1ZXMpKVxuICAgICAgICB9XG5cbiAgICAgICAgam9iUGFyYW1zVmFsdWVzWydvYmplY3RJZCddID0gb2JqZWN0LmlkO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmpvYnNNYW5nZXIucnVuKG9wZXJhdGlvbi5qb2JOYW1lLCBqb2JQYXJhbXNWYWx1ZXMsIHRoaXMuZGF0YSwgZmFsc2UpLnRoZW4oKGpvYkV4ZWN1dGlvbik9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IGQgPSBqb2JFeGVjdXRpb24uZ2V0RGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5kYXRhLm5vZGVzID0gZC5ub2RlcztcbiAgICAgICAgICAgIHRoaXMuZGF0YS5lZGdlcyA9IGQuZWRnZXM7XG4gICAgICAgICAgICB0aGlzLmRhdGEuY29kZSA9IGQuY29kZTtcblxuICAgICAgICAgICAgb3BlcmF0aW9uLnBvc3RQcm9jZXNzKG9iamVjdCwgam9iUGFyYW1zVmFsdWVzKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtUcmVlVmFsaWRhdG9yfSBmcm9tIFwiLi4vdmFsaWRhdGlvbi90cmVlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHtKb2JFeGVjdXRpbmdPcGVyYXRpb259IGZyb20gXCIuL2pvYi1leGVjdXRpbmctb3BlcmF0aW9uXCI7XG5pbXBvcnQge1BheW9mZnNUcmFuc2Zvcm1hdGlvbkpvYn0gZnJvbSBcIi4uL2pvYnMvY29uZmlndXJhdGlvbnMvcGF5b2Zmcy10cmFuc2Zvcm1hdGlvbi9wYXlvZmZzLXRyYW5zZm9ybWF0aW9uLWpvYlwiO1xuXG5cbmV4cG9ydCBjbGFzcyBQYXlvZmZzVHJhbnNmb3JtYXRpb24gZXh0ZW5kcyBKb2JFeGVjdXRpbmdPcGVyYXRpb24ge1xuXG4gICAgc3RhdGljICROQU1FID0gJ3BheW9mZnNUcmFuc2Zvcm1hdGlvbic7XG5cbiAgICBkYXRhO1xuICAgIGV4cHJlc3Npb25FbmdpbmU7XG5cbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBleHByZXNzaW9uRW5naW5lKSB7XG4gICAgICAgIHN1cGVyKFBheW9mZnNUcmFuc2Zvcm1hdGlvbi4kTkFNRSwgUGF5b2Zmc1RyYW5zZm9ybWF0aW9uSm9iLiROQU1FKTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lID0gZXhwcmVzc2lvbkVuZ2luZTtcbiAgICAgICAgdGhpcy50cmVlVmFsaWRhdG9yID0gbmV3IFRyZWVWYWxpZGF0b3IoZXhwcmVzc2lvbkVuZ2luZSk7XG4gICAgfVxuXG4gICAgaXNBcHBsaWNhYmxlKG9iamVjdCl7XG4gICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlIHx8IG9iamVjdCBpbnN0YW5jZW9mIG1vZGVsLkRlY2lzaW9uTm9kZVxuICAgIH1cblxuICAgIGNhblBlcmZvcm0obm9kZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNBcHBsaWNhYmxlKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMudHJlZVZhbGlkYXRvci52YWxpZGF0ZSh0aGlzLmRhdGEuZ2V0QWxsTm9kZXNJblN1YnRyZWUobm9kZSkpLmlzVmFsaWQoKSkgeyAvL2NoZWNrIGlmIHRoZSB3aG9sZSBzdWJ0cmVlIGlzIHByb3BlclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFub2RlLiRwYXJlbnQgJiYgbm9kZS5jaGlsZEVkZ2VzLmxlbmd0aCA+IDA7XG4gICAgfVxuXG59XG4iLCJcbmV4cG9ydCBjbGFzcyBEZWNpc2lvbntcbiAgICBub2RlO1xuICAgIGRlY2lzaW9uVmFsdWU7IC8vaW5kZXggb2YgIHNlbGVjdGVkIGVkZ2VcbiAgICBjaGlsZHJlbiA9IFtdO1xuICAgIGtleTtcblxuICAgIGNvbnN0cnVjdG9yKG5vZGUsIGRlY2lzaW9uVmFsdWUpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5kZWNpc2lvblZhbHVlID0gZGVjaXNpb25WYWx1ZTtcbiAgICAgICAgdGhpcy5rZXkgPSBEZWNpc2lvbi5nZW5lcmF0ZUtleSh0aGlzKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2VuZXJhdGVLZXkoZGVjaXNpb24sIGtleVByb3BlcnR5PSdpZCcpe1xuICAgICAgICB2YXIgZSA9IGRlY2lzaW9uLm5vZGUuY2hpbGRFZGdlc1tkZWNpc2lvbi5kZWNpc2lvblZhbHVlXTtcbiAgICAgICAgdmFyIGtleSA9IGRlY2lzaW9uLm5vZGVba2V5UHJvcGVydHldK1wiOlwiKyhlW2tleVByb3BlcnR5XT8gZVtrZXlQcm9wZXJ0eV0gOiBkZWNpc2lvbi5kZWNpc2lvblZhbHVlKzEpO1xuICAgICAgICByZXR1cm4ga2V5LnJlcGxhY2UoL1xcbi9nLCAnICcpO1xuICAgIH1cblxuICAgIGFkZERlY2lzaW9uKG5vZGUsIGRlY2lzaW9uVmFsdWUpe1xuICAgICAgICB2YXIgZGVjaXNpb24gPSBuZXcgRGVjaXNpb24obm9kZSwgZGVjaXNpb25WYWx1ZSk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChkZWNpc2lvbik7XG4gICAgICAgIHRoaXMua2V5ID0gRGVjaXNpb24uZ2VuZXJhdGVLZXkodGhpcyk7XG4gICAgICAgIHJldHVybiBkZWNpc2lvbjtcbiAgICB9XG5cbiAgICBnZXREZWNpc2lvbihkZWNpc2lvbk5vZGUpe1xuICAgICAgICByZXR1cm4gRGVjaXNpb24uZ2V0RGVjaXNpb24odGhpcywgZGVjaXNpb25Ob2RlKVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXREZWNpc2lvbihkZWNpc2lvbiwgZGVjaXNpb25Ob2RlKXtcbiAgICAgICAgaWYoZGVjaXNpb24ubm9kZT09PWRlY2lzaW9uTm9kZSB8fCBkZWNpc2lvbi5ub2RlLmlkID09PSBkZWNpc2lvbk5vZGUuaWQpe1xuICAgICAgICAgICAgcmV0dXJuIGRlY2lzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGZvcih2YXIgaT0wOyBpPGRlY2lzaW9uLmNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHZhciBkID0gRGVjaXNpb24uZ2V0RGVjaXNpb24oZGVjaXNpb24uY2hpbGRyZW5baV0sIGRlY2lzaW9uTm9kZSk7XG4gICAgICAgICAgICBpZihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyB0b0RlY2lzaW9uU3RyaW5nKGRlY2lzaW9uLCBleHRlbmRlZD1mYWxzZSwga2V5UHJvcGVydHk9J25hbWUnLCBpbmRlbnQgPSAnJyl7XG5cbiAgICAgICAgdmFyIHJlcyA9IERlY2lzaW9uLmdlbmVyYXRlS2V5KGRlY2lzaW9uLCBrZXlQcm9wZXJ0eSk7XG4gICAgICAgIHZhciBjaGlsZHJlblJlcyA9IFwiXCI7XG5cbiAgICAgICAgZGVjaXNpb24uY2hpbGRyZW4uZm9yRWFjaChkPT57XG4gICAgICAgICAgICBpZihjaGlsZHJlblJlcyl7XG4gICAgICAgICAgICAgICAgaWYoZXh0ZW5kZWQpe1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlblJlcyArPSAnXFxuJytpbmRlbnQ7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVzICs9IFwiLCBcIlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGRyZW5SZXMgKz0gRGVjaXNpb24udG9EZWNpc2lvblN0cmluZyhkLGV4dGVuZGVkLGtleVByb3BlcnR5LCBpbmRlbnQrJ1xcdCcpXG4gICAgICAgIH0pO1xuICAgICAgICBpZihkZWNpc2lvbi5jaGlsZHJlbi5sZW5ndGgpe1xuICAgICAgICAgICAgaWYoZXh0ZW5kZWQpe1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVzID0gICdcXG4nK2luZGVudCArY2hpbGRyZW5SZXM7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlcyA9IFwiIC0gKFwiICsgY2hpbGRyZW5SZXMgKyBcIilcIjtcbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXMrY2hpbGRyZW5SZXM7XG4gICAgfVxuXG4gICAgdG9EZWNpc2lvblN0cmluZyhpbmRlbnQ9ZmFsc2Upe1xuICAgICAgICByZXR1cm4gRGVjaXNpb24udG9EZWNpc2lvblN0cmluZyh0aGlzLCBpbmRlbnQpXG4gICAgfVxufVxuIiwiaW1wb3J0IHtQb2xpY3l9IGZyb20gXCIuL3BvbGljeVwiO1xuaW1wb3J0IHtkb21haW4gYXMgbW9kZWx9IGZyb20gJ3NkLW1vZGVsJ1xuaW1wb3J0IHtVdGlsc30gZnJvbSAnc2QtdXRpbHMnXG5pbXBvcnQge0RlY2lzaW9ufSBmcm9tIFwiLi9kZWNpc2lvblwiO1xuXG5leHBvcnQgY2xhc3MgUG9saWNpZXNDb2xsZWN0b3J7XG4gICAgcG9saWNpZXMgPSBbXTtcbiAgICBydWxlTmFtZT1mYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKHJvb3QsIG9wdGltYWxGb3JSdWxlTmFtZSl7XG4gICAgICAgIHRoaXMucnVsZU5hbWUgPSBvcHRpbWFsRm9yUnVsZU5hbWU7XG4gICAgICAgIHRoaXMuY29sbGVjdChyb290KS5mb3JFYWNoKChkZWNpc2lvbnMsaSk9PntcbiAgICAgICAgICAgIHRoaXMucG9saWNpZXMucHVzaChuZXcgUG9saWN5KFwiI1wiKyhpKzEpLCBkZWNpc2lvbnMpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKHRoaXMucG9saWNpZXMubGVuZ3RoPT09MSl7XG4gICAgICAgICAgICB0aGlzLnBvbGljaWVzWzBdLmlkID0gXCJkZWZhdWx0XCJcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbGxlY3Qocm9vdCl7XG4gICAgICAgIHZhciBub2RlUXVldWUgPSBbcm9vdF07XG4gICAgICAgIHZhciBub2RlO1xuICAgICAgICB2YXIgZGVjaXNpb25Ob2RlcyA9IFtdO1xuICAgICAgICB3aGlsZShub2RlUXVldWUubGVuZ3RoKXtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlUXVldWUuc2hpZnQoKTtcblxuICAgICAgICAgICAgaWYodGhpcy5ydWxlTmFtZSAmJiAhbm9kZS5jb21wdXRlZFZhbHVlKHRoaXMucnVsZU5hbWUsICdvcHRpbWFsJykpe1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihub2RlIGluc3RhbmNlb2YgbW9kZWwuRGVjaXNpb25Ob2RlKXtcbiAgICAgICAgICAgICAgICBkZWNpc2lvbk5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKChlZGdlLCBpKT0+e1xuICAgICAgICAgICAgICAgIG5vZGVRdWV1ZS5wdXNoKGVkZ2UuY2hpbGROb2RlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBVdGlscy5jYXJ0ZXNpYW5Qcm9kdWN0T2YoZGVjaXNpb25Ob2Rlcy5tYXAoKGRlY2lzaW9uTm9kZSk9PntcbiAgICAgICAgICAgIHZhciBkZWNpc2lvbnM9IFtdO1xuICAgICAgICAgICAgZGVjaXNpb25Ob2RlLmNoaWxkRWRnZXMuZm9yRWFjaCgoZWRnZSwgaSk9PntcblxuICAgICAgICAgICAgICAgIGlmKHRoaXMucnVsZU5hbWUgJiYgIWVkZ2UuY29tcHV0ZWRWYWx1ZSh0aGlzLnJ1bGVOYW1lLCAnb3B0aW1hbCcpKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjaGlsZERlY2lzaW9ucyA9IHRoaXMuY29sbGVjdChlZGdlLmNoaWxkTm9kZSk7IC8vYWxsIHBvc3NpYmxlIGNoaWxkIGRlY2lzaW9ucyAoY2FydGVzaWFuKVxuICAgICAgICAgICAgICAgIGNoaWxkRGVjaXNpb25zLmZvckVhY2goY2Q9PntcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlY2lzaW9uID0gbmV3IERlY2lzaW9uKGRlY2lzaW9uTm9kZSwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGRlY2lzaW9ucy5wdXNoKGRlY2lzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZGVjaXNpb24uY2hpbGRyZW4gPSBjZDtcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWNpc2lvbnM7XG4gICAgICAgIH0pKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7RGVjaXNpb259IGZyb20gXCIuL2RlY2lzaW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2xpY3l7XG4gICAgaWQ7XG4gICAgZGVjaXNpb25zID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihpZCwgZGVjaXNpb25zKXtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmRlY2lzaW9ucyA9IGRlY2lzaW9ucyB8fCBbXTtcbiAgICAgICAgdGhpcy5rZXkgPSBQb2xpY3kuZ2VuZXJhdGVLZXkodGhpcyk7XG4gICAgfVxuXG4gICAgYWRkRGVjaXNpb24obm9kZSwgZGVjaXNpb25WYWx1ZSl7XG4gICAgICAgIHZhciBkZWNpc2lvbiA9IG5ldyBEZWNpc2lvbihub2RlLCBkZWNpc2lvblZhbHVlKTtcbiAgICAgICAgdGhpcy5kZWNpc2lvbnMgLnB1c2goZGVjaXNpb24pO1xuICAgICAgICB0aGlzLmtleSA9IFBvbGljeS5nZW5lcmF0ZUtleSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGRlY2lzaW9uO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZW5lcmF0ZUtleShwb2xpY3kpe1xuICAgICAgICB2YXIga2V5ID0gXCJcIjtcbiAgICAgICAgcG9saWN5LmRlY2lzaW9ucy5mb3JFYWNoKGQ9PmtleSs9KGtleT8gXCImXCI6IFwiXCIpK2Qua2V5KTtcbiAgICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG5cbiAgICBlcXVhbHMocG9saWN5LCBpZ25vcmVJZD10cnVlKXtcbiAgICAgICAgaWYodGhpcy5rZXkgIT0gcG9saWN5LmtleSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaWdub3JlSWQgfHwgdGhpcy5pZCA9PT0gcG9saWN5LmlkO1xuICAgIH1cblxuICAgIGdldERlY2lzaW9uKGRlY2lzaW9uTm9kZSl7XG4gICAgICAgIHJldHVybiBQb2xpY3kuZ2V0RGVjaXNpb24odGhpcywgZGVjaXNpb25Ob2RlKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0RGVjaXNpb24ocG9saWN5LCBkZWNpc2lvbk5vZGUpe1xuICAgICAgICBmb3IodmFyIGk9MDsgaTxwb2xpY3kuZGVjaXNpb25zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHZhciBkZWNpc2lvbiA9IERlY2lzaW9uLmdldERlY2lzaW9uKHBvbGljeS5kZWNpc2lvbnNbaV0sIGRlY2lzaW9uTm9kZSk7XG4gICAgICAgICAgICBpZihkZWNpc2lvbil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY2lzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0YXRpYyB0b1BvbGljeVN0cmluZyhwb2xpY3ksIGV4dGVuZGVkPWZhbHNlLCBwcmVwZW5kSWQ9ZmFsc2Upe1xuXG4gICAgICAgIHZhciByZXMgPSBcIlwiO1xuICAgICAgICBwb2xpY3kuZGVjaXNpb25zLmZvckVhY2goZD0+e1xuICAgICAgICAgICAgaWYocmVzKXtcbiAgICAgICAgICAgICAgICBpZihleHRlbmRlZCl7XG4gICAgICAgICAgICAgICAgICAgIHJlcyArPSBcIlxcblwiXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHJlcyArPSBcIiwgXCJcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzICs9IERlY2lzaW9uLnRvRGVjaXNpb25TdHJpbmcoZCwgZXh0ZW5kZWQsICduYW1lJywgJ1xcdCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYocHJlcGVuZElkICYmIHBvbGljeS5pZCE9PXVuZGVmaW5lZCl7XG4gICAgICAgICAgICByZXR1cm4gcG9saWN5LmlkK1wiIFwiK3JlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuXG4gICAgdG9Qb2xpY3lTdHJpbmcoaW5kZW50PWZhbHNlKXtcbiAgICAgICAgcmV0dXJuIFBvbGljeS50b1BvbGljeVN0cmluZyh0aGlzLCBpbmRlbnQpXG4gICAgfVxuXG5cbn1cbiIsImltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSAnc2QtZXhwcmVzc2lvbi1lbmdpbmUnXG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcblxuXG5leHBvcnQgY2xhc3MgTWNkbVdlaWdodFZhbHVlVmFsaWRhdG9ye1xuXG4gICAgYWRkaXRpb25hbFZhbGlkYXRvciA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihhZGRpdGlvbmFsVmFsaWRhdG9yKXtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsVmFsaWRhdG9yID0gYWRkaXRpb25hbFZhbGlkYXRvcjtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZSh2YWx1ZSl7XG4gICAgICAgIGlmKHZhbHVlPT09bnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgaWYocGFyc2VkICE9PSBJbmZpbml0eSAmJiAhRXhwcmVzc2lvbkVuZ2luZS52YWxpZGF0ZSh2YWx1ZSwge30sIGZhbHNlKSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbHVlID0gRXhwcmVzc2lvbkVuZ2luZS50b051bWJlcih2YWx1ZSk7XG4gICAgICAgIHZhciBtYXhTYWZlSW50ZWdlciA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIHx8IDkwMDcxOTkyNTQ3NDA5OTE7IC8vIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIGlzIHVuZGVmaW5lZCBpbiBJRVxuICAgICAgICBpZihFeHByZXNzaW9uRW5naW5lLmNvbXBhcmUodmFsdWUsIDApIDwgMCB8fCAodmFsdWUgIT09IEluZmluaXR5ICYmIEV4cHJlc3Npb25FbmdpbmUuY29tcGFyZSh2YWx1ZSwgbWF4U2FmZUludGVnZXIpPiAwKSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmFkZGl0aW9uYWxWYWxpZGF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZGl0aW9uYWxWYWxpZGF0b3IoRXhwcmVzc2lvbkVuZ2luZS50b051bWJlcih2YWx1ZSkpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7RXhwcmVzc2lvbkVuZ2luZX0gZnJvbSAnc2QtZXhwcmVzc2lvbi1lbmdpbmUnXG5pbXBvcnQge1V0aWxzfSBmcm9tIFwic2QtdXRpbHNcIjtcblxuLypDb21wdXRlZCBiYXNlIHZhbHVlIHZhbGlkYXRvciovXG5leHBvcnQgY2xhc3MgUGF5b2ZmVmFsdWVWYWxpZGF0b3J7XG4gICAgZXhwcmVzc2lvbkVuZ2luZTtcbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKXtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRW5naW5lPWV4cHJlc3Npb25FbmdpbmU7XG4gICAgfVxuXG4gICAgdmFsaWRhdGUodmFsdWUpe1xuXG5cbiAgICAgICAgaWYodmFsdWU9PT1udWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSBFeHByZXNzaW9uRW5naW5lLnRvTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgdmFyIG1heFNhZmVJbnRlZ2VyID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgfHwgOTAwNzE5OTI1NDc0MDk5MTsgLy8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgaW4gdW5kZWZpbmVkIGluIElFXG4gICAgICAgIHJldHVybiBFeHByZXNzaW9uRW5naW5lLmNvbXBhcmUodmFsdWUsIC1tYXhTYWZlSW50ZWdlcikgPj0gMCAmJiBFeHByZXNzaW9uRW5naW5lLmNvbXBhcmUodmFsdWUsIG1heFNhZmVJbnRlZ2VyKSA8PSAwO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tICdzZC1leHByZXNzaW9uLWVuZ2luZSdcbmltcG9ydCB7VXRpbHN9IGZyb20gXCJzZC11dGlsc1wiO1xuXG4vKkNvbXB1dGVkIGJhc2UgdmFsdWUgdmFsaWRhdG9yKi9cbmV4cG9ydCBjbGFzcyBQcm9iYWJpbGl0eVZhbHVlVmFsaWRhdG9ye1xuICAgIGV4cHJlc3Npb25FbmdpbmU7XG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbkVuZ2luZSl7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZT1leHByZXNzaW9uRW5naW5lO1xuICAgIH1cblxuICAgIHZhbGlkYXRlKHZhbHVlLCBlZGdlKXtcbiAgICAgICAgaWYodmFsdWU9PT1udWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZhbHVlID0gRXhwcmVzc2lvbkVuZ2luZS50b051bWJlcih2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZS5jb21wYXJlKDApID49IDAgJiYgdmFsdWUuY29tcGFyZSgxKSA8PSAwO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHtkb21haW4gYXMgbW9kZWwsIFZhbGlkYXRpb25SZXN1bHR9IGZyb20gXCJzZC1tb2RlbFwiO1xuaW1wb3J0IHtFeHByZXNzaW9uRW5naW5lfSBmcm9tIFwic2QtZXhwcmVzc2lvbi1lbmdpbmVcIjtcbmltcG9ydCB7UHJvYmFiaWxpdHlWYWx1ZVZhbGlkYXRvcn0gZnJvbSBcIi4vcHJvYmFiaWxpdHktdmFsdWUtdmFsaWRhdG9yXCI7XG5pbXBvcnQge1BheW9mZlZhbHVlVmFsaWRhdG9yfSBmcm9tIFwiLi9wYXlvZmYtdmFsdWUtdmFsaWRhdG9yXCI7XG5cbmV4cG9ydCBjbGFzcyBUcmVlVmFsaWRhdG9yIHtcblxuICAgIGV4cHJlc3Npb25FbmdpbmU7XG5cbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uRW5naW5lKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZSA9IGV4cHJlc3Npb25FbmdpbmU7XG4gICAgICAgIHRoaXMucHJvYmFiaWxpdHlWYWx1ZVZhbGlkYXRvciA9IG5ldyBQcm9iYWJpbGl0eVZhbHVlVmFsaWRhdG9yKGV4cHJlc3Npb25FbmdpbmUpO1xuICAgICAgICB0aGlzLnBheW9mZlZhbHVlVmFsaWRhdG9yID0gbmV3IFBheW9mZlZhbHVlVmFsaWRhdG9yKGV4cHJlc3Npb25FbmdpbmUpO1xuICAgIH1cblxuICAgIHZhbGlkYXRlKG5vZGVzKSB7XG5cbiAgICAgICAgdmFyIHZhbGlkYXRpb25SZXN1bHQgPSBuZXcgVmFsaWRhdGlvblJlc3VsdCgpO1xuXG4gICAgICAgIG5vZGVzLmZvckVhY2gobj0+IHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVOb2RlKG4sIHZhbGlkYXRpb25SZXN1bHQpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdDtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZU5vZGUobm9kZSwgdmFsaWRhdGlvblJlc3VsdCA9IG5ldyBWYWxpZGF0aW9uUmVzdWx0KCkpIHtcblxuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLlRlcm1pbmFsTm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbm9kZS5jaGlsZEVkZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFsaWRhdGlvblJlc3VsdC5hZGRFcnJvcignaW5jb21wbGV0ZVBhdGgnLCBub2RlKVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByb2JhYmlsaXR5U3VtID0gRXhwcmVzc2lvbkVuZ2luZS50b051bWJlcigwKTtcbiAgICAgICAgdmFyIHdpdGhIYXNoID0gZmFsc2U7XG4gICAgICAgIG5vZGUuY2hpbGRFZGdlcy5mb3JFYWNoKChlLCBpKT0+IHtcbiAgICAgICAgICAgIGUuc2V0VmFsdWVWYWxpZGl0eSgncHJvYmFiaWxpdHknLCB0cnVlKTtcblxuICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBtb2RlbC5DaGFuY2VOb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2JhYmlsaXR5ID0gZS5jb21wdXRlZEJhc2VQcm9iYWJpbGl0eSgpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9iYWJpbGl0eVZhbHVlVmFsaWRhdG9yLnZhbGlkYXRlKHByb2JhYmlsaXR5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUV4cHJlc3Npb25FbmdpbmUuaXNIYXNoKGUucHJvYmFiaWxpdHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0LmFkZEVycm9yKHtuYW1lOiAnaW52YWxpZFByb2JhYmlsaXR5JywgZGF0YTogeydudW1iZXInOiBpICsgMX19LCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0VmFsdWVWYWxpZGl0eSgncHJvYmFiaWxpdHknLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2JhYmlsaXR5U3VtID0gRXhwcmVzc2lvbkVuZ2luZS5hZGQocHJvYmFiaWxpdHlTdW0sIHByb2JhYmlsaXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGUucGF5b2ZmLmZvckVhY2goKHJhd1BheW9mZiwgcGF5b2ZmSW5kZXgpPT4ge1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gJ3BheW9mZlsnICsgcGF5b2ZmSW5kZXggKyAnXSc7XG4gICAgICAgICAgICAgICAgZS5zZXRWYWx1ZVZhbGlkaXR5KHBhdGgsIHRydWUpO1xuICAgICAgICAgICAgICAgIHZhciBwYXlvZmYgPSBlLmNvbXB1dGVkQmFzZVBheW9mZih1bmRlZmluZWQsIHBheW9mZkluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGF5b2ZmVmFsdWVWYWxpZGF0b3IudmFsaWRhdGUocGF5b2ZmKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0LmFkZEVycm9yKHtuYW1lOiAnaW52YWxpZFBheW9mZicsIGRhdGE6IHsnbnVtYmVyJzogaSArIDF9fSwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGUuc2V0VmFsdWVWYWxpZGl0eShwYXRoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIG1vZGVsLkNoYW5jZU5vZGUpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihwcm9iYWJpbGl0eVN1bSkgfHwgIXByb2JhYmlsaXR5U3VtLmVxdWFscygxKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25SZXN1bHQuYWRkRXJyb3IoJ3Byb2JhYmlsaXR5RG9Ob3RTdW1VcFRvMScsIG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdDtcbiAgICB9XG59XG4iLCJleHBvcnQgKiBmcm9tICcuL3NyYy9pbmRleCdcbiJdfQ==
